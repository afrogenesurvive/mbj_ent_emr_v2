(this.webpackJsonpmbj_ent_emr_v2_frontend=this.webpackJsonpmbj_ent_emr_v2_frontend||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},125:function(e,t,a){e.exports=a(214)},131:function(e,t,a){},132:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},133:function(e,t,a){},136:function(e,t,a){},139:function(e,t,a){},177:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},211:function(e,t){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(55),o=a.n(s),l=(a(130),a(131),a(22)),c=a(23),r=a(26),m=a(25),d=a(10),p=a(30),u=(a(132),a(100),a(124)),g=(a(133),function(e){var t="Alerts shown here";return null!==e.alert&&(t='"'+e.alert+'"'),i.a.createElement("div",{className:"alertBox"},i.a.createElement(u.a,{variant:"warning"},i.a.createElement("p",{className:"alertBoxText"},t)))}),y=i.a.createContext({token:null,activityId:null,activityA:null,activityUser:null,role:null,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,userAlert:"...",file:null,fancyDate:null,login:function(e,t,a,n){},logout:function(){},setUserAlert:function(e){},userOnline:function(){}}),h=(a(136),function(e){return i.a.createElement(y.Consumer,null,(function(e){return i.a.createElement("header",{className:"main-navigation"},i.a.createElement("div",{className:"main-navigation__logo"},i.a.createElement("h1",null,"MBJ ENT EMR V2.0.1")),i.a.createElement("nav",{className:"main-navigation__items"},i.a.createElement("ul",null,!e.token&&i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,i.a.createElement(d.c,{to:"/landing"},"Landing")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/login"},"Login")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/signup"},"Signup"))),e.token&&i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,i.a.createElement(d.c,{to:"/home"},"Home")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/profile"},"Profile")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/staff"},"Staff")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/patients"},"Patients")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/appointments"},"Appointments")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/visits"},"Visits")),i.a.createElement("li",null,i.a.createElement("button",{onClick:e.logout},"Logout"))))))}))}),v=a(5),f=a(2),E=a(24),b=a(3),x=a(33),A=a(32),C=a.n(A),I=(a(139),function(e){return i.a.createElement("div",{className:"attachmentViewerBg"},i.a.createElement("div",{className:"loadingOverlay"},e.status&&i.a.createElement("h5",{className:"attachmentViewerTitle"},"... ",e.status.type," ..."),i.a.createElement(E.a,{className:"overlayContainer"},"calendarAppointment"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{className:"overlayRow"},i.a.createElement("p",null,"ID: ",e.status.data._id),i.a.createElement("p",null,"date",e.status.data.date),i.a.createElement("p",null,"title",e.status.data.title),i.a.createElement("p",null,"type",e.status.data.type),i.a.createElement("p",null,"subType",e.status.data.subType),i.a.createElement("p",null,"time",e.status.data.time),i.a.createElement("p",null,"location",e.status.data.location),i.a.createElement("p",null,"important",e.status.data.important),i.a.createElement("p",null,"description",e.status.data.description)),e.selectCalendarDetails&&i.a.createElement(v.a,{className:"overlayRow"},i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:e.selectCalendarDetails.bind(void 0,e.status.data)},"Details")),e.status.goLink&&i.a.createElement(d.b,{to:{pathname:"/appointments",state:{appointment:e.status.data._id}}},"Go!")),"calendarVisit"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{className:"overlayRow"},i.a.createElement("p",null,"Id: ",e.status.data._id),i.a.createElement("p",null,"date: ",e.status.data.date),i.a.createElement("p",null,"timee: ",e.status.data.timee),i.a.createElement("p",null,"title: ",e.status.data.title),i.a.createElement("p",null,"type: ",e.status.data.type),i.a.createElement("p",null,"subType: ",e.status.data.subType),e.selectCalendarDetails&&i.a.createElement(v.a,{className:"overlayRow"},i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:e.selectCalendarDetails.bind(void 0,e.status.data)},"Details")),e.status.goLink&&i.a.createElement(d.b,{to:{pathname:"/visits",state:{visit:e.status.data._id}}},"Go!"))),"calendarAttendance"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{className:"overlayRow"},i.a.createElement("p",null,"Date: ",e.status.data.date),i.a.createElement("p",null,"Status: ",e.status.data.status),i.a.createElement("p",null,"Description: ",e.status.data.description))),"calendarLeave"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{className:"overlayRow"},i.a.createElement("p",null,"Type: ",e.status.data.type),i.a.createElement("p",null,"startDate: ",e.status.data.startDate),i.a.createElement("p",null,"endDate: ",e.status.data.endDate),i.a.createElement("p",null,"Description: ",e.status.data.description))),"s3"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{className:"overlayRow"},i.a.createElement("p",null,e.status.data.action," -ing ",e.status.data.target,"...")),i.a.createElement(v.a,{className:"overlayRow"},i.a.createElement(x.a,{src:C.a,className:"loadingGif",fluid:!0}))),e.toggleOverlay&&"s3"!==e.status.type&&i.a.createElement(b.a,{className:"sidebarButton",variant:"warning",onClick:e.toggleOverlay},"X"))))}),S=(a(102),function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={role:null,userAlert:"landing page",overlay:!1,overlayStatus:"test",isGuest:!0,context:null},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),i.a.createElement(E.a,{className:"landingPageContainer"},i.a.createElement(v.a,{className:"landingPageRow"},i.a.createElement(f.a,{className:"landingPageCol"},i.a.createElement("h1",null," Welcome to MBJ ENT EMR")))))}}]),a}(n.Component)),T=a(14),N=a.n(T),k=a(13),w=a(16),D=a(4),U=a(7),P=(a(45),function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(w.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Username: ",i.a.createElement("span",{className:"bold"},e.patient.username)),i.a.createElement(D.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.patient.role)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),e.canDelete&&i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.patient._id))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"name: ",i.a.createElement("span",{className:"bold"},e.patient.name))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"username: ",i.a.createElement("span",{className:"bold"},e.patient.username))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"title: ",i.a.createElement("span",{className:"bold"},e.patient.title))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.patient.role))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"dob: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.patient.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"age: ",i.a.createElement("span",{className:"bold"},e.patient.age))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"gender: ",i.a.createElement("span",{className:"bold"},e.patient.gender))),!0===e.appointmentPage&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onSelect.bind(void 0,e.patient)},"Select")),!0!==e.appointmentPage&&e.showDetails&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.showDetails.bind(void 0,e.patient)},"Details")),e.homePage&&i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:e.patient._id}}},"Go!"))),!0===r&&i.a.createElement(v.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.patient)},"Delete")))))}),L=(a(43),function(e){var t=Object.assign({},e.filter),a=e.patients,n=[];"patient"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"patient"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"patient"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"patient"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"patient"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"patient"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"patient"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"patient"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"patient"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"patient"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"patient"===t.field&&"registration.date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.registration.date>t.registration.date?1:-1}))),"patient"===t.field&&"registration.date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.registration.date<t.registration.date?1:-1}))),"patient"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"patient"===t.field&&"active"===t.key&&(n=a.filter((function(e){return e.active===t.value}))),"patient"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(P,{key:s,patient:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,appointmentPage:e.appointmentPage,homePage:e.homePage,onSelect:e.onSelect})}));return i.a.createElement("ul",{className:"userList"},o)}),F=(a(82),function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(w.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title)),!e.homePage&&i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type)),!e.homePage&&i.a.createElement(D.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),e.homePage&&i.a.createElement(D.a.Text,{className:"cardText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.appointment.patient._id)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),e.canDelete&&i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.appointment._id))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"time: ",i.a.createElement("span",{className:"bold"},e.appointment.time))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.appointment.patient.name))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"checkinTime: ",i.a.createElement("span",{className:"bold"},e.appointment.checkinTime))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"seenTime: ",i.a.createElement("span",{className:"bold"},e.appointment.seenTime))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"location: ",i.a.createElement("span",{className:"bold"},e.appointment.location))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"description: ",i.a.createElement("span",{className:"bold"},e.appointment.description))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"inProgress: ",i.a.createElement("span",{className:"bold"},e.appointment.inProgress.toString()))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"attended: ",i.a.createElement("span",{className:"bold"},e.appointment.attended.toString()))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"important: ",i.a.createElement("span",{className:"bold"},e.appointment.important.toString()))),!0!==e.visitPage&&e.showDetails&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.showDetails.bind(void 0,e.appointment)},"Details")),!0===e.visitPage&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onSelect.bind(void 0,e.appointment)},"Select")),e.homePage&&i.a.createElement(d.b,{to:{pathname:"/appointments",state:{appointment:e.appointment._id}}},"Go!"))),!0===r&&i.a.createElement(v.a,null,e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.appointment)},"Delete")))))}),_=(a(83),function(e){var t=Object.assign({},e.filter),a=e.appointments,n=[];"appointment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"appointment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.location>t.location?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.location<t.location?1:-1}))),"appointment"===t.field&&"important"===t.key&&(n=a.filter((function(e){return e.important===t.value}))),"appointment"===t.field&&"inProgress"===t.key&&(n=a.filter((function(e){return e.inProgress===t.value}))),"appointment"===t.field&&"attended"===t.key&&(n=a.filter((function(e){return e.attended===t.value}))),"appointment"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t+1),i.a.createElement(F,{key:s,appointment:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,visitPage:e.visitPage,homePage:e.homePage,onSelect:e.onSelect})}));return i.a.createElement("ul",{className:"userList"},o)}),V=function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={role:null,userAlert:"landing",overlay:!1,overlayStatus:"test",isGuest:!0,context:null,isLoading:!1,seshStore:null,filter:{field:null,key:null,value:null},todayAppointments:null,queue:null,weekImportantAppointments:null,recentPatients:null},e.loadHome=function(){var t={token:e.context.token,activityId:e.context.activityId};e.getAppointmentsToday(t),e.getAppointmentsImportantWeek(t),e.getRecentPatients(t)},e.getAppointmentsToday=function(t){console.log("...retrieving todays appointments..."),e.context.setUserAlert("...retrieving todays appointments..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getAppointmentsToday(\n        activityId:"'.concat(n,'")\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...get todays appointments success!...");var a="...get todays appointments success!...";t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,todayAppointments:t.data.getAppointmentsToday})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.getAppointmentsImportantWeek=function(t){console.log("...retrieving important appointments for week..."),e.context.setUserAlert("...retrieving important appointments for week..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getAppointmentsImportantNextWeek(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...get week important appointments success!...");var a="...get week important appointments success!...";t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,weekImportantAppointments:t.data.getAppointmentsImportantNextWeek})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.getRecentPatients=function(t){console.log("...retrieving recent patients..."),e.context.setUserAlert("...retrieving recent patients..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getRecentPatients(\n        activityId:"'.concat(n,'",\n        amount:7\n      )\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...retrieve recent patients success!...");var a="...retrieve recent patients success!...";t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,recentPatients:t.data.getRecentPatients})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...home component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getAppointmentsToday(e),this.getAppointmentsImportantWeek(e),this.getRecentPatients(e)}}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),i.a.createElement(E.a,{className:"landingPageContainer"},i.a.createElement(v.a,{className:"landingPageTopRow"},i.a.createElement(b.a,{variant:"outline-secondary",size:"md",onClick:this.loadHome},"Home"),this.state.isLoading?i.a.createElement(x.a,{src:C.a,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,".")),i.a.createElement(v.a,{className:"landingPageRow"},i.a.createElement(f.a,{md:6,className:"landingPageCol"},i.a.createElement("h3",null,"Todays appts"),this.state.todayAppointments&&i.a.createElement(_,{filter:this.state.filter,appointments:this.state.todayAppointments,authId:this.context.activityId,homePage:!0})),i.a.createElement(f.a,{md:6,className:"landingPageCol"},i.a.createElement("h3",null,"Queue"),this.state.queue&&i.a.createElement("h3",null,"Queue list"))),i.a.createElement(v.a,{className:"landingPageRow"},i.a.createElement(f.a,{md:5,className:"landingPageCol"},i.a.createElement("h3",null,"Weeks important"),this.state.weekImportantAppointments&&i.a.createElement(_,{filter:this.state.filter,appointments:this.state.weekImportantAppointments,authId:this.context.activityId,homePage:!0})),i.a.createElement(f.a,{md:4,className:"landingPageCol"},i.a.createElement("h3",null,"Recent patients"),this.state.recentPatients&&i.a.createElement(L,{filter:this.state.filter,patients:this.state.recentPatients,authId:this.context.activityId,homePage:!0})),i.a.createElement(f.a,{md:3,className:"landingPageCol"},i.a.createElement("h3",null,"more stats")))))}}]),a}(n.Component);V.contextType=y;var q=V,O=a(39),G=a(9),j=a(6),R=a(15),B=a(36),z=a(37),M=(a(57),a(19)),K=a.n(M),Y=(a(49),function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Town: ",i.a.createElement("span",{className:"bold"},e.address.town)),i.a.createElement(D.a.Text,{className:"cardText"},"Country: ",i.a.createElement("span",{className:"bold"},e.address.country)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"No: ",i.a.createElement("span",{className:"bold"},e.address.number))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Street: ",i.a.createElement("span",{className:"bold"},e.address.street))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Town: ",i.a.createElement("span",{className:"bold"},e.address.town))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"City: ",i.a.createElement("span",{className:"bold"},e.address.city))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Parish: ",i.a.createElement("span",{className:"bold"},e.address.parish))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Country: ",i.a.createElement("span",{className:"bold"},e.address.country))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Primary: ",i.a.createElement("span",{className:"bold"}," ",!0===e.address.primary&&i.a.createElement(k.a,{icon:U.b,className:"listIcon"})," ",!1===e.address.primary&&i.a.createElement(k.a,{icon:U.a,className:"listIcon"})))),e.makePrimary&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.makePrimary.bind(void 0,e.address)},"Set Primary")),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.address)},"Delete")))))))}),J=(a(46),function(e){var t=Object.assign({},e.filter),a=e.addresses,n=[];"address"===t.field&&"number"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.number>t.number?1:-1}))),"address"===t.field&&"number"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.number<t.number?1:-1}))),"address"===t.field&&"street"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.street>t.street?1:-1}))),"address"===t.field&&"street"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.street<t.street?1:-1}))),"address"===t.field&&"town"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.town>t.town?1:-1}))),"address"===t.field&&"town"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.town<t.town?1:-1}))),"address"===t.field&&"city"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.city>t.city?1:-1}))),"address"===t.field&&"city"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.city<t.city?1:-1}))),"address"===t.field&&"parish"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.parish>t.parish?1:-1}))),"address"===t.field&&"parish"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.parish<t.parish?1:-1}))),"address"===t.field&&"country"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.country>t.country?1:-1}))),"address"===t.field&&"country"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.country<t.country?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.postalCode>t.postalCode?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.postalCode<t.postalCode?1:-1}))),"address"===t.field&&"primary"===t.key&&(n=a.filter((function(e){return e.primary===t.value}))),"address"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Y,{key:s,address:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary})}));return i.a.createElement("ul",{className:"addressList"},o)}),H=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.attendance.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.attendance.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Status: ",i.a.createElement("span",{className:"bold"},e.attendance.status))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.attendance.description))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.attendance)},"Delete")))))))},W=function(e){var t=Object.assign({},e.filter),a=e.attendance,n=[];"attendance"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.status>t.status?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.status<t.status?1:-1}))),"attendance"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(H,{key:s,attendance:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"attendanceList"},o)},Q=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Start: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.leave.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.leave.type))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Start: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.leave.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"End: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.leave.endDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.leave.description))),i.a.createElement("li",null,!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.leave)},"Delete"))))))))},X=function(e){var t=Object.assign({},e.filter),a=e.leave,n=[];"leave"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"leave"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"leave"===t.field&&"startDate"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.startDate>t.startDate?1:-1}))),"leave"===t.field&&"startDate"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.startDate<t.startDate?1:-1}))),"leave"===t.field&&"endDate"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.endDate>t.endDate?1:-1}))),"leave"===t.field&&"endDate"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.endDate<t.endDate?1:-1}))),"leave"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Q,{key:s,leave:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"leaveList"},o)},$=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.image)},"Delete")))))))},Z=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement($,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"imageList"},o)},ee=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.file.name)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.file.name))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.file.type))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.file.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.file)},"Delete")))))))},te=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ee,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"fileList"},o)},ae=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type)),i.a.createElement(D.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.appointment._id))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"time: ",i.a.createElement("span",{className:"bold"},e.appointment.time))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"checkinTime: ",i.a.createElement("span",{className:"bold"},e.appointment.checkinTime))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"seenTime: ",i.a.createElement("span",{className:"bold"},e.appointment.seenTime))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"location: ",i.a.createElement("span",{className:"bold"},e.appointment.location))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"description: ",i.a.createElement("span",{className:"bold"},e.appointment.description))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"inProgress: ",i.a.createElement("span",{className:"bold"},e.appointment.inProgress.toString()))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"attended: ",i.a.createElement("span",{className:"bold"},e.appointment.attended.toString()))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"important: ",i.a.createElement("span",{className:"bold"},e.appointment.important.toString()))),i.a.createElement("li",null,i.a.createElement(d.b,{to:{pathname:"/appointments",state:{appointment:e.appointment._id}}},"Go!")))))))},ne=function(e){var t=Object.assign({},e.filter),a=e.appointments,n=[];"appointment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"appointment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.location>t.location?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.location<t.location?1:-1}))),"appointment"===t.field&&"important"===t.key&&(n=a.filter((function(e){return e.important===t.value}))),"appointment"===t.field&&"inProgress"===t.key&&(n=a.filter((function(e){return e.inProgress===t.value}))),"appointment"===t.field&&"attended"===t.key&&(n=a.filter((function(e){return e.attended===t.value}))),"appointment"!==t.field&&(n=a);var s=0,o=n.map((function(e){return s=n.indexOf(e)+1,i.a.createElement(ae,{key:s,appointment:e})}));return i.a.createElement("ul",{className:"appointmentList"},o)},ie=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.note)},"Delete")))))},se=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ie,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},oe=a(1),le=(a(28),function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"address"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"number"),i.a.createElement("option",null,"street"),i.a.createElement("option",null,"town"),i.a.createElement("option",null,"city"),i.a.createElement("option",null,"parish"),i.a.createElement("option",null,"country"),i.a.createElement("option",null,"postalCode"),i.a.createElement("option",null,"primary")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))}),ce=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"attendance"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"status"),i.a.createElement("option",null,"date")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},re=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"leave"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"startDate"),i.a.createElement("option",null,"endDate")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},me=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"image"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"link")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},de=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"file"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"link")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},pe=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"appointment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"location"),i.a.createElement("option",null,"important"),i.a.createElement("option",null,"inProgress"),i.a.createElement("option",null,"attended")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},ue=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"note"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"note")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},ge=(a(27),function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Update Single Field"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Label,null,"field"),i.a.createElement(oe.a.Control,{type:"text",value:e.field})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"query"},i.a.createElement(oe.a.Label,null,"query"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"query... date = YYY-MM-DD!!"}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))}),ye=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Address"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"number"},i.a.createElement(oe.a.Label,null,"addressNumber"),i.a.createElement(oe.a.Control,{type:"number",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"street"},i.a.createElement(oe.a.Label,null,"addressStreet"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"town"},i.a.createElement(oe.a.Label,null,"addressTown"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"city"},i.a.createElement(oe.a.Label,null,"addressCity"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"parish"},i.a.createElement(oe.a.Label,null,"addressParish"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"none"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Thomas"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"country"},i.a.createElement(oe.a.Label,null,"addressCountry"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"postalCode"},i.a.createElement(oe.a.Label,null,"addressPostalCode"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},he=function(e){var t=Object(n.useState)(new Date),a=Object(w.a)(t,2),s=(a[0],a[1],Object(n.useState)(new Date)),o=Object(w.a)(s,2);o[0],o[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Attendance"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"date"},i.a.createElement(oe.a.Label,null,"date"),i.a.createElement(oe.a.Control,{type:"date",placeholder:"date"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"status"},i.a.createElement(oe.a.Label,null,"status"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"status"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"Description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:""}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ve=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Leave"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"startDate"},i.a.createElement(oe.a.Label,null,"startDate"),i.a.createElement(oe.a.Control,{type:"date",placeholder:"startDate"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"endDate"},i.a.createElement(oe.a.Label,null,"endDate"),i.a.createElement(oe.a.Control,{type:"date",placeholder:"endDate"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"Description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:""}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},fe=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Notes"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"notes"},i.a.createElement(oe.a.Label,null,"notes"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"note,note,note,note"}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ee=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Image"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"name"},i.a.createElement(oe.a.Label,null,"name"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"name"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"path"},i.a.createElement(oe.a.Label,null,"path"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"path"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},be=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add File"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"name"},i.a.createElement(oe.a.Label,null,"name"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"name"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"path"},i.a.createElement(oe.a.Label,null,"path"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"path"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},xe=(a(177),function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},calendarAttendance:null,calendarLeave:null,calendarAppointments:null,pocketVars:null,s3State:{action:null,target:null,status:null}},e.submitAddAddressForm=function(t){t.preventDefault(),console.log("...adding address..."),e.context.setUserAlert("...adding address..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s=t.target.number.value,o=t.target.street.value,l=t.target.town.value,c=t.target.city.value,r=t.target.parish.value,m=t.target.country.value,d=t.target.postalCode.value,p={query:'\n      mutation {addUserAddress(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(o,'",\n          addressTown:"').concat(l,'",\n          addressCity:"').concat(c,'",\n          addressParish:"').concat(r,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...address add success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.addUserAddress,activityA:"addUserAddress?activityId:".concat(n,",userId:").concat(i),adding:{state:null,field:null}}),e.context.activityUser=t.data.addUserAddress,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteAddress=function(t){console.log("...deleting address..."),e.context.setUserAlert("...deleting address..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s={query:'\n      mutation {deleteUserAddress(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(t.number,',\n          addressStreet:"').concat(t.street,'",\n          addressTown:"').concat(t.town,'",\n          addressCity:"').concat(t.city,'",\n          addressParish:"').concat(t.parish,'",\n          addressCountry:"').concat(t.country,'",\n          addressPostalCode:"').concat(t.postalCode,'",\n          addressPrimary: ').concat(t.primary,"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...address delete success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.deleteUserAddress,activityA:"deleteUserAddress?activityId:".concat(n,",userId:").concat(i)}),e.context.activityUser=t.data.deleteUserAddress,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.setAddressPrimary=function(t){console.log("...setting primary address..."),e.context.setUserAlert("...setting primary address..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s={query:'\n      mutation {setUserAddressPrimary(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(t.number,',\n          addressStreet:"').concat(t.street,'",\n          addressTown:"').concat(t.town,'",\n          addressCity:"').concat(t.city,'",\n          addressParish:"').concat(t.parish,'",\n          addressCountry:"').concat(t.country,'",\n          addressPostalCode:"').concat(t.postalCode,'"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...address set primary success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.setUserAddressPrimary,activityA:"setUserAddressPrimary?activityId:".concat(n,",userId:").concat(i)}),e.context.activityUser=t.data.setUserAddressPrimary,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.submitAddAttendanceForm=function(t){t.preventDefault(),console.log("...adding attendance..."),e.context.setUserAlert("...attendance..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s=t.target.date.value,o=t.target.status.value,l=t.target.description.value,c={query:'\n      mutation {addUserAttendance(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'",\n        userInput:{\n          attendanceDate:"').concat(s,'",\n          attendanceStatus:"').concat(o,'",\n          attendanceDescription:"').concat(l,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...attendance add success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.addUserAttendance,activityA:"addUserAttendance?activityId:".concat(n,",userId:").concat(i),adding:{state:null,field:null}}),e.parseForCalendar({attendance:t.data.addUserAttendance.attendance,leave:t.data.addUserAttendance.leave,appointments:t.data.addUserAttendance.appointments}),e.context.activityUser=t.data.addUserAttendance,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteAttendance=function(t){console.log("...deleting attendance..."),e.context.setUserAlert("...deleting attendance..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s={query:'\n        mutation {deleteUserAttendance(\n          activityId:"'.concat(n,'",\n          userId:"').concat(i,'",\n          userInput:{\n            attendanceDate:"').concat(t.date,'",\n            attendanceStatus:"').concat(t.status,'",\n            attendanceDescription:"').concat(t.description,'"\n          }){_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...attendance delete success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.deleteUserAttendance,activityA:"deleteUserAttendance?activityId:".concat(n,",userId:").concat(i)}),e.parseForCalendar({attendance:t.data.deleteUserAttendance.attendance,leave:t.data.deleteUserAttendance.leave,appointments:t.data.deleteUserAttendance.appointments}),e.context.activityUser=t.data.deleteUserAttendance,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.submitAddLeaveForm=function(t){t.preventDefault(),console.log("...adding leave..."),e.context.setUserAlert("...leave..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s=t.target.startDate.value,o=t.target.endDate.value,l=t.target.type.value,c=t.target.description.value,r={query:'\n      mutation {addUserLeave(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'",\n        userInput:{\n          leaveType:"').concat(l,'",\n          leaveStartDate:"').concat(s,'",\n          leaveEndDate:"').concat(o,'",\n          leaveDescription:"').concat(c,'"\n        }){_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...leave add success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.addUserLeave,activityA:"addUserLeave?activityId:".concat(n,",userId:").concat(i),adding:{state:null,field:null}}),e.parseForCalendar({attendance:t.data.addUserLeave.attendance,leave:t.data.addUserLeave.leave,appointments:t.data.addUserLeave.appointments}),e.context.activityUser=t.data.addUserLeave,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteLeave=function(t){console.log("...deleting leave..."),e.context.setUserAlert("...deleting leave..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s={query:'\n        mutation {deleteUserLeave(\n          activityId:"'.concat(n,'",\n          userId:"').concat(i,'",\n          userInput:{\n            leaveType:"').concat(t.type,'",\n            leaveStartDate:"').concat(t.startDate,'",\n            leaveEndDate:"').concat(t.endDate,'",\n            leaveDescription:"').concat(t.description,'"\n          })\n          {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...leave delete success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.deleteUserLeave,activityA:"deleteUserLeave?activityId:".concat(n,",userId:").concat(i)}),e.parseForCalendar({attendance:t.data.addUserLeave.attendance,leave:t.data.addUserLeave.leave,appointments:t.data.addUseLeavce.appointments}),e.context.activityUser=t.data.deleteUserLeave,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.submitAddImageForm=function(t){t.preventDefault(),console.log("...adding image..."),e.context.setUserAlert("...image..."),e.setState({isLoading:!0});var a,n,i,s=e.context.token,o=e.state.activityUser._id,l=o;e.state.activityUser.username;if(""===t.target.fileInput.value)return e.context.setUserAlert("...no file!? Please add a file..."),void e.setState({isLoading:!1});if(""!==t.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="staff/"+o+"/images";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,a=r+"."+d,n=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:e.state.pocketVars.s3.a,secretAccessKey:e.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);e.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),e.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),u.uploadFile(c,r).then((function(t){console.log("attachment upload success!",t),e.context.setUserAlert("...upload success!"),e.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(t){console.error("upload error:",t),e.context.setUserAlert("...upload error:  "+t.statusText),e.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var g={query:'\n      mutation {addUserImage(\n        activityId:"'.concat(o,'",\n        userId:"').concat(l,'",\n        userInput:{\n          imageName:"').concat(a,'",\n          imageType:"').concat(n,'",\n          imagePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...image add success!...";t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,activityUser:t.data.addUserImage,activityA:"addUserImage?activityId:".concat(o,",userId:").concat(l),adding:{state:null,field:null}}),e.context.activityUser=t.data.addUserImage,e.logUserActivity({activityId:o,token:s})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteImage=function(t){console.log("...deleting image..."),e.context.setUserAlert("...deleting image..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s=(e.state.activityUser.username,t.name,{query:'\n        mutation {deleteUserImage(\n          activityId:"'.concat(n,'",\n          userId:"').concat(i,'",\n          userInput:{\n            imageName:"').concat(t.name,'",\n            imageType:"').concat(t.type,'",\n            imagePath:"').concat(t.path,'"\n          })\n          {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')});fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...image delete success!...";s.data.error&&(o=s.data.error),e.context.setUserAlert(o),e.setState({isLoading:!1,activityUser:s.data.deleteUserImage,activityA:"deleteUserImage?activityId:".concat(n,",userId:").concat(i)}),e.context.activityUser=s.data.deleteUserImage,e.logUserActivity({activityId:n,token:a});var l="staff/"+n+"/images",c=t.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:e.state.pocketVars.s3.a,secretAccessKey:e.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);e.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),e.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(c,r).then((function(t){console.log(t),e.context.setUserAlert(t.message),e.setState({overlayStatus:null,overlay:!1})})).catch((function(t){console.error(t),e.setState({overlayStatus:null,overlay:!1})}))})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.submitAddFileForm=function(t){t.preventDefault(),console.log("...adding file..."),e.context.setUserAlert("...file..."),e.setState({isLoading:!0});var a,n,i,s=e.context.token,o=e.state.activityUser._id,l=o;e.state.activityUser.username;if(""===t.target.fileInput.value)return e.context.setUserAlert("...no file!? Please add a file..."),void e.setState({isLoading:!1});if(""!==t.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="staff/"+o+"/files";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,a=r+"."+d,n=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:e.state.pocketVars.s3.a,secretAccessKey:e.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);e.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),e.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),u.uploadFile(c,r).then((function(t){console.log("attachment upload success!",t),e.context.setUserAlert("...upload success!"),e.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(t){console.error("upload error:",t),e.context.setUserAlert("...upload error:  "+t.statusText),e.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var g={query:'\n      mutation {addUserFile(\n        activityId:"'.concat(o,'",\n        userId:"').concat(l,'",\n        userInput:{\n          fileName:"').concat(a,'",\n          fileType:"').concat(n,'",\n          filePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...file add success!...";t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,activityUser:t.data.addUserFile,activityA:"addUserFile?activityId:".concat(o,",userId:").concat(l),adding:{state:null,field:null}}),e.context.activityUser=t.data.addUserFile,e.logUserActivity({activityId:o,token:s})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteFile=function(t){console.log("...deleting file..."),e.context.setUserAlert("...deleting file..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s=(e.state.activityUser.username,t.name,{query:'\n        mutation {deleteUserFile(\n          activityId:"'.concat(n,'",\n          userId:"').concat(i,'",\n          userInput:{\n            fileName:"').concat(t.name,'",\n            fileType:"').concat(t.type,'",\n            filePath:"').concat(t.path,'"\n          })\n          {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')});fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...file delete success!...";s.data.error&&(o=s.data.error),e.context.setUserAlert(o),e.setState({isLoading:!1,activityUser:s.data.deleteUserFile,activityA:"deleteUserFile?activityId:".concat(n,",userId:").concat(i)}),e.context.activityUser=s.data.deleteUserFile,e.logUserActivity({activityId:n,token:a});var l="staff/"+n+"/files",c=t.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:e.state.pocketVars.s3.a,secretAccessKey:e.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);e.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),e.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(c,r).then((function(t){console.log(t),e.context.setUserAlert(t.message),e.setState({overlayStatus:null,overlay:!1})})).catch((function(t){console.error(t),e.setState({overlayStatus:null,overlay:!1})}))})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.submitAddNoteForm=function(t){t.preventDefault(),console.log("...adding note..."),e.context.setUserAlert("...note..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s=t.target.note.value,o={query:'\n      mutation {addUserNotes(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'",\n        userInput:{\n          notes:"').concat(s,'"\n        }){_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...notes add success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.addUserNotes,activityA:"addUserNotes?activityId:".concat(n,",userId:").concat(i),adding:{state:null,field:null}}),e.context.activityUser=t.data.addUserNotes,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteNote=function(t){console.log("...deleting note..."),e.context.setUserAlert("...deleting note..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s={query:'\n        mutation {deleteUserNote(\n          activityId:"'.concat(n,'",\n          userId:"').concat(i,'",\n          userInput:{\n            note: "').concat(t,'"\n          })\n          {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...note delete success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.deleteUserNote,activityA:"deleteUserNote?activityId:".concat(n,",userId:").concat(i)}),e.context.activityUser=t.data.deleteUserNote,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.submitUpdateSingleFieldForm=function(t){t.preventDefault(),console.log("...updating single field..."),e.context.setUserAlert("...updating single field..."),e.setState({isLoading:!0});var a=e.context.token,n=e.state.activityUser._id,i=n,s=t.target.field.value,o=t.target.query.value,l={query:'\n      mutation {updateUserSingleField(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...field update success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityUser:t.data.updateUserSingleField,activityA:"updateUserSingleField?activityId:".concat(n,",userId:").concat(i),updateSingleField:{state:null,field:null}}),e.context.activityUser=t.data.updateUserSingleField,e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.startUpdateSingleField=function(t){e.setState({updateSingleField:{state:!0,field:t}})},e.cancelUpdateSingleField=function(){e.setState({updateSingleField:{state:null,field:null}})},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.menuSelect=function(t){e.setState({menuSelect:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.parseForCalendar=function(t){console.log("...parsing profile dates for calendar...");var a=t.attendance.map((function(e){return{title:e.status,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{date:e.date,status:e.status,description:e.description,field:"attendance"}}})),n=t.leave.map((function(e){return{title:e.type,date:N.a.unix(e.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),end:N.a.unix(e.endDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{date:e.date,type:e.type,startDate:e.startDate,endDate:e.endDate,description:e.description,field:"leave"}}}));e.setState({calendarAttendance:a,calendarLeave:n});var i=t.appointments.map((function(e){return{title:e.title,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,field:"appointments"}}}));e.setState({calendarAttendance:a,calendarLeave:n,calendarAppointments:i})},e.viewCalendarEvent=function(t){var a,n=t.event.extendedProps.props;"attendance"===n.field&&(a={date:n.date,status:n.status,description:n.description},e.setState({overlay:!0,overlayStatus:{type:"calendarAttendance",data:a}})),"leave"===n.field&&(a={type:n.type,startDate:n.startDate,endDate:n.endDate,description:n.description},e.setState({overlay:!0,overlayStatus:{type:"calendarLeave",data:a}})),"appointments"===n.field&&(a={_id:n._id,date:n.date,title:n.title,type:n.type,subType:n.subType,time:n.time,location:n.location,description:n.description,important:n.important},e.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:a,goLink:!0}}))},e.toggleOverlay=function(){e.setState({overlay:!1})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...MyProfile component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getThisUser(e),this.getPocketVars(e)}}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"getThisUser",value:function(e){var t=this;console.log("...retrieving your profile info..."),this.context.setUserAlert("...retrieving your profile info..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getUserById(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'"\n      )\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(a){var s="...profile retrieval success!...";a.data.error&&(s=a.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,activityUser:a.data.getUserById,activityA:"getUserById?activityId:".concat(n,",userId:").concat(i)}),t.context.activityUser=a.data.getUserById,"Admin"===a.data.getUserById.role&&t.setState({canDelete:!0}),t.parseForCalendar({attendance:a.data.getUserById.attendance,leave:a.data.getUserById.leave,appointments:a.data.getUserById.appointments}),t.logUserActivity(e)})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://localhost:8088/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),i.a.createElement(E.a,{className:"profilePageContainer"},i.a.createElement(v.a,{className:"profilePageContainerRow headRow"},i.a.createElement(f.a,{md:9,className:"profilePageContainerCol"},i.a.createElement("h1",{className:"profileHeading"},"Profile")),i.a.createElement(f.a,{md:3,className:"profilePageContainerCol"},this.state.isLoading?i.a.createElement(x.a,{src:C.a,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(v.a,{className:"profilePageContainerRow mainRow"},i.a.createElement(f.a,{md:2,className:"profilePageContainerCol"}),i.a.createElement(f.a,{md:10,className:"profilePageContainerCol"},!this.state.activityUser&&i.a.createElement("h3",null,"..."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",defaultActiveKey:"1"},i.a.createElement(v.a,{className:"profilePageContainerRow mainRow2"},i.a.createElement(f.a,{md:3,className:"profilePageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column mainMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"1",onClick:this.menuSelect.bind(this,"basic")},"Basic")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"2",onClick:this.menuSelect.bind(this,"admin")},"Admin")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"3",onClick:this.menuSelect.bind(this,"address")},"Addresses")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"4",onClick:this.menuSelect.bind(this,"attendance")},"Attendance")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"5",onClick:this.menuSelect.bind(this,"leave")},"Leave")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"6",onClick:this.menuSelect.bind(this,"image")},"Images")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"7",onClick:this.menuSelect.bind(this,"file")},"Files")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"8",onClick:this.menuSelect.bind(this,"appointment")},"Appointments")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"9",onClick:this.menuSelect.bind(this,"note")},"Notes"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,"address"===this.state.menuSelect&&i.a.createElement(le,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"attendance"===this.state.menuSelect&&i.a.createElement(ce,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"leave"===this.state.menuSelect&&i.a.createElement(re,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"image"===this.state.menuSelect&&i.a.createElement(me,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"file"===this.state.menuSelect&&i.a.createElement(de,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"appointment"===this.state.menuSelect&&i.a.createElement(pe,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"note"===this.state.menuSelect&&i.a.createElement(ue,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.state.activityUser&&i.a.createElement(f.a,{md:9,className:"profilePageContainerCol specialCol2"},!0===this.state.updateSingleField.state&&i.a.createElement(ge,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),i.a.createElement(G.a.Content,{className:"tabContent"},i.a.createElement(G.a.Pane,{eventKey:"1"},i.a.createElement("p",{className:"displayPaneTitle"},"Basic:"),i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.title),i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.name),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.username),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.role)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.registrationNumber)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.state.activityUser.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.age),i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.gender),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.email),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone2),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",null),i.a.createElement("p",null)))),i.a.createElement(G.a.Pane,{eventKey:"2"},i.a.createElement("p",{className:"displayPaneTitle"},"Admin:"),i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser._id)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.loggedIn.toString())),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.clientConnected.toString())),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.code)))),i.a.createElement(G.a.Pane,{eventKey:"3"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Addresses:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ye,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(J,{filter:this.state.filter,addresses:this.state.activityUser.addresses,authId:this.state.activityUser._id,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary})),i.a.createElement(G.a.Pane,{eventKey:"4"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Attendance:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(he,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(W,{filter:this.state.filter,attendance:this.state.activityUser.attendance,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteAttendance})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"5"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Leave:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(ve,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(X,{filter:this.state.filter,leave:this.state.activityUser.leave,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteLeave})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"6"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Images:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ee,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Z,{filter:this.state.filter,images:this.state.activityUser.images,authId:this.state.activityUser._id,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage})),i.a.createElement(G.a.Pane,{eventKey:"7"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Files:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(be,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(te,{filter:this.state.filter,files:this.state.activityUser.files,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteFile})),i.a.createElement(G.a.Pane,{eventKey:"8"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Appointments:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter")),i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(ne,{filter:this.state.filter,appointments:this.state.activityUser.appointments,authId:this.state.activityUser._id})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"9"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Notes:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(fe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(se,{filter:this.state.filter,notes:this.state.activityUser.notes,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteNote}))))))))}}]),a}(n.Component));xe.contextType=y;var Ae=xe,Ce=(a(86),a(105),function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Login"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"email"},i.a.createElement(oe.a.Label,null,"Email address"),i.a.createElement(oe.a.Control,{type:"email",placeholder:"Enter email"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"password"},i.a.createElement(oe.a.Label,null,"Password"),i.a.createElement(oe.a.Control,{type:"password",placeholder:"Password"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"loginFormBtn"},"Login"),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onStartVerification},"Verify"),i.a.createElement(b.a,{variant:"outline-secondary",className:"loginFormBtn",onClick:e.onStartForgotPassword},"ForgotPassword"),i.a.createElement(b.a,{variant:"outline-warning",className:"loginFormBtn"},i.a.createElement(d.c,{to:"/signup"},"Signup")))))}),Ie=(a(106),function(e){return i.a.createElement("div",{className:"UpdateFormContainer"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Verify"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{className:"searchInput",controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"email"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"username"},i.a.createElement(oe.a.Label,null,"username"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"username"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"email"},i.a.createElement(oe.a.Label,null,"email"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"email"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"code"},i.a.createElement(oe.a.Label,null,"code"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"verification code"}))),i.a.createElement(oe.a.Row,null,e.canCancel&&i.a.createElement(b.a,{variant:"danger",className:"formButton",onClick:e.onCancel},"Cancel"),e.canConfirm&&i.a.createElement(b.a,{variant:"primary",className:"formButton",type:"submit"},"Verify"))))}),Se=(a(179),a(180),function(e){return i.a.createElement("div",{className:"CreateFormContainer"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Forgot Password"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"username"},i.a.createElement(oe.a.Label,null,"Username"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"username"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"email"},i.a.createElement(oe.a.Label,null,"email"),i.a.createElement(oe.a.Control,{type:"email",placeholder:"email"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"danger",className:"formButton",onClick:e.onCancel},"Cancel"),i.a.createElement(b.a,{variant:"primary",className:"formButton",type:"submit"},"Request New Password"))))}),Te=function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={verifying:!1,role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",userSeshStore:!1,user:{},activityA:null,requestingPasswordReset:!1,showForm:"login"},e.submitLoginForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitLoginForm..."),console.log("...submitLoginForm...");var a=t.target.email.value,n=t.target.password.value;if(0!==a.trim().length&&0!==n.trim().length){var i={query:'\n          {login(email:"'.concat(a,'",password:"').concat(n,'"){activityId,role,token,tokenExpiration,error}}')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...login success!...";if(t.data.login.error&&(a=t.data.login.error),e.context.setUserAlert(a),""!==t.data.login.token){e.context.login(t.data.login.token,t.data.login.activityId,t.data.login.role,t.data.login.tokenExpiration);var n={token:t.data.login.token,activityId:t.data.login.activityId,role:t.data.login.role,tokenExpiration:t.data.login.tokenExpiration};e.context.setUserAlert(a),sessionStorage.setItem("logInfo",JSON.stringify(n)),e.setState({activityA:"login?".concat(n.activityId)}),e.logUserActivity()}})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank fields!!!...")},e.verifyUser=function(t){t.preventDefault(),console.log("...verify user...");var a=t.target.email.value,n=t.target.type.value,i=t.target.code.value,s=t.target.username.value,o={query:'\n        mutation {verifyUser(\n          userInput:{\n            username:"'.concat(s,'",\n            contactEmail:"').concat(a,'",\n            verificationType:"').concat(n,'",\n            verificationCode:"').concat(i,'"\n          }\n        )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.verifyUser),e.context.setUserAlert("Verified...Please try loggin in again..")})).catch((function(t){e.context.setUserAlert(t)}))},e.toggleVerification=function(){"verify"===e.state.showForm?e.setState({showForm:"login"}):e.setState({showForm:"verify"})},e.toggleForgotPassword=function(){"forgotPassword"===e.state.showForm?e.setState({showForm:"login"}):e.setState({showForm:"forgotPassword"})},e.requestPasswordReset=function(t){t.preventDefault(),console.log("...requesting password reset..."),e.setState({isLoading:!0});var a=t.target.username.value,n=t.target.email.value,i={query:'\n         mutation {requestPasswordReset(\n           userInput:{\n             username:"'.concat(a,'",\n             contactEmail:"').concat(n,'"\n           })\n           {_id,username,contact{email}verification{verified,type,code}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.requestPasswordReset),t.errors?e.context.setUserAlert(t.errors[0].message):(e.context.setUserAlert("...password reset request sent..."),e.setState({isLoading:!1,requestingPasswordReset:!1}),e.toggleForgotPassword())})).catch((function(t){e.setState({userAlert:t})}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("...login component mounted...")}},{key:"logUserActivity",value:function(){console.log("...logUserActivity...");var e=JSON.parse(sessionStorage.getItem("logInfo")),t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n        mutation {addUserActivity(\n          activityId:"'.concat(t,'",userId:"').concat(n,'",\n          userInput:{\n            activityDate:"').concat(s,'",\n            activityRequest:"').concat(i,'"\n          })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n      ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(E.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),"login"===this.state.showForm&&i.a.createElement(v.a,{className:"authPageContainerRow"},i.a.createElement(f.a,{className:"authPageContainerCol"},i.a.createElement(Ce,{onConfirm:this.submitLoginForm,onStartForgotPassword:this.toggleForgotPassword,onStartVerification:this.toggleVerification}))),"verify"===this.state.showForm&&i.a.createElement(v.a,{className:"authPageContainerRow"},i.a.createElement(f.a,{className:"authPageContainerCol"},i.a.createElement(Ie,{canCancel:!0,canConfirm:!0,onCancel:this.toggleVerification,onConfirm:this.verifyUser}))),"forgotPassword"===this.state.showForm&&i.a.createElement(v.a,{className:"authPageContainerRow"},i.a.createElement(f.a,{className:"authPageContainerCol"},i.a.createElement(Se,{onCancel:this.toggleForgotPassword,onConfirm:this.requestPasswordReset}))))}}]),a}(n.Component);Te.contextType=y;var Ne=Te,ke=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Signup"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"email"},i.a.createElement(oe.a.Label,null,"email Address"),i.a.createElement(oe.a.Control,{type:"email",placeholder:"alpha@beta.omega"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"password"},i.a.createElement(oe.a.Label,null,"password"),i.a.createElement(oe.a.Control,{type:"password",placeholder:"password"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"role"},i.a.createElement(oe.a.Label,null,"role"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Admin"),i.a.createElement("option",null,"Staff"),i.a.createElement("option",null,"Nurse"),i.a.createElement("option",null,"Doctor"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Mr"),i.a.createElement("option",null,"Mrs"),i.a.createElement("option",null,"Ms"),i.a.createElement("option",null,"Dr"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"name"},i.a.createElement(oe.a.Label,null,"name"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"name"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"username"},i.a.createElement(oe.a.Label,null,"username"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"username"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"dob"},i.a.createElement(oe.a.Label,null,"dob"),i.a.createElement(oe.a.Control,{type:"date",placeholder:"YYYY-MM-DD"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"gender"},i.a.createElement(oe.a.Label,null,"gender"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Female"),i.a.createElement("option",null,"Male"),i.a.createElement("option",null,"Prefer Not to Say")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"phone"},i.a.createElement(oe.a.Label,null,"phone"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"+18760001234"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"phone2"},i.a.createElement(oe.a.Label,null,"phone2"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"+18760005678"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressNumber"},i.a.createElement(oe.a.Label,null,"addressNumber"),i.a.createElement(oe.a.Control,{type:"number",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressStreet"},i.a.createElement(oe.a.Label,null,"addressStreet"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressTown"},i.a.createElement(oe.a.Label,null,"addressTown"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressCity"},i.a.createElement(oe.a.Label,null,"addressCity"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressParish"},i.a.createElement(oe.a.Label,null,"addressParish"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"none"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Thomas"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressCountry"},i.a.createElement(oe.a.Label,null,"addressCountry"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressPostalCode"},i.a.createElement(oe.a.Label,null,"addressPostalCode"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"loginFormBtn"},"Signup")),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-warning",className:"loginFormBtn"},i.a.createElement(d.c,{to:"/login"},"Login")))))},we=function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={verifying:!1,role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",userSeshStore:!1,user:{},activityA:null,requestingPasswordReset:!1,signupStatus:null,invited:!1},e.submitSignupForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitSignupForm..."),console.log("...submitSignupForm...");var a=t.target.email.value,n=t.target.password.value,i=t.target.role.value,s=t.target.name.value,o=t.target.title.value,l=t.target.username.value,c=t.target.dob.value,r=t.target.gender.value,m=t.target.phone.value,d=t.target.phone2.value,p=t.target.addressNumber.value,u=t.target.addressStreet.value,g=t.target.addressTown.value,y=t.target.addressCity.value,h=t.target.addressParish.value,v=t.target.addressCountry.value,f=t.target.addressPostalCode.value;if(0!==a.trim().length&&0!==n.trim().length&&0!==i.trim().length&&0!==s.trim().length&&0!==l.trim().length&&0!==c.trim().length&&0!==r.trim().length&&0!==m.trim().length&&0!==d.trim().length&&0!==p.trim().length&&0!==u.trim().length&&0!==g.trim().length&&0!==y.trim().length&&0!==h.trim().length&&0!==v.trim().length&&0!==f.trim().length){var E={query:'\n            mutation {createUser(\n              userInput:{\n                password:"'.concat(n,'",\n                title:"').concat(o,'",\n                name:"').concat(s,'",\n                role:"').concat(i,'",\n                username:"').concat(l,'",\n                dob:"').concat(c,'",\n                gender:"').concat(r,'",\n                contactPhone:"').concat(m,'",\n                contactPhone2:"').concat(d,'",\n                contactEmail:"').concat(a,'",\n                addressNumber:').concat(p,',\n                addressStreet:"').concat(u,'",\n                addressTown:"').concat(g,'",\n                addressCity:"').concat(y,'",\n                addressParish:"').concat(h,'",\n                addressCountry:"').concat(v,'",\n                addressPostalCode:"').concat(f,'"\n              }\n            )\n            {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(E),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...Signup success!...";t.data.error&&(a=t.data.error),a="...verificationCode: "+t.data.createUser.verification.code,e.context.setUserAlert(a),e.setState({signupStatus:"success"})})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank fields!!!...")},e.submitInviteForm=function(t){t.preventDefault(),console.log("...checking inviteCode..."),e.context.setUserAlert("...checking inviteCode...");var a=t.target.inviteCode.value,n={query:'\n            query {verifyInvitation(challenge:"'.concat(a,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){"matched"===t.data.verifyInvitation?(e.setState({invited:!0}),e.context.setUserAlert("...invite code accepted...")):e.context.setUserAlert("...invite code rejected. Check & try again...")})).catch((function(t){e.context.setUserAlert(t)}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("...signup component mounted...")}},{key:"render",value:function(){return i.a.createElement(E.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),i.a.createElement(v.a,{className:"authPageContainerRow"},i.a.createElement(f.a,{className:"authPageContainerCol"},!0!==this.state.invited&&i.a.createElement(i.a.Fragment,null,i.a.createElement(oe.a,{onSubmit:this.submitInviteForm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"inviteCode"},i.a.createElement(oe.a.Label,null,"inviteCode"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"inviteCode"}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Submit")))),"success"!==this.state.signupStatus&&!0===this.state.invited&&i.a.createElement(ke,{onConfirm:this.submitSignupForm}),"success"===this.state.signupStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"SignUp Success...Proceed to Login"),i.a.createElement(b.a,{variant:"outline-warning",className:"loginFormBtn"},i.a.createElement(d.c,{to:"/login"},"Login"))))))}}]),a}(n.Component);we.contextType=y;var De=we,Ue=function(e){return i.a.createElement("div",{className:"UpdateFormContainer"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Reset Password"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"verificationCode"},i.a.createElement(oe.a.Label,null,"verificationCode"),i.a.createElement(oe.a.Control,{type:"text",value:e.verf}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"password"},i.a.createElement(oe.a.Label,null,"password"),i.a.createElement(oe.a.Control,{type:"password",placeholder:"password"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"primary",className:"formButton",type:"submit"},"Reset"),i.a.createElement(b.a,{variant:"danger",className:"formButton",onClick:e.onCancel},i.a.createElement(d.c,{to:"/landing"},"Cancel")))))},Pe=function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",passwordResetStatus:null,user:{},activityA:null,activityId:null,verfCode:null},e.submitResetPasswordForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitSignupForm..."),console.log("...submitSignupForm...");var a=t.target.password.value,n=e.state.verfCode,i=e.state.activityId;if(0!==a.trim().length&&0!==n.trim().length){var s={query:'\n            mutation {resetUserPassword(\n              userId:"'.concat(i,'",\n              userInput:{\n                verificationCode:"').concat(n,'",\n                password:"').concat(a,'"\n              })\n            {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.resetUserPassword);var a="...Password Reset Success!...";t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({passwordResetStatus:"success"})})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank fields!!!...")},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("...password component mounted..."),console.log(),this.setState({activityId:this.props.location.pathname.split("@")[0].split("/")[2],verfCode:this.props.location.pathname.split("@")[1]})}},{key:"render",value:function(){return i.a.createElement(E.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),i.a.createElement(v.a,{className:"authPageContainerRow"},i.a.createElement(f.a,{className:"authPageContainerCol"},"success"!==this.state.passwordResetStatus&&i.a.createElement(Ue,{onConfirm:this.submitResetPasswordForm,verf:this.state.verfCode}),"success"===this.state.passwordResetStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Reset Success...Proceed to Login"),i.a.createElement(b.a,{variant:"outline-warning",className:"loginFormBtn"},i.a.createElement(d.c,{to:"/login"},"Login"))))))}}]),a}(n.Component);Pe.contextType=y;var Le=Pe,Fe=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(w.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.key,className:"userItemLi"},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Username: ",i.a.createElement("span",{className:"bold"},e.user.username)),i.a.createElement(D.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.user.role)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),e.canDelete&&i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.user._id))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"name: ",i.a.createElement("span",{className:"bold"},e.user.name))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"username: ",i.a.createElement("span",{className:"bold"},e.user.username))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"title: ",i.a.createElement("span",{className:"bold"},e.user.title))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.user.role))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"dob: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.user.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"age: ",i.a.createElement("span",{className:"bold"},e.user.age))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"gender: ",i.a.createElement("span",{className:"bold"},e.user.gender))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"loggedIn: ",i.a.createElement("span",{className:"bold"},!0===e.user.loggedIn&&i.a.createElement(k.a,{icon:U.b,className:"listIcon"})," ",!1===e.user.loggedIn&&i.a.createElement(k.a,{icon:U.a,className:"listIcon"})))),!e.appointmentPage&&!e.visitPage&&e.showDetails&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.showDetails.bind(void 0,e.user)},"Details")),e.appointmentPage&&i.a.createElement("li",null,i.a.createElement(d.b,{to:{pathname:"/staff",state:{user:e.user._id}}},"Go!")),e.visitPage&&i.a.createElement("li",null,i.a.createElement(d.b,{to:{pathname:"/staff",state:{user:e.user._id}}},"Go!")))),e.selectUser&&i.a.createElement(b.a,{variant:"outline-primary",onClick:e.selectUser.bind(void 0,e.user)},"Add"),!0===r&&i.a.createElement(v.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.user)},"Delete")))))},_e=function(e){var t=Object.assign({},e.filter),a=e.users,n=[];"staff"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"staff"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"staff"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"staff"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"staff"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"staff"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"staff"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"staff"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"staff"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"staff"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"staff"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"staff"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Fe,{key:s,user:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,appointmentPage:e.appointmentPage,visitPage:e.visitPage,selectUser:e.selectUser})}));return i.a.createElement("ul",{className:"userList"},o)},Ve=function(e){var t=Object.assign({},e.filter),a=e.users,n=[];"staff"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"staff"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"staff"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"staff"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"staff"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"staff"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"staff"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"staff"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"staff"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"staff"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"staff"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"staff"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Fe,{key:s,user:t,canDelete:e.canDelete,showDetails:e.showDetails})}));return i.a.createElement("ul",{className:"userList"},o)},qe=(a(64),function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,calendarAttendance:null,calendarLeave:null,calendarAppointments:null,pocketVars:null,s3State:{action:null,target:null,status:null}},n.submitAddAddressForm=function(e){e.preventDefault(),console.log("...adding address..."),n.context.setUserAlert("...adding address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.number.value,o=e.target.street.value,l=e.target.town.value,c=e.target.city.value,r=e.target.parish.value,m=e.target.country.value,d=e.target.postalCode.value,p={query:'\n      mutation {addUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(o,'",\n          addressTown:"').concat(l,'",\n          addressCity:"').concat(c,'",\n          addressParish:"').concat(r,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserAddress),n.setState({isLoading:!1,selectedUser:e.data.addUserAddress,activityA:"addUserAddress?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAddress=function(e){console.log("...deleting address..."),n.context.setUserAlert("...deleting address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n      mutation {deleteUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'",\n          addressPrimary: ').concat(e.primary,"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserAddress),n.setState({isLoading:!1,selectedUser:e.data.deleteUserAddress,activityA:"deleteUserAddress?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.deleteUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.setAddressPrimary=function(e){console.log("...setting primary address..."),n.context.setUserAlert("...setting primary address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n      mutation {setUserAddressPrimary(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address set primary success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.setUserAddressPrimary),n.setState({isLoading:!1,selectedUser:e.data.setUserAddressPrimary,activityA:"setUserAddressPrimary?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.setUserAddressPrimary,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddAttendanceForm=function(e){e.preventDefault(),console.log("...adding attendance..."),n.context.setUserAlert("...attendance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.date.value,o=e.target.status.value,l=e.target.description.value,c={query:'\n      mutation {addUserAttendance(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          attendanceDate:"').concat(s,'",\n          attendanceStatus:"').concat(o,'",\n          attendanceDescription:"').concat(l,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserAttendance),n.setState({isLoading:!1,selectedUser:e.data.addUserAttendance,activityA:"addUserAttendance?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.addUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAttendance=function(e){console.log("...deleting attendance..."),n.context.setUserAlert("...deleting attendance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserAttendance(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            attendanceDate:"').concat(e.date,'",\n            attendanceStatus:"').concat(e.status,'",\n            attendanceDescription:"').concat(e.description,'"\n          }){_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserAttendance),n.setState({isLoading:!1,selectedUser:e.data.deleteUserAttendance,activityA:"deleteUserAttendance?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.deleteUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddLeaveForm=function(e){e.preventDefault(),console.log("...adding leave..."),n.context.setUserAlert("...leave..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.startDate.value,o=e.target.endDate.value,l=e.target.type.value,c=e.target.description.value,r={query:'\n      mutation {addUserLeave(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          leaveType:"').concat(l,'",\n          leaveStartDate:"').concat(s,'",\n          leaveEndDate:"').concat(o,'",\n          leaveDescription:"').concat(c,'"\n        }){_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserLeave),n.setState({isLoading:!1,selectedUser:e.data.addUserLeave,activityA:"addUserLeave?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.addUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteLeave=function(e){console.log("...deleting leave..."),n.context.setUserAlert("...deleting leave..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserLeave(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            leaveType:"').concat(e.type,'",\n            leaveStartDate:"').concat(e.startDate,'",\n            leaveEndDate:"').concat(e.endDate,'",\n            leaveDescription:"').concat(e.description,'"\n          })\n          {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserLeave),n.setState({isLoading:!1,selectedUser:e.data.deleteUserLeave,activityA:"deleteUserLeave?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.deleteUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding image..."),n.context.setUserAlert("...image..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.user._id;n.props.user.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="staff/"+l+"/images",d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),u.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var g={query:'\n      mutation {addUserImage(\n        activityId:"'.concat(o,'",\n        userId:"').concat(l,'",\n        userInput:{\n          imageName:"').concat(t,'",\n          imageType:"').concat(a,'",\n          imagePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.addUserImage),n.setState({isLoading:!1,selectedUser:e.data.addUserImage,activityA:"addUserImage?activityId:".concat(o,",userId:").concat(l),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserImage,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteImage=function(e){console.log("...deleting image..."),n.context.setUserAlert("...deleting image..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=(n.props.user.username,e.name,{query:'\n        mutation {deleteUserImage(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            imageName:"').concat(e.name,'",\n            imageType:"').concat(e.type,'",\n            imagePath:"').concat(e.path,'"\n          })\n          {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...image delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateUser(s.data.deleteUserImage),n.setState({isLoading:!1,selectedUser:s.data.deleteUserImage,activityA:"deleteUserImage?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=s.data.deleteUserImage,n.logUserActivity({activityId:a,token:t});var l="staff/"+i+"/images",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding file..."),n.context.setUserAlert("...file..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.user._id;n.props.user.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="staff/"+l+"/files";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),u.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var g={query:'\n      mutation {addUserFile(\n        activityId:"'.concat(o,'",\n        userId:"').concat(l,'",\n        userInput:{\n          fileName:"').concat(t,'",\n          fileType:"').concat(a,'",\n          filePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.addUserFile),n.setState({isLoading:!1,selectedUser:e.data.addUserFile,activityA:"addUserFile?activityId:".concat(o,",userId:").concat(l),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserFile,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteFile=function(e){console.log("...deleting file..."),n.context.setUserAlert("...deleting file..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=(n.props.user.username,e.name,{query:'\n        mutation {deleteUserFile(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            fileName:"').concat(e.name,'",\n            fileType:"').concat(e.type,'",\n            filePath:"').concat(e.path,'"\n          })\n          {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...file delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateUser(s.data.deleteUserFile),n.setState({isLoading:!1,selectedUser:s.data.deleteUserFile,activityA:"deleteUserFile?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=s.data.deleteUserFile,n.logUserActivity({activityId:a,token:t});var l="staff/"+i+"/files",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding note..."),n.context.setUserAlert("...note..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.note.value,o={query:'\n      mutation {addUserNotes(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          notes:"').concat(s,'"\n        }){_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserNotes),n.setState({isLoading:!1,selectedUser:e.data.addUserNotes,activityA:"addUserNotes?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNote=function(e){console.log("...deleting note..."),n.context.setUserAlert("...deleting note..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserNote(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            note: "').concat(e,'"\n          })\n          {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserNote),n.setState({isLoading:!1,selectedUser:e.data.deleteUserNote,activityA:"deleteUserNote?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.deleteUserNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.field.value,o=e.target.query.value,l={query:'\n      mutation {updateUserSingleField(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.updateUserSingleField),n.setState({isLoading:!1,selectedUser:e.data.updateUserSingleField,activityA:"updateUserSingleField?activityId:".concat(a,",userId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedUser=e.data.updateUserSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.parseForCalendar=function(e){console.log("...parsing staff dates for calendar...");var t=e.attendance.map((function(e){return{title:e.status,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{date:e.date,status:e.status,description:e.description,field:"attendance"}}})),a=e.leave.map((function(e){return{title:e.type,date:N.a.unix(e.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),end:N.a.unix(e.endDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{date:e.date,type:e.type,startDate:e.startDate,endDate:e.endDate,description:e.description,field:"leave"}}}));n.setState({calendarAttendance:t,calendarLeave:a});var i=e.appointments.map((function(e){return{title:e.title,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,field:"appointments"}}}));n.setState({calendarAttendance:t,calendarLeave:a,calendarAppointments:i})},n.viewCalendarEvent=function(e){var t,a=e.event.extendedProps.props;"attendance"===a.field&&(t={date:a.date,status:a.status,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarAttendance",data:t}})),"leave"===a.field&&(t={type:a.type,startDate:a.startDate,endDate:a.endDate,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarLeave",data:t}})),"appointments"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,location:a.location,description:a.description,important:a.important},n.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:t,goLink:!0}}))},n.toggleOverlay=function(){n.setState({overlay:!1})},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...staff details component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getPocketVars(e)}this.setState({selectedUser:this.context.selectedUser}),"Admin"===this.context.role&&this.setState({canDelete:!0}),this.parseForCalendar({attendance:this.props.user.attendance,leave:this.props.user.leave,appointments:this.props.user.appointments})}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){t.setState({userAlert:e})}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),i.a.createElement(E.a,{className:"detailPageContainer"},i.a.createElement(v.a,{className:"detailPageContainerRow mainRow"},i.a.createElement(f.a,{md:2,className:"detailPageContainerCol"}),i.a.createElement(f.a,{md:10,className:"detailPageContainerCol"},!this.props.user&&i.a.createElement("h3",null,"..."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",defaultActiveKey:"1"},i.a.createElement(v.a,{className:"detailPageContainerRow mainRow2"},i.a.createElement(f.a,{md:3,className:"detailPageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column subMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"1",onClick:this.menuSelect.bind(this,"basic")},"Basic")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"2",onClick:this.menuSelect.bind(this,"admin")},"Admin")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"3",onClick:this.menuSelect.bind(this,"address")},"Addresses")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"4",onClick:this.menuSelect.bind(this,"attendance")},"Attendance")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"5",onClick:this.menuSelect.bind(this,"leave")},"Leave")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"6",onClick:this.menuSelect.bind(this,"image")},"Images")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"7",onClick:this.menuSelect.bind(this,"file")},"Files")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"8",onClick:this.menuSelect.bind(this,"appointment")},"Appointments")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"9",onClick:this.menuSelect.bind(this,"note")},"Notes"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,"address"===this.state.menuSelect&&i.a.createElement(le,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"attendance"===this.state.menuSelect&&i.a.createElement(ce,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"leave"===this.state.menuSelect&&i.a.createElement(re,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"image"===this.state.menuSelect&&i.a.createElement(me,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"file"===this.state.menuSelect&&i.a.createElement(de,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"appointment"===this.state.menuSelect&&i.a.createElement(pe,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"note"===this.state.menuSelect&&i.a.createElement(ue,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.props.user&&i.a.createElement(f.a,{md:9,className:"detailPageContainerCol specialCol2"},!0===this.state.updateSingleField.state&&i.a.createElement(ge,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),i.a.createElement(G.a.Content,{className:"tabContent"},i.a.createElement(G.a.Pane,{eventKey:"1"},"User Basic:",i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.title),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.name),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.username),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.role)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.registrationNumber)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.props.user.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.age),i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.gender),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.email),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone2),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",null),i.a.createElement("p",null)))),i.a.createElement(G.a.Pane,{eventKey:"2"},"User Admin",i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user._id)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.loggedIn.toString())),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.clientConnected.toString())),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.code)))),i.a.createElement(G.a.Pane,{eventKey:"3"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"User Address List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Admin"===this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ye,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(J,{filter:this.state.filter,addresses:this.props.user.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary})),i.a.createElement(G.a.Pane,{eventKey:"4"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"User Attendance List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Admin"===this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(he,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(W,{filter:this.state.filter,attendance:this.props.user.attendance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAttendance})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"5"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"User Leave List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Admin"===this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(ve,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(X,{filter:this.state.filter,leave:this.props.user.leave,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteLeave})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"6"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"User Image List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Admin"===this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ee,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Z,{filter:this.state.filter,images:this.props.user.images,authId:this.context.activityId,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage})),i.a.createElement(G.a.Pane,{eventKey:"7"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"User File List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Admin"===this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(be,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(te,{filter:this.state.filter,files:this.props.user.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile})),i.a.createElement(G.a.Pane,{eventKey:"8"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"User Appointment List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter")),i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(ne,{filter:this.state.filter,appointments:this.props.user.appointments,authId:this.context.activityId})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"9"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"User Notes:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Admin"===this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(fe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(se,{filter:this.state.filter,notes:this.props.user.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))))))))}}]),a}(n.Component));qe.contextType=y;var Oe=qe,Ge=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"staff"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"loggedIn")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},je=(a(65),function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"registrationNumber"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"loggedIn"),i.a.createElement("option",null,"clientConnected"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"attendance.date"),i.a.createElement("option",null,"attendance.status"),i.a.createElement("option",null,"attendance.description"),i.a.createElement("option",null,"leave.type"),i.a.createElement("option",null,"leave.startDate"),i.a.createElement("option",null,"leave.endDate"),i.a.createElement("option",null,"leave.description"),i.a.createElement("option",null,"images.name"),i.a.createElement("option",null,"images.type"),i.a.createElement("option",null,"images.path"),i.a.createElement("option",null,"files.name"),i.a.createElement("option",null,"files.type"),i.a.createElement("option",null,"files.path"),i.a.createElement("option",null,"notes"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"query"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"date format: 'YYYY-MM-DD'"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Search"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))}),Re=(a(181),function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,searchUsers:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},showDetails:!1,selectedUser:null,canDelete:!1,fromGoLink:null,goLinkId:null,tabKey:"list"},e.searchUsers=function(t){t.preventDefault(),console.log("...searching users..."),e.context.setUserAlert("...searching users...");var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"age"!==o&&"dob"!==o&&"addresses.number"!==o&&"addresses.primary"!==o&&"loggedIn"!==o&&"clientConnected"!==o&&"verification.verified"!==o&&"attendance.date"!==o&&"leave.startDate"!==o&&"leave.endDate"!==o||(c=!1),console.log("regex",c),!0===c&&(a={query:'\n        query {getUsersByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n      ')}),!1===c&&(a={query:'\n        query {getUsersByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...staff search success!...";!0===c&&t.data.error&&(a=t.data.error),!1===c&&t.data.error&&(a=t.data.error),e.context.setUserAlert(a),!0===c&&(e.setState({isLoading:!1,searchUsers:t.data.getUsersByFieldRegex,activityA:"getUsersByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByFieldRegex),!1===c&&(e.setState({isLoading:!1,searchUsers:t.data.getUsersByField,activityA:"getUsersByField?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByField),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedUser:t,tabKey:"detail"}),e.props.selectUser(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updateUser=function(t){console.log("...updating user..."),e.setState({selectedUser:t}),e.props.selectUser(t)},e.deleteUser=function(t){console.log("...deleteing user...",t),e.context.setUserAlert("...deleteing user..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteUserById(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'"\n      )\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete user success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteUserById?activityId:".concat(n,",userId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllUsers({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all users component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.props.location.state&&this.props.location.state.user&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.user}),this.getAllUsers(e),this.props.selectedUser&&(console.log("...found existing user selection... loading..."),this.setState({showDetails:!0,selectedUser:this.props.selectedUser}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...all users retrieval success!...");var s="...all users retrieval success!...";if(e.data.error&&(s=e.data.error),!0===t.state.fromGoLink){var o=e.data.getAllUsers.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,selectedUser:o,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),i.a.createElement(E.a,{className:"staffPageContainer"},i.a.createElement(v.a,{className:"staffPageContainerRow headRow"},i.a.createElement(f.a,{md:9,className:"staffPageContainerCol"},i.a.createElement("h1",null,"Staff List")),i.a.createElement(f.a,{md:3,className:"staffPageContainerCol"},this.state.isLoading?i.a.createElement(x.a,{src:C.a,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",activeKey:this.state.tabKey},i.a.createElement(v.a,{className:"staffPageContainerRow mainRow2"},i.a.createElement(f.a,{md:3,className:"staffPageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column mainMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"list",onClick:this.menuSelect.bind(this,"list")},"List")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"search",onClick:this.menuSelect.bind(this,"search")},"Search")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"detail",onClick:this.menuSelect.bind(this,"detail")},"Details"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,i.a.createElement(Ge,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.state.users&&i.a.createElement(f.a,{md:9,className:"staffPageContainerCol specialCol2"},i.a.createElement(G.a.Content,null,i.a.createElement(G.a.Pane,{eventKey:"list"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-warning",onClick:this.resetFilter},"Reset")),i.a.createElement(_e,{filter:this.state.filter,users:this.state.users,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteUser})),i.a.createElement(G.a.Pane,{eventKey:"search"},i.a.createElement(f.a,{className:"userSearchCol"},i.a.createElement("h3",null,"Search Staff"),i.a.createElement(v.a,{className:"userSearchRow"},i.a.createElement(je,{onConfirm:this.searchUsers})),i.a.createElement(v.a,null,this.state.searchUsers&&i.a.createElement(b.a,{variant:"outline-primary",className:"centered_btn",onClick:this.toggleSideCol},"Filter")),i.a.createElement(v.a,{className:"userSearchRow results"},this.state.searchUsers&&i.a.createElement(Ve,{filter:this.state.filter,users:this.state.searchUsers,authId:this.context.activityId,showDetails:this.showDetails})))),i.a.createElement(G.a.Pane,{eventKey:"detail"},!0===this.state.showDetails&&this.state.selectedUser&&i.a.createElement(Oe,{user:this.state.selectedUser,updateUser:this.updateUser}))))))))}}]),a}(n.Component));Re.contextType=y;var Be=Re,ze=(a(87),function(e){var t=N()().format("YYYY-MM-DD");return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create Patient Form"),i.a.createElement("p",null,' "*" denotes required fields...'),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"active"},i.a.createElement(oe.a.Label,null,"Active"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"false"),i.a.createElement("option",null,"true")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"Title *"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Mr"),i.a.createElement("option",null,"Mrs"),i.a.createElement("option",null,"Ms"),i.a.createElement("option",null,"Dr"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"name"},i.a.createElement(oe.a.Label,null,"name *"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"name"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"username"},i.a.createElement(oe.a.Label,null,"username *"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"username"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"dob"},i.a.createElement(oe.a.Label,null,"dob *"),i.a.createElement(oe.a.Control,{type:"date",placeholder:"YYYY-MM-DD"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"gender"},i.a.createElement(oe.a.Label,null,"gender *"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Female"),i.a.createElement("option",null,"Male"),i.a.createElement("option",null,"Prefer Not to Say"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"role"},i.a.createElement(oe.a.Label,null,"role "),i.a.createElement(oe.a.Control,{type:"text",value:"standard patient"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"contactEmail"},i.a.createElement(oe.a.Label,null,"email *"),i.a.createElement(oe.a.Control,{type:"email",placeholder:"alpha@beta.omega"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"contactPhone"},i.a.createElement(oe.a.Label,null,"phone *"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"+18760001234"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"contactPhone2"},i.a.createElement(oe.a.Label,null,"phone2"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"+18760005678"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressNumber"},i.a.createElement(oe.a.Label,null,"addressNumber"),i.a.createElement(oe.a.Control,{type:"number",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressStreet"},i.a.createElement(oe.a.Label,null,"addressStreet"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressTown"},i.a.createElement(oe.a.Label,null,"addressTown"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressCity"},i.a.createElement(oe.a.Label,null,"addressCity"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressParish"},i.a.createElement(oe.a.Label,null,"addressParish"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"none"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Thomas"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressCountry"},i.a.createElement(oe.a.Label,null,"addressCountry"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"addressPostalCode"},i.a.createElement(oe.a.Label,null,"addressPostalCode"),i.a.createElement(oe.a.Control,{type:"text",placeholder:""}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"referralDate"},i.a.createElement(oe.a.Label,null,"referralDate: YYYY-MM-DD"),i.a.createElement(oe.a.Control,{type:"date",placeholder:t})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"referralReason"},i.a.createElement(oe.a.Label,null,"referralReason"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"referralReason"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"referralPhysicianName"},i.a.createElement(oe.a.Label,null,"referralPhysicianName"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"referralPhysicianName"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"referralPhysicianPhone"},i.a.createElement(oe.a.Label,null,"referralPhysicianPhone"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"referralPhysicianPhone"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"referralPhysicianEmail"},i.a.createElement(oe.a.Label,null,"referralPhysicianEmail"),i.a.createElement(oe.a.Control,{type:"email",placeholder:"alpha@beta.omega"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"referralPhysicianAddress"},i.a.createElement(oe.a.Label,null,"referralPhysicianAddress"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"5",placeholder:"referralPhysicianAddress"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attendingPhysician"},i.a.createElement(oe.a.Label,null,"attendingPhysician"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"attendingPhysician"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"occupationRole"},i.a.createElement(oe.a.Label,null,"occupationRole"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"occupationRole"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"occupationEmployerName"},i.a.createElement(oe.a.Label,null,"occupationEmployerName"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"occupationEmployerName"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"occupationEmployerEmail"},i.a.createElement(oe.a.Label,null,"occupationEmployerEmail"),i.a.createElement(oe.a.Control,{type:"email",placeholder:"alpha@beta.omega"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"occupationEmployerPhone"},i.a.createElement(oe.a.Label,null,"occupationEmployerPhone"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"occupationEmployerPhone"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"occupationEmployerAddress"},i.a.createElement(oe.a.Label,null,"occupationEmployerAddress"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"5",placeholder:"occupationEmployerAddress"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"occupationEmployerAddress"},i.a.createElement(oe.a.Label,null,"occupationEmployerAddress"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"5",placeholder:"occupationEmployerAddress"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"insuranceCompany"},i.a.createElement(oe.a.Label,null,"insuranceCompany"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"insuranceCompany"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"insurancePolicyNumber"},i.a.createElement(oe.a.Label,null,"insurancePolicyNumber"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"insurancePolicyNumber"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"insuranceExpiryDate"},i.a.createElement(oe.a.Label,null,"insuranceExpiryDate"),i.a.createElement(oe.a.Control,{type:"date",placeholder:t}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"insuranceDescription"},i.a.createElement(oe.a.Label,null,"insuranceDescription"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"insuranceDescription"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"insuranceSubscriberCompany"},i.a.createElement(oe.a.Label,null,"insuranceSubscriberCompany"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"insuranceSubscriberCompany"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"insuranceSubscriberDescription"},i.a.createElement(oe.a.Label,null,"insuranceSubscriberDescription"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"insuranceSubscriberDescription"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"loginFormBtn"},"Create"),i.a.createElement(b.a,{variant:"outline-danger",className:"loginFormBtn",onClick:e.onCancel},"Cancel"))))}),Me=function(e){var t=Object.assign({},e.filter),a=e.patients,n=[];"patient"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"patient"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"patient"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"patient"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"patient"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"patient"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"patient"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"patient"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"patient"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"patient"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"patient"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"patient"===t.field&&"active"===t.key&&(n=a.filter((function(e){return e.active===t.value}))),"patient"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(P,{key:s,patient:t,canDelete:e.canDelete,showDetails:e.showDetails})}));return i.a.createElement("ul",{className:"userList"},o)},Ke=function(e){var t=Object.assign({},e.filter),a=e.addresses,n=[];"address"===t.field&&"number"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.number>t.number?1:-1}))),"address"===t.field&&"number"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.number<t.number?1:-1}))),"address"===t.field&&"street"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.street>t.street?1:-1}))),"address"===t.field&&"street"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.street<t.street?1:-1}))),"address"===t.field&&"town"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.town>t.town?1:-1}))),"address"===t.field&&"town"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.town<t.town?1:-1}))),"address"===t.field&&"city"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.city>t.city?1:-1}))),"address"===t.field&&"city"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.city<t.city?1:-1}))),"address"===t.field&&"parish"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.parish>t.parish?1:-1}))),"address"===t.field&&"parish"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.parish<t.parish?1:-1}))),"address"===t.field&&"country"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.country>t.country?1:-1}))),"address"===t.field&&"country"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.country<t.country?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.postalCode>t.postalCode?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.postalCode<t.postalCode?1:-1}))),"address"===t.field&&"primary"===t.key&&(n=a.filter((function(e){return e.primary===t.value}))),"address"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Y,{key:s,address:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary})}));return i.a.createElement("ul",{className:"addressList"},o)},Ye=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.name)),i.a.createElement(D.a.Text,{className:"cardText"},"Relation: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.relation)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.name))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Relation: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.relation))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Email: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.email))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Phone: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.phone))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Phone2: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.phone2))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.nextOfKin)},"Delete")))))))},Je=function(e){var t=Object.assign({},e.filter),a=e.nextOfKin,n=[];"nextOfKin"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"nextOfKin"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"nextOfKin"===t.field&&"relation"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.relation>t.relation?1:-1}))),"nextOfKin"===t.field&&"relation"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.relation<t.relation?1:-1}))),"nextOfKin"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ye,{key:s,nextOfKin:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary})}));return i.a.createElement("ul",{className:"addressList"},o)},He=function(e){return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},i.a.createElement("span",{className:"bold"},e.attachment)),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,{type:e.type,attachment:e.attachment,item:e.item})},"Delete"))))},We=function(e){var t=0,a=e.attachments.map((function(a){return t=e.attachments.indexOf(a)+1,i.a.createElement(He,{key:t,item:e.item,attachment:a,onDelete:e.onDelete,canDelete:e.canDelete,type:e.type})}));return i.a.createElement("ul",{className:"addressList"},a)},Qe=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.allergy.title)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.allergy.title))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.allergy.type))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.allergy.description))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"attachments:"),i.a.createElement(We,{item:e.allergy,attachments:e.allergy.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"allergy"})),i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"allergy",data:e.allergy})},"Add Attachment")),i.a.createElement("li",null,!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.allergy)},"Delete"))))))))},Xe=function(e){var t=Object.assign({},e.filter),a=e.allergies,n=[];"allergy"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"allergy"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"allergy"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"allergy"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"allergy"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Qe,{key:s,allergy:t,onDelete:e.onDelete,canDelete:e.canDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"addressList"},o)},$e=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.medication.title)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.medication.title))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.medication.type))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.medication.description))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Attachments:"),i.a.createElement(We,{item:e.medication,attachments:e.medication.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"medication"})),i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"medication",data:e.medication})},"Add Attachment")),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.medication)},"Delete")))))))},Ze=function(e){var t=Object.assign({},e.filter),a=e.medication,n=[];"medication"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"medication"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"medication"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"medication"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"medication"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement($e,{key:s,medication:t,onDelete:e.onDelete,canDelete:e.canDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"addressList"},o)},et=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.image)},"Delete")))))))},tt=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(et,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"imageList"},o)},at=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ee,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"fileList"},o)},nt=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.note)},"Delete")))))},it=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(nt,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},st=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Tag: ",i.a.createElement("span",{className:"bold"},e.tag)),i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.tag)},"Delete")))))},ot=function(e){var t=Object.assign({},e.filter),a=e.tags,n=[];"tag"===t.field&&"tag"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"tag"===t.field&&"tag"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"tag"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(st,{key:s,tag:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},lt=(a(41),function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(w.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},N.a.unix(e.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(D.a.Text,{className:"cardText"},"Time: ",i.a.createElement("span",{className:"bold"},e.visit.time)),i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.visit.title)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),e.canDelete&&i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Id: ",i.a.createElement("span",{className:"bold"},e.visit._id))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"type: ",i.a.createElement("span",{className:"bold"},e.visit.type))),i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"subType: ",i.a.createElement("span",{className:"bold"},e.visit.subType))),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Patient:")),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Id: ",i.a.createElement("span",{className:"bold"},e.visit.patient._id))),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.visit.patient.name))),e.patientPage&&i.a.createElement("li",null,i.a.createElement(d.b,{to:{pathname:"/visits",state:{visit:e.visit._id}}},"Go!")),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(b.a,{variant:"outline-primary",onClick:e.showDetails.bind(void 0,e.visit)},"Details")))),!0===r&&i.a.createElement(v.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.visit)},"Delete")))))}),ct=(a(42),function(e){var t=Object.assign({},e.filter),a=e.visits,n=[];"visit"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"visit"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"visit"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"visit"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"visit"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"visit"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"visit"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"visit"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"visit"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"visit"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"visit"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(lt,{key:s,visit:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,patientPage:e.patientPage})}));return i.a.createElement("ul",{className:"visitList"},o)}),rt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"allergy"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},mt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"medication"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},dt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"nextOfKin"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"relation")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},pt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"visit"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},ut=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"tag"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"tag")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},gt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Update Single Field"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Label,null,"field"),i.a.createElement(oe.a.Control,{type:"text",value:e.field})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"query"},i.a.createElement(oe.a.Label,null,"query"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"query... date = YYY-MM-DD!!"}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},yt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Tags"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"tags"},i.a.createElement(oe.a.Label,null,"tags"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"tag,tag,tag,tag"}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ht=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Next of Kin"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"name"},i.a.createElement(oe.a.Label,null,"name"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"name"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"relation"},i.a.createElement(oe.a.Label,null,"relation"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Mother"),i.a.createElement("option",null,"Father"),i.a.createElement("option",null,"Brother"),i.a.createElement("option",null,"Sister"),i.a.createElement("option",null,"Grandfather"),i.a.createElement("option",null,"Grandmother"),i.a.createElement("option",null,"Uncle"),i.a.createElement("option",null,"Aunt"),i.a.createElement("option",null,"Niece"),i.a.createElement("option",null,"Uncle"),i.a.createElement("option",null,"Cousin"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"email"},i.a.createElement(oe.a.Label,null,"email"),i.a.createElement(oe.a.Control,{type:"email",placeholder:"relation@nextOfKin.com"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"phone"},i.a.createElement(oe.a.Label,null,"phone"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"+187600000"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"phone2"},i.a.createElement(oe.a.Label,null,"phone2"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"+187600000"}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},vt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Allergy"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Food"),i.a.createElement("option",null,"Drug"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ft=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Allergy"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:""})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Et=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Attachment"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{type:"textarea",placeholder:"file link address"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},bt=function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:n.props.patient,addAttachmentForm:!1,addAttachmentArgs:null,calendarAppointments:null,calendarVisits:null,pocketVars:null,s3State:{action:null,target:null,status:null}},n.submitAddAddressForm=function(e){e.preventDefault(),console.log("...adding address..."),n.context.setUserAlert("...adding address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.number.value,o=e.target.street.value,l=e.target.town.value,c=e.target.city.value,r=e.target.parish.value,m=e.target.country.value,d=e.target.postalCode.value,p={query:'\n      mutation {addPatientAddress(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(o,'",\n          addressTown:"').concat(l,'",\n          addressCity:"').concat(c,'",\n          addressParish:"').concat(r,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientAddress),n.setState({isLoading:!1,selectedPatient:e.data.addPatientAddress,activityA:"addPatientAddress?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAddress=function(e){console.log("...deleting address..."),n.context.setUserAlert("...deleting address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientAddress(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'",\n          addressPrimary:').concat(e.primary,"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientAddress),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientAddress,activityA:"deletePatientAddress?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.setAddressPrimary=function(e){console.log("...setting primary address..."),n.context.setUserAlert("...setting primary address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {setPatientAddressPrimary(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'"\n        })\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address set primary success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.setPatientAddressPrimary),n.setState({isLoading:!1,selectedPatient:e.data.setPatientAddressPrimary,activityA:"setPatientAddressPrimary?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.setPatientAddressPrimary,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddNextOfKinForm=function(e){e.preventDefault(),console.log("...add next of kin..."),n.context.setUserAlert("...adding next of kin..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.name.value,o=e.target.relation.value,l=e.target.email.value,c=e.target.phone.value,r=e.target.phone2.value,m={query:'\n      mutation {addPatientNextOfKin(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          nextOfKinName:"').concat(s,'",\n          nextOfKinRelation:"').concat(o,'",\n          nextOfKinContactEmail:"').concat(l,'",\n          nextOfKinContactPhone1:"').concat(c,'",\n          nextOfKinContactPhone2:"').concat(r,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...next of kin add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientNextOfKin),n.setState({isLoading:!1,selectedPatient:e.data.addPatientNextOfKin,activityA:"addPatientNextOfKin?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientNextOfKin,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNextOfKin=function(e){console.log("...deleting next of kin..."),n.context.setUserAlert("...deleting next of kin...."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientNextOfKin(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          nextOfKinName:"').concat(e.name,'",\n          nextOfKinRelation:"').concat(e.relation,'",\n          nextOfKinContactEmail:"').concat(e.contact.email,'",\n          nextOfKinContactPhone1:"').concat(e.contact.phone1,'",\n          nextOfKinContactPhone2:"').concat(e.contact.phone2,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...resData...",e.data.deletePatientNextOfKin);var s="...next of kin delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientNextOfKin),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientNextOfKin,activityA:"deletePatientNextOfKin?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.deletePatientNextOfKin,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddAllergyForm=function(e){e.preventDefault(),console.log("...add allergy..."),n.context.setUserAlert("...adding allergy..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,o=e.target.title.value,l=e.target.type.value,c=e.target.description.value;e.target.attachment.value;if(0===o.trim().length||0===c.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=y._currentValue.file,m=r.name,d="patient/"+s+"/allergy/attachments";console.log("...file present...");var p=r.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new K.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"allergy attachment"}},overlay:!0,s3State:{action:"upload",target:"allergy attachment",status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"failed"}})}))}var h={query:'\n      mutation {addPatientAllergy(\n        activityId:"'.concat(i,'",\n        patientId:"').concat(s,'",\n        patientInput:{\n          allergyType:"').concat(l,'",\n          allergyTitle:"').concat(o,'",\n          allergyDescription:"').concat(c,'",\n          allergyAttachment:"').concat(t,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...allergy add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientAllergy),n.setState({isLoading:!1,selectedPatient:e.data.addPatientAllergy,activityA:"addPatientAllergy?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientAllergy,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAllergy=function(e){console.log("...deleting allergy..."),n.context.setUserAlert("...deleting allergy..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientAllergy(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          allergyType:"').concat(e.type,'",\n          allergyTitle:"').concat(e.title,'",\n          allergyDescription:"').concat(e.description,'",\n          allergyAttachments:"').concat(e.attachments,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...allergy delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updatePatient(s.data.deletePatientAllergy),n.setState({isLoading:!1,selectedPatient:s.data.deletePatientAllergy,activityA:"deletePatientAllergy?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=s.data.deletePatientAllergy,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/patient/"+i+"/allergy/attachments/",r={bucketName:"mbjentemrstorage",dirName:"patient/"+i+"/allergy/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"allergy attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddMedicationForm=function(e){e.preventDefault(),console.log("...add medication..."),n.context.setUserAlert("...adding medication..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,o=e.target.title.value,l=e.target.type.value,c=e.target.description.value;e.target.attachment.value;if(0===o.trim().length||0===l.trim().length||0===c.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=y._currentValue.file,m=r.name,d="patient/"+s+"/medication/attachments";console.log("...file present...");var p=r.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new K.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"medication attachment"}},overlay:!0,s3State:{action:"upload",target:"medication attachment",status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"medication attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"medication attachment",status:"failed"}})}))}var h={query:'\n      mutation {addPatientMedication(\n        activityId:"'.concat(i,'",\n        patientId:"').concat(s,'",\n        patientInput:{\n          medicationType:"').concat(l,'",\n          medicationTitle:"').concat(o,'",\n          medicationDescription:"').concat(c,'",\n          medicationAttachment:"').concat(t,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...medication add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientMedication),n.setState({isLoading:!1,selectedPatient:e.data.addPatientMedication,activityA:"addPatientMedication?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientMedication,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteMedication=function(e){console.log("...deleting medication..."),n.context.setUserAlert("...deleting medication..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientMedication(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          medicationType:"').concat(e.type,'",\n          medicationTitle:"').concat(e.title,'",\n          medicationDescription:"').concat(e.description,'",\n          medicationAttachments:"').concat(e.attachments,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...medication delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updatePatient(s.data.deletePatientMedication),n.setState({isLoading:!1,selectedPatient:s.data.deletePatientMedication,activityA:"deletePatientMedication?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=s.data.deletePatientMedication,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/patient/"+i+"/medication/attachments/",r={bucketName:"mbjentemrstorage",dirName:"patient/"+i+"/medication/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"medication attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startAddAttachment=function(e){console.log("...start add attachment..."),n.setState({addAttachmentForm:!0,addAttachmentArgs:e})},n.cancelAddAttachment=function(){n.setState({addAttachmentForm:!1})},n.addAttachment=function(e){e.preventDefault(),console.log("...adding attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0,addAttachmentForm:!1});var t,a,i,s,o,l,c,r,m=n.context.token,d=n.context.activityId,p=n.props.patient._id,u=(n.props.patient.name,n.state.addAttachmentArgs),g=u.field;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var h=y._currentValue.file,v=h.name,f="patient/"+p+"/"+g+"/attachments";console.log("...file present...");var E=h.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+f+"/"+v+"."+E;var b={bucketName:"mbjentemrstorage",dirName:f,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},x=new K.a(b);n.context.setUserAlert("...s3 uploading allergy attachment ..."),console.log("...s3 uploading allergy attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"".concat(g," attachment")}},overlay:!0,s3State:{action:"upload",target:"".concat(g," attachment"),status:"inProgress"}}),x.uploadFile(h,v).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"".concat(g," attachment"),status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"".concat(g," attachment"),status:"failed"}})}))}"allergy"===g&&(a=u.data.title,i=u.data.type,s=u.data.description),"medication"===g&&(o=u.data.title,l=u.data.type,c=u.data.description),"allergy"===g&&(r={query:'\n        mutation {addPatientAllergyAttachment(\n          activityId:"'.concat(d,'",\n          patientId:"').concat(p,'",\n          patientInput:{\n            allergyType:"').concat(i,'",\n            allergyTitle:"').concat(a,'",\n            allergyDescription:"').concat(s,'",\n            allergyAttachment:"').concat(t,'"\n          })\n          {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),"medication"===g&&(r={query:'\n        mutation {addPatientMedicationAttachment(\n          activityId:"'.concat(d,'",\n          patientId:"').concat(p,'",\n          patientInput:{\n            medicationType:"').concat(l,'",\n            medicationTitle:"').concat(o,'",\n            medicationDescription:"').concat(c,'",\n            medicationAttachment:"').concat(t,'"\n          })\n          {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+m}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...add attachment success!...";"allergy"===g&&e.data.error&&(t=e.data.error),"medication"===g&&e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"allergy"===g&&(n.props.updatePatient(e.data.addPatientAllergyAttachment),n.setState({isLoading:!1,selectedPatient:e.data.addPatientAllergyAttachment,activityA:"addPatientAllergyAttachmentRegex?activityId:".concat(d,",patientId:").concat(p)})),"medication"===g&&(n.props.updatePatient(e.data.addPatientMedicationAttachment),n.setState({isLoading:!1,selectedPatient:e.data.addPatientMedicationAttachment,activityA:"addPatientMedicationAttachment?activityId:".concat(d,",patientId:").concat(p)})),n.logUserActivity({activityId:d,token:m})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAttachment=function(e){console.log("...deleting attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,o=(n.props.patient.name,e.type),l=e.attachment,c=e.item;if("allergy"===o){var r=c.type,m=c.title,d=c.description,p=l;t={query:'\n        mutation {deletePatientAllergyAttachment(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            allergyType:"').concat(r,'",\n            allergyTitle:"').concat(m,'",\n            allergyDescription:"').concat(d,'",\n            allergyAttachment:"').concat(p,'"\n          })\n          {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}}if("medication"===o){var u=c.type,g=c.title,y=c.description,h=l;t={query:'\n        mutation {deletePatientMedicationAttachment(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            medicationType:"').concat(u,'",\n            medicationTitle:"').concat(g,'",\n            medicationDescription:"').concat(y,'",\n            medicationAttachment:"').concat(h,'"\n          })\n          {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...delete attachment success!...";"allergy"===o&&e.data.error&&(t=e.data.error),"medication"===o&&e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"allergy"===o&&(n.props.updatePatient(e.data.deletePatientAllergyAttachment),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientAllergyAttachment,activityA:"deletePatientAllergyAttachment?activityId:".concat(i,",patientId:").concat(s)})),"medication"===o&&(n.props.updatePatient(e.data.deletePatientMedicationAttachment),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientMedicationAttachment,activityA:"deletePatientMedicationAttachment?activityId:".concat(i,",patientId:").concat(s)})),n.logUserActivity({activityId:i,token:a});var c="patient/"+s+"/"+o+"/attachments",r="https://mbjentemrstorage.s3.amazonaws.com/patient/"+s+"/"+o+"/attachments/",m=l,d=m.replace(r,"");console.log("1:",c),console.log("2:",m),console.log("3:",d);var p={bucketName:"mbjentemrstorage",dirName:c,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 deleting attachment.."),console.log("...s3 deleting attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"".concat(o," attachment")}},overlay:!0,s3State:{action:"delete",target:"".concat(o," attachment"),status:"inProgress"}}),u.deleteFile(d,p).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding image..."),n.context.setUserAlert("...adding image..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.patient._id;n.props.patient.name;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="patient/"+l+"/images";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),u.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var g={query:'\n      mutation {addPatientImage(\n        activityId:"'.concat(o,'",\n        patientId:"').concat(l,'",\n        patientInput:{\n          imageName:"').concat(t,'",\n          imageType:"').concat(a,'",\n          imagePath:"').concat(i,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientImage),n.setState({isLoading:!1,selectedPatient:e.data.addPatientImage,activityA:"addPatientImage?activityId:".concat(o,",patientId:").concat(l),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientImage,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteImage=function(e){console.log("...deleting image..."),n.context.setUserAlert("...deleting image..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=(n.props.patient.name,"patient/"+i+"/images"),o=e.name,l={query:'\n    mutation {deletePatientImage(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      patientInput:{\n        imageName:"').concat(e.name,'",\n        imageType:"').concat(e.type,'",\n        imagePath:"').concat(e.path,'"\n      })\n    {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var l="...image delete success!...";e.data.error&&(l=e.data.error),n.context.setUserAlert(l),n.props.updatePatient(e.data.deletePatientImage),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientImage,activityA:"deletePatientImage?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientImage,n.logUserActivity({activityId:a,token:t});var c={bucketName:"mbjentemrstorage",dirName:s,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},r=new K.a(c);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),r.deleteFile(o,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding file..."),n.context.setUserAlert("...adding file..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.patient._id;n.props.patient.name;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="patient/"+l+"/files";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),u.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var g={query:'\n      mutation {addPatientFile(\n        activityId:"'.concat(o,'",\n        patientId:"').concat(l,'",\n        patientInput:{\n          fileName:"').concat(t,'",\n          fileType:"').concat(a,'",\n          filePath:"').concat(i,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientFile),n.setState({isLoading:!1,selectedPatient:e.data.addPatientFile,activityA:"addPatientFile?activityId:".concat(o,",patientId:").concat(l),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientFile,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteFile=function(e){console.log("...deleting file..."),n.context.setUserAlert("...deleting file..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=(n.props.patient.name,{query:'\n    mutation {deletePatientFile(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      patientInput:{\n        fileName:"').concat(e.name,'",\n        fileType:"').concat(e.type,'",\n        filePath:"').concat(e.path,'"\n      })\n    {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...file delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updatePatient(s.data.deletePatientFile),n.setState({isLoading:!1,selectedPatient:s.data.deletePatientFile,activityA:"deletePatientFile?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=s.data.deletePatientFile,n.logUserActivity({activityId:a,token:t});var l="patient/"+i+"/files",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding notes..."),n.context.setUserAlert("...adding notes..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.notes.value,o={query:'\n      mutation {addPatientNotes(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          notes:"').concat(s,'",\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientNotes),n.setState({isLoading:!1,selectedPatient:e.data.addPatientNotes,activityA:"addPatientNotes?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNote=function(e){console.log("...deleting note..."),n.context.setUserAlert("...deleting note..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientNote(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          note:"').concat(e,'"\n        })\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientNote),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientNote,activityA:"deletePatientNote?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddTagForm=function(e){e.preventDefault(),console.log("...adding tags..."),n.context.setUserAlert("...adding tags..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.tags.value,o={query:'\n      mutation {addPatientTags(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          tags:"').concat(s,'",\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tags add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientTags),n.setState({isLoading:!1,selectedPatient:e.data.addPatientTags,activityA:"addPatientTags?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientTags,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteTag=function(e){console.log("...deleting tag..."),n.context.setUserAlert("...deleting tag..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientTag(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          tag:"').concat(e,'"\n        })\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tag delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientTag),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientTag,activityA:"deletePatienTag?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientTag,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.field.value,o=e.target.query.value,l={query:'\n    mutation {updatePatientSingleField(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      field:"').concat(s,'",\n      query:"').concat(o,'"\n    )\n    {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.updatePatientSingleField),n.setState({isLoading:!1,selectedPatient:e.data.updatePatientSingleField,activityA:"updatePatientSingleField?activityId:".concat(a,",patientId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedPatient=e.data.updatePatientSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.parseForCalendar=function(e){console.log("...parsing patient dates for calendar...");var t=e.appointments.map((function(e){return{title:e.title,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,field:"appointments"}}})),a=e.visits.map((function(e){return{title:e.title,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,field:"visits"}}}));n.setState({calendarAppointments:t,calendarVisits:a})},n.viewCalendarEvent=function(e){var t,a=e.event.extendedProps.props;"appointments"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,location:a.location,description:a.description,important:a.important},n.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:t,goLink:!0}})),"visits"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time},n.setState({overlay:!0,overlayStatus:{type:"calendarVisit",data:t,goLink:!0}}))},n.toggleOverlay=function(){n.setState({overlay:!1})},n.propsPatient=n.props.patient,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...patient details component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getPocketVars(e)}this.setState({selectedPatient:this.context.selectedPatient}),"Admin"===this.context.role&&this.setState({canDelete:!0}),this.parseForCalendar({appointments:this.props.patient.appointments,visits:this.props.patient.visits})}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),i.a.createElement(E.a,{className:"detailPageContainer"},i.a.createElement(v.a,{className:"detailPageContainerRow mainRow"},i.a.createElement(f.a,{md:2,className:"detailPageContainerCol"}),i.a.createElement(f.a,{md:10,className:"detailPageContainerCol"},!this.props.patient&&i.a.createElement("h3",null,"..."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",defaultActiveKey:"1"},i.a.createElement(v.a,{className:"detailPageContainerRow mainRow2"},i.a.createElement(f.a,{md:3,className:"detailPageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column subMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"1",onClick:this.menuSelect.bind(this,"basic")},"Basic")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"2",onClick:this.menuSelect.bind(this,"admin")},"Admin")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"3",onClick:this.menuSelect.bind(this,"address")},"Addresses")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"4",onClick:this.menuSelect.bind(this,"nextOfKin")},"Next Of Kin")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"5",onClick:this.menuSelect.bind(this,"allergy")},"Allergies")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"6",onClick:this.menuSelect.bind(this,"medication")},"Medication")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"7",onClick:this.menuSelect.bind(this,"image")},"Images")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"8",onClick:this.menuSelect.bind(this,"file")},"Files")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"9",onClick:this.menuSelect.bind(this,"appointment")},"Appointments")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"10",onClick:this.menuSelect.bind(this,"visit")},"Visits")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"11",onClick:this.menuSelect.bind(this,"note")},"Notes")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"12",onClick:this.menuSelect.bind(this,"tag")},"Tag")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"13",onClick:this.menuSelect.bind(this,"doc")},"Document"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,"address"===this.state.menuSelect&&i.a.createElement(le,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"nextOfKin"===this.state.menuSelect&&i.a.createElement(dt,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"allergy"===this.state.menuSelect&&i.a.createElement(rt,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"medication"===this.state.menuSelect&&i.a.createElement(mt,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"image"===this.state.menuSelect&&i.a.createElement(me,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"file"===this.state.menuSelect&&i.a.createElement(de,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"appointment"===this.state.menuSelect&&i.a.createElement(pe,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"visit"===this.state.menuSelect&&i.a.createElement(pt,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"note"===this.state.menuSelect&&i.a.createElement(ue,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"tag"===this.state.menuSelect&&i.a.createElement(ut,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.props.patient&&i.a.createElement(f.a,{md:9,className:"detailPageContainerCol specialCol2"},!0===this.state.updateSingleField.state&&i.a.createElement(gt,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),i.a.createElement(G.a.Content,{className:"tabContent"},i.a.createElement(G.a.Pane,{eventKey:"1"},"Patient Basic:",i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.title),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.name),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.username),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.props.patient.dob.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.age),i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.gender),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.email),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone2),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.role),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Registration:"),i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.props.patient.registration.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.registration.number),i.a.createElement("p",{className:"listGroupText"},"Expiry Date:"),i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.props.patient.expiryDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"expiryDate")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral:"),i.a.createElement("p",{className:"listGroupText"},"Date:"),this.props.patient.referral.date&&i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.props.patient.referral.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.date")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Reason:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.reason),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.reason")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Referral Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.name),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.name")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.email),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.email")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.phone),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.phone")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.attendingPhysician),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attendingPhysician")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Occupation:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.role),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.role")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Employer:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.name),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.name")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Contact:"),i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.phone),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.phone")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.email),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.email")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Address:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.address),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.address")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Insurance:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.company),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.company")},"Edit"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.policyNumber),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.policyNumber")},"Edit"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.description),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.description")},"Edit"),this.props.patient.insurance.expiryDate&&i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.props.patient.insurance.expiryDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.expiryDate")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Subscriber:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.company),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.company")},"Edit"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.description),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.description")},"Edit")))),i.a.createElement(G.a.Pane,{eventKey:"2"},"Patient Admin",i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient._id)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.loggedIn.toString())),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.clientConnected.toString())),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.code)))),i.a.createElement(G.a.Pane,{eventKey:"3"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"User Address List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ye,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(Ke,{filter:this.state.filter,addresses:this.props.patient.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary})),i.a.createElement(G.a.Pane,{eventKey:"4"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient Next of Kin List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"nextOfKin")},"Add")),!0===this.state.adding.state&&"nextOfKin"===this.state.adding.field&&i.a.createElement(ht,{onConfirm:this.submitAddNextOfKinForm,onCancel:this.cancelAdd}),i.a.createElement(Je,{filter:this.state.filter,nextOfKin:this.props.patient.nextOfKin,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNextOfKin})),i.a.createElement(G.a.Pane,{eventKey:"5"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient Allergies List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"allergy")},"Add")),!0===this.state.adding.state&&"allergy"===this.state.adding.field&&i.a.createElement(vt,{onConfirm:this.submitAddAllergyForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Xe,{filter:this.state.filter,allergies:this.props.patient.allergies,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAllergy,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"6"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient Medication List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"medication")},"Add")),!0===this.state.adding.state&&"medication"===this.state.adding.field&&i.a.createElement(ft,{onConfirm:this.submitAddMedicationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ze,{filter:this.state.filter,medication:this.props.patient.medication,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteMedication,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"7"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient Image List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ee,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(tt,{filter:this.state.filter,images:this.props.patient.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage})),i.a.createElement(G.a.Pane,{eventKey:"8"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient File List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(be,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(at,{filter:this.state.filter,files:this.props.patient.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile})),i.a.createElement(G.a.Pane,{eventKey:"9"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient Appointment List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter")),i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(ne,{filter:this.state.filter,appointments:this.props.patient.appointments,authId:this.context.activityId})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"10"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient Visit List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter")),i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(ct,{filter:this.state.filter,visits:this.props.patient.visits,authId:this.context.activityId,patientPage:!0})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"11"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient Notes:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Admin"===this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(fe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(it,{filter:this.state.filter,notes:this.props.patient.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote})),i.a.createElement(G.a.Pane,{eventKey:"12"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Patient Tags:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"tag")},"Add")),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(yt,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(ot,{filter:this.state.filter,tags:this.props.patient.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag})),i.a.createElement(G.a.Pane,{eventKey:"13"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Docu-Gen:")))))))))}}]),a}(n.Component);bt.contextType=y;var xt=bt,At=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"patient"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"active"),i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"registration.date"),i.a.createElement("option",null,"registration.number"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"expiryDate"),i.a.createElement("option",null,"loggedIn")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},Ct=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"active"),i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"registration.date"),i.a.createElement("option",null,"registration.number"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"expiryDate"),i.a.createElement("option",null,"referral.date"),i.a.createElement("option",null,"referral.reason"),i.a.createElement("option",null,"referral.physician.name"),i.a.createElement("option",null,"referral.physician.email"),i.a.createElement("option",null,"referral.physician.phone"),i.a.createElement("option",null,"attendingPhysician"),i.a.createElement("option",null,"occupation.role"),i.a.createElement("option",null,"occupation.employer.name"),i.a.createElement("option",null,"occupation.employer.phone"),i.a.createElement("option",null,"occupation.employer.email"),i.a.createElement("option",null,"insurance.company"),i.a.createElement("option",null,"insurance.policyNumber"),i.a.createElement("option",null,"insurance.description"),i.a.createElement("option",null,"insurance.expiryDate"),i.a.createElement("option",null,"insurance.subscriber.company"),i.a.createElement("option",null,"insurance.subscriber.description"),i.a.createElement("option",null,"nextOfKin.name"),i.a.createElement("option",null,"nextOfKin.relation"),i.a.createElement("option",null,"nextOfKin.contact.email"),i.a.createElement("option",null,"nextOfKin.contact.phone"),i.a.createElement("option",null,"nextOfKin.contact.phone2"),i.a.createElement("option",null,"allergies.type"),i.a.createElement("option",null,"allergies.title"),i.a.createElement("option",null,"allergies.description"),i.a.createElement("option",null,"allergies.attachments"),i.a.createElement("option",null,"medication.title"),i.a.createElement("option",null,"medication.type"),i.a.createElement("option",null,"medication.description"),i.a.createElement("option",null,"medication.attachments"),i.a.createElement("option",null,"images.name"),i.a.createElement("option",null,"images.type"),i.a.createElement("option",null,"images.path"),i.a.createElement("option",null,"files.name"),i.a.createElement("option",null,"files.type"),i.a.createElement("option",null,"files.path"),i.a.createElement("option",null,"notes"),i.a.createElement("option",null,"tags"),i.a.createElement("option",null,"loggedIn"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"query"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"date format: 'YYYY-MM-DD'"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Search"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},It=(a(182),function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,searchPatients:null,isLoading:!1,seshStore:null,profileLoaded:!1,canDelete:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,creatingPatient:!1,newPatient:null,fromGoLink:null,goLinkId:null,tabKey:"list"},e.searchPatients=function(t){t.preventDefault(),console.log("...searching patients..."),e.context.setUserAlert("...searching patients..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=e.context.activityId,o=t.target.field.value,l=t.target.query.value,c=!0;"active"!==o&&"age"!==o&&"dob"!==o&&"addresses.number"!==o&&"addresses.primary"!==o&&"loggedIn"!==o&&"clientConnected"!==o&&"verification.verified"!==o&&"registration.date"!==o&&"expiryDate"!==o&&"referral.date"!==o&&"insurance.expiryDate"!==o&&"insurance.expiryDate"!==o||(c=!1),!0===c&&(a={query:'\n        query {getPatientsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),!1===c&&(a={query:'\n        query {getPatientsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...patient search success!...";!0===c&&t.data.error&&(a=t.data.error),!1===c&&t.data.error&&(a=t.data.error),e.context.setUserAlert(a),!0===c&&e.setState({isLoading:!1,searchPatients:t.data.getPatientsByFieldRegex,activityA:"getPatientsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===c&&e.setState({isLoading:!1,searchPatients:t.data.getPatientsByField,activityA:"getPatientsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewPatient=function(){e.setState({creatingPatient:!0})},e.cancelCreateNewPatient=function(){e.setState({creatingPatient:!1})},e.submitCreateNewPatientForm=function(t){t.preventDefault(),console.log("...creating new patient..."),e.context.setUserAlert("...creating new patient..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t.target.active.value,s=t.target.title.value,o=t.target.name.value,l=t.target.username.value,c=t.target.dob.value,r=t.target.role.value,m=t.target.gender.value,d=t.target.contactEmail.value,p=t.target.contactPhone.value,u=t.target.contactPhone2.value,g=t.target.addressNumber.value;""===g&&(g=0);var y=t.target.addressStreet.value,h=t.target.addressTown.value,v=t.target.addressCity.value,f=t.target.addressParish.value,E=t.target.addressCountry.value,b=t.target.addressPostalCode.value,x=t.target.referralDate.value,A=t.target.referralReason.value,C=t.target.referralPhysicianName.value,I=t.target.referralPhysicianPhone.value,S=t.target.referralPhysicianEmail.value,T=(t.target.referralPhysicianAddress.value,t.target.attendingPhysician.value),N=t.target.occupationRole.value,k=t.target.occupationEmployerName.value,w=t.target.occupationEmployerEmail.value,D=t.target.occupationEmployerPhone.value,U=t.target.occupationEmployerAddress.value,P=t.target.insuranceCompany.value,L=t.target.insurancePolicyNumber.value,F=t.target.insuranceDescription.value,_=t.target.insuranceExpiryDate.value,V=t.target.insuranceSubscriberCompany.value,q=t.target.insuranceSubscriberDescription.value;if(0===i.trim().length||0===s.trim().length||0===o.trim().length||0===l.trim().length||0===c.trim().length||0===r.trim().length||0===m.trim().length||0===d.trim().length||0===p.trim().length)return e.context.setUserAlert("...blank fields!!!..."),void e.setState({isLoading:!1});var O={query:'\n      mutation {createPatient(\n        activityId:"'.concat(n,'",\n        patientInput:{\n          active:').concat(i,',\n          username:"').concat(l,'",\n          dob:"').concat(c,'",\n          title:"').concat(s,'",\n          name:"').concat(o,'",\n          role:"').concat(r,'",\n          gender:"').concat(m,'",\n          contactEmail:"').concat(d,'",\n          contactPhone:"').concat(p,'",\n          contactPhone2:"').concat(u,'",\n          addressNumber:').concat(g,',\n          addressStreet:"').concat(y,'",\n          addressTown:"').concat(h,'",\n          addressCity:"').concat(v,'",\n          addressParish:"').concat(f,'",\n          addressCountry:"').concat(E,'",\n          addressPostalCode:"').concat(b,'",\n          referralDate:"').concat(x,'",\n          referralReason:"').concat(A,'",\n          referralPhysicianName:"').concat(C,'",\n          referralPhysicianEmail:"').concat(S,'",\n          referralPhysicianPhone:"').concat(I,'",\n          attendingPhysician:"').concat(T,'",\n          occupationRole:"').concat(N,'",\n          occupationEmployerName:"').concat(k,'",\n          occupationEmployerPhone:"').concat(D,'",\n          occupationEmployerEmail:"').concat(w,'",\n          occupationEmployerAddress:"').concat(U,'",\n          insuranceCompany:"').concat(P,'",\n          insurancePolicyNumber:"').concat(L,'",\n          insuranceDescription:"').concat(F,'",\n          insuranceExpiryDate:"').concat(_,'",\n          insuranceSubscriberCompany:"').concat(V,'",\n          insuranceSubscriberDescription:"').concat(q,'"\n        })\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(O),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create patient success!...";t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,showDetails:!0,creatingPatient:!1,tabKey:"detail",selectedPatient:t.data.createPatient,newPatient:t.data.createPatient,activityA:"createPatient?activityId:".concat(n,",patientId:").concat(t.data.createPatient._id)}),e.logUserActivity({activityId:n,token:a});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllPatients(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedPatient:t,tabKey:"detail"}),e.props.selectPatient(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updatePatient=function(t){console.log("...updating selected patient..."),e.setState({selectedPatient:t}),e.props.selectPatient(t)},e.deletePatient=function(t){console.log("...deleteing patient...",t),e.context.setUserAlert("...deleteing patient..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deletePatientById(\n        activityId:"'.concat(n,'",\n        patientId:"').concat(i,'"\n      )\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete patient success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deletePatientById?activityId:".concat(n,",patientId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllPatients({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all patients component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.props.location.state&&this.props.location.state.patient&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.patient}),this.getAllPatients(e),this.props.selectedPatient&&(console.log("...found existing Patient selection... loading..."),this.setState({showDetails:!0,selectedPatient:this.props.selectedPatient}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all patients retrieval success!...";if(e.data.error&&(s=e.data.error),!0===t.state.fromGoLink){var o=e.data.getAllPatients.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,selectedPatient:o,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(s),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),i.a.createElement(E.a,{className:"staffPageContainer"},i.a.createElement(v.a,{className:"staffPageContainerRow headRow"},i.a.createElement(f.a,{md:9,className:"staffPageContainerCol"},i.a.createElement("h1",null,"Patient List")),i.a.createElement(f.a,{md:3,className:"staffPageContainerCol"},this.state.isLoading?i.a.createElement(x.a,{src:C.a,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",activeKey:this.state.tabKey},i.a.createElement(v.a,{className:"staffPageContainerRow mainRow2"},i.a.createElement(f.a,{lg:3,className:"staffPageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column mainMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"list",onClick:this.menuSelect.bind(this,"list")},"List")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"search",onClick:this.menuSelect.bind(this,"search")},"Search")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"detail",onClick:this.menuSelect.bind(this,"detail")},"Details")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"new",onClick:this.menuSelect.bind(this,"new")},"New"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,i.a.createElement(At,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.state.patients&&i.a.createElement(f.a,{lg:9,className:"staffPageContainerCol specialCol2"},i.a.createElement(G.a.Content,null,i.a.createElement(G.a.Pane,{eventKey:"list"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-warning",onClick:this.resetFilter},"Reset")),i.a.createElement(L,{filter:this.state.filter,patients:this.state.patients,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deletePatient})),i.a.createElement(G.a.Pane,{eventKey:"search"},i.a.createElement(f.a,{className:"userSearchCol"},i.a.createElement("h3",null,"Search Patient"),i.a.createElement(v.a,{className:"userSearchRow"},i.a.createElement(Ct,{onConfirm:this.searchPatients})),i.a.createElement(v.a,null,this.state.searchPatients&&i.a.createElement(b.a,{variant:"outline-primary",className:"centered_btn",onClick:this.toggleSideCol},"Filter")),i.a.createElement(v.a,{className:"userSearchRow results"},this.state.searchPatients&&i.a.createElement(Me,{filter:this.state.filter,patients:this.state.searchPatients,authId:this.context.activityId,showDetails:this.showDetails})))),i.a.createElement(G.a.Pane,{eventKey:"detail"},!0===this.state.showDetails&&this.state.selectedPatient&&i.a.createElement(xt,{patient:this.state.selectedPatient,updatePatient:this.updatePatient})),i.a.createElement(G.a.Pane,{eventKey:"new"},!1===this.state.creatingPatient&&i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:this.onStartCreateNewPatient},"Create New"),!0===this.state.creatingPatient&&i.a.createElement(ze,{onConfirm:this.submitCreateNewPatientForm,onCancel:this.cancelCreateNewPatient}),this.state.newPatient&&i.a.createElement(v.a,null,i.a.createElement("h3",null,"Review New Patient"),this.state.newPatient.username))))))))}}]),a}(n.Component));It.contextType=y;var St=It,Tt=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create Appointment Form"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"patientId"},i.a.createElement(oe.a.Label,null,"Patient: ",e.patient.username),i.a.createElement(oe.a.Control,{type:"text",value:e.patient._id}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"subType"},i.a.createElement(oe.a.Label,null,"subType"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"subType"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"date"},i.a.createElement(oe.a.Label,null,"date"),i.a.createElement(oe.a.Control,{type:"date",placeholder:"YYYY-MM-DD"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"time"},i.a.createElement(oe.a.Label,null,"time"),i.a.createElement(oe.a.Control,{type:"time",placeholder:"time"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"location"},i.a.createElement(oe.a.Label,null,"location"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"location"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"important"},i.a.createElement(oe.a.Label,null,"important"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"false"),i.a.createElement("option",null,"true")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"loginFormBtn"},"Create"),i.a.createElement(b.a,{variant:"outline-danger",className:"loginFormBtn",onClick:e.onCancel},"Cancel"))))},Nt=a(94),kt=a.n(Nt),wt=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.note)},"Delete")))))},Dt=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(wt,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},Ut=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Tag: ",i.a.createElement("span",{className:"bold"},e.tag)),i.a.createElement(k.a,{icon:U.d,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.tag)},"Delete")))))},Pt=function(e){var t=Object.assign({},e.filter),a=e.tags,n=[];"tag"===t.field&&"tag"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"tag"===t.field&&"tag"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"tag"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ut,{key:s,tag:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},Lt=function(e){var t=Object(n.useState)(""),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Staff"),i.a.createElement(oe.a.Row,null,i.a.createElement(_e,{users:e.users,selectUser:function(e){o(e)},filter:e.filter})),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"user"},i.a.createElement(oe.a.Label,null,"user"),i.a.createElement(oe.a.Control,{type:"text",value:s._id}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ft=function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:null,selectedAppointment:n.props.appointment,addAttachmentForm:!1,addAttachmentArgs:null,showAddConsultantForm:!1,users:null,calEvent:{title:n.props.appointment.title,description:n.props.appointment.description,location:n.props.appointment.location,startTime:N.a.unix(n.props.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")+"T"+n.props.appointment.time+":00-05:00",endTime:N.a.unix(n.props.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")+"T"+n.props.appointment.time+":00-05:00"}},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding notes..."),n.context.setUserAlert("...adding notes..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.notes.value,o={query:'\n      mutation {addAppointmentNotes(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          notes:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.addAppointmentNotes),n.setState({isLoading:!1,selectedAppointment:e.data.addAppointmentNotes,activityA:"addAppointmentNotes?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.addAppointmentNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNote=function(e){console.log("...deleting notes..."),n.context.setUserAlert("...deleting notes..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e,o={query:'\n      mutation {deleteAppointmentNote(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          note:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.deleteAppointmentNote),n.setState({isLoading:!1,selectedAppointment:e.data.deleteAppointmentNote,activityA:"deleteAppointmentNote?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.deleteAppointmentNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddTagForm=function(e){e.preventDefault(),console.log("...adding tags..."),n.context.setUserAlert("...adding tags..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.tags.value,o={query:'\n      mutation {addAppointmentTags(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          tags:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tags add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.addAppointmentTags),n.setState({isLoading:!1,selectedAppointment:e.data.addAppointmentTags,activityA:"addAppointmentTags?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.addAppointmentTags,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteTag=function(e){console.log("...deleting tags..."),n.context.setUserAlert("...deleting tags..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e,o={query:'\n      mutation {deleteAppointmentTag(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          tag:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tag delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.deleteAppointmentTag),n.setState({isLoading:!1,selectedAppointment:e.data.deleteAppointmentTag,activityA:"deleteAppointmentTag?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.deleteAppointmentTag,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddUserForm=function(e){e.preventDefault(),console.log("...adding consultant..."),n.context.setUserAlert("...adding consultant..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=e.target.user.value,s=n.props.appointment._id,o=n.state.users.filter((function(e){return e._id===i}))[0].role;if("Doctor"!==o&&"Nurse"!==o)return console.log("...please choose a Doctor or Nurse to add please..."),void n.context.setUserAlert("...please choose a Doctor or Nurse to add please...");var l={query:'\n      mutation {addAppointmentConsultant(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...add consultant success!...";e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updateAppointment(e.data.addAppointmentConsultant),n.setState({isLoading:!1,activityA:"addAppointmentConsultant?activityId:".concat(a,",appointmentId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteConsultant=function(e){console.log("...deleting consultant..."),n.context.setUserAlert("...deleting consultant..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=e._id,s=n.props.appointment._id,o={query:'\n      mutation {deleteAppointmentConsultant(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...delete consultant success!...";e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updateAppointment(e.data.deleteAppointmentConsultant),n.setState({isLoading:!1,activityA:"deleteAppointmentConsultant?activityId:".concat(a,",appointmentId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdatePatient=function(){console.log("show update patient select list")},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.field.value,o=e.target.query.value,l={query:'\n      mutation {updateAppointmentSingleField(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.updateAppointmentSingleField),n.setState({isLoading:!1,selectedPatient:e.data.updateAppointmentSingleField,activityA:"updateAppointmentSingleField?activityId:".concat(a,",appointmentId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedPatient=e.data.updateAppointmentSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.propsPatient=n.props.appointment,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e;console.log("...appointment details component mounted..."),sessionStorage.getItem("logInfo")&&(e=JSON.parse(sessionStorage.getItem("logInfo"))),this.setState({selectedPatient:this.context.selectedPatient}),"Admin"===this.context.role&&this.setState({canDelete:!0}),this.getAllUsers(e)}},{key:"componentWillUnmount",value:function(){}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all users retrieval success!...";e.data.error&&(s=e.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),i.a.createElement(E.a,{className:"detailPageContainer"},i.a.createElement(v.a,{className:"detailPageContainerRow mainRow"},i.a.createElement(f.a,{md:2,className:"detailPageContainerCol"}),i.a.createElement(f.a,{md:10,className:"detailPageContainerCol"},!this.props.appointment&&i.a.createElement("h3",null,"..."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",defaultActiveKey:"1"},i.a.createElement(v.a,{className:"detailPageContainerRow mainRow2"},i.a.createElement(f.a,{md:3,className:"detailPageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column subMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"1",onClick:this.menuSelect.bind(this,"basic")},"Basic")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"2",onClick:this.menuSelect.bind(this,"admin")},"Admin")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"3",onClick:this.menuSelect.bind(this,"consultant")},"Consultants")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"4",onClick:this.menuSelect.bind(this,"note")},"Notes")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"5",onClick:this.menuSelect.bind(this,"tag")},"Tags"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,"consultant"===this.state.menuSelect&&i.a.createElement(Ge,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"note"===this.state.menuSelect&&i.a.createElement(ue,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"tag"===this.state.menuSelect&&i.a.createElement(ut,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.props.appointment&&i.a.createElement(f.a,{md:9,className:"detailPageContainerCol specialCol2"},!0===this.state.updateSingleField.state&&i.a.createElement(gt,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),i.a.createElement(G.a.Content,{className:"tabContent"},i.a.createElement(G.a.Pane,{eventKey:"1"},"Appointment Basic:",i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.title),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.type),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.subType),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.props.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.time),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Location:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.location),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"location")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.description),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"description")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Important:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.important.toString()),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"important")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"In Progress:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.inProgress.toString()),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"inProgress")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Attended:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.attended.toString()),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attended")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Patient:")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.name),i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:this.props.appointment.patient._id}}},"Go!")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient._id)),this.props.appointment.visit&&i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Visit:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.visit._id)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Export:"),i.a.createElement(kt.a,{event:this.state.calEvent})))),i.a.createElement(G.a.Pane,{eventKey:"2"},"Appointment Admin",i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment._id)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Creator:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.creator._id)))),i.a.createElement(G.a.Pane,{eventKey:"3"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Appointment Consultant List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(Lt,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement(_e,{filter:this.state.filter,authId:this.context.activityId,users:this.props.appointment.consultants,appointmentPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant})),i.a.createElement(G.a.Pane,{eventKey:"4"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Appointment Note List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(fe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(Dt,{filter:this.state.filter,notes:this.props.appointment.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote})),i.a.createElement(G.a.Pane,{eventKey:"5"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Appointment Tag List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"tag")},"Add")),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(yt,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(Pt,{filter:this.state.filter,tags:this.props.appointment.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag}))))))))}}]),a}(n.Component);Ft.contextType=y;var _t=Ft,Vt=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"checkinTime"),i.a.createElement("option",null,"seenTime"),i.a.createElement("option",null,"location"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"inProgress"),i.a.createElement("option",null,"attended"),i.a.createElement("option",null,"important"),i.a.createElement("option",null,"notes"),i.a.createElement("option",null,"tags"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"query"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"date format: 'YYYY-MM-DD'"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Search"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},qt=(a(183),function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,canDelete:!1,appointments:null,searchAppointments:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,selectedAppointment:null,creatingAppointment:!1,newAppointment:null,calendarAppointments:null,fromGoLink:null,goLinkId:null,sublistSearch:!1,tabKey:"list"},e.searchAppointments=function(t){t.preventDefault(),console.log("...searching appointments..."),e.context.setUserAlert("...searching appointments..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"date"!==o&&"inProgress"!==o&&"attended"!==o&&"important"!==o&&"important"!==o||(c=!1),!0===c&&(a={query:'\n        query {getAppointmentsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),!1===c&&(a={query:'\n      query {getAppointmentsByField(\n        activityId:"'.concat(i,'",\n        field:"').concat(o,'",\n        query:"').concat(l,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...appointment search success!...";!0===c&&t.data.error&&(a=t.data.error),!1===c&&t.data.error&&(a=t.data.error),e.context.setUserAlert(a),!0===c&&e.setState({isLoading:!1,searchAppointments:t.data.getAppointmentsByFieldRegex,activityA:"getAppointmentsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===c&&e.setState({isLoading:!1,searchAppointments:t.data.getAppointmentsByField,activityA:"getAppointmentsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewAppointment=function(){e.setState({creatingAppointment:!0})},e.cancelCreateNewAppointment=function(){e.setState({creatingAppointment:!1,selectedPatient:null})},e.submitCreateNewAppointmentForm=function(t){t.preventDefault(),console.log("...creating new appointment..."),e.context.setUserAlert("...creating new appointment..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.selectedPatient._id,s=t.target.title.value,o=t.target.type.value,l=t.target.subType.value,c=t.target.date.value,r=t.target.time.value,m=t.target.location.value,d=t.target.description.value,p=t.target.important.value;if(0!==s.trim().length&&0!==c.trim().length&&0!==r.trim().length&&0!==m.trim().length){if(console.log("foo",c),c<N()().format("YYYY-MM-DD"))return console.log("...ummm no! Please pick a date today or in the future..."),e.context.setUserAlert("...ummm no! Please pick a date today or in the future..."),void e.setState({isLoading:!1});var u={query:'\n      mutation {createAppointment(\n        activityId:"'.concat(n,'",\n        patientId:"').concat(i,'",\n        appointmentInput:{\n          title:"').concat(s,'",\n          type:"').concat(o,'",\n          subType:"').concat(l,'",\n          date:"').concat(c,'",\n          time:"').concat(r,'",\n          location:"').concat(m,'",\n          description:"').concat(d,'",\n          important:').concat(p,"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create appointment success!...";t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,showDetails:!0,creatingAppointment:!1,selectedAppointment:t.data.createAppointment,newAppointment:t.data.createAppointment,tabKey:"detail",activityA:"createAppointment?activityId:".concat(n,",appointmentId:").concat(t.data.createAppointment._id)}),e.logUserActivity({activityId:n,token:a});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllAppointments(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))}else e.context.setUserAlert("...blank fields!!!...")},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedAppointment:t,overlay:!1,tabKey:"detail"}),e.props.selectAppointment(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.selectPatient=function(t){e.setState({selectedPatient:t})},e.updateAppointment=function(t){console.log("...updating selected appointment..."),e.setState({selectedAppointment:t}),e.props.selectAppointment(t)},e.deleteAppointment=function(t){console.log("...deleteing appointment...",t),e.context.setUserAlert("...deleteing appointment..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteAppointmentById(\n        activityId:"'.concat(n,'",\n        appointmentId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete appointment success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteAppointmentById?activityId:".concat(n,",appointmentId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllAppointments({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.parseForCalendar=function(t){console.log("...parsing appointments for calendar...");var a=t.map((function(e){return{title:e.title,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important}}}));e.setState({calendarAppointments:a})},e.viewCalendarEvent=function(t){console.log("...viewing calendar appointment...",t.event.extendedProps.props);var a=e.state.appointments.filter((function(e){return e._id===t.event.extendedProps.props._id}))[0];e.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:a}})},e.toggleOverlay=function(){e.setState({overlay:!1})},e.startSublistSearch=function(){e.setState({sublistSearch:!0})},e.cancelSublistSearch=function(){e.setState({sublistSearch:!1}),e.getAllPatients({activityId:e.context.activityId,token:e.context.token})},e.submitSublistSearchForm=function(t){t.preventDefault(),console.log("...searching patient sublist..."),e.context.setUserAlert("...searching patient sublist..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"active"!==o&&"age"!==o&&"dob"!==o&&"addresses.number"!==o&&"addresses.primary"!==o&&"loggedIn"!==o&&"clientConnected"!==o&&"verification.verified"!==o&&"registration.date"!==o&&"expiryDate"!==o&&"referral.date"!==o&&"insurance.expiryDate"!==o&&"insurance.expiryDate"!==o||(c=!1),!0===c&&(a={query:'\n        query {getPatientsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),!1===c&&(a={query:'\n        query {getPatientsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...patient search success!...";!0===c&&t.data.error&&(a=t.data.error),!1===c&&t.data.error&&(a=t.data.error),e.context.setUserAlert(a),!0===c&&e.setState({isLoading:!1,patients:t.data.getPatientsByFieldRegex,activityA:"getPatientsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===c&&e.setState({isLoading:!1,patients:t.data.getPatientsByField,activityA:"getPatientsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all appointments component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.getAllPatients(e),this.props.location.state&&this.props.location.state.appointment&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.appointment}),this.getAllAppointments(e),this.props.selectedAppointment&&(console.log("...found existing Appointment selection... loading..."),this.setState({showDetails:!0,selectedAppointment:this.props.selectedAppointment}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllAppointments",value:function(e){var t=this;console.log("...retrieving all appointments..."),this.context.setUserAlert("...retrieving all appointments..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllAppointments(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all appointments retrieval success!...";if(e.data.error&&(i=e.data.error),!0===t.state.fromGoLink){var s=e.data.getAllAppointments.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,selectedAppointment:s,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(i),t.setState({isLoading:!1,appointments:e.data.getAllAppointments,activityA:"getAllAppointments?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a}),t.parseForCalendar(e.data.getAllAppointments)})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all patients retrieval success!...";e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus,selectCalendarDetails:this.showDetails,toggleOverlay:this.toggleOverlay}),i.a.createElement(E.a,{className:"staffPageContainer"},i.a.createElement(v.a,{className:"staffPageContainerRow headRow"},i.a.createElement(f.a,{md:9,className:"staffPageContainerCol"},i.a.createElement("h1",{className:"mainHeading"},"Appointment List")),i.a.createElement(f.a,{md:3,className:"staffPageContainerCol"},this.state.isLoading?i.a.createElement(x.a,{src:C.a,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",activeKey:this.state.tabKey},i.a.createElement(v.a,{className:"staffPageContainerRow mainRow2"},i.a.createElement(f.a,{md:3,className:"staffPageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column mainMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"list",onClick:this.menuSelect.bind(this,"list")},"List")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"search",onClick:this.menuSelect.bind(this,"search")},"Search")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"detail",onClick:this.menuSelect.bind(this,"detail")},"Details")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"new",onClick:this.menuSelect.bind(this,"new")},"New"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,i.a.createElement(pe,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.state.appointments&&i.a.createElement(f.a,{md:9,className:"staffPageContainerCol specialCol2"},i.a.createElement(G.a.Content,null,i.a.createElement(G.a.Pane,{eventKey:"list",className:"mainList"},i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-warning",onClick:this.resetFilter},"Reset")),i.a.createElement(_,{filter:this.state.filter,appointments:this.state.appointments,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteAppointment})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{defaultView:"dayGridMonth",plugins:[z.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"search"},i.a.createElement(f.a,{className:"userSearchCol"},i.a.createElement("h3",null,"Search Appointment"),i.a.createElement(v.a,{className:"userSearchRow searchForm"},i.a.createElement(Vt,{onConfirm:this.searchAppointments})),i.a.createElement(v.a,null,this.state.searchAppointments&&i.a.createElement(b.a,{variant:"outline-primary",className:"centered_btn",onClick:this.toggleSideCol},"Filter")),i.a.createElement(v.a,{className:"userSearchRow results"},this.state.searchAppointments&&i.a.createElement(_,{filter:this.state.filter,appointments:this.state.searchAppointments,authId:this.context.activityId,showDetails:this.showDetails})))),i.a.createElement(G.a.Pane,{eventKey:"detail"},!0===this.state.showDetails&&this.state.selectedAppointment&&i.a.createElement(_t,{appointment:this.state.selectedAppointment,updateAppointment:this.updateAppointment})),i.a.createElement(G.a.Pane,{eventKey:"new"},!1===this.state.creatingAppointment&&i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:this.onStartCreateNewAppointment},"Create New"),!0===this.state.creatingAppointment&&this.state.patients&&!this.state.selectedPatient&&i.a.createElement(f.a,{className:"patientSubListCol"},i.a.createElement(v.a,{className:"patientSubListRow"},i.a.createElement(b.a,{variant:"outline-success",className:"patientSublistSearchBtn",onClick:this.startSublistSearch},"Search")),i.a.createElement(v.a,{className:"patientSubListRow"},!0===this.state.sublistSearch&&i.a.createElement(Ct,{onCancel:this.cancelSublistSearch,onConfirm:this.submitSublistSearchForm})),i.a.createElement(v.a,{className:"patientSubListRow"},i.a.createElement(L,{filter:this.state.filter,patients:this.state.patients,authId:this.context.activityId,onSelect:this.selectPatient,appointmentPage:!0}))),!0===this.state.creatingAppointment&&this.state.selectedPatient&&i.a.createElement(v.a,null,i.a.createElement(Tt,{onConfirm:this.submitCreateNewAppointmentForm,onCancel:this.cancelCreateNewAppointment,patient:this.state.selectedPatient})),this.state.newAppointment&&i.a.createElement(v.a,null,i.a.createElement("h3",null,"Review New Appointment ",this.state.newAppointment._id)))))))))}}]),a}(n.Component));qt.contextType=y;var Ot=qt,Gt=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create Visit Form"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"appointmentId"},i.a.createElement(oe.a.Label,null,"Appointment: ",e.appointment.title),i.a.createElement(oe.a.Control,{type:"text",value:e.appointment._id}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"subType"},i.a.createElement(oe.a.Label,null,"subType"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"subType"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"loginFormBtn"},"Create"),i.a.createElement(b.a,{variant:"outline-danger",className:"loginFormBtn",onClick:e.onCancel},"Cancel"))))},jt=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.complaint.title)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.complaint.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.complaint.description)),i.a.createElement(D.a.Text,{className:"cardText"},"Anamnesis: ",i.a.createElement("span",{className:"bold"},e.complaint.anamnesis)),i.a.createElement(D.a.Text,{className:"cardText"},"Attachments:"),i.a.createElement(We,{item:e.complaint,attachments:e.complaint.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"complaint"}),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"complaint",data:e.complaint})},"Add Attachment"),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.complaint)},"Delete")))))},Rt=function(e){var t=Object.assign({},e.filter),a=e.complaints,n=[];"complaint"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"complaint"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"complaint"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"complaint"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"complaint"===t.field&&"anamnesis"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.anamnesis>t.anamnesis?1:-1}))),"complaint"===t.field&&"anamnesis"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.anamnesis<t.anamnesis?1:-1}))),"complaint"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(jt,{key:s,complaint:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},Bt=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.survey.title)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.survey.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.survey.description)),i.a.createElement(D.a.Text,{className:"cardText"},"Attachments:"),i.a.createElement(We,{item:e.survey,attachments:e.survey.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"survey"}),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"survey",data:e.survey})},"Add Attachment"),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.survey)},"Delete")))))},zt=function(e){var t=Object.assign({},e.filter),a=e.surveys,n=[];"survey"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"survey"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"survey"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"survey"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"survey"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Bt,{key:s,survey:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},Mt=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.title)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.description)),i.a.createElement(D.a.Text,{className:"cardText"},"Attachments:"),i.a.createElement(We,{item:e.systematicInquiry,attachments:e.systematicInquiry.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"systematicInquiry"}),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"systematicInquiry",data:e.systematicInquiry})},"Add Attachment"),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.systematicInquiry)},"Delete")))))},Kt=function(e){var t=Object.assign({},e.filter),a=e.systematicInquiry,n=[];"systematicInquiry"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"systematicInquiry"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"systematicInquiry"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"systematicInquiry"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"systematicInquiry"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Mt,{key:s,systematicInquiry:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},Yt=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Pulse Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.pr)),i.a.createElement(D.a.Text,{className:"cardText"},"Respiratory Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.rr)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement(D.a.Text,{className:"cardText"},"Pulse Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.pr)),i.a.createElement(D.a.Text,{className:"cardText"},"Respiratory Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.rr)),i.a.createElement(D.a.Text,{className:"cardText"},"Blood Pressure : ",i.a.createElement("span",{className:"bold"},e.vitals.bp1)," / ",i.a.createElement("span",{className:"bold"},e.vitals.bp2)),i.a.createElement(D.a.Text,{className:"cardText"},"Temperature: ",i.a.createElement("span",{className:"bold"},e.vitals.temp)),i.a.createElement(D.a.Text,{className:"cardText"},"PS02: ",i.a.createElement("span",{className:"bold"},e.vitals.ps02)),i.a.createElement(D.a.Text,{className:"cardText"},"Height : ",i.a.createElement("span",{className:"bold"},e.vitals.heightValue),"  ",i.a.createElement("span",{className:"bold"},e.vitals.heightUnit)),i.a.createElement(D.a.Text,{className:"cardText"},"Weight : ",i.a.createElement("span",{className:"bold"},e.vitals.weightValue),"  ",i.a.createElement("span",{className:"bold"},e.vitals.weightUnit)),i.a.createElement(D.a.Text,{className:"cardText"},"BMI : ",i.a.createElement("span",{className:"bold"},e.vitals.bmi)),i.a.createElement(D.a.Text,{className:"cardText"},"Urine"),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.vitals.urine.type)," Value: ",i.a.createElement("span",{className:"bold"},e.vitals.urine.value)),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.vitals)},"Delete")))))},Jt=function(e){var t=Object.assign({},e.filter),a=e.vitals,n=[];"vitals"===t.field&&"pr"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.pr>t.pr?1:-1}))),"vitals"===t.field&&"pr"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.pr<t.pr?1:-1}))),"vitals"===t.field&&"bp1"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bp1>t.bp1?1:-1}))),"vitals"===t.field&&"bp1"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bp1<t.bp1?1:-1}))),"vitals"===t.field&&"bp2"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bp2>t.bp2?1:-1}))),"vitals"===t.field&&"bp2"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bp2<t.bp2?1:-1}))),"vitals"===t.field&&"rr"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.rr>t.rr?1:-1}))),"vitals"===t.field&&"rr"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.rr<t.rr?1:-1}))),"vitals"===t.field&&"temp"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.temp>t.temp?1:-1}))),"vitals"===t.field&&"temp"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.temp<t.temp?1:-1}))),"vitals"===t.field&&"ps02"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.ps02>t.ps02?1:-1}))),"vitals"===t.field&&"ps02"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.ps02<t.ps02?1:-1}))),"vitals"===t.field&&"heightValue"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.heightValue>t.heightValue?1:-1}))),"vitals"===t.field&&"heightValue"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.heightValue<t.heightValue?1:-1}))),"vitals"===t.field&&"weightValue"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.weightValue>t.weightValue?1:-1}))),"vitals"===t.field&&"weightValue"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.weightValue<t.weightValue?1:-1}))),"vitals"===t.field&&"bmi"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bmi>t.bmi?1:-1}))),"vitals"===t.field&&"bmi"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bmi<t.bmi?1:-1}))),"vitals"===t.field&&"urine.type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.urine.type>t.urine.type?1:-1}))),"vitals"===t.field&&"urine.type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.urine.type<t.urine.type?1:-1}))),"vitals"===t.field&&"urine.value"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.urine.value>t.urine.value?1:-1}))),"vitals"===t.field&&"urine.value"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.urine.value<t.urine.value?1:-1}))),"vitals"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Yt,{key:s,vitals:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},Ht=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"General: ",i.a.createElement("span",{className:"bold"},e.examination.general)),i.a.createElement(D.a.Text,{className:"cardText"},"Area: ",i.a.createElement("span",{className:"bold"},e.examination.area)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement(D.a.Text,{className:"cardText"},"General: ",i.a.createElement("span",{className:"bold"},e.examination.general)),i.a.createElement(D.a.Text,{className:"cardText"},"Area: ",i.a.createElement("span",{className:"bold"},e.examination.area)),i.a.createElement(D.a.Text,{className:"cardText"},"type: ",i.a.createElement("span",{className:"bold"},e.examination.type)),i.a.createElement(D.a.Text,{className:"cardText"},"measure: ",i.a.createElement("span",{className:"bold"},e.examination.measure)),i.a.createElement(D.a.Text,{className:"cardText"},"value: ",i.a.createElement("span",{className:"bold"},e.examination.value)),i.a.createElement(D.a.Text,{className:"cardText"},"description: ",i.a.createElement("span",{className:"bold"},e.examination.description)),i.a.createElement(D.a.Text,{className:"cardText"},"followUp: ",i.a.createElement("span",{className:"bold"},e.examination.followUp.toString())),i.a.createElement(D.a.Text,{className:"cardText"},"Attachments:"),i.a.createElement(We,{item:e.examination,attachments:e.examination.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"examination"}),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"examination",data:e.examination})},"Add Attachment"),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.examination)},"Delete")))))},Wt=function(e){var t=Object.assign({},e.filter),a=e.examination,n=[];"examination"===t.field&&"general"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.general>t.general?1:-1}))),"examination"===t.field&&"general"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.general<t.general?1:-1}))),"examination"===t.field&&"area"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.area>t.area?1:-1}))),"examination"===t.field&&"area"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.area<t.area?1:-1}))),"examination"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"examination"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"examination"===t.field&&"measure"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.measure>t.measure?1:-1}))),"examination"===t.field&&"measure"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.measure<t.measure?1:-1}))),"examination"===t.field&&"value"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.value>t.value?1:-1}))),"examination"===t.field&&"value"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.value<t.value?1:-1}))),"examination"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"examination"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"examination"===t.field&&"followUp"===t.key&&(n=a.filter((function(e){return e.followUp===t.value}))),"examination"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ht,{key:s,examination:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},Qt=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.investigation.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.investigation.type)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.investigation.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.investigation.type)),i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.investigation.description)),i.a.createElement(D.a.Text,{className:"cardText"},"Attachments"),i.a.createElement(We,{item:e.investigation,attachments:e.investigation.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"investigation"}),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"investigation",data:e.investigation})},"Add Attachment"),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.investigation)},"Delete")))))},Xt=function(e){var t=Object.assign({},e.filter),a=e.investigation,n=[];"investigation"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"investigation"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"investigation"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"investigation"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"investigation"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Qt,{key:s,investigation:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},$t=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.diagnosis.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.diagnosis.type)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.diagnosis.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.diagnosis.type)),i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.diagnosis.description)),i.a.createElement(D.a.Text,{className:"cardText"},"Attachments:"),i.a.createElement(We,{item:e.diagnosis,attachments:e.diagnosis.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"diagnosis"}),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"diagnosis",data:e.diagnosis})},"Add Attachment"),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.diagnosis)},"Delete")))))},Zt=function(e){var t=Object.assign({},e.filter),a=e.diagnosis,n=[];"diagnosis"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"diagnosis"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"diagnosis"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"diagnosis"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"diagnosis"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"diagnosis"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"diagnosis"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement($t,{key:s,diagnosis:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},ea=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.treatment.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.treatment.type)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.treatment.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.treatment.type)),i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.treatment.description)),i.a.createElement(D.a.Text,{className:"cardText"},"Dose: ",i.a.createElement("span",{className:"bold"},e.treatment.dose)),i.a.createElement(D.a.Text,{className:"cardText"},"Frequency: ",i.a.createElement("span",{className:"bold"},e.treatment.frequency)),i.a.createElement(D.a.Text,{className:"cardText"},"Attachments:"),i.a.createElement(We,{item:e.treatment,attachments:e.treatment.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"treatment"}),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"treatment",data:e.treatment})},"Add Attachment"),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.treatment)},"Delete")))))},ta=function(e){var t=Object.assign({},e.filter),a=e.treatment,n=[];"treatment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"treatment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"treatment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"treatment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"treatment"===t.field&&"dose"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dose>t.dose?1:-1}))),"treatment"===t.field&&"dose"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dose<t.dose?1:-1}))),"treatment"===t.field&&"frequency"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.frequency>t.frequency?1:-1}))),"treatment"===t.field&&"frequency"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.frequency<t.frequency?1:-1}))),"treatment"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"treatment"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"treatment"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ea,{key:s,treatment:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},aa=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.billing.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.billing.type)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,null,i.a.createElement(D.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.billing.title)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.billing.type)),i.a.createElement(D.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.billing.description)),i.a.createElement(D.a.Text,{className:"cardText"},"Notes: ",i.a.createElement("span",{className:"bold"},e.billing.notes)),i.a.createElement(D.a.Text,{className:"cardText"},"Amount: ",i.a.createElement("span",{className:"bold"},e.billing.amount)),i.a.createElement(D.a.Text,{className:"cardText"},"Paid: ",i.a.createElement("span",{className:"bold"},e.billing.paid.toString())),i.a.createElement(We,{item:e.billing,attachments:e.billing.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"billing"}),i.a.createElement(b.a,{variant:"outline-primary",onClick:e.onAddAttachment.bind(void 0,{field:"billing",data:e.billing})},"Add Attachment"),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.billing)},"Delete")))))},na=function(e){var t=Object.assign({},e.filter),a=e.billing,n=[];"billing"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"billing"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"billing"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"billing"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"billing"===t.field&&"amount"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.amount>t.amount?1:-1}))),"billing"===t.field&&"amount"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.amount<t.amount?1:-1}))),"billing"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"billing"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"billing"===t.field&&"notes"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.notes>t.notes?1:-1}))),"billing"===t.field&&"notes"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.notes<t.notes?1:-1}))),"billing"===t.field&&"paid"===t.key&&(n=a.filter((function(e){return e.paid===t.value}))),"billing"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(aa,{key:s,billing:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},o)},ia=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"number: ",i.a.createElement("span",{className:"bold"},e.key)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},i.a.createElement("h3",null,"chronicIllness:"),i.a.createElement("p",null,"Diabetes"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.comment)),i.a.createElement("p",null,"High BloodPressure"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.comment)),i.a.createElement("p",null,"Dyslipidemia"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.comment)),i.a.createElement("p",null,"Cad"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.comment)),i.a.createElement("h3",null,"lifestyle"),i.a.createElement("p",null,"Weight"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.comment)),i.a.createElement("p",null,"Diet"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.comment)),i.a.createElement("p",null,"Smoking"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.comment)),i.a.createElement("p",null,"SubstanceAbuse"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.comment)),i.a.createElement("p",null,"exercise"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.comment)),i.a.createElement("p",null,"allergies"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.comment)),i.a.createElement("p",null,"asthma"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.comment)),i.a.createElement("h3",null,"Screening"),i.a.createElement("p",null,"breast"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.comment)),i.a.createElement("p",null,"prostate"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.comment)),i.a.createElement("p",null,"cervix"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.comment)),i.a.createElement("p",null,"colon"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.comment)),i.a.createElement("p",null,"dental"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.comment)),i.a.createElement("h3",null,"Vaccines"),i.a.createElement("p",null,"Influenza"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.comment)),i.a.createElement("p",null,"varicella"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.comment)),i.a.createElement("p",null,"hpv"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.comment)),i.a.createElement("p",null,"mmr"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.comment)),i.a.createElement("p",null,"tetanus"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.comment)),i.a.createElement("p",null,"pneumovax"),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.comment)),i.a.createElement("p",null,"other"),i.a.createElement(D.a.Text,{className:"cardText"},"Other: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.name)),i.a.createElement(D.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.medication)),i.a.createElement(D.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.testing)),i.a.createElement(D.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.comment)),!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.vigilance)},"Delete")))))},sa=function(e){var t=Object.assign({},e.filter),a=e.vigilance,n=[];"vigilance"===t.field&&"chronicIllness.diabetes.medication"===t.key&&(n=a.filter((function(e){return e.chronicIllness.diabetes.medication===t.value}))),"vigilance"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ia,{key:s,vigilance:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"fileList"},o)},oa=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type)),i.a.createElement(D.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.image)},"Delete")))))},la=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(oa,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"imageList"},o)},ca=function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,{className:"cardBody"},i.a.createElement(D.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.file.name)),i.a.createElement(D.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.file.type)),i.a.createElement(D.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.file.path)),i.a.createElement(k.a,{icon:U.c,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}}),!0===s&&i.a.createElement(v.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(b.a,{variant:"outline-danger",onClick:e.onDelete.bind(void 0,e.file)},"Delete")))))},ra=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ca,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"fileList"},o)},ma=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"complaint"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"anamnesis")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},da=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"survey"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},pa=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"systematicInquiry"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},ua=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"diagnosis"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},ga=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"vitals"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"pr"),i.a.createElement("option",null,"bp1"),i.a.createElement("option",null,"bp2"),i.a.createElement("option",null,"rr"),i.a.createElement("option",null,"temp"),i.a.createElement("option",null,"ps02"),i.a.createElement("option",null,"heightUnit"),i.a.createElement("option",null,"heightValue"),i.a.createElement("option",null,"weightUnit"),i.a.createElement("option",null,"weightValue"),i.a.createElement("option",null,"bmi"),i.a.createElement("option",null,"urine.type"),i.a.createElement("option",null,"urine.value")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},ya=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"examination"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"general"),i.a.createElement("option",null,"area"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"measure"),i.a.createElement("option",null,"value"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"followUp")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},ha=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"investigation"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},va=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"treatment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"dose"),i.a.createElement("option",null,"frequency")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},fa=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Control,{type:"text",hidden:"true",value:"billing"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"key"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"amount"),i.a.createElement("option",null,"paid"),i.a.createElement("option",null,"notes")))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Filter"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},Ea=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Complaint"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"anamnesis"},i.a.createElement(oe.a.Label,null,"anamnesis"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"anamnesis"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ba=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Survey"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},xa=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add SystematicInquiry"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Aa=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Vitals"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"pr"},i.a.createElement(oe.a.Label,null,"Pulse Rate"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"pr"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"bp1"},i.a.createElement(oe.a.Label,null,"Blood Pressure (top)"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"bp1"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"bp2"},i.a.createElement(oe.a.Label,null,"Blood Pressure (bottom)"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"bp2"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"rr"},i.a.createElement(oe.a.Label,null,"Respiratory Rate"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"rr"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"temp"},i.a.createElement(oe.a.Label,null,"Temperature"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"temp"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"ps02"},i.a.createElement(oe.a.Label,null,"PS-02"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"ps02"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"heightUnit"},i.a.createElement(oe.a.Label,null,"Height: Unit"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Ft"),i.a.createElement("option",null,"M"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"heightValue"},i.a.createElement(oe.a.Label,null,"Height: Value"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"heightValue"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"weightUnit"},i.a.createElement(oe.a.Label,null,"Weight: Unit"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"Kg"),i.a.createElement("option",null,"Lbs"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"weightValue"},i.a.createElement(oe.a.Label,null,"Weight: Value"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"weightValue"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"bmi"},i.a.createElement(oe.a.Label,null,"BMI"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"bmi"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"urineType"},i.a.createElement(oe.a.Label,null,"Urine: type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"urineType"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"urineValue"},i.a.createElement(oe.a.Label,null,"Urine: value"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"urineValue"}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ca=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Examination"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"general"},i.a.createElement(oe.a.Label,null,"General"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"general"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"area"},i.a.createElement(oe.a.Label,null,"Area"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"area"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"Type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"measure"},i.a.createElement(oe.a.Label,null,"Measure"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"measure"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"value"},i.a.createElement(oe.a.Label,null,"Value"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"value"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"Description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"followUp"},i.a.createElement(oe.a.Label,null,"FollowUp ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"Attachment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ia=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Investigation"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Sa=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Diagnosis"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ta=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Treatment"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"dose"},i.a.createElement(oe.a.Label,null,"dose"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"dose"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"frequency"},i.a.createElement(oe.a.Label,null,"frequency"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"frequency"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"attachment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Na=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Billing"),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"title"},i.a.createElement(oe.a.Label,null,"title"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"title"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"type"},i.a.createElement(oe.a.Label,null,"type"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"type"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"description"},i.a.createElement(oe.a.Label,null,"description"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"description"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"amount"},i.a.createElement(oe.a.Label,null,"amount"),i.a.createElement(oe.a.Control,{type:"number",step:"0.001",placeholder:"amount"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"paid"},i.a.createElement(oe.a.Label,null,"Paid ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"attachment"},i.a.createElement(oe.a.Label,null,"attachment"),i.a.createElement(oe.a.Control,{path:"text",placeholder:"attachment"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"notes"},i.a.createElement(oe.a.Label,null,"notes"),i.a.createElement(oe.a.Control,{as:"textarea",rows:"3",placeholder:"notes"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a},i.a.createElement(oe.a.Label,null,"File"),i.a.createElement(oe.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){y._currentValue.file=e.target.files[0]}}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ka=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Vigilance"),i.a.createElement(oe.a.Row,null,i.a.createElement("h4",null,"Chronic Illness:"),i.a.createElement("p",null,"Diabetes"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessDiabetesMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessDiabetesTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessDiabetesComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("h4",null,"Chronic Illness:"),i.a.createElement("p",null,"HBP"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessHbpMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessHbpTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessHbpComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("h4",null,"Chronic Illness:"),i.a.createElement("p",null,"Dyslipidemia"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessDyslipidemiaMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessDyslipidemiaTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessDyslipidemiaComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("h4",null,"Chronic Illness:"),i.a.createElement("p",null,"Cad"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessCadMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessCadTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceChronicIllnessCadComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("h4",null,"Lifestyle:"),i.a.createElement("p",null,"Weight"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleWeightMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleWeightTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleWeightComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Diet"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleDietMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleDietTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleDietComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Smoking"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleSmokingMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleSmokingTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleSmokingComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"SubstanceAbuse"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleSubstanceAbuseMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleSubstanceAbuseTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleSubstanceAbuseComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Exercise"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleExerciseMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleExerciseTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleExerciseComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Allergies"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleAllergiesMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleAllergiesTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleAllergiesComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Asthma"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleAsthmaMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleAsthmaTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceLifestyleAsthmaComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("h4",null,"Screening:"),i.a.createElement("p",null,"Breast"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningBreastMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningBreastTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningBreastComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Prostate"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningProstateMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningProstateTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningProstateComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Cervix"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningCervixMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningCervixTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningCervixComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Colon"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningColonMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningColonTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningColonComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Dental"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningDentalMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningDentalTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceScreeningDentalComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("h4",null,"Vaccines"),i.a.createElement("p",null,"Influenza"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesInfluenzaMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesInfluenzaTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesInfluenzaComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Varicella"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesVaricellaMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesVaricellaTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesVaricellaComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Hpv"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesHpvMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesHpvTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesHpvComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Mmr"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesMmrMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesMmrTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesMmrComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Tetanus"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesTetanusMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesTetanusTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesTetanusComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Pneumovax"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesPneumovaxMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesPneumovaxTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesPneumovaxComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,null,i.a.createElement("p",null,"Other"),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesOtherName"},i.a.createElement(oe.a.Label,null,"name"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"name"})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesOtherMedication"},i.a.createElement(oe.a.Label,null,"Medication ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesOtherTesting"},i.a.createElement(oe.a.Label,null,"Testing ?"),i.a.createElement(oe.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(oe.a.Group,{as:f.a,controlId:"vigilanceVaccinesOtherComment"},i.a.createElement(oe.a.Label,null,"comment"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"comment"}))),i.a.createElement(oe.a.Row,{className:"formBtnRow"},i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(b.a,{variant:"outline-primary",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},wa=function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:null,selectedVisit:null,selectedAppointment:null,addAttachmentForm:!1,addAttachmentArgs:null,showAddConsultantForm:!1,users:null,calEvent:{title:n.props.visit.title,description:n.props.visit.appointment.description,location:n.props.visit.appointment.location,startTime:N.a.unix(n.props.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")+"T"+n.props.visit.time+":00-05:00",endTime:N.a.unix(n.props.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")+"T"+n.props.visit.time+":00-05:00"},pocketVars:null,s3State:{action:null,target:null,status:null}},n.submitAddComplaintForm=function(e){e.preventDefault(),console.log("...adding complaint..."),n.context.setUserAlert("...adding complaint..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.description.value,c=e.target.anamnesis.value;e.target.attachment.value;if(0===o.trim().length||0===l.trim().length||0===c.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=y._currentValue.file,m=r.name,d="visit/"+s+"/complaint/attachments";console.log("...file present...");var p=r.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new K.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"complaint attachment"}},overlay:!0,s3State:{action:"upload",target:"complaint attachment",status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"complaint attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"complaint attachment",status:"failed"}})}))}var h={query:'\n      mutation {addVisitComplaint(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            complaintTitle:"').concat(o,'",\n            complaintDescription:"').concat(l,'",\n            complaintAnamnesis:"').concat(c,'",\n            complaintAttachment:"').concat(t,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...complaint add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitComplaint),n.setState({isLoading:!1,selectedVisit:e.data.addVisitComplaint,activityA:"addVisitComplaint?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitComplaint,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteComplaint=function(e){console.log("...deleting complaint..."),n.context.setUserAlert("...deleting complaint..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.description,l=e.anamnesis,c=e.attachments,r={query:'\n      mutation {deleteVisitComplaint(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            complaintTitle:"').concat(s,'",\n            complaintDescription:"').concat(o,'",\n            complaintAnamnesis:"').concat(l,'",\n            complaintAttachments:"').concat(c,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...complaint delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitComplaint),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitComplaint,activityA:"deleteVisitComplaint?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitComplaint,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/complaint/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/complaint/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"complaint attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddSurveyForm=function(e){e.preventDefault(),console.log("...adding survey..."),n.context.setUserAlert("...adding survey..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.description.value;e.target.attachment.value;if(0===o.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="visit/"+s+"/survey/attachments";console.log("...file present...");var d=c.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"survey attachment"}},overlay:!0,s3State:{action:"upload",target:"survey attachment",status:"inProgress"}}),u.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"survey attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"survey attachment",status:"failed"}})}))}var g={query:'\n      mutation {addVisitSurvey(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          surveyTitle:"').concat(o,'",\n          surveyDescription:"').concat(l,'",\n          surveyAttachment:"').concat(t,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...survey add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitSurvey),n.setState({isLoading:!1,selectedVisit:e.data.addVisitSurvey,activityA:"addVisitSurvey?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitSurvey,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteSurvey=function(e){console.log("...deleting survey..."),n.context.setUserAlert("...deleting survey..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.description,l=e.attachments,c={query:'\n      mutation {deleteVisitSurvey(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          surveyTitle:"').concat(s,'",\n          surveyDescription:"').concat(o,'",\n          surveyAttachments:"').concat(l,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...survey delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitSurvey),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitSurvey,activityA:"deleteVisitSurvey?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitSurvey,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/survey/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/survey/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"survey attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddSystematicInquiryForm=function(e){e.preventDefault(),console.log("...adding systematicInquiry..."),n.context.setUserAlert("...adding systematicInquiry..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.description.value;e.target.attachment.value;if(0===o.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="visit/"+s+"/systematicInquiry/attachments";console.log("...file present...");var d=c.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"systematicInquiry attachment"}},overlay:!0,s3State:{action:"upload",target:"systematicInquiry attachment",status:"inProgress"}}),u.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"systematicInquiry attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"systematicInquiry attachment",status:"failed"}})}))}var g={query:'\n      mutation {addVisitSysInquiry(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          systematicInquiryTitle:"').concat(o,'",\n          systematicInquiryDescription:"').concat(l,'",\n          systematicInquiryAttachment:"').concat(t,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...systematicInquiry add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitSysInquiry),n.setState({isLoading:!1,selectedVisit:e.data.addVisitSysInquiry,activityA:"addVisitSysInquiry?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitSysInquiry,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteSystematicInquiry=function(e){console.log("...deleting systematicInquiry..."),n.context.setUserAlert("...deleting systematicInquiry..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.description,l=e.attachments,c={query:'\n      mutation {deleteVisitSysInquiry(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          systematicInquiryTitle:"').concat(s,'",\n          systematicInquiryDescription:"').concat(o,'",\n          systematicInquiryAttachments:"').concat(l,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...sys inquiry delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitSysInquiry),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitSysInquiry,activityA:"deleteVisitSysInquiry?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitSysInquiry,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/systematicInquiry/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/systematicInquiry/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"systematicInquiry attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddVitalsForm=function(e){e.preventDefault(),console.log("...adding Vitals..."),n.context.setUserAlert("...adding Vitals..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.target.pr.value,o=e.target.bp1.value,l=e.target.bp2.value,c=e.target.rr.value,r=e.target.temp.value,m=e.target.ps02.value,d=e.target.heightUnit.value,p=e.target.heightValue.value,u=e.target.weightUnit.value,g=e.target.weightValue.value,y=e.target.bmi.value,h=e.target.urineType.value,v=e.target.urineValue.value,f={query:'\n      mutation {addVisitVitals(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          vitalsPr:').concat(s,",\n          vitalsBp1:").concat(o,",\n          vitalsBp2:").concat(l,",\n          vitalsRr:").concat(c,",\n          vitalsTemp:").concat(r,",\n          vitalsPs02:").concat(m,',\n          vitalsHeightUnit:"').concat(d,'",\n          vitalsHeightValue:').concat(p,',\n          vitalsWeightUnit:"').concat(u,'",\n          vitalsWeightValue:').concat(g,",\n          vitalsBmi:").concat(y,',\n          vitalsUrineType:"').concat(h,'",\n          vitalsUrineValue:"').concat(v,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vitals add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.addVisitVitals),n.setState({isLoading:!1,selectedVisit:e.data.addVisitVitals,activityA:"addVisitVitals?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitVitals,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteVitals=function(e){console.log("...deleting Vitals..."),n.context.setUserAlert("...deleting Vitals..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.pr,o=e.bp1,l=e.bp2,c=e.rr,r=e.temp,m=e.ps02,d=e.heightUnit,p=e.heightValue,u=e.weightUnit,g=e.weightValue,y=e.bmi,h=e.urine.type,v=e.urine.value,f={query:'\n    mutation {deleteVisitVitals(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        vitalsPr:').concat(s,",\n        vitalsBp1:").concat(o,",\n        vitalsBp2:").concat(l,",\n        vitalsRr:").concat(c,",\n        vitalsTemp:").concat(r,",\n        vitalsPs02:").concat(m,',\n        vitalsHeightUnit:"').concat(d,'",\n        vitalsHeightValue:').concat(p,',\n        vitalsWeightUnit:"').concat(u,'",\n        vitalsWeightValue:').concat(g,",\n        vitalsBmi:").concat(y,',\n        vitalsUrineType:"').concat(h,'",\n        vitalsUrineValue:"').concat(v,'"\n      })\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...vitals delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.deleteVisitVitals),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitVitals,activityA:"deleteVisitVitals?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.deleteVisitVitals,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddExaminationForm=function(e){e.preventDefault(),console.log("...adding Examination..."),n.context.setUserAlert("...adding Examination..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.general.value,l=e.target.area.value,c=e.target.type.value,r=e.target.measure.value,m=e.target.value.value,d=e.target.description.value,p=e.target.followUp.checked;e.target.attachment.value;if(0===o.trim().length||0===l.trim().length||0===c.trim().length||0===r.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var u=y._currentValue.file,g=u.name,h="visit/"+s+"/examination/attachments";console.log("...file present...");var v=u.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+h+"/"+g+"."+v;var f={bucketName:"mbjentemrstorage",dirName:h,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},E=new K.a(f);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"examination attachment"}},overlay:!0,s3State:{action:"upload",target:"examination attachment",status:"inProgress"}}),E.uploadFile(u,g).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"examination attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"examination attachment",status:"failed"}})}))}var b={query:'\n      mutation {addVisitExamination(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          examinationGeneral:"').concat(o,'",\n          examinationArea:"').concat(l,'",\n          examinationType:"').concat(c,'",\n          examinationMeasure:"').concat(r,'",\n          examinationValue:"').concat(m,'",\n          examinationDescription:"').concat(d,'",\n          examinationFollowUp:').concat(p,',\n          examinationAttachment:"').concat(t,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id},consultants{_id},appointment{_id},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Examination add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitExamination),n.setState({isLoading:!1,selectedVisit:e.data.addVisitExamination,activityA:"addVisitExamination?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitExamination,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteExamination=function(e){console.log("...deleting Examination..."),n.context.setUserAlert("...deleting Examination..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.general,o=e.area,l=e.type,c=e.measure,r=e.value,m=e.description,d=e.followUp,p=e.attachments,u={query:'\n      mutation {deleteVisitExamination(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          examinationGeneral:"').concat(s,'",\n          examinationArea:"').concat(o,'",\n          examinationType:"').concat(l,'",\n          examinationMeasure:"').concat(c,'",\n          examinationValue:"').concat(r,'",\n          examinationDescription:"').concat(m,'",\n          examinationFollowUp:').concat(d,',\n          examinationAttachments:"').concat(p,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id},consultants{_id},appointment{_id},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Examination delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitExamination),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitExamination,activityA:"deleteVisitExamination?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitExamination,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/examination/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/examination/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"examination attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddInvestigationForm=function(e){e.preventDefault(),console.log("...adding Investigation..."),n.context.setUserAlert("...adding Investigation..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.type.value,c=e.target.description.value;e.target.attachment.value;if(0===o.trim().length||0===c.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=y._currentValue.file,m=r.name,d="visit/"+s+"/investigation/attachments";console.log("...file present...");var p=r.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new K.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"investigation attachment"}},overlay:!0,s3State:{action:"upload",target:"investigation attachment",status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"investigation attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"investigation attachment",status:"failed"}})}))}var h={query:'\n      mutation {addVisitInvestigation(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          investigationTitle:"').concat(o,'",\n          investigationType:"').concat(l,'",\n          investigationDescription:"').concat(c,'",\n          investigationAttachment:"').concat(t,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id},consultants{_id},appointment{_id},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Investigation add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitInvestigation),n.setState({isLoading:!1,selectedVisit:e.data.addVisitInvestigation,activityA:"addVisitInvestigation?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitInvestigation,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteInvestigation=function(e){console.log("...deleting Investigation..."),n.context.setUserAlert("...deleting Investigation..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.type,l=e.description,c=e.attachments,r={query:'\n      mutation {deleteVisitInvestigation(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          investigationTitle:"').concat(s,'",\n          investigationType:"').concat(o,'",\n          investigationDescription:"').concat(l,'",\n          investigationAttachments:"').concat(c,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id},consultants{_id},appointment{_id},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Investigation delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitInvestigation),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitInvestigation,activityA:"deleteVisitInvestigation?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitInvestigation,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/investigation/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/investigation/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"investigation attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddDiagnosisForm=function(e){e.preventDefault(),console.log("...adding Diagnosis..."),n.context.setUserAlert("...adding Diagnosis..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.type.value,c=e.target.description.value;e.target.attachment.value;if(0===o.trim().length||0===c.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=y._currentValue.file,m=r.name,d="visit/"+s+"/diagnosis/attachments";console.log("...file present...");var p=r.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new K.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"diagnosis attachment"}},overlay:!0,s3State:{action:"upload",target:"diagnosis attachment",status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"diagnosis attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"diagnosis attachment",status:"failed"}})}))}var h={query:'\n      mutation {addVisitDiagnosis(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          diagnosisTitle:"').concat(o,'",\n          diagnosisType:"').concat(l,'",\n          diagnosisDescription:"').concat(c,'",\n          diagnosisAttachment:"').concat(t,'"\n        })\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Diagnosis add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitDiagnosis),n.setState({isLoading:!1,selectedVisit:e.data.addVisitDiagnosis,activityA:"addVisitDiagnosis?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitDiagnosis,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteDiagnosis=function(e){console.log("...deleting Diagnosis..."),n.context.setUserAlert("...deleting Diagnosis..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.type,l=e.description,c=e.attachments,r={query:'\n      mutation {deleteVisitDiagnosis(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          diagnosisTitle:"').concat(s,'",\n          diagnosisType:"').concat(o,'",\n          diagnosisDescription:"').concat(l,'",\n          diagnosisAttachments:"').concat(c,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id},consultants{_id},appointment{_id},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Diagnosis delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitDiagnosis),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitDiagnosis,activityA:"deleteVisitDiagnosis?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitDiagnosis,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/diagnosis/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/diagnosis/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"diagnosis attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddTreatmentForm=function(e){e.preventDefault(),console.log("...adding Treatment..."),n.context.setUserAlert("...adding Treatment..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.type.value,c=e.target.description.value,r=e.target.dose.value,m=e.target.frequency.value;e.target.attachment.value;if(0===o.trim().length||0===l.trim().length||0===c.trim().length||0===r.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var d=y._currentValue.file,p=d.name,u="visit/"+s+"/treatment/attachments";console.log("...file present...");var g=d.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+u+"/"+p+"."+g;var h={bucketName:"mbjentemrstorage",dirName:u,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},v=new K.a(h);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"treatment attachment"}},overlay:!0,s3State:{action:"upload",target:"treatment attachment",status:"inProgress"}}),v.uploadFile(d,p).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"treatment attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"treatment attachment",status:"failed"}})}))}var f={query:'\n        mutation {addVisitTreatment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            treatmentType:"').concat(l,'",\n            treatmentTitle:"').concat(o,'",\n            treatmentDescription:"').concat(c,'",\n            treatmentDose:"').concat(r,'",\n            treatmentFrequency:"').concat(m,'",\n            treatmentAttachment:"').concat(t,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Treatment add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitTreatment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitTreatment,activityA:"addVisitTreatment?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitTreatment,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteTreatment=function(e){console.log("...deleting Treatment..."),n.context.setUserAlert("...deleting Treatment..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.type,l=e.description,c=e.dose,r=e.frequency,m=e.attachments,d={query:'\n        mutation {deleteVisitTreatment(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            treatmentType:"').concat(o,'",\n            treatmentTitle:"').concat(s,'",\n            treatmentDescription:"').concat(l,'",\n            treatmentDose:"').concat(c,'",\n            treatmentFrequency:"').concat(r,'",\n            treatmentAttachments:"').concat(m,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Treatment delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitTreatment),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitTreatment,activityA:"deleteVisitTreatment?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitTreatment,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/treatment/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/treatment/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"treatment attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddBillingForm=function(e){e.preventDefault(),console.log("...adding Billing..."),n.context.setUserAlert("...adding Billing..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.type.value,c=e.target.description.value,r=e.target.amount.value,m=e.target.paid.checked,d=e.target.notes.value;e.target.attachment.value;if(0===o.trim().length||0===c.trim().length||r<=0||0===d.trim().length)return n.context.setUserAlert("...blank fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var p=y._currentValue.file,u=p.name,g="visit/"+s+"/billing/attachments";console.log("...file present...");var h=p.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+g+"/"+u+"."+h;var v={bucketName:"mbjentemrstorage",dirName:g,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},f=new K.a(v);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"billing attachment"}},overlay:!0,s3State:{action:"upload",target:"billing attachment",status:"inProgress"}}),f.uploadFile(p,u).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"billing attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"billing attachment",status:"failed"}})}))}var E={query:'\n        mutation {addVisitBilling(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            billingTitle:"').concat(o,'",\n            billingType:"').concat(l,'",\n            billingDescription:"').concat(c,'",\n            billingAmount:').concat(r,",\n            billingPaid:").concat(m,',\n            billingAttachment:"').concat(t,'",\n            billingNotes:"').concat(d,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(E),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Billing add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitBilling),n.setState({isLoading:!1,selectedVisit:e.data.addVisitBilling,activityA:"addVisitBilling?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitBilling,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteBilling=function(e){console.log("...deleting Billing...",e),n.context.setUserAlert("...deleting Billing..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.type,l=e.description,c=e.amount,r=e.paid,m=e.notes,d=e.attachments,p={query:'\n        mutation {deleteVisitBilling(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            billingTitle:"').concat(s,'",\n            billingType:"').concat(o,'",\n            billingDescription:"').concat(l,'",\n            billingAmount:').concat(c,",\n            billingPaid:").concat(r,',\n            billingAttachments:"').concat(d,'",\n            billingNotes:"').concat(m,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Billing delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitBilling),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitBilling,activityA:"deleteVisitBilling?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitBilling,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/billing/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/billing/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"billing attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var u=p.replace(c,"");m.deleteFile(u,r).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding Image..."),n.context.setUserAlert("...adding Image..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.visit._id;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="visit/"+l+"/images";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),u.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var g={query:'\n        mutation {addVisitImage(\n          activityId:"'.concat(o,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            imageName:"').concat(t,'",\n            imageType:"').concat(a,'",\n            imagePath:"').concat(i,'"\n          })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Image add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitImage),n.setState({isLoading:!1,selectedVisit:e.data.addVisitImage,activityA:"addVisitImage?activityId:".concat(o,",visitId:").concat(l),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitImage,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteImage=function(e){console.log("...deleting Image...",e),n.context.setUserAlert("...deleting Image..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.name,o=e.type,l=e.path,c={query:'\n    mutation {deleteVisitImage(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        imageName:"').concat(s,'",\n        imageType:"').concat(o,'",\n        imagePath:"').concat(l,'"\n      })\n    {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Image delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitImage),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitImage,activityA:"deleteVisitImage?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitImage,n.logUserActivity({activityId:a,token:t});var l="visit/"+i+"/images",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding File..."),n.context.setUserAlert("...adding File..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.visit._id;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var c=y._currentValue.file,r=c.name,m="visit/"+l+"/files";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),u.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var g={query:'\n        mutation {addVisitFile(\n          activityId:"'.concat(o,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            fileName:"').concat(t,'",\n            fileType:"').concat(a,'",\n            filePath:"').concat(i,'"\n          })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...File add success!...";e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitFile),n.setState({isLoading:!1,selectedVisit:e.data.addVisitFile,activityA:"addVisitFile?activityId:".concat(o,",visitId:").concat(l),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitFile,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteFile=function(e){console.log("...deleting File...",e),n.context.setUserAlert("...deleting File..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.name,o=e.type,l=e.path,c={query:'\n    mutation {deleteVisitFile(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        fileName:"').concat(s,'",\n        fileType:"').concat(o,'",\n        filePath:"').concat(l,'"\n      })\n    {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...File delete success!...";s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitFile),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitFile,activityA:"deleteVisitFile?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitFile,n.logUserActivity({activityId:a,token:t});var l="visit/"+i+"/files",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new K.a(r);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddVigilanceForm=function(e){e.preventDefault(),console.log("...adding Vigilance..."),n.context.setUserAlert("...adding Vigilance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={query:'\n    mutation {addVisitVigilance(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        vigilanceChronicIllnessDiabetesMedication:').concat(e.target.vigilanceChronicIllnessDiabetesMedication.checked,",\n        vigilanceChronicIllnessDiabetesTesting:").concat(e.target.vigilanceChronicIllnessDiabetesTesting.checked,',\n        vigilanceChronicIllnessDiabetesComment:"').concat(e.target.vigilanceChronicIllnessDiabetesComment.value,'",\n        vigilanceChronicIllnessHbpMedication:').concat(e.target.vigilanceChronicIllnessHbpMedication.checked,",\n        vigilanceChronicIllnessHbpTesting:").concat(e.target.vigilanceChronicIllnessHbpTesting.checked,',\n        vigilanceChronicIllnessHbpComment:"').concat(e.target.vigilanceChronicIllnessHbpComment.value,'",\n        vigilanceChronicIllnessDyslipidemiaMedication:').concat(e.target.vigilanceChronicIllnessDyslipidemiaMedication.checked,",\n        vigilanceChronicIllnessDyslipidemiaTesting:").concat(e.target.vigilanceChronicIllnessDyslipidemiaTesting.checked,',\n        vigilanceChronicIllnessDyslipidemiaComment:"').concat(e.target.vigilanceChronicIllnessDyslipidemiaComment.value,'",\n        vigilanceChronicIllnessCadMedication:').concat(e.target.vigilanceChronicIllnessCadMedication.checked,",\n        vigilanceChronicIllnessCadTesting:").concat(e.target.vigilanceChronicIllnessCadTesting.checked,',\n        vigilanceChronicIllnessCadComment:"').concat(e.target.vigilanceChronicIllnessCadComment.value,'",\n        vigilanceLifestyleWeightMedication:').concat(e.target.vigilanceLifestyleWeightMedication.checked,",\n        vigilanceLifestyleWeightTesting:").concat(e.target.vigilanceLifestyleWeightTesting.checked,',\n        vigilanceLifestyleWeightComment:"').concat(e.target.vigilanceLifestyleWeightComment.value,'",\n        vigilanceLifestyleDietMedication:').concat(e.target.vigilanceLifestyleDietMedication.checked,",\n        vigilanceLifestyleDietTesting:").concat(e.target.vigilanceLifestyleDietTesting.checked,',\n        vigilanceLifestyleDietComment:"').concat(e.target.vigilanceLifestyleDietComment.value,'",\n        vigilanceLifestyleSmokingMedication:').concat(e.target.vigilanceLifestyleSmokingMedication.checked,",\n        vigilanceLifestyleSmokingTesting:").concat(e.target.vigilanceLifestyleSmokingTesting.checked,',\n        vigilanceLifestyleSmokingComment:"').concat(e.target.vigilanceLifestyleSmokingComment.value,'",\n        vigilanceLifestyleSubstanceAbuseMedication:').concat(e.target.vigilanceLifestyleSubstanceAbuseMedication.checked,",\n        vigilanceLifestyleSubstanceAbuseTesting:").concat(e.target.vigilanceLifestyleSubstanceAbuseTesting.checked,',\n        vigilanceLifestyleSubstanceAbuseComment:"').concat(e.target.vigilanceLifestyleSubstanceAbuseComment.value,'",\n        vigilanceLifestyleExerciseMedication:').concat(e.target.vigilanceLifestyleExerciseMedication.checked,",\n        vigilanceLifestyleExerciseTesting:").concat(e.target.vigilanceLifestyleExerciseTesting.checked,',\n        vigilanceLifestyleExerciseComment:"').concat(e.target.vigilanceLifestyleExerciseComment.value,'",\n        vigilanceLifestyleAllergiesMedication:').concat(e.target.vigilanceLifestyleAllergiesMedication.checked,",\n        vigilanceLifestyleAllergiesTesting:").concat(e.target.vigilanceLifestyleAllergiesTesting.checked,',\n        vigilanceLifestyleAllergiesComment:"').concat(e.target.vigilanceLifestyleAllergiesComment.value,'",\n        vigilanceLifestyleAsthmaMedication:').concat(e.target.vigilanceLifestyleAsthmaMedication.checked,",\n        vigilanceLifestyleAsthmaTesting:").concat(e.target.vigilanceLifestyleAsthmaTesting.checked,',\n        vigilanceLifestyleAsthmaComment:"').concat(e.target.vigilanceLifestyleAsthmaComment.value,'",\n        vigilanceScreeningBreastMedication:').concat(e.target.vigilanceScreeningBreastMedication.checked,",\n        vigilanceScreeningBreastTesting:").concat(e.target.vigilanceScreeningBreastTesting.checked,',\n        vigilanceScreeningBreastComment:"').concat(e.target.vigilanceScreeningBreastComment.value,'",\n        vigilanceScreeningProstateMedication:').concat(e.target.vigilanceScreeningProstateMedication.checked,",\n        vigilanceScreeningProstateTesting:").concat(e.target.vigilanceScreeningProstateTesting.checked,',\n        vigilanceScreeningProstateComment:"').concat(e.target.vigilanceScreeningProstateComment.value,'",\n        vigilanceScreeningCervixMedication:').concat(e.target.vigilanceScreeningCervixMedication.checked,",\n        vigilanceScreeningCervixTesting:").concat(e.target.vigilanceScreeningCervixTesting.checked,',\n        vigilanceScreeningCervixComment:"').concat(e.target.vigilanceScreeningCervixComment.value,'",\n        vigilanceScreeningColonMedication:').concat(e.target.vigilanceScreeningColonMedication.checked,",\n        vigilanceScreeningColonTesting:").concat(e.target.vigilanceScreeningColonTesting.checked,',\n        vigilanceScreeningColonComment:"').concat(e.target.vigilanceScreeningColonComment.value,'",\n        vigilanceScreeningDentalMedication:').concat(e.target.vigilanceScreeningDentalMedication.checked,",\n        vigilanceScreeningDentalTesting:").concat(e.target.vigilanceScreeningDentalTesting.checked,',\n        vigilanceScreeningDentalComment:"').concat(e.target.vigilanceScreeningDentalComment.value,'",\n        vigilanceVaccinesInfluenzaMedication:').concat(e.target.vigilanceVaccinesInfluenzaMedication.checked,",\n        vigilanceVaccinesInfluenzaTesting:").concat(e.target.vigilanceVaccinesInfluenzaTesting.checked,',\n        vigilanceVaccinesInfluenzaComment:"').concat(e.target.vigilanceVaccinesInfluenzaComment.value,'",\n        vigilanceVaccinesVaricellaMedication:').concat(e.target.vigilanceVaccinesVaricellaMedication.checked,",\n        vigilanceVaccinesVaricellaTesting:").concat(e.target.vigilanceVaccinesVaricellaTesting.checked,',\n        vigilanceVaccinesVaricellaComment:"').concat(e.target.vigilanceVaccinesVaricellaComment.value,'",\n        vigilanceVaccinesHpvMedication:').concat(e.target.vigilanceVaccinesHpvMedication.checked,",\n        vigilanceVaccinesHpvTesting:").concat(e.target.vigilanceVaccinesHpvTesting.checked,',\n        vigilanceVaccinesHpvComment:"').concat(e.target.vigilanceVaccinesHpvComment.value,'",\n        vigilanceVaccinesMmrMedication:').concat(e.target.vigilanceVaccinesMmrMedication.checked,",\n        vigilanceVaccinesMmrTesting:").concat(e.target.vigilanceVaccinesMmrTesting.checked,',\n        vigilanceVaccinesMmrComment:"').concat(e.target.vigilanceVaccinesMmrComment.value,'",\n        vigilanceVaccinesTetanusMedication:').concat(e.target.vigilanceVaccinesTetanusMedication.checked,",\n        vigilanceVaccinesTetanusTesting:").concat(e.target.vigilanceVaccinesTetanusTesting.checked,',\n        vigilanceVaccinesTetanusComment:"').concat(e.target.vigilanceVaccinesTetanusComment.value,'",\n        vigilanceVaccinesPneumovaxMedication:').concat(e.target.vigilanceVaccinesPneumovaxMedication.checked,",\n        vigilanceVaccinesPneumovaxTesting:").concat(e.target.vigilanceVaccinesPneumovaxTesting.checked,',\n        vigilanceVaccinesPneumovaxComment:"').concat(e.target.vigilanceVaccinesPneumovaxComment.value,'",\n        vigilanceVaccinesOtherName:"').concat(e.target.vigilanceVaccinesOtherName.value,'",\n        vigilanceVaccinesOtherMedication:').concat(e.target.vigilanceVaccinesOtherMedication.checked,",\n        vigilanceVaccinesOtherTesting:").concat(e.target.vigilanceVaccinesOtherTesting.checked,',\n        vigilanceVaccinesOtherComment:"').concat(e.target.vigilanceVaccinesOtherComment.value,'"\n      })\n    {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vigilance add success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.addVisitVigilance),n.setState({isLoading:!1,selectedVisit:e.data.addVisitVigilance,activityA:"addVisitVigilance?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitVigilance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteVigilance=function(e){console.log("...deleting Vigilance..."),n.context.setUserAlert("...deleting Vigilance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={query:'\n        mutation {deleteVisitVigilance(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            vigilanceChronicIllnessDiabetesMedication:').concat(e.chronicIllness.diabetes.medication,",\n            vigilanceChronicIllnessDiabetesTesting:").concat(e.chronicIllness.diabetes.testing,',\n            vigilanceChronicIllnessDiabetesComment:"').concat(e.chronicIllness.diabetes.comment,'",\n            vigilanceChronicIllnessHbpMedication:').concat(e.chronicIllness.hbp.medication,",\n            vigilanceChronicIllnessHbpTesting:").concat(e.chronicIllness.hbp.testing,',\n            vigilanceChronicIllnessHbpComment:"').concat(e.chronicIllness.hbp.comment,'",\n            vigilanceChronicIllnessDyslipidemiaMedication:').concat(e.chronicIllness.dyslipidemia.medication,",\n            vigilanceChronicIllnessDyslipidemiaTesting:").concat(e.chronicIllness.dyslipidemia.testing,',\n            vigilanceChronicIllnessDyslipidemiaComment:"').concat(e.chronicIllness.dyslipidemia.comment,'",\n            vigilanceChronicIllnessCadMedication:').concat(e.chronicIllness.cad.medication,",\n            vigilanceChronicIllnessCadTesting:").concat(e.chronicIllness.cad.testing,',\n            vigilanceChronicIllnessCadComment:"').concat(e.chronicIllness.cad.comment,'",\n            vigilanceLifestyleWeightMedication:').concat(e.lifestyle.weight.medication,",\n            vigilanceLifestyleWeightTesting:").concat(e.lifestyle.weight.testing,',\n            vigilanceLifestyleWeightComment:"').concat(e.lifestyle.weight.comment,'",\n            vigilanceLifestyleDietMedication:').concat(e.lifestyle.diet.medication,",\n            vigilanceLifestyleDietTesting:").concat(e.lifestyle.diet.testing,',\n            vigilanceLifestyleDietComment:"').concat(e.lifestyle.diet.comment,'",\n            vigilanceLifestyleSmokingMedication:').concat(e.lifestyle.smoking.medication,",\n            vigilanceLifestyleSmokingTesting:").concat(e.lifestyle.smoking.testing,',\n            vigilanceLifestyleSmokingComment:"').concat(e.lifestyle.smoking.comment,'",\n            vigilanceLifestyleSubstanceAbuseMedication:').concat(e.lifestyle.substanceAbuse.medication,",\n            vigilanceLifestyleSubstanceAbuseTesting:").concat(e.lifestyle.substanceAbuse.testing,',\n            vigilanceLifestyleSubstanceAbuseComment:"').concat(e.lifestyle.substanceAbuse.comment,'",\n            vigilanceLifestyleExerciseMedication:').concat(e.lifestyle.exercise.medication,",\n            vigilanceLifestyleExerciseTesting:").concat(e.lifestyle.exercise.testing,',\n            vigilanceLifestyleExerciseComment:"').concat(e.lifestyle.exercise.comment,'",\n            vigilanceLifestyleAllergiesMedication:').concat(e.lifestyle.allergies.medication,",\n            vigilanceLifestyleAllergiesTesting:").concat(e.lifestyle.allergies.testing,',\n            vigilanceLifestyleAllergiesComment:"').concat(e.lifestyle.allergies.comment,'",\n            vigilanceLifestyleAsthmaMedication:').concat(e.lifestyle.asthma.medication,",\n            vigilanceLifestyleAsthmaTesting:").concat(e.lifestyle.asthma.testing,',\n            vigilanceLifestyleAsthmaComment:"').concat(e.lifestyle.asthma.comment,'",\n            vigilanceScreeningBreastMedication:').concat(e.screening.breast.medication,",\n            vigilanceScreeningBreastTesting:").concat(e.screening.breast.testing,',\n            vigilanceScreeningBreastComment:"').concat(e.screening.breast.comment,'",\n            vigilanceScreeningProstateMedication:').concat(e.screening.prostate.medication,",\n            vigilanceScreeningProstateTesting:").concat(e.screening.prostate.testing,',\n            vigilanceScreeningProstateComment:"').concat(e.screening.prostate.comment,'",\n            vigilanceScreeningCervixMedication:').concat(e.screening.cervix.medication,",\n            vigilanceScreeningCervixTesting:").concat(e.screening.cervix.testing,',\n            vigilanceScreeningCervixComment:"').concat(e.screening.cervix.comment,'",\n            vigilanceScreeningColonMedication:').concat(e.screening.colon.medication,",\n            vigilanceScreeningColonTesting:").concat(e.screening.colon.testing,',\n            vigilanceScreeningColonComment:"').concat(e.screening.colon.comment,'",\n            vigilanceScreeningDentalMedication:').concat(e.screening.dental.medication,",\n            vigilanceScreeningDentalTesting:").concat(e.screening.dental.testing,',\n            vigilanceScreeningDentalComment:"').concat(e.screening.dental.comment,'",\n            vigilanceVaccinesInfluenzaMedication:').concat(e.vaccines.influenza.medication,",\n            vigilanceVaccinesInfluenzaTesting:").concat(e.vaccines.influenza.testing,',\n            vigilanceVaccinesInfluenzaComment:"').concat(e.vaccines.influenza.comment,'",\n            vigilanceVaccinesVaricellaMedication:').concat(e.vaccines.varicella.medication,",\n            vigilanceVaccinesVaricellaTesting:").concat(e.vaccines.varicella.testing,',\n            vigilanceVaccinesVaricellaComment:"').concat(e.vaccines.varicella.comment,'",\n            vigilanceVaccinesHpvMedication:').concat(e.vaccines.hpv.medication,",\n            vigilanceVaccinesHpvTesting:").concat(e.vaccines.hpv.testing,',\n            vigilanceVaccinesHpvComment:"').concat(e.vaccines.hpv.comment,'",\n            vigilanceVaccinesMmrMedication:').concat(e.vaccines.mmr.medication,",\n            vigilanceVaccinesMmrTesting:").concat(e.vaccines.mmr.testing,',\n            vigilanceVaccinesMmrComment:"').concat(e.vaccines.mmr.comment,'",\n            vigilanceVaccinesTetanusMedication:').concat(e.vaccines.tetanus.medication,",\n            vigilanceVaccinesTetanusTesting:").concat(e.vaccines.tetanus.testing,',\n            vigilanceVaccinesTetanusComment:"').concat(e.vaccines.tetanus.comment,'",\n            vigilanceVaccinesPneumovaxMedication:').concat(e.vaccines.pneumovax.medication,",\n            vigilanceVaccinesPneumovaxTesting:").concat(e.vaccines.pneumovax.testing,',\n            vigilanceVaccinesPneumovaxComment:"').concat(e.vaccines.pneumovax.comment,'",\n            vigilanceVaccinesOtherName:"').concat(e.vaccines.other.name,'",\n            vigilanceVaccinesOtherMedication:').concat(e.vaccines.other.medication,",\n            vigilanceVaccinesOtherTesting:").concat(e.vaccines.other.testing,',\n            vigilanceVaccinesOtherComment:"').concat(e.vaccines.other.comment,'"\n          })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vigilance delete success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.deleteVisitVigilance),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitVigilance,activityA:"deleteVisitFile?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.deleteVisitVigilance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddUserForm=function(e){e.preventDefault(),console.log("...adding consultant..."),n.context.setUserAlert("...adding consultant..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=e.target.user.value,s=n.props.visit._id,o=n.state.users.filter((function(e){return e._id===i}))[0].role;if("Doctor"!==o&&"Nurse"!==o)return console.log("...please choose a Doctor or Nurse to add please..."),void n.context.setUserAlert("...please choose a Doctor or Nurse to add please...");var l={query:'\n      mutation {addVisitConsultant(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...add consultant success!...";e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updateVisit(e.data.addVisitConsultant),n.setState({isLoading:!1,activityA:"addVisitConsultant?activityId:".concat(a,",visitId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteConsultant=function(e){console.log("...deleting consultant..."),n.context.setUserAlert("...deleting consultant..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=e._id,s=n.props.visit._id,o={query:'\n      mutation {deleteVisitConsultant(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...delete consultant success!...";e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updateVisit(e.data.deleteVisitConsultant),n.setState({isLoading:!1,activityA:"deleteVisitConsultant?activityId:".concat(a,",visitId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startAddAttachment=function(e){console.log("...start add attachment..."),n.setState({addAttachmentForm:!0,addAttachmentArgs:e})},n.cancelAddAttachment=function(){n.setState({addAttachmentForm:!1})},n.addAttachment=function(e){e.preventDefault(),console.log("...adding attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0,addAttachmentForm:!1});var t,a,i=n.context.token,s=n.context.activityId,o=n.props.visit._id,l=n.state.addAttachmentArgs,c=l.field;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=y._currentValue.file,m=r.name,d="visit/"+o+"/"+c+"/attachments";console.log("...file present...");var p=r.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new K.a(u);n.context.setUserAlert("...s3 uploading allergy attachment ..."),console.log("...s3 uploading allergy attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"".concat(c," attachment")}},overlay:!0,s3State:{action:"upload",target:"".concat(c," attachment"),status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"failed"}})}))}if("complaint"===c){var h=l.data.title,v=l.data.description,f=l.data.anamnesis,E=t;a={query:'\n        mutation {addVisitComplaintAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            complaintTitle:"').concat(h,'",\n            complaintDescription:"').concat(v,'",\n            complaintAnamnesis:"').concat(f,'",\n            complaintAttachment:"').concat(E,'"\n          })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("survey"===c){var b=l.data.title,x=l.data.description,A=t;a={query:'\n        mutation {addVisitSurveyAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            surveyTitle:"').concat(b,'",\n            surveyDescription:"').concat(x,'",\n            surveyAttachment:"').concat(A,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("systematicInquiry"===c){var C=l.data.title,I=l.data.description,S=t;a={query:'\n        mutation {addVisitSysInquiryAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            systematicInquiryTitle:"').concat(C,'",\n            systematicInquiryDescription:"').concat(I,'",\n            systematicInquiryAttachment:"').concat(S,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("examination"===c){var T=l.data.general,N=l.data.area,k=l.data.type,w=l.data.measure,D=l.data.value,U=l.data.description,P=l.data.followUp,L=t;a={query:'\n        mutation {addVisitExaminationAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            examinationGeneral:"').concat(T,'",\n            examinationArea:"').concat(N,'",\n            examinationType:"').concat(k,'",\n            examinationMeasure:"').concat(w,'",\n            examinationValue:"').concat(D,'",\n            examinationDescription:"').concat(U,'",\n            examinationFollowUp:').concat(P,',\n            examinationAttachment:"').concat(L,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("investigation"===c){var F=l.data.title,_=l.data.type,V=l.data.description,q=t;a={query:'\n        mutation {addVisitInvestigationAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            investigationTitle:"').concat(F,'",\n            investigationType:"').concat(_,'",\n            investigationDescription:"').concat(V,'",\n            investigationAttachment:"').concat(q,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("diagnosis"===c){var O=l.data.title,G=l.data.type,j=l.data.description,R=t;a={query:'\n        mutation {addVisitDiagnosisAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            diagnosisTitle:"').concat(O,'",\n            diagnosisType:"').concat(G,'",\n            diagnosisDescription:"').concat(j,'",\n            diagnosisAttachment:"').concat(R,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("treatment"===c){var B=l.data.type,z=l.data.title,M=l.data.description,Y=l.data.dose,J=l.data.frequency,H=t;a={query:'\n        mutation {addVisitTreatmentAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            treatmentType:"').concat(B,'",\n            treatmentTitle:"').concat(z,'",\n            treatmentDescription:"').concat(M,'",\n            treatmentDose:"').concat(Y,'",\n            treatmentFrequency:"').concat(J,'",\n            treatmentAttachment:"').concat(H,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("billing"===c){var W=l.data.amount,Q=l.data.paid,X=l.data.title,$=l.data.type,Z=l.data.description,ee=l.data.notes,te=t;a={query:'\n        mutation {addVisitBillingAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            billingTitle:"').concat(X,'",\n            billingType:"').concat($,'",\n            billingDescription:"').concat(Z,'",\n            billingAmount:').concat(W,",\n            billingPaid:").concat(Q,',\n            billingAttachment:"').concat(te,'",\n            billingNotes:"').concat(ee,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...add attachment success!...";"complaint"===c&&e.data.error&&(t=e.data.error),"survey"===c&&e.data.error&&(t=e.data.error),"systematicInquiry"===c&&e.data.error&&(t=e.data.error),"examination"===c&&e.data.error&&(t=e.data.error),"investigation"===c&&e.data.error&&(t=e.data.error),"diagnosis"===c&&e.data.error&&(t=e.data.error),"treatment"===c&&e.data.error&&(t=e.data.error),"billing"===c&&e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"complaint"===c&&(n.props.updateVisit(e.data.addVisitComplaintAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitComplaintAttachment,activityA:"addVisitComplaintAttachment?activityId:".concat(s,",visitId:").concat(o)})),"survey"===c&&(n.props.updateVisit(e.data.addVisitSurveyAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitSurveyAttachment,activityA:"addVisitSurveyAttachment?activityId:".concat(s,",visitId:").concat(o)})),"systematicInquiry"===c&&(n.props.updateVisit(e.data.addVisitSysInquiryAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitSysInquiryAttachment,activityA:"addVisitSysInquiryAttachment?activityId:".concat(s,",visitId:").concat(o)})),"examination"===c&&(n.props.updateVisit(e.data.addVisitExaminationAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitExaminationAttachment,activityA:"addVisitExaminationAttachment?activityId:".concat(s,",visitId:").concat(o)})),"investigation"===c&&(n.props.updateVisit(e.data.addVisitInvestigationAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitInvestigationAttachment,activityA:"addVisitInvestigationAttachment?activityId:".concat(s,",visitId:").concat(o)})),"diagnosis"===c&&(n.props.updateVisit(e.data.addVisitDiagnosisAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitDiagnosisAttachment,activityA:"addVisitDiagnosisAttachment?activityId:".concat(s,",visitId:").concat(o)})),"treatment"===c&&(n.props.updateVisit(e.data.addVisitTreatmentAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitTreatmentAttachment,activityA:"addVisitTreatmentAttachment?activityId:".concat(s,",visitId:").concat(o)})),"billing"===c&&(n.props.updateVisit(e.data.addVisitBillingAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitBillingAttachment,activityA:"addVisitBillingAttachment?activityId:".concat(s,",visitId:").concat(o)})),n.logUserActivity({activityId:s,token:i})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAttachment=function(e){console.log("...deleting attachment...",e.type),n.context.setUserAlert("...adding attachment...");var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.type,l=e.attachment,c=e.item;if("complaint"===o){var r=c.title,m=c.description,d=c.anamnesis,p=l;t={query:'\n        mutation {deleteVisitComplaintAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            complaintTitle:"').concat(r,'",\n            complaintDescription:"').concat(m,'",\n            complaintAnamnesis:"').concat(d,'",\n            complaintAttachment:"').concat(p,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("survey"===o){var u=c.title,g=c.description,y=l;t={query:'\n        mutation {deleteVisitSurveyAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            surveyTitle:"').concat(u,'",\n            surveyDescription:"').concat(g,'",\n            surveyAttachment:"').concat(y,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("systematicInquiry"===o){var h=c.title,v=c.description,f=l;t={query:'\n        mutation {deleteVisitSysInquiryAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            systematicInquiryTitle:"').concat(h,'",\n            systematicInquiryDescription:"').concat(v,'",\n            systematicInquiryAttachment:"').concat(f,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("examination"===o){var E=c.general,b=c.area,x=c.type,A=c.measure,C=c.value,I=c.description,S=c.followUp,T=l;t={query:'\n        mutation {deleteVisitExaminationAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            examinationGeneral:"').concat(E,'",\n            examinationArea:"').concat(b,'",\n            examinationType:"').concat(x,'",\n            examinationMeasure:"').concat(A,'",\n            examinationValue:"').concat(C,'",\n            examinationDescription:"').concat(I,'",\n            examinationFollowUp:').concat(S,',\n            examinationAttachment:"').concat(T,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("investigation"===o){var N=c.title,k=c.type,w=c.description,D=l;t={query:'\n        mutation {deleteVisitInvestigationAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            investigationTitle:"').concat(N,'",\n            investigationType:"').concat(k,'",\n            investigationDescription:"').concat(w,'",\n            investigationAttachment:"').concat(D,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("diagnosis"===o){var U=c.title,P=c.type,L=c.description,F=l;t={query:'\n        mutation {deleteVisitDiagnosisAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            diagnosisTitle:"').concat(U,'",\n            diagnosisType:"').concat(P,'",\n            diagnosisDescription:"').concat(L,'",\n            diagnosisAttachment:"').concat(F,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("treatment"===o){var _=c.type,V=c.title,q=c.description,O=c.dose,G=c.frequency,j=l;t={query:'\n        mutation {deleteVisitTreatmentAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            treatmentType:"').concat(_,'",\n            treatmentTitle:"').concat(V,'",\n            treatmentDescription:"').concat(q,'",\n            treatmentDose:"').concat(O,'",\n            treatmentFrequency:"').concat(G,'",\n            treatmentAttachment:"').concat(j,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}if("billing"===o){var R=c.title,B=c.type,z=c.description,M=c.amount,Y=c.paid,J=l,H=c.notes;t={query:'\n        mutation {deleteVisitBillingAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            billingTitle:"').concat(R,'",\n            billingType:"').concat(B,'",\n            billingDescription:"').concat(z,'",\n            billingAmount:').concat(M,",\n            billingPaid:").concat(Y,',\n            billingAttachment:"').concat(J,'",\n            billingNotes:"').concat(H,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...delete attachment success!...";"complaint"===o&&e.data.error&&(t=e.data.error),"survey"===o&&e.data.error&&(t=e.data.error),"systematicInquiry"===o&&e.data.error&&(t=e.data.error),"examination"===o&&e.data.error&&(t=e.data.error),"investigation"===o&&e.data.error&&(t=e.data.error),"diagnosis"===o&&e.data.error&&(t=e.data.error),"treatment"===o&&e.data.error&&(t=e.data.error),"billing"===o&&e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"complaint"===o&&(n.props.updateVisit(e.data.deleteVisitComplaintAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitComplaintAttachment,activityA:"deleteVisitComplaintAttachment?activityId:".concat(i,",visitId:").concat(s)})),"survey"===o&&(n.props.updateVisit(e.data.deleteVisitSurveyAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitSurveyAttachment,activityA:"deleteVisitSurveyAttachment?activityId:".concat(i,",visitId:").concat(s)})),"systematicInquiry"===o&&(n.props.updateVisit(e.data.deleteVisitSysInquiryAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitSysInquiryAttachment,activityA:"deleteVisitSysInquiryAttachment?activityId:".concat(i,",visitId:").concat(s)})),"examination"===o&&(n.props.updateVisit(e.data.deleteVisitExaminationAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitExaminationAttachment,activityA:"deleteVisitExaminationAttachment?activityId:".concat(i,",visitId:").concat(s)})),"investigation"===o&&(n.props.updateVisit(e.data.deleteVisitInvestigationAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitInvestigationAttachment,activityA:"deleteVisitInvestigationAttachment?activityId:".concat(i,",visitId:").concat(s)})),"diagnosis"===o&&(n.props.updateVisit(e.data.deleteVisitDiagnosisAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitDiagnosisAttachment,activityA:"deleteVisitDiagnosisAttachment?activityId:".concat(i,",visitId:").concat(s)})),"treatment"===o&&(n.props.updateVisit(e.data.deleteVisitTreatmentAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitTreatmentAttachment,activityA:"deleteVisitTreatmentAttachment?activityId:".concat(i,",visitId:").concat(s)})),"billing"===o&&(n.props.updateVisit(e.data.deleteVisitBillingAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitBillingAttachment,activityA:"deleteVisitBillingAttachment?activityId:".concat(i,",visitId:").concat(s)})),n.logUserActivity({activityId:i,token:a});var c="visit/"+s+"/"+o+"/attachments",r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+s+"/"+o+"/attachments/",m=l,d=m.replace(r,"");console.log("1:",c),console.log("2:",m),console.log("3:",d);var p={bucketName:"mbjentemrstorage",dirName:c,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new K.a(p);n.context.setUserAlert("...s3 deleting attachment.."),console.log("...s3 deleting attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"".concat(o," attachment")}},overlay:!0,s3State:{action:"delete",target:"".concat(o," attachment"),status:"inProgress"}}),u.deleteFile(d,p).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.target.field.value,o=e.target.query.value,l={query:'\n      mutation {updateVisitSingleField(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitSingleField),n.setState({isLoading:!1,selectedVisit:e.data.updateVisitSingleField,activityA:"updateVisitSingleField?activityId:".concat(a,",visitId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedVisit=e.data.updateVisitSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.completeVisit=function(){console.log("...completing visit..."),n.context.setUserAlert("...completing visit..."),n.setState({isLoading:!0});var e=n.context.token,t=n.context.activityId,a=n.props.visit._id,i={query:'\n      mutation {completeVisitById(\n        activityId:"'.concat(t,'",\n        visitId:"').concat(a,'"\n      )\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(i){var s="...visit completed!...";i.data.error&&(s=i.data.error),n.context.setUserAlert(s),n.props.updateVisit(i.data.completeVisitById),n.setState({isLoading:!1,selectedVisit:i.data.completeVisitById,activityA:"completeVisitById?activityId:".concat(t,",visitId:").concat(a),updateSingleField:{state:null,field:null}}),n.context.selectedVisit=i.data.completeVisitById,n.logUserActivity({activityId:t,token:e})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.propsVisit=n.props.visit,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e;console.log("...visit details component mounted..."),sessionStorage.getItem("logInfo")&&(e=JSON.parse(sessionStorage.getItem("logInfo")),this.getPocketVars(e)),"Admin"===this.context.role&&this.setState({canDelete:!0}),this.getAllUsers(e)}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n          query {getPocketVars(\n            activityId:"'.concat(n,'")}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all users retrieval success!...";e.data.error&&(s=e.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus}),i.a.createElement(E.a,{className:"detailPageContainer"},i.a.createElement(v.a,{className:"detailPageContainerRow mainRow"},i.a.createElement(f.a,{md:2,className:"detailPageContainerCol"}),i.a.createElement(f.a,{md:10,className:"detailPageContainerCol"},!this.props.visit&&i.a.createElement("h3",null,"..."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",defaultActiveKey:"1"},i.a.createElement(v.a,{className:"detailPageContainerRow mainRow2"},i.a.createElement(f.a,{md:3,className:"detailPageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column subMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"1",onClick:this.menuSelect.bind(this,"basic")},"Basic")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"2",onClick:this.menuSelect.bind(this,"admin")},"Admin")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"3",onClick:this.menuSelect.bind(this,"consultant")},"Consultants")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"4",onClick:this.menuSelect.bind(this,"complaint")},"Complaints")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"5",onClick:this.menuSelect.bind(this,"survey")},"Survey")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"6",onClick:this.menuSelect.bind(this,"systematicInquiry")},"Systematic Inquiry")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"7",onClick:this.menuSelect.bind(this,"vitals")},"Vitals")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"8",onClick:this.menuSelect.bind(this,"examination")},"Examination")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"9",onClick:this.menuSelect.bind(this,"investigation")},"investigation")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"10",onClick:this.menuSelect.bind(this,"diagnosis")},"diagnosis")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"11",onClick:this.menuSelect.bind(this,"treatment")},"treatment")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"12",onClick:this.menuSelect.bind(this,"billing")},"billing")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"13",onClick:this.menuSelect.bind(this,"vigilance")},"vigilance")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"14",onClick:this.menuSelect.bind(this,"image")},"images")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"15",onClick:this.menuSelect.bind(this,"file")},"files"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,"consultant"===this.state.menuSelect&&i.a.createElement(Ge,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"complaint"===this.state.menuSelect&&i.a.createElement(ma,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"survey"===this.state.menuSelect&&i.a.createElement(da,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"systematicInquiry"===this.state.menuSelect&&i.a.createElement(pa,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"vitals"===this.state.menuSelect&&i.a.createElement(ga,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"examination"===this.state.menuSelect&&i.a.createElement(ya,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"investigation"===this.state.menuSelect&&i.a.createElement(ha,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"diagnosis"===this.state.menuSelect&&i.a.createElement(ua,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"treatment"===this.state.menuSelect&&i.a.createElement(va,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"billing"===this.state.menuSelect&&i.a.createElement(fa,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"vigilance"===this.state.menuSelect&&i.a.createElement("h3",null,"Filter vigilance form"),"image"===this.state.menuSelect&&i.a.createElement(me,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}),"file"===this.state.menuSelect&&i.a.createElement(de,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.props.visit&&i.a.createElement(f.a,{md:9,className:"detailPageContainerCol specialCol2"},!0===this.state.updateSingleField.state&&i.a.createElement(gt,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),i.a.createElement(G.a.Content,{className:"tabContent"},i.a.createElement(G.a.Pane,{eventKey:"1"},"Visit Basic:",i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.title),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.type),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.subType),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},N.a.unix(this.props.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.time),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Patient:")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.name),i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:this.props.visit.patient._id}}},"Go!")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient._id)),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Appointment:")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.appointment.title),i.a.createElement(d.b,{to:{pathname:"/appointments",state:{appointment:this.props.visit.appointment._id}}},"Go!")),i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.appointment._id)))),i.a.createElement(G.a.Pane,{eventKey:"2"},"Visit Admin",i.a.createElement(R.a,{className:"profileBasicListGroup"},i.a.createElement(R.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit._id)))),i.a.createElement(G.a.Pane,{eventKey:"3"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Consultant List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(Lt,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement(_e,{filter:this.state.filter,authId:this.context.activityId,users:this.props.visit.consultants,visitPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant})),i.a.createElement(G.a.Pane,{eventKey:"4"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Complaint List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"complaint")},"Add")),!0===this.state.adding.state&&"complaint"===this.state.adding.field&&i.a.createElement(Ea,{onConfirm:this.submitAddComplaintForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Rt,{filter:this.state.filter,complaints:this.props.visit.complaints,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComplaint,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"5"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Survey List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"survey")},"Add")),!0===this.state.adding.state&&"survey"===this.state.adding.field&&i.a.createElement(ba,{onConfirm:this.submitAddSurveyForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(zt,{filter:this.state.filter,surveys:this.props.visit.surveys,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSurvey,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"6"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit SystematicInquiry List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"systematicInquiry")},"Add")),!0===this.state.adding.state&&"systematicInquiry"===this.state.adding.field&&i.a.createElement(xa,{onConfirm:this.submitAddSystematicInquiryForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Kt,{filter:this.state.filter,systematicInquiry:this.props.visit.systematicInquiry,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSystematicInquiry,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"7"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Vitals List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"vitals")},"Add")),!0===this.state.adding.state&&"vitals"===this.state.adding.field&&i.a.createElement(Aa,{onConfirm:this.submitAddVitalsForm,onCancel:this.cancelAdd}),i.a.createElement(Jt,{filter:this.state.filter,vitals:this.props.visit.vitals,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVitals})),i.a.createElement(G.a.Pane,{eventKey:"8"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Examination List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"examination")},"Add")),!0===this.state.adding.state&&"examination"===this.state.adding.field&&i.a.createElement(Ca,{onConfirm:this.submitAddExaminationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Wt,{filter:this.state.filter,examination:this.props.visit.examination,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteExamination,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"9"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Investigation List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"investigation")},"Add")),!0===this.state.adding.state&&"investigation"===this.state.adding.field&&i.a.createElement(Ia,{onConfirm:this.submitAddInvestigationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Xt,{filter:this.state.filter,investigation:this.props.visit.investigation,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteInvestigation,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"10"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Diagnosis List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"diagnosis")},"Add")),!0===this.state.adding.state&&"diagnosis"===this.state.adding.field&&i.a.createElement(Sa,{onConfirm:this.submitAddDiagnosisForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Zt,{filter:this.state.filter,diagnosis:this.props.visit.diagnosis,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteDiagnosis,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"11"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Treatment List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"treatment")},"Add")),!0===this.state.adding.state&&"treatment"===this.state.adding.field&&i.a.createElement(Ta,{onConfirm:this.submitAddTreatmentForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ta,{filter:this.state.filter,treatment:this.props.visit.treatment,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTreatment,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"12"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Billing List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"billing")},"Add"),i.a.createElement(b.a,{variant:"outline-primary",size:"sm",onClick:this.completeVisit},"Complete Visit")),!0===this.state.adding.state&&"billing"===this.state.adding.field&&i.a.createElement(Na,{onConfirm:this.submitAddBillingForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Et,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(na,{filter:this.state.filter,billing:this.props.visit.billing,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteBilling,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),i.a.createElement(G.a.Pane,{eventKey:"13"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Vigilance List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"vigilance")},"Add")),!0===this.state.adding.state&&"vigilance"===this.state.adding.field&&i.a.createElement(ka,{onConfirm:this.submitAddVigilanceForm,onCancel:this.cancelAdd}),i.a.createElement(sa,{filter:this.state.filter,vigilance:this.props.visit.vigilance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVigilance})),i.a.createElement(G.a.Pane,{eventKey:"14"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit Image List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ee,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(la,{filter:this.state.filter,images:this.props.visit.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage})),i.a.createElement(G.a.Pane,{eventKey:"15"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement("p",{className:"displayPaneTitle"},"Visit File List:"),i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),"Staff"!==this.context.role&&i.a.createElement(b.a,{variant:"outline-success",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(be,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(ra,{filter:this.state.filter,files:this.props.visit.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile}))))))))}}]),a}(n.Component);wa.contextType=y;var Da=wa,Ua=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(oe.a,{onSubmit:e.onConfirm},i.a.createElement(oe.a.Row,null,i.a.createElement(oe.a.Group,{as:f.a,controlId:"field"},i.a.createElement(oe.a.Label,null,"Field"),i.a.createElement(oe.a.Control,{as:"select"},i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"))),i.a.createElement(oe.a.Group,{as:f.a,controlId:"query"},i.a.createElement(oe.a.Label,null,"Query"),i.a.createElement(oe.a.Control,{type:"text",placeholder:"date format: 'YYYY-MM-DD'"}))),i.a.createElement(oe.a.Row,null,i.a.createElement(b.a,{variant:"outline-success",type:"submit",className:"filterFormBtn"},"Search"),i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:e.onCancel},"Cancel"))))},Pa=(a(184),function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,appointments:null,canDelete:!1,visits:null,searchVisits:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},menuSelected:null,adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,creatingVisit:!1,newVisit:null,calendarVisits:null,fromGoLink:null,goLinkId:null,sublistSearch:!1,tabKey:"list"},e.searchVisits=function(t){t.preventDefault(),console.log("...searching visits..."),e.context.setUserAlert("...searching visits..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=t.target.field.value,o=t.target.query.value,l=!0;"date"===s&&(l=!1),!0===l&&(a={query:'\n      query {getVisitsByFieldRegex(\n        activityId:"'.concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}),!1===l&&(a={query:'\n        query {getVisitsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(s,'",\n          query:"').concat(o,'"\n        )\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...visit search success!...";!0===l&&t.data.error&&(a=t.data.error),!1===l&&t.data.error&&(a=t.data.error),e.context.setUserAlert(a),!0===l&&e.setState({isLoading:!1,searchVisits:t.data.getVisitsByFieldRegex,activityA:"getVisitsByFieldRegex?activityId:".concat(i)}),!1===l&&e.setState({isLoading:!1,searchVisits:t.data.getVisitsByField,activityA:"getVisitsByField?activityId:".concat(i)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewVisit=function(){e.setState({creatingVisit:!0})},e.cancelCreateNewVisit=function(){e.setState({creatingVisit:!1,selectedAppointment:null})},e.submitCreateNewVisitForm=function(t){t.preventDefault(),console.log("...creating new visit..."),e.context.setUserAlert("...creating new visit..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.selectedAppointment._id,s=t.target.title.value,o=t.target.type.value,l=t.target.subType.value;if(0!==s.trim().length&&0!==o.trim().length){var c=N()().format("YYYY-MM-DD")<N.a.unix(e.state.selectedAppointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),r=N()().format("YYYY-MM-DD")>N.a.unix(e.state.selectedAppointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD");if(!0===c)return console.log("...appointment for this visit is in the future...please wait or create a new appointment..."),e.context.setUserAlert("...appointment for this visit is in the future...please wait or create a new appointment..."),void e.setState({isLoading:!1});if(!0===r)return console.log("...appointment for this visit has already gone... please create a new appointment..."),e.context.setUserAlert("...appointment for this visit has already gone... please create a new appointment..."),void e.setState({isLoading:!1});var m={query:'\n      mutation {createVisit(\n        activityId:"'.concat(n,'",\n        appointmentId:"').concat(i,'",\n        visitInput:{\n          title:"').concat(s,'",\n          type:"').concat(o,'",\n          subType:"').concat(l,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.createVisit);var i="...create visit success!...";t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,showDetails:!0,creatingVisit:!1,selectedVisit:t.data.createVisit,newVisit:t.data.createVisit,tabKey:"detail",activityA:"createAppointment?activityId:".concat(n,",visitId:").concat(t.data.createVisit._id)}),e.logUserActivity({activityId:n,token:a});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllVisits(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))}else e.context.setUserAlert("...blank fields!!!...")},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.selectAppointment=function(t){e.setState({selectedAppointment:t})},e.showDetails=function(t){e.setState({showDetails:!0,selectedVisit:t,overlay:!1,tabKey:"detail"}),e.props.selectVisit(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updateVisit=function(t){console.log("...updating selected visit..."),e.setState({selectedVisit:t}),e.props.selectVisit(t)},e.deleteVisit=function(t){console.log("...deleteing visit..."),e.context.setUserAlert("...deleteing visit..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteVisitById(\n        activityId:"'.concat(n,'",\n        visitId:"').concat(i,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete visit success!...";t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteVisitById?activityId:".concat(n,",visitId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllVisits({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.parseForCalendar=function(t){console.log("...parsing visits for calendar...");var a=t.map((function(e){return{title:e.title,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,title:e.title,type:e.type,date:N.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),time:e.time,subType:e.subType}}}));e.setState({calendarVisits:a})},e.viewCalendarEvent=function(t){console.log("...viewing calendar visit...");var a=e.state.visits.filter((function(e){return e._id===t.event.extendedProps.props._id}))[0];e.setState({overlay:!0,overlayStatus:{type:"calendarVisit",data:a}})},e.toggleOverlay=function(){e.setState({overlay:!1})},e.startSublistSearch=function(){e.setState({sublistSearch:!0})},e.cancelSublistSearch=function(){e.setState({sublistSearch:!1}),e.getAllAppointments({activityId:e.context.activityId,token:e.context.token})},e.submitSublistSearchForm=function(t){t.preventDefault(),console.log("...searching appointments..."),e.context.setUserAlert("...searching appointments..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"date"!==o&&"inProgress"!==o&&"attended"!==o&&"important"!==o&&"important"!==o||(c=!1),!0===c&&(a={query:'\n        query {getAppointmentsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),!1===c&&(a={query:'\n      query {getAppointmentsByField(\n        activityId:"'.concat(i,'",\n        field:"').concat(o,'",\n        query:"').concat(l,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...appointment search success!...";!0===c&&t.data.error&&(a=t.data.error),!1===c&&t.data.error&&(a=t.data.error),e.context.setUserAlert(a),!0===c&&e.setState({isLoading:!1,appointments:t.data.getAppointmentsByFieldRegex,activityA:"getAppointmentsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===c&&e.setState({isLoading:!1,appointments:t.data.getAppointmentsByField,activityA:"getAppointmentsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all visits component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.props.location.state&&this.props.location.state.visit&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.visit}),this.getAllVisits(e),this.getAllAppointments(e),this.props.selectedVisit&&(console.log("...found existing visit selection... loading..."),this.setState({showDetails:!0,selectedVisit:this.props.selectedVisit}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllVisits",value:function(e){var t=this;console.log("...retrieving all visits..."),this.context.setUserAlert("...retrieving all visits..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllVisits(\n        activityId:"'.concat(n,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,ps02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all visits retrieval success!...";if(e.data.error&&(i=e.data.error),!0===t.state.fromGoLink){var s=e.data.getAllVisits.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,selectedVisit:s,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(i),t.setState({isLoading:!1,visits:e.data.getAllVisits,activityA:"getAllVisits?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a}),t.parseForCalendar(e.data.getAllVisits)})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllAppointments",value:function(e){var t=this;console.log("...retrieving all appointments..."),this.context.setUserAlert("...retrieving all appointments..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllAppointments(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all appointments retrieval success!...";e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,appointments:e.data.getAllAppointments,activityA:"getAllAppointments?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all patients retrieval success!...";e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=N()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(I,{status:this.state.overlayStatus,selectCalendarDetails:this.showDetails,toggleOverlay:this.toggleOverlay}),i.a.createElement(E.a,{className:"staffPageContainer"},i.a.createElement(v.a,{className:"staffPageContainerRow headRow"},i.a.createElement(f.a,{md:9,className:"staffPageContainerCol"},i.a.createElement("h1",null,"Visit List")),i.a.createElement(f.a,{md:3,className:"staffPageContainerCol"},this.state.isLoading?i.a.createElement(x.a,{src:C.a,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(G.a.Container,{id:"left-tabs-example",activeKey:this.state.tabKey},i.a.createElement(v.a,{className:"staffPageContainerRow mainRow2"},i.a.createElement(f.a,{md:3,className:"staffPageContainerCol specialCol1"},"menu"===this.state.sideCol&&i.a.createElement(j.a,{variant:"pills",className:"flex-column mainMenu"},i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"list",onClick:this.menuSelect.bind(this,"list")},"List")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"search",onClick:this.menuSelect.bind(this,"search")},"Search")),i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"detail",onClick:this.menuSelect.bind(this,"detail")},"Details")),"Nurse"===this.context.role&&i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"new",onClick:this.menuSelect.bind(this,"new")},"New")),"Doctor"===this.context.role&&i.a.createElement(j.a.Item,null,i.a.createElement(j.a.Link,{eventKey:"new",onClick:this.menuSelect.bind(this,"new")},"New"))),"filter"===this.state.sideCol&&i.a.createElement(f.a,null,i.a.createElement(pt,{onCancel:this.toggleSideCol,onConfirm:this.submitFilterForm}))),this.state.visits&&i.a.createElement(f.a,{md:9,className:"staffPageContainerCol specialCol2"},i.a.createElement(G.a.Content,null,i.a.createElement(G.a.Pane,{eventKey:"list"},i.a.createElement(O.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},i.a.createElement(G.a,{eventKey:"1",title:"list"},i.a.createElement(v.a,{className:"displayPaneHeadRow"},i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol},"Filter"),i.a.createElement(b.a,{variant:"outline-warning",onClick:this.resetFilter},"Reset")),i.a.createElement(ct,{filter:this.state.filter,visits:this.state.visits,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteVisit})),i.a.createElement(G.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(B.a,{intitialView:"dayGridMonth",plugins:[z.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent})))),i.a.createElement(G.a.Pane,{eventKey:"search"},i.a.createElement(f.a,{className:"userSearchCol"},i.a.createElement("h3",null,"Search Visit"),i.a.createElement(v.a,{className:"userSearchRow"},i.a.createElement(Ua,{onConfirm:this.searchVisits})),i.a.createElement(v.a,null,this.state.searchVisits&&i.a.createElement(b.a,{variant:"outline-primary",onClick:this.toggleSideCol,className:"centered_btn"},"Filter")),i.a.createElement(v.a,{className:"userSearchRow results"},this.state.searchVisits&&i.a.createElement(ct,{filter:this.state.filter,visits:this.state.searchVisits,authId:this.context.activityId,showDetails:this.showDetails})))),i.a.createElement(G.a.Pane,{eventKey:"detail"},!0===this.state.showDetails&&this.state.selectedVisit&&i.a.createElement(Da,{visit:this.state.selectedVisit,updateVisit:this.updateVisit})),i.a.createElement(G.a.Pane,{eventKey:"new"},!1===this.state.creatingVisit&&i.a.createElement(b.a,{variant:"outline-secondary",className:"filterFormBtn",onClick:this.onStartCreateNewVisit},"Create New"),!0===this.state.creatingVisit&&this.state.appointments&&!this.state.selectedAppointment&&i.a.createElement(f.a,{className:"patientSubListCol"},i.a.createElement(v.a,{className:"patientSubListRow"},i.a.createElement(b.a,{variant:"outline-secondary",className:"patientSublistSearchBtn",onClick:this.startSublistSearch},"Search")),i.a.createElement(v.a,{className:"patientSubListRow"},!0===this.state.sublistSearch&&i.a.createElement(Vt,{onCancel:this.cancelSublistSearch,onConfirm:this.submitSublistSearchForm})),i.a.createElement(v.a,{className:"patientSubListRow"},i.a.createElement(_,{filter:this.state.filter,appointments:this.state.appointments,authId:this.context.activityId,onSelect:this.selectAppointment,visitPage:!0}))),!0===this.state.creatingVisit&&this.state.selectedAppointment&&i.a.createElement(v.a,null,i.a.createElement(Gt,{onConfirm:this.submitCreateNewVisitForm,onCancel:this.cancelCreateNewVisit,appointment:this.state.selectedAppointment})),this.state.newVisit&&i.a.createElement(v.a,null,i.a.createElement("h3",null,"Review New Visit ",this.state.newVisit._id)))))))))}}]),a}(n.Component));Pa.contextType=y;var La=Pa,Fa=a(123),_a=a.n(Fa),Va=function(e){Object(r.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={token:null,activityId:null,role:null,context:n.context,sessionStorageAuth:JSON.parse(sessionStorage.getItem("logInfo")),sessionCookiePresent:!1,passwordResetState:"incomplete",passwordResetMessage:"...",userAlert:null,selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null},n.login=function(e,t,a,i){console.log("...context login..."),n.setState({token:e,activityId:t,role:a,sessionStorageAuth:{token:e,activityId:t,role:a,tokenExpiration:i}}),n.sessionStorageAuth={token:e,activityId:t,role:a,tokenExpiration:i},n.context.token=e,n.context.activityId=t,n.context.role=a,n.userOnline()},n.logout=function(){n.logout2()},n.userOnline=function(){console.log("...domesticating socket client..."),n.socket.emit("msg_subscribe",{user:n.context.activityId,room:"msg"+n.context.activityId})},n.passwordReset=function(e){e.preventDefault(),console.log("...reset password submission...");var t=e.target.formGridParams.value.split("@"),a=t[1],i=t[0],s=e.target.formGridPassword.value,o={query:'\n          mutation {resetUserPassword(\n            userId:"'.concat(i,'",\n            verification:"').concat(a,'",\n            userInput:{\n              password:"').concat(s,'"\n            })\n            {_id,password,verification{verified}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("passwordReset",e),e.errors?n.setState({passwordResetState:"error",passwordResetMessage:e.errors[0].message+"..if not, try making a new reset request.."}):n.setState({passwordResetState:"complete"})})).catch((function(e){console.log(e),n.setState({passwordResetState:"error",passwordResetMessage:e})}))},n.cancelPasswordReset=function(){n.setState({passwordResetState:"cancelled"})},n.setUserAlert=function(e){n.setState({userAlert:e})},n.selectUser=function(e){console.log("...updating top-level selected user..."),n.setState({selectedUser:e})},n.selectPatient=function(e){console.log("...updating top-level selected patient..."),n.setState({selectedPatient:e})},n.selectAppointment=function(e){console.log("...updating top-level selected appointment..."),n.setState({selectedAppointment:e})},n.selectVisit=function(e){console.log("...updating top-level selected visit..."),n.setState({selectedVisit:e})},n.sessionStorageAuth=JSON.parse(sessionStorage.getItem("logInfo")),n.socket=_a()("http://localhost:9099"),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...app component mounted..."),sessionStorage.getItem("logInfo")&&null===this.state.token){console.log("...sessionStorageFound...");var e=JSON.parse(sessionStorage.getItem("logInfo"));this.login(e.token,e.activityId,e.role,e.tokenExpiration)}this.sessionStorageAuth||console.log("...noSessionStorageFound..."),this.socket.emit("unauthorizedClientConnect"),console.log("socket listening...."),this.socket.on("test",(function(e){console.log("testing...",e)}))}},{key:"componentWillUnmount",value:function(){console.log("...app component un-mounting...")}},{key:"logout2",value:function(){var e=this;console.log("...logging you out...");var t=this.context.token,a=this.context.activityId,n={query:'\n        query{logout(\n          activityId:"'.concat(a,'")\n        {_id,loggedIn}}\n      ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){e.setState({token:null,activityId:null,role:null,sessionCookiePresent:null,sessionStorageAuth:null}),e.sessionStorageAuth=null,sessionStorage.clear(),e.context={token:null,activityId:null,activityA:null,activityUser:null,role:null,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,sender:null,receiver:null,userAlert:"...",file:null,fancyDate:null,login:e.login,logout:e.logout,setUserAlert:e.setUserAlert,userOnline:e.userOnline},e.setState({userAlert:"...logout success..."})})).catch((function(t){e.setState({userAlert:t})}))}},{key:"render",value:function(){var e=this;return i.a.createElement(d.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(y.Provider,{value:{token:this.state.token,activityId:this.state.activityId,activityA:null,activityUser:null,role:this.state.role,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,sender:null,receiver:null,userAlert:"...",file:null,fancyDate:null,login:this.login,logout:this.logout,setUserAlert:this.setUserAlert,userOnline:this.userOnline}},i.a.createElement(h,{role:this.state.role}),i.a.createElement(g,{authId:this.context.activityId,alert:this.state.userAlert}),i.a.createElement("main",{className:"main-content"},i.a.createElement(p.d,null,this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"/login",to:"/home",exact:!0}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/home",render:function(e){return i.a.createElement(q,Object.assign({},e,{title:"home"}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/profile",render:function(e){return i.a.createElement(Ae,Object.assign({},e,{title:"profile"}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/staff",render:function(t){return i.a.createElement(Be,Object.assign({},t,{title:"staff",selectedUser:e.state.selectedUser,selectUser:e.selectUser}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/patients",render:function(t){return i.a.createElement(St,Object.assign({},t,{title:"patients",selectedPatient:e.state.selectedPatient,selectPatient:e.selectPatient}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/appointments",render:function(t){return i.a.createElement(Ot,Object.assign({},t,{title:"appointments",selectedAppointment:e.state.selectedAppointment,selectAppointment:e.selectAppointment}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/visits",render:function(t){return i.a.createElement(La,Object.assign({},t,{title:"visits",selectedVisit:e.state.selectedVisit,selectVisit:e.selectVisit}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"/",to:"/home",exact:!0}),this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"*",to:"/home",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/landing",render:function(e){return i.a.createElement(S,Object.assign({},e,{title:"landing"}))}}),!this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/login",render:function(e){return i.a.createElement(Ne,Object.assign({},e,{title:"login"}))}}),!this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/signup",render:function(t){return i.a.createElement(De,Object.assign({},t,{title:"signup",setUserAlert:e.setUserAlert}))}}),i.a.createElement(p.b,{path:"/passwordReset/:params",render:function(t){return i.a.createElement(Le,Object.assign({},t,{passwordReset:e.passwordReset,cancelPasswordReset:e.cancelPasswordReset,resetState:e.state.passwordResetState,message:e.state.passwordResetMessage}))}}),!this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"/home",to:"/landing",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"/",to:"/landing",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"*",to:"/landing",exact:!0}))))))}}]),a}(n.Component);Va.contextType=y;var qa=Va;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(qa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},27:function(e,t,a){},28:function(e,t,a){},32:function(e,t,a){e.exports=a.p+"static/media/loading.8631702d.gif"},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},49:function(e,t,a){},57:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.c104ff68.chunk.js.map