(this.webpackJsonpmbj_ent_emr_v2_frontend=this.webpackJsonpmbj_ent_emr_v2_frontend||[]).push([[0],{176:function(e,t,a){},178:function(e,t,a){},185:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){},231:function(e,t,a){},252:function(e,t,a){},294:function(e,t,a){},310:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},441:function(e,t,a){},445:function(e,t,a){},446:function(e,t,a){},473:function(e,t){},478:function(e,t,a){},512:function(e,t,a){},513:function(e,t,a){},515:function(e,t,a){},518:function(e,t){},52:function(e,t,a){},520:function(e,t){},53:function(e,t,a){},530:function(e,t){},532:function(e,t){},557:function(e,t){},559:function(e,t){},560:function(e,t){},565:function(e,t){},567:function(e,t){},586:function(e,t){},598:function(e,t){},601:function(e,t){},606:function(e,t,a){},639:function(e,t){},640:function(e,t){},75:function(e,t,a){},76:function(e,t,a){},771:function(e,t,a){},772:function(e,t,a){},773:function(e,t,a){},774:function(e,t,a){},775:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(77),o=a.n(s),l=(a(440),a(441),a(434)),c=a(39),r=a(40),m=a(42),d=a(41),p=a(18),g=a(61),h=(a(294),a(16)),u=a(435),y=a(11),v=a(10),f=(a(445),function(e){var t=document.getElementsByClassName("alertAlert");t.scrollTop=t.scrollHeight;null!==e.alert&&e.alert;var a=Object(n.useState)("alertBoxOpen"),s=Object(h.a)(a,2),o=s[0],l=s[1],c=function(){"alertBoxClosed"===o&&l("alertBoxOpen"),"alertBoxOpen"===o&&l("alertBoxClosed")};return i.a.createElement("div",{className:o},"alertBoxOpen"===o?i.a.createElement(y.a,{icon:v.l,className:"alertIcon",size:"2x",onClick:c}):i.a.createElement(y.a,{icon:v.m,className:"alertIcon",size:"2x",onClick:c}),i.a.createElement(u.a,{variant:"warning",className:"alertAlert"},e.alertArray.map((function(e){return i.a.createElement("p",{className:"alertBoxText"}," - ",e)}))))}),E=i.a.createContext({token:null,activityId:null,activityA:null,activityUser:null,role:null,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,userAlert:"...",userAlertArray:[],file:null,fancyDate:null,login:function(e,t,a,n){},logout:function(){},setUserAlert:function(e){},userOnline:function(){}}),b=(a(446),function(e){return i.a.createElement(E.Consumer,null,(function(e){return i.a.createElement("header",{className:"main-navigation"},i.a.createElement("div",{className:"main-navigation__logo"},i.a.createElement("h1",null,"MBJ ENT EMR V2.0.1")),i.a.createElement("nav",{className:"main-navigation__items"},i.a.createElement("ul",null,!e.token&&i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,i.a.createElement(p.c,{to:"/landing"},"Landing")),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/login"},"Login")),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/signup"},"Signup"))),e.token&&i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,i.a.createElement(p.c,{to:"/home"},"Home")),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/profile"},"Profile")),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/staff"},"Staff")),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/patients"},"Patients")),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/appointments"},"Appointments")),i.a.createElement("li",null,i.a.createElement(p.c,{to:"/visits"},"Visits")),i.a.createElement("li",null,i.a.createElement("button",{onClick:e.logout},"Logout"))))))}))}),_=a(13),A=a(4),C=a(62),N=a(163),x=a.n(N),I=a(3),T=a(67),S=a(9),w=a(15),k=a(6),U=a(12),D=a.n(U),F=a.p+"static/media/loading.f9475a3b.gif",L=(a(310),void 0),V=function(e){return i.a.createElement("div",{className:"attachmentViewerBg"},i.a.createElement("div",{className:"loadingOverlay"},i.a.createElement(_.a,{className:"overlayCloseRow"},e.toggleOverlay&&"s3"!==e.status.type&&i.a.createElement(I.a,{className:"sidebarButton",variant:"warning",onClick:e.toggleOverlay},"X")),i.a.createElement(C.a,{className:"overlayContainer"},"calendarAppointment"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},e.selectCalendarDetails&&i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(w.a,{key:"top",placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Appointment Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon centered_btn",onClick:e.selectCalendarDetails.bind(L,e.status.data)}))),e.status.goLink&&i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(p.b,{className:"centered_btn",to:{pathname:"/appointments",state:{appointment:e.status.data._id}}},i.a.createElement(w.a,{key:"top",placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Appointment Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon centered_btn"}))))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.status.data.patient.name))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Date: ",i.a.createElement("span",{className:"bold"},e.status.data.date)),i.a.createElement("p",{className:"overlayListGroupItemText"},"Time: ",i.a.createElement("span",{className:"bold"},e.status.data.time))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Location: ",i.a.createElement("span",{className:"bold"},e.status.data.location)),i.a.createElement("p",{className:"overlayListGroupItemText"},"important: ",i.a.createElement("span",{className:"bold"},!0===e.status.data.important?i.a.createElement(y.a,{icon:v.e,className:"listIcon"}):i.a.createElement(y.a,{icon:v.a,className:"listIcon"})))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"type: ",i.a.createElement("span",{className:"bold"},e.status.data.type)),i.a.createElement("p",{className:"overlayListGroupItemText"},"description: ",i.a.createElement("span",{className:"bold"},e.status.data.description)))))),"calendarVisit"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},e.selectCalendarDetails&&i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(w.a,{key:"top",placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Visit Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon centered_btn",onClick:e.selectCalendarDetails.bind(L,e.status.data)}))),e.status.goLink&&i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(p.b,{className:"centered_btn",to:{pathname:"/visits",state:{visit:e.status.data._id}}},i.a.createElement(w.a,{key:"top",placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Visit Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.status.data.patient.name))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Date: ",i.a.createElement("span",{className:"bold"},e.status.data.date)),i.a.createElement("p",{className:"overlayListGroupItemText"},"Time: ",i.a.createElement("span",{className:"bold"},e.status.data.time))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"type: ",i.a.createElement("span",{className:"bold"},e.status.data.type)))))),"calendarAttendance"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Date: ",i.a.createElement("span",{className:"bold"},e.status.data.date))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Status: ",i.a.createElement("span",{className:"bold"},e.status.data.status))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Description: ",i.a.createElement("span",{className:"bold"},e.status.data.description)))))),"calendarLeave"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Type: ",i.a.createElement("span",{className:"bold"},e.status.data.type))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"startDate: ",i.a.createElement("span",{className:"bold"},e.status.data.startDate))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"endDate: ",i.a.createElement("span",{className:"bold"},e.status.data.endDate))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Description: ",i.a.createElement("span",{className:"bold"},e.status.data.description)))))),"s3"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement(T.a,{src:F,className:"loadingGif",fluid:!0})),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,e.status.data.action," -ing ",e.status.data.target,"...")))),i.a.createElement(_.a,{className:"overlayRow"})),"dateClickAppointment"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("h5",null,"Create new Appointment for ",e.status.data," ?")),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement(I.a,{variant:"primary",type:"button",className:"loginFormBtn searchBtn",onClick:e.startCreateDateClickAppt},"Create"),i.a.createElement(I.a,{variant:"danger",type:"button",className:"loginFormBtn searchBtn",onClick:e.toggleOverlay},"Cancel"))))),"dateClickVisit"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("h5",null,"To create new Visit for ",e.status.data,", you must select a Patient!")),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement(p.b,{to:{pathname:"/patients",state:{selectPatient:""}}},i.a.createElement(I.a,{variant:"success",type:"button",className:"loginFormBtn searchBtn"},"Select Patient")),i.a.createElement(I.a,{variant:"danger",type:"button",className:"loginFormBtn searchBtn",onClick:e.toggleOverlay},"Cancel"))))),"dateClickAppointmentPatient"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("h5",null,"Create new Appointment for "),i.a.createElement("p",null,e.status.data.patient.name," ( ",e.status.data.patient._id," ) "),i.a.createElement("p",null,"on ",e.status.data.date," ?")),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement(p.b,{to:{pathname:"/appointments",state:{newAppointmentDate:{date:e.status.data.date,patient:e.status.data.patient}}}},i.a.createElement(I.a,{variant:"primary",className:"searchBtn"},"Create")),i.a.createElement(I.a,{variant:"danger",type:"button",className:"loginFormBtn searchBtn",onClick:e.toggleOverlay},"Cancel"))))))))},P=(a(312),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={role:null,userAlert:"landing page",overlay:!1,overlayStatus:"test",isGuest:!0,context:null},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus}),i.a.createElement(C.a,{className:"landingPageContainer"},i.a.createElement(_.a,{className:"landingPageRow"},i.a.createElement(A.a,{className:"landingPageCol"},i.a.createElement("h1",null," Welcome to MBJ ENT EMR")))))}}]),a}(n.Component)),B=a(5),q=(a(86),void 0),G=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(h.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.count,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Username: ",i.a.createElement("span",{className:"bold"},e.patient.username)),i.a.createElement(B.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.patient.role)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0!==e.appointmentPage&&e.showDetails&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go to Patient Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon",onClick:e.showDetails.bind(q,e.patient)})),e.homePage&&i.a.createElement(p.b,{to:{pathname:"/patients",state:{patient:e.patient._id}}},i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go to Patient Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),!0===e.appointmentPage&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add/Use Patient")))},i.a.createElement(y.a,{icon:v.o,className:"listIcon",onClick:e.onSelect.bind(q,e.patient)})),e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.patient._id))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Regno: ",i.a.createElement("span",{className:"bold"},e.patient.registration.number))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"name: ",i.a.createElement("span",{className:"bold"},e.patient.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"username: ",i.a.createElement("span",{className:"bold"},e.patient.username))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"title: ",i.a.createElement("span",{className:"bold"},e.patient.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.patient.role))),i.a.createElement("li",null,13===e.patient.dob.length&&i.a.createElement(B.a.Text,{className:"cardText"},"dob: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.patient.dob.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"))),12===e.patient.dob.length&&i.a.createElement(B.a.Text,{className:"cardText"},"dob: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.patient.dob.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"age: ",i.a.createElement("span",{className:"bold"},e.patient.age))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"gender: ",i.a.createElement("span",{className:"bold"},e.patient.gender))))),!0===r&&i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(q,e.patient)},"Delete")))))},O=(a(78),function(e){var t=Object.assign({},e.filter),a=e.patients,n=[];"patient"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"patient"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"patient"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"patient"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"patient"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"patient"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"patient"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"patient"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"patient"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"patient"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"patient"===t.field&&"registration.date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.registration.date>t.registration.date?1:-1}))),"patient"===t.field&&"registration.date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.registration.date<t.registration.date?1:-1}))),"patient"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"patient"===t.field&&"active"===t.key&&(n=a.filter((function(e){return e.active===t.value}))),"patient"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(G,{key:s,count:s,patient:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,appointmentPage:e.appointmentPage,homePage:e.homePage,onSelect:e.onSelect})}));return i.a.createElement("ul",{className:"userList"},o)}),M=(a(227),void 0),z=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(h.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title)),!e.homePage&&i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type)),!e.homePage&&12===e.appointment.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.appointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"))),!e.homePage&&13===e.appointment.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.appointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"))),e.homePage&&i.a.createElement(B.a.Text,{className:"cardText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.appointment.patient._id)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0!==e.visitPage&&e.showDetails&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Appointment Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon",onClick:e.showDetails.bind(M,e.appointment)})),e.homePage&&i.a.createElement(p.b,{to:{pathname:"/appointments",state:{appointment:e.appointment._id}}},i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Appointment Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),!0===e.visitPage&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add/Use Appointment")))},i.a.createElement(y.a,{icon:v.d,className:"listIcon",onClick:e.onSelect.bind(M,e.appointment)})),e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.appointment._id))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type))),i.a.createElement("li",null,12===e.appointment.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.appointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"))),13===e.appointment.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.appointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"time: ",i.a.createElement("span",{className:"bold"},e.appointment.time))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.appointment.patient.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"checkinTime: ",i.a.createElement("span",{className:"bold"},e.appointment.checkinTime))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"seenTime: ",i.a.createElement("span",{className:"bold"},e.appointment.seenTime))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"location: ",i.a.createElement("span",{className:"bold"},e.appointment.location))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"description: ",i.a.createElement("span",{className:"bold"},e.appointment.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"inProgress: ",i.a.createElement("span",{className:"bold"},e.appointment.inProgress.toString()))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"attended: ",i.a.createElement("span",{className:"bold"},e.appointment.attended.toString()))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"important: ",i.a.createElement("span",{className:"bold"},e.appointment.important.toString()))))),!0===r&&i.a.createElement(_.a,null,e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(M,e.appointment)},"Delete")))))},j=(a(228),function(e){var t=Object.assign({},e.filter),a=e.appointments,n=[];"appointment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"appointment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.location>t.location?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.location<t.location?1:-1}))),"appointment"===t.field&&"important"===t.key&&(n=a.filter((function(e){return e.important===t.value}))),"appointment"===t.field&&"inProgress"===t.key&&(n=a.filter((function(e){return e.inProgress===t.value}))),"appointment"===t.field&&"attended"===t.key&&(n=a.filter((function(e){return e.attended===t.value}))),"appointment"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t),i.a.createElement(z,{key:s,appointment:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,visitPage:e.visitPage,homePage:e.homePage,onSelect:e.onSelect})}));return i.a.createElement("ul",{className:"userList"},o)}),R=(a(313),void 0),Y=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(h.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Number: ",e.queueSlot.number),i.a.createElement(B.a.Text,{className:"cardText"},"Patient: ",e.queueSlot.patient.name),i.a.createElement(p.b,{to:{pathname:"/patients",state:{patient:e.queueSlot.patient._id}}},i.a.createElement(w.a,{key:"left",placement:"left",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("left")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go to Patient Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),i.a.createElement(B.a.Text,{className:"cardText"},"Seen: ",!0===e.queueSlot.seen?i.a.createElement(y.a,{icon:v.e,className:"listIcon"}):i.a.createElement(y.a,{icon:v.a,className:"listIcon"})),i.a.createElement(w.a,{key:"bottom",placement:"bottom",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("bottom")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,!0!==e.queueSlot.seen&&i.a.createElement(I.a,{variant:"outline-success",onClick:e.slotSeen.bind(R,e.queueSlot)},"Seen"),!0===e.queueSlot.seen&&i.a.createElement(I.a,{variant:"outline-success",onClick:e.slotUnseen.bind(R,e.queueSlot)},"Un-See"),i.a.createElement("li",null),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Time: ",e.queueSlot.time)),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Consultant: ",e.queueSlot.consultant.username),i.a.createElement(p.b,{to:{pathname:"/staff",state:{user:e.queueSlot.consultant._id}}},i.a.createElement(w.a,{key:"bottom",placement:"bottom",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("bottom")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Consultant Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"})))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Seen: ",!0===e.queueSlot.seen?i.a.createElement(y.a,{icon:v.e,className:"listIcon"}):i.a.createElement(y.a,{icon:v.a,className:"listIcon"}))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"SeenTime:"),e.queueSlot.seenTime&&i.a.createElement(B.a.Text,{className:"cardText"},e.queueSlot.seenTime)),i.a.createElement("li",null,i.a.createElement(w.a,{key:"right",placement:"right",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("right")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}}))),!0===r&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(R,e.queueSlot)},"Delete"))))))))},H=(a(478),function(e){var t=0,a=e.queueSlots.map((function(a){return t=e.queueSlots.indexOf(a)+1,i.a.createElement(Y,{key:t,queueSlot:a,onDelete:e.onDelete,canDelete:e.canDelete,slotSeen:e.slotSeen,slotUnseen:e.slotUnseen})}));return i.a.createElement("ul",{className:"userList"},a)}),K=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2);a[0],a[1];return i.a.createElement("div",{className:"itemDiv"},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",D.a.unix(e.queue.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(B.a.Text,{className:"cardText"},"Creator: ",e.queue.creator.username),i.a.createElement(H,{queueSlots:e.queue.slots,slotSeen:e.slotSeen,slotUnseen:e.slotUnseen,onDelete:e.onDelete}))))},J=a(2),Q=(a(176),function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Field"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"lastName"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"registration.date"),i.a.createElement("option",null,"registration.number"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"expiryDate"),i.a.createElement("option",null,"referral.date"),i.a.createElement("option",null,"referral.reason"),i.a.createElement("option",null,"referral.physician.name"),i.a.createElement("option",null,"referral.physician.email"),i.a.createElement("option",null,"referral.physician.phone"),i.a.createElement("option",null,"attendingPhysician"),i.a.createElement("option",null,"occupation.role"),i.a.createElement("option",null,"occupation.employer.name"),i.a.createElement("option",null,"occupation.employer.phone"),i.a.createElement("option",null,"occupation.employer.email"),i.a.createElement("option",null,"insurance.company"),i.a.createElement("option",null,"insurance.policyNumber"),i.a.createElement("option",null,"insurance.description"),i.a.createElement("option",null,"insurance.expiryDate"),i.a.createElement("option",null,"insurance.subscriber.company"),i.a.createElement("option",null,"insurance.subscriber.description"),i.a.createElement("option",null,"nextOfKin.name"),i.a.createElement("option",null,"nextOfKin.relation"),i.a.createElement("option",null,"nextOfKin.contact.email"),i.a.createElement("option",null,"nextOfKin.contact.phone"),i.a.createElement("option",null,"nextOfKin.contact.phone2"),i.a.createElement("option",null,"nextOfKin.highlighted"),i.a.createElement("option",null,"allergies.type"),i.a.createElement("option",null,"allergies.title"),i.a.createElement("option",null,"allergies.description"),i.a.createElement("option",null,"allergies.attachments"),i.a.createElement("option",null,"allergies.highlighted"),i.a.createElement("option",null,"medication.title"),i.a.createElement("option",null,"medication.type"),i.a.createElement("option",null,"medication.description"),i.a.createElement("option",null,"medication.attachments"),i.a.createElement("option",null,"medication.highlighted"),i.a.createElement("option",null,"images.name"),i.a.createElement("option",null,"images.type"),i.a.createElement("option",null,"images.path"),i.a.createElement("option",null,"images.highlighted"),i.a.createElement("option",null,"files.name"),i.a.createElement("option",null,"files.type"),i.a.createElement("option",null,"files.path"),i.a.createElement("option",null,"files.highlighted"),i.a.createElement("option",null,"notes"),i.a.createElement("option",null,"tags"),i.a.createElement("option",null,"loggedIn")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Query"),i.a.createElement(J.a.Control,{type:"text",placeholder:"YYYY-MM-DD"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Search"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))}),W=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Field"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"registrationNumber"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"loggedIn"),i.a.createElement("option",null,"clientConnected"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"attendance.date"),i.a.createElement("option",null,"attendance.status"),i.a.createElement("option",null,"attendance.description"),i.a.createElement("option",null,"attendance.highlighted"),i.a.createElement("option",null,"leave.type"),i.a.createElement("option",null,"leave.startDate"),i.a.createElement("option",null,"leave.endDate"),i.a.createElement("option",null,"leave.description"),i.a.createElement("option",null,"leave.highlighted"),i.a.createElement("option",null,"images.name"),i.a.createElement("option",null,"images.type"),i.a.createElement("option",null,"images.path"),i.a.createElement("option",null,"images.highlighted"),i.a.createElement("option",null,"files.name"),i.a.createElement("option",null,"files.type"),i.a.createElement("option",null,"files.path"),i.a.createElement("option",null,"files.highlighted"),i.a.createElement("option",null,"notes")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Query"),i.a.createElement(J.a.Control,{type:"text",placeholder:"YYYY-MM-DD"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Search"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},X=(a(98),void 0),Z=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(h.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.count,className:"userItemLi"},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Username: ",i.a.createElement("span",{className:"bold"},e.user.username)),i.a.createElement(B.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.user.role)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!e.appointmentPage&&!e.visitPage&&e.showDetails&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Staff Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon",onClick:e.showDetails.bind(X,e.user)})),e.appointmentPage&&i.a.createElement(p.b,{to:{pathname:"/staff",state:{user:e.user._id}}},i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Staff Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),e.visitPage&&i.a.createElement(p.b,{to:{pathname:"/staff",state:{user:e.user._id}}},i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go To Staff Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),e.selectUser&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Select/Add User")))},i.a.createElement(y.a,{icon:v.o,className:"listIcon",onClick:e.selectUser.bind(X,e.user)})),e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.user._id))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"name: ",i.a.createElement("span",{className:"bold"},e.user.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"username: ",i.a.createElement("span",{className:"bold"},e.user.username))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"title: ",i.a.createElement("span",{className:"bold"},e.user.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.user.role))),i.a.createElement("li",null,12===e.user.dob.length&&i.a.createElement(B.a.Text,{className:"cardText"},"dob: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.user.dob.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"))),13===e.user.dob.length&&i.a.createElement(B.a.Text,{className:"cardText"},"dob: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.user.dob.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"age: ",i.a.createElement("span",{className:"bold"},e.user.age))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"gender: ",i.a.createElement("span",{className:"bold"},e.user.gender))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"loggedIn: ",i.a.createElement("span",{className:"bold"},!0===e.user.loggedIn&&i.a.createElement(y.a,{icon:v.c,className:"listIcon"})," ",!1===e.user.loggedIn&&i.a.createElement(y.a,{icon:v.b,className:"listIcon"})))))),!0===r&&i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(X,e.user)},"Delete")))))},$=(a(87),function(e){var t=Object.assign({},e.filter),a=e.users,n=[];"staff"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"staff"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"staff"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"staff"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"staff"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"staff"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"staff"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"staff"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"staff"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"staff"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"staff"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"staff"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Z,{count:s,user:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,appointmentPage:e.appointmentPage,homePage:e.homePage,visitPage:e.visitPage,selectUser:e.selectUser})}));return i.a.createElement("ul",{className:"userList"},o)}),ee=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={role:null,userAlert:"landing",overlay:!1,overlayStatus:"test",isGuest:!0,context:null,isLoading:!1,seshStore:null,filter:{field:null,key:null,value:null},todayAppointments:null,queue:null,weekImportantAppointments:null,recentPatients:null,queueToday:null,addingQueueSlot:!1,queueSlotAddStage:null,users:null,patients:null,selectedUser:null,selectedPatient:null,sublistPatientSearch:!1,sublistUserSearch:!1},e.loadHome=function(){var t={token:e.context.token,activityId:e.context.activityId};e.getAppointmentsToday(t),e.getAppointmentsImportantWeek(t),e.getRecentPatients(t),e.getQueueToday(t),e.getAllPatients(t),e.getAllUsers(t)},e.getAppointmentsToday=function(t){console.log("...retrieving todays appointments..."),e.context.setUserAlert("...retrieving todays appointments..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getAppointmentsToday(\n        activityId:"'.concat(n,'")\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...get todays appointments success!...");var a="...get todays appointments success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,todayAppointments:t.data.getAppointmentsToday})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.getAppointmentsImportantWeek=function(t){console.log("...retrieving important appointments for week..."),e.context.setUserAlert("...retrieving important appointments for week..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getAppointmentsImportantNextWeek(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...get week important appointments success!...");var a="...get week important appointments success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,weekImportantAppointments:t.data.getAppointmentsImportantNextWeek})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.getRecentPatients=function(t){console.log("...retrieving recent patients..."),e.context.setUserAlert("...retrieving recent patients..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getRecentPatients(\n        activityId:"'.concat(n,'",\n        amount:7\n      )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...retrieve recent patients success!...");var a="...retrieve recent patients success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,recentPatients:t.data.getRecentPatients})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.getQueueToday=function(t){console.log("...retrieving todays queue..."),e.context.setUserAlert("...retrieving todays queue..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getQueueToday(\n        activityId:"'.concat(n,'"\n      )\n      {_id,date,currentSlot,slots{number,time,patient{_id,username,name},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...retrieve recent patients success!...");var a="...retrieve recent patients success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.getQueueToday})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleOverlay=function(){e.setState({overlay:!1})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.startAddQueueSlot=function(){e.setState({addingQueueSlot:!0,queueSlotAddStage:1})},e.cancelAddQueueSlot=function(){e.setState({addingQueueSlot:!1,queueSlotAddStage:null})},e.createQueue=function(){console.log("...creating new queue..."),e.context.setUserAlert("...creating new queue..."),e.setState({isLoading:!0});var t=e.context.token,a=e.context.activityId,n={query:'\n      mutation {createQueue(\n        activityId:"'.concat(a,'"\n      )\n        {_id,date,currentSlot,slots{number,time,patient{_id,username},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...create queue success!...");var a="...create queue success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.createQueue})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.submitQueueSlotAddPatient=function(t){var a=e.state.queueToday.slots.map((function(e){return e.patient._id})),n=a.includes(t._id);console.log("1:",t),console.log("2:",a),console.log("3:",n),!0===n?(console.log("...this patient is already in the queue!..."),e.context.setUserAlert("...this patient is already in the queue!...")):e.setState({selectPatient:t,queueSlotAddStage:2})},e.submitQueueSlotAddConsultant=function(t){console.log("...creating new queue..."),e.context.setUserAlert("...creating new queue..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.queueToday._id,s=e.state.selectPatient._id,o=t._id;if("Nurse"!==t.role&&"Doctor"!==t.role)return console.log("...please choose a nurse or doctor..."),e.context.setUserAlert("...please choose a nurse or doctor..."),void e.setState({isLoading:!1});var l={query:'\n      mutation {addQueueSlot(\n        activityId:"'.concat(n,'",\n        queueId:"').concat(i,'",\n        patientId:"').concat(s,'",\n        consultantId:"').concat(o,'"\n      )\n      {_id,date,slots{number,time,patient{_id,username,name,lastName},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...add queue slot success!...");var a="...add queue slot success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.addQueueSlot,addingQueueSlot:!1,queueSlotAddStage:null})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.queueSlotSeen=function(t){console.log("...updating queue slot..."),e.context.setUserAlert("...updating queue slot..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.queueToday._id,s=t.number,o={query:'\n      mutation {queueSlotSeen(\n        activityId:"'.concat(n,'",\n        queueId:"').concat(i,'",\n        queueInput:{\n          slotNumber:').concat(s,"\n        })\n        {_id,date,slots{number,time,patient{_id,username,name,lastName},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...update queue slot seen success!...");var a="...update queue slot seen success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.queueSlotSeen})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.queueSlotUnseen=function(t){console.log("...updating queue slot..."),e.context.setUserAlert("...updating queue slot..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.queueToday._id,s=t.number,o={query:'\n      mutation {queueSlotUnseen(\n        activityId:"'.concat(n,'",\n        queueId:"').concat(i,'",\n        queueInput:{\n          slotNumber:').concat(s,"\n        })\n        {_id,date,slots{number,time,patient{_id,username,name,lastName},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...update queue slot unseen success!...");var a="...update queue slot unseen success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.queueSlotUnseen})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteQueSlot=function(t){console.log("...deleting queue slot..."),e.context.setUserAlert("...deleting queue slot..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.queueToday._id,s=t.number,o={query:'\n      mutation {deleteQueueSlot(\n        activityId:"'.concat(n,'",\n        queueId:"').concat(i,'",\n        queueInput:{\n          slotNumber:').concat(s,"\n        })\n        {_id,date,slots{number,time,patient{_id,username,name,lastName},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...delete queue slot success!...");var a="...delete queue slot success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.deleteQueueSlot})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.startPatientSearch=function(){e.setState({sublistPatientSearch:!0})},e.cancelSublistPatientSearch=function(){e.setState({sublistPatientSearch:!1}),e.getAllPatients({activityId:e.context.activityId,token:e.context.token})},e.submitSublistPatientSearchForm=function(t){t.preventDefault(),console.log("...searching patients..."),e.context.setUserAlert("...searching patients..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"active"!==o&&"age"!==o&&"dob"!==o&&"addresses.number"!==o&&"addresses.primary"!==o&&"loggedIn"!==o&&"clientConnected"!==o&&"verification.verified"!==o&&"registration.date"!==o&&"expiryDate"!==o&&"referral.date"!==o&&"insurance.expiryDate"!==o&&"insurance.expiryDate"!==o||(c=!1),!0===c&&(a={query:'\n        query {getPatientsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),!1===c&&(a={query:'\n        query {getPatientsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...patient search success!...";!0===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===c&&e.setState({isLoading:!1,patients:t.data.getPatientsByFieldRegex,activityA:"getPatientsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===c&&e.setState({isLoading:!1,patients:t.data.getPatientsByField,activityA:"getPatientsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.startUserSearch=function(){e.setState({sublistUserSearch:!0})},e.cancelSublistUserSearch=function(){e.setState({sublistUserSearch:!1}),e.getAllUsers({activityId:e.context.activityId,token:e.context.token})},e.submitSublistUserSearchForm=function(t){t.preventDefault(),console.log("...searching users..."),e.context.setUserAlert("...searching users..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"age"!==o&&"dob"!==o&&"employmentDate"!==o&&"addresses.number"!==o&&"addresses.primary"!==o&&"loggedIn"!==o&&"clientConnected"!==o&&"verification.verified"!==o&&"attendance.date"!==o&&"leave.startDate"!==o&&"leave.endDate"!==o||(c=!1),console.log("regex",c),!0===c&&(a={query:'\n        query {getUsersByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n      ')}),!1===c&&(a={query:'\n        query {getUsersByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...staff search success!...";!0===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===c&&(e.setState({isLoading:!1,users:t.data.getUsersByFieldRegex,activityA:"getUsersByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByFieldRegex),!1===c&&(e.setState({isLoading:!1,users:t.data.getUsersByField,activityA:"getUsersByField?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByField),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.selectPatient=function(t){console.log("...selecting..."),e.setState({selectedPatient:t})},e.selectUser=function(t){console.log("...selecting..."),e.setState({selectedUser:t})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...home component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getAppointmentsToday(e),this.getAppointmentsImportantWeek(e),this.getRecentPatients(e),this.getQueueToday(e),this.getAllPatients(e),this.getAllUsers(e)}}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var a="...all patients retrieval success!...";e.errors&&(a=e.errors[0].message),e.data.error&&(a=e.data.error),t.context.setUserAlert(a),t.setState({isLoading:!1,patients:e.data.getAllPatients})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...all users retrieval success!...");var a="...all users retrieval success!...";e.errors&&(a=e.errors[0].message),e.data.error&&(a=e.data.error),t.context.setUserAlert(a),t.setState({isLoading:!1,users:e.data.getAllUsers})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),i.a.createElement(C.a,{className:"landingPageContainer"},i.a.createElement(_.a,{className:"landingPageTopRow"},i.a.createElement(I.a,{variant:"secondary",size:"lg",onClick:this.loadHome},"Refresh"),this.state.isLoading?i.a.createElement(T.a,{src:F,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,".")),i.a.createElement(_.a,{className:"landingPageRow"},i.a.createElement(A.a,{md:6,className:"landingPageCol"},i.a.createElement("h3",null,"Todays appts"),this.state.todayAppointments&&i.a.createElement(j,{filter:this.state.filter,appointments:this.state.todayAppointments,authId:this.context.activityId,homePage:!0})),i.a.createElement(A.a,{md:6,className:"landingPageCol"},i.a.createElement("h3",null,"Queue"),!this.state.queueToday&&i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{variant:"secondary",onClick:this.createQueue},"New")),this.state.queueToday&&i.a.createElement(i.a.Fragment,null,!0!==this.state.addingQueueSlot&&i.a.createElement(w.a,{key:"right",placement:"right",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("right")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Patient to Queue")))},i.a.createElement(y.a,{icon:v.o,className:"listIcon",onClick:this.startAddQueueSlot})),!0===this.state.addingQueueSlot&&i.a.createElement(I.a,{variant:"danger",onClick:this.cancelAddQueueSlot},"Cancel"),!0===this.state.addingQueueSlot&&1===this.state.queueSlotAddStage&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Adding Queue Slot: Patient"),i.a.createElement(I.a,{variant:"primary",onClick:this.startPatientSearch},"Search"),i.a.createElement(_.a,{className:"patientSubListRow"},!0===this.state.sublistPatientSearch&&i.a.createElement(Q,{onCancel:this.cancelSublistPatientSearch,onConfirm:this.submitSublistPatientSearchForm})),i.a.createElement(_.a,{className:"patientSubListRow"},i.a.createElement(O,{filter:this.state.filter,patients:this.state.patients,authId:this.context.activityId,onSelect:this.submitQueueSlotAddPatient,appointmentPage:!0}))),!0===this.state.addingQueueSlot&&2===this.state.queueSlotAddStage&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Adding Queue Slot: Consultant"),i.a.createElement(I.a,{variant:"primary",onClick:this.startUserSearch},"Search"),i.a.createElement(_.a,{className:"patientSubListRow"},!0===this.state.sublistUserSearch&&i.a.createElement(W,{onCancel:this.cancelSublistUserSearch,onConfirm:this.submitSublistUserSearchForm})),i.a.createElement(_.a,{className:"patientSubListRow"},i.a.createElement($,{filter:this.state.filter,users:this.state.users,authId:this.context.activityId,selectUser:this.submitQueueSlotAddConsultant,homePage:!0}))),i.a.createElement(K,{queue:this.state.queueToday,slotSeen:this.queueSlotSeen,slotUnseen:this.queueSlotUnseen,onDelete:this.deleteQueSlot})))),i.a.createElement(_.a,{className:"landingPageRow"},i.a.createElement(A.a,{md:5,className:"landingPageCol"},i.a.createElement("h3",null,"Week's important"),this.state.weekImportantAppointments&&i.a.createElement(j,{filter:this.state.filter,appointments:this.state.weekImportantAppointments,authId:this.context.activityId,homePage:!0})),i.a.createElement(A.a,{md:4,className:"landingPageCol"},i.a.createElement("h3",null,"Recent patients"),this.state.recentPatients&&i.a.createElement(O,{filter:this.state.filter,patients:this.state.recentPatients,authId:this.context.activityId,homePage:!0})),i.a.createElement(A.a,{md:3,className:"landingPageCol"},i.a.createElement("h3",null,"more stats")))))}}]),a}(n.Component);ee.contextType=E;var te=ee,ae=a(68),ne=a(50),ie=a(30),se=a(47),oe=a(48),le=a(49),ce=a(162),re=(a(178),a(33)),me=a.n(re),de=function(e){return i.a.createElement("div",{className:"attachmentViewerBg2"},i.a.createElement("div",{className:"loadingOverlay2"},i.a.createElement(_.a,{className:"overlayCloseRow2"},i.a.createElement(I.a,{className:"sidebarButton",variant:"warning",onClick:e.toggleOverlay2},"X")),i.a.createElement(T.a,{src:F,className:"overlayLoadingGif",fluid:!0})))},pe=void 0,ge=function(e){var t;t=!1===e.address.primary?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.count,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Town: ",i.a.createElement("span",{className:"bold"},e.address.town)),i.a.createElement(B.a.Text,{className:"cardText"},"Country: ",i.a.createElement("span",{className:"bold"},e.address.country)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(pe,{field:"address",data:e.address})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"No: ",i.a.createElement("span",{className:"bold"},e.address.number))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Street: ",i.a.createElement("span",{className:"bold"},e.address.street))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Town: ",i.a.createElement("span",{className:"bold"},e.address.town))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"City: ",i.a.createElement("span",{className:"bold"},e.address.city))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Parish: ",i.a.createElement("span",{className:"bold"},e.address.parish))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Country: ",i.a.createElement("span",{className:"bold"},e.address.country))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Postal Code: ",i.a.createElement("span",{className:"bold"},e.address.postalCode))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Primary: ",i.a.createElement("span",{className:"bold"}," ",!0===e.address.primary&&i.a.createElement(y.a,{icon:v.e,className:"listIcon"})," ",!1===e.address.primary&&i.a.createElement(y.a,{icon:v.a,className:"listIcon"})))),e.makePrimary&&i.a.createElement("li",null,i.a.createElement(I.a,{variant:"outline-primary",onClick:e.makePrimary.bind(pe,e.address)},"Set Primary")),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(pe,e.address)},"Delete"))))))))},he=function(e){var t=Object.assign({},e.filter),a=e.addresses,n=[];"address"===t.field&&"number"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.number>t.number?1:-1}))),"address"===t.field&&"number"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.number<t.number?1:-1}))),"address"===t.field&&"street"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.street>t.street?1:-1}))),"address"===t.field&&"street"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.street<t.street?1:-1}))),"address"===t.field&&"town"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.town>t.town?1:-1}))),"address"===t.field&&"town"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.town<t.town?1:-1}))),"address"===t.field&&"city"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.city>t.city?1:-1}))),"address"===t.field&&"city"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.city<t.city?1:-1}))),"address"===t.field&&"parish"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.parish>t.parish?1:-1}))),"address"===t.field&&"parish"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.parish<t.parish?1:-1}))),"address"===t.field&&"country"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.country>t.country?1:-1}))),"address"===t.field&&"country"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.country<t.country?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.postalCode>t.postalCode?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.postalCode<t.postalCode?1:-1}))),"address"===t.field&&"primary"===t.key&&(n=a.filter((function(e){return e.primary===t.value}))),"address"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ge,{key:s,address:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"addressList"},o)},ue=void 0,ye=function(e){var t;t=!1===e.attendance.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},12===e.attendance.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.attendance.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.attendance.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.attendance.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(B.a.Text,{className:"cardText"},"Status: ",i.a.createElement("span",{className:"bold"},e.attendance.status)),i.a.createElement(w.a,{placement:"right",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("right")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleStaffAttendanceHighlighted.bind(ue,e.attendance)})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,12===e.attendance.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.attendance.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.attendance.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.attendance.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Status: ",i.a.createElement("span",{className:"bold"},e.attendance.status))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.attendance.description))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"right",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("right")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(ue,e.attendance)},"Delete"))))))))},ve=function(e){var t=Object.assign({},e.filter),a=e.attendance,n=[];"attendance"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.status>t.status?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.status<t.status?1:-1}))),"attendance"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"attendance"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ye,{key:s,attendance:t,canDelete:e.canDelete,onDelete:e.onDelete,toggleStaffAttendanceHighlighted:e.toggleStaffAttendanceHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"attendanceList"},o)},fe=void 0,Ee=function(e){var t;t=!1===e.leave.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},12===e.leave.startDate.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Start: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.leave.startDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.leave.startDate.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Start: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.leave.startDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),12===e.leave.endDate.length&&i.a.createElement(B.a.Text,{className:"cardText"},"End: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.leave.endDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.leave.endDate.length&&i.a.createElement(B.a.Text,{className:"cardText"},"End: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.leave.endDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleStaffLeaveHighlighted.bind(fe,e.leave)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(fe,{field:"leave",data:e.leave})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.leave.type))),i.a.createElement("li",null,12===e.leave.startDate.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Start: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.leave.startDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.leave.startDate.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Start: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.leave.startDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,12===e.leave.endDate.length&&i.a.createElement(B.a.Text,{className:"cardText"},"End: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.leave.endDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.leave.endDate.length&&i.a.createElement(B.a.Text,{className:"cardText"},"End: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.leave.endDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.leave.description))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(fe,e.leave)},"Delete"))))))))},be=function(e){var t=Object.assign({},e.filter),a=e.leave,n=[];"leave"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"leave"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"leave"===t.field&&"startDate"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.startDate>t.startDate?1:-1}))),"leave"===t.field&&"startDate"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.startDate<t.startDate?1:-1}))),"leave"===t.field&&"endDate"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.endDate>t.endDate?1:-1}))),"leave"===t.field&&"endDate"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.endDate<t.endDate?1:-1}))),"leave"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"leave"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ee,{key:s,leave:t,canDelete:e.canDelete,onDelete:e.onDelete,toggleStaffLeaveHighlighted:e.toggleStaffLeaveHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"leaveList"},o)},_e=void 0,Ae=function(e){var t;t=!1===e.image.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},i.a.createElement("img",{src:e.image.path,className:"imgPreview"}),i.a.createElement("a",{href:e.image.path,target:"_blank",rel:"noopener noreferrer"},e.image.name)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleStaffImageHighlighted.bind(_e,e.image)})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(_e,e.image)},"Delete"))))))))},Ce=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"image"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ae,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete,toggleStaffImageHighlighted:e.toggleStaffImageHighlighted})}));return i.a.createElement("ul",{className:"imageList"},o)},Ne=void 0,xe=function(e){var t;t=!1===e.file.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},i.a.createElement("a",{href:e.file.path,target:"_blank",rel:"noopener noreferrer"},e.file.name)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleStaffFileHighlighted.bind(Ne,e.file)})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.file.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.file.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.file.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Ne,e.file)},"Delete"))))))))},Ie=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"file"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(xe,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete,toggleStaffFileHighlighted:e.toggleStaffFileHighlighted})}));return i.a.createElement("ul",{className:"fileList"},o)},Te=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title)),i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type)),12===e.appointment.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.appointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"))),13===e.appointment.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.appointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),i.a.createElement(p.b,{to:{pathname:"/appointments",state:{appointment:e.appointment._id}}},i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go to Appointment Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.appointment._id))),i.a.createElement("li",null,12===e.appointment.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.appointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"))),13===e.appointment.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.appointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"time: ",i.a.createElement("span",{className:"bold"},e.appointment.time))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"checkinTime: ",i.a.createElement("span",{className:"bold"},e.appointment.checkinTime))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"seenTime: ",i.a.createElement("span",{className:"bold"},e.appointment.seenTime))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"location: ",i.a.createElement("span",{className:"bold"},e.appointment.location))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"description: ",i.a.createElement("span",{className:"bold"},e.appointment.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"inProgress: ",i.a.createElement("span",{className:"bold"},e.appointment.inProgress.toString()))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"attended: ",i.a.createElement("span",{className:"bold"},e.appointment.attended.toString()))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"important: ",i.a.createElement("span",{className:"bold"},e.appointment.important.toString()))))))))},Se=function(e){var t=Object.assign({},e.filter),a=e.appointments,n=[];"appointment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"appointment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.location>t.location?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.location<t.location?1:-1}))),"appointment"===t.field&&"important"===t.key&&(n=a.filter((function(e){return e.important===t.value}))),"appointment"===t.field&&"inProgress"===t.key&&(n=a.filter((function(e){return e.inProgress===t.value}))),"appointment"===t.field&&"attended"===t.key&&(n=a.filter((function(e){return e.attended===t.value}))),"appointment"!==t.field&&(n=a);var s=0,o=n.map((function(e){return s=n.indexOf(e)+1,i.a.createElement(Te,{key:s,appointment:e})}));return i.a.createElement("ul",{className:"appointmentList"},o)},we=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},12===e.visit.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.visit.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.visit.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(B.a.Text,{className:"cardText"},"Time: ",i.a.createElement("span",{className:"bold"},e.visit.time)),i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.visit.title)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),i.a.createElement(p.b,{to:{pathname:"/visits",state:{visit:e.visit._id}}},i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go to Visit Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Id: ",i.a.createElement("span",{className:"bold"},e.visit._id))),i.a.createElement("li",null,12===e.visit.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.visit.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.visit.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"type: ",i.a.createElement("span",{className:"bold"},e.visit.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"subType: ",i.a.createElement("span",{className:"bold"},e.visit.subType))),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Patient:")),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Id: ",i.a.createElement("span",{className:"bold"},e.visit.patient._id))),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.visit.patient.name))))))))},ke=function(e){var t=Object.assign({},e.filter),a=e.visits,n=[];"visit"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"visit"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"visit"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"visit"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"visit"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"visit"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"visit"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"visit"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"visit"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"visit"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"visit"===t.field&&"followUp"===t.key&&(n=a.filter((function(e){return e.followUp===t.value}))),"visit"!==t.field&&(n=a);var s=0,o=n.map((function(e){return s=n.indexOf(e)+1,i.a.createElement(we,{key:s,visit:e})}));return i.a.createElement("ul",{className:"appointmentList"},o)},Ue=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),!0===e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.note)},"Delete")))))},De=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ue,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},Fe=(a(53),function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"address"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"number"),i.a.createElement("option",null,"street"),i.a.createElement("option",null,"town"),i.a.createElement("option",null,"city"),i.a.createElement("option",null,"parish"),i.a.createElement("option",null,"country"),i.a.createElement("option",null,"postalCode"),i.a.createElement("option",null,"primary")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))}),Le=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"attendance"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"status"),i.a.createElement("option",null,"date")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Ve=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"leave"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"startDate"),i.a.createElement("option",null,"endDate")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Pe=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"image"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"link")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Be=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"file"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"link")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"dangers",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},qe=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:!0,readOnly:!0,value:"appointment"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"location"),i.a.createElement("option",null,"important"),i.a.createElement("option",null,"inProgress"),i.a.createElement("option",null,"attended")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Ge=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"visit"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Oe=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"note"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"note")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Me=(a(52),function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Update Single Field"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field"),i.a.createElement(J.a.Control,{type:"text",value:e.field}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"New Data"),i.a.createElement(J.a.Control,{type:"text",placeholder:"(Date format = YYYY-MM-DD!!)"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn searchBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))}),ze=function(e){var t={number:0,street:"...",town:"...",city:"...",parish:"...",country:"...",postalCode:"..."};return e.previousAddress&&(t={number:e.previousAddress.number,street:e.previousAddress.street,town:e.previousAddress.town,city:e.previousAddress.city,parish:e.previousAddress.parish,country:e.previousAddress.country,postalCode:e.previousAddress.postalCode}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousAddress&&i.a.createElement("h4",null,"Update Address"),!e.previousAddress&&i.a.createElement("h4",null,"Add Address"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"number",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Number * "),i.a.createElement(J.a.Control,{type:"number",placeholder:t.number})),i.a.createElement(J.a.Group,{as:A.a,controlId:"street",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Street * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.street}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"town",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Town"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.town})),i.a.createElement(J.a.Group,{as:A.a,controlId:"city",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address City * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.city}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"parish",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Parish"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,t.parish),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"St. Thomas"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"))),i.a.createElement(J.a.Group,{as:A.a,controlId:"country",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Country * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.country}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"postalCode",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address PostalCode"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.postalCode}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousAddress&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousAddress&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},je=function(e){var t={date:"...",status:"...",description:"..."};e.previousAttendance&&(t={date:e.previousAttendance.date,status:e.previousAttendance.status,description:e.previousAttendance.description});var a=Object(n.useState)(new Date),s=Object(h.a)(a,2),o=(s[0],s[1],Object(n.useState)(new Date)),l=Object(h.a)(o,2);l[0],l[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousAttendance&&i.a.createElement("h4",null,"Update Attendance"),!e.previousAttendance&&i.a.createElement("h4",null,"Add Attendance"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"date",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Date * "),i.a.createElement(J.a.Control,{type:"date",placeholder:t.date}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"status",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Status * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.status}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousAttendance&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousAttendance&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Re=function(e){var t={startDate:"...",endDate:"...",type:"...",description:"..."};return e.previousLeave&&(t={startDate:e.previousLeave.startDate,endDate:e.previousLeave.endDate,type:e.previousLeave.type,description:e.previousLeave.description}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousLeave&&i.a.createElement("h4",null,"Update Leave"),!e.previousLeave&&i.a.createElement("h4",null,"Add Leave"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"startDate",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Start Date * "),i.a.createElement(J.a.Control,{type:"date",placeholder:t.startDate}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"endDate",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"End Date * "),i.a.createElement(J.a.Control,{type:"date",placeholder:t.endDate}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.type}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousLeave&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousLeave&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ye=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Notes"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"notes",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Notes * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"...note,note,note..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},He=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Image"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Image"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ke=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add File"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Je=(a(512),void 0),Qe=function(e){var t;return t=!0===e.subMenuState?"".concat(e.page).concat(e.menu).concat(e.subMenu):"".concat(e.page).concat(e.menu),i.a.createElement("div",{className:"FloatMenuTop"},"menuProfile"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,"profileall"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"all")},"All"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"all")},"All")),i.a.createElement("li",null,"profilebasic"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"basic")},"Basic"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"basic")},"Basic")),i.a.createElement("li",null,"profileadmin"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"admin")},"Admin"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"admin")},"Admin")),i.a.createElement("li",null,"profileaddress"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"address")},"Addresses"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"address")},"Addresses")),i.a.createElement("li",null,"profileattendance"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"attendance")},"Attendance"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"attendance")},"Attendance")),i.a.createElement("li",null,"profileleave"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"leave")},"Leave"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"leave")},"Leave")),i.a.createElement("li",null,"profileimage"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"image")},"Images"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"image")},"Images")),i.a.createElement("li",null,"profilefile"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"file")},"Files"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"file")},"Files")),i.a.createElement("li",null,"profileappointment"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"appointment")},"Appointments"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"appointment")},"Appointments")),i.a.createElement("li",null,"profilevisit"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"visit")},"Visits"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"visit")},"Visits")),i.a.createElement("li",null,"profilenote"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"note")},"Notes"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"note")},"Notes"))),"menuStaff"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,"stafflist"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"list")},"List"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"list")},"List")),i.a.createElement("li",null,"staffsearch"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"search")},"Search"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"search")},"Search")),i.a.createElement("li",null,!0===t.includes("staffdetail")?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"detail")},"Detail"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"detail")},"Detail"))),"menuPatient"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,"patientlist"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"list")},"List"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"list")},"List")),i.a.createElement("li",null,"patientsearch"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"search")},"Search"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"search")},"Search")),i.a.createElement("li",null,!0===t.includes("patientdetail")?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"detail")},"Detail"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"detail")},"Detail")),i.a.createElement("li",null,"patientnew"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"new")},"New"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"new")},"New"))),"menuAppointment"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,"appointmentlist"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"list")},"List"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"list")},"List")),i.a.createElement("li",null,"appointmentsearch"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"search")},"Search"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"search")},"Search")),i.a.createElement("li",null,!0===t.includes("appointmentdetail")?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"detail")},"Detail"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"detail")},"Detail")),i.a.createElement("li",null,"appointmentnew"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"new")},"New"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"new")},"New"))),"menuVisit"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,"visitlist"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"list")},"List"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"list")},"List")),i.a.createElement("li",null,"visitsearch"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"search")},"Search"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"search")},"Search")),i.a.createElement("li",null,!0===t.includes("visitdetail")?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"detail")},"Detail"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"detail")},"Detail")),"Nurse"===e.role&&i.a.createElement("li",null,"visitnew"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"new")},"New"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"new")},"New")),"Doctor"===e.role&&i.a.createElement("li",null,"visitnew"===t?i.a.createElement(I.a,{variant:"success",onClick:e.menuSelect.bind(Je,"new")},"New"):i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(Je,"new")},"New"))),!0===e.subMenuState&&"patient"===e.page&&i.a.createElement("ul",{className:"FloatSubMenuList"},i.a.createElement("li",null,"patientdetailall"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"all")},"All"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"all")},"All")),i.a.createElement("li",null,"patientdetailbasic"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"basic")},"Basic"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"basic")},"Basic")),i.a.createElement("li",null,"patientdetailcomorbidities"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"comorbidities")},"Comorbidities"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"comorbidities")},"Comorbidities"),!0===e.hasComorbidities&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Comorbidities Present!!")))},i.a.createElement(y.a,{icon:v.h,className:"menuAttentionIcon",color:"yellow",size:"sm"}))),i.a.createElement("li",null,"patientdetailadmin"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"admin")},"Admin"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"admin")},"Admin")),i.a.createElement("li",null,"patientdetailaddress"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"address")},"Address"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"address")},"Address")),i.a.createElement("li",null,"patientdetailnextOfKin"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"nextOfKin")},"Next-of-Kin"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"nextOfKin")},"Next-of-Kin")),i.a.createElement("li",null,"patientdetailallergy"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"allergy")},"Allergy"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"allergy")},"Allergy"),!0===e.hasAllergies&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Allergies Present!!")))},i.a.createElement(y.a,{icon:v.h,className:"menuAttentionIcon",color:"yellow",size:"sm"})),!1===e.hasAllergies&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Allergy Info Needed!!")))},i.a.createElement(y.a,{icon:v.h,className:"menuAttentionIcon",color:"red",size:"sm"}))),i.a.createElement("li",null,"patientdetailmedication"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"medication")},"Medication"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"medication")},"Medication")),i.a.createElement("li",null,"patientdetailimage"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"image")},"Image"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"image")},"Image")),i.a.createElement("li",null,"patientdetailfile"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"file")},"File"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"file")},"File")),i.a.createElement("li",null,"patientdetailappointment"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"appointment")},"Appointment"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"appointment")},"Appointment")),i.a.createElement("li",null,"patientdetailvisit"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"visit")},"Visit"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"visit")},"Visit")),i.a.createElement("li",null,"patientdetailnote"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"note")},"Note"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"note")},"Note")),i.a.createElement("li",null,"patientdetailtag"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"tag")},"Tag"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"tag")},"Tag")),i.a.createElement("li",null,"patientdetaildoc"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"doc")},"Docs"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"doc")},"Docs"))),!0===e.subMenuState&&"staff"===e.page&&i.a.createElement("ul",{className:"FloatSubMenuList"},i.a.createElement("li",null,"staffdetailall"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"all")},"All"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"all")},"All")),i.a.createElement("li",null,"staffdetailbasic"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"basic")},"Basic"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"basic")},"Basic")),i.a.createElement("li",null,"staffdetailadmin"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"admin")},"Admin"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"admin")},"Admin")),i.a.createElement("li",null,"staffdetailaddress"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"address")},"Address"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"address")},"Address")),i.a.createElement("li",null,"staffdetailattendance"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"attendance")},"Attendance"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"attendance")},"Attendance")),i.a.createElement("li",null,"staffdetailleave"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"leave")},"Leave"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"leave")},"Leave")),i.a.createElement("li",null,"staffdetailimage"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"image")},"Image"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"image")},"Image")),i.a.createElement("li",null,"staffdetailfile"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"file")},"File"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"file")},"File")),i.a.createElement("li",null,"staffdetailappointment"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"appointment")},"Appointment"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"appointment")},"Appointment")),i.a.createElement("li",null,"staffdetailvisit"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"visit")},"Visit"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"visit")},"Visit")),i.a.createElement("li",null,"staffdetailnote"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"note")},"Note"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"note")},"Note"))),!0===e.subMenuState&&"appointment"===e.page&&i.a.createElement("ul",{className:"FloatSubMenuList"},i.a.createElement("li",null,"appointmentdetailall"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"all")},"All"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"all")},"All")),i.a.createElement("li",null,"appointmentdetailbasic"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"basic")},"Basic"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"basic")},"Basic")),i.a.createElement("li",null,"appointmentdetailadmin"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"admin")},"Admin"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"admin")},"Admin")),i.a.createElement("li",null,"appointmentdetailconsultant"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"consultant")},"Consultants"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"consultant")},"Consultants")),i.a.createElement("li",null,"appointmentdetailnote"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"note")},"Note"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"note")},"Note")),i.a.createElement("li",null,"appointmentdetailtag"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"tag")},"Tag"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"tag")},"Tag"))),!0===e.subMenuState&&"visit"===e.page&&i.a.createElement("ul",{className:"FloatSubMenuList"},i.a.createElement("li",null,"visitdetailall"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"all")},"All"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"all")},"All")),i.a.createElement("li",null,"visitdetailbasic"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"basic")},"Basic"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"basic")},"Basic")),i.a.createElement("li",null,"visitdetailcomorbidities"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"comorbidities")},"Comorbidities"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"comorbidities")},"Comorbidities"),!0===e.hasComorbidities&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Comorbidities Present!!")))},i.a.createElement(y.a,{icon:v.h,className:"menuAttentionIcon",color:"yellow",size:"sm"}))),i.a.createElement("li",null,"visitdetailallergy"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"allergy")},"Allergy"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"allergy")},"Allergy"),!0===e.hasAllergies&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Allergies Present!!")))},i.a.createElement(y.a,{icon:v.h,className:"menuAttentionIcon",color:"yellow",size:"sm"})),!1===e.hasAllergies&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Allergy Info Needed!!")))},i.a.createElement(y.a,{icon:v.h,className:"menuAttentionIcon",color:"red",size:"sm"}))),i.a.createElement("li",null,"visitdetailmedication"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"medication")},"Medication"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"medication")},"Medication")),i.a.createElement("li",null,"visitdetailadmin"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"admin")},"Admin"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"admin")},"Admin")),i.a.createElement("li",null,"visitdetailconsultant"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"consultant")},"Consultants"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"consultant")},"Consultants")),i.a.createElement("li",null,"visitdetailcomplaint"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"complaint")},"Complaints"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"complaint")},"Complaints")),i.a.createElement("li",null,"visitdetailsurvey"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"survey")},"Surveys"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"survey")},"Surveys")),i.a.createElement("li",null,"visitdetailsystematicInquiry"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"systematicInquiry")},"Systematic Inquiry"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"systematicInquiry")},"Systematic Inquiry")),i.a.createElement("li",null,"visitdetailvitals"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"vitals")},"Vitals"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"vitals")},"Vitals")),i.a.createElement("li",null,"visitdetailexamination"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"examination")},"Examination"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"examination")},"Examination")),i.a.createElement("li",null,"visitdetailinvestigation"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"investigation")},"Investigation"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"investigation")},"Investigation")),i.a.createElement("li",null,"visitdetaildiagnosis"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"diagnosis")},"Diagnosis"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"diagnosis")},"Diagnosis")),i.a.createElement("li",null,"visitdetailtreatment"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"treatment")},"Plan"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"treatment")},"Plan")),i.a.createElement("li",null,"visitdetailbilling"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"billing")},"Billing"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"billing")},"Billing")),i.a.createElement("li",null,"visitdetailvigilance"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"vigilance")},"Vigilance"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"vigilance")},"Vigilance")),i.a.createElement("li",null,"visitdetailimage"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"image")},"Images"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"image")},"Images")),i.a.createElement("li",null,"visitdetailfile"===t?i.a.createElement(I.a,{variant:"success",onClick:e.subMenuSelect.bind(Je,"file")},"Files"):i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(Je,"file")},"Files"))))},We=(a(513),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlay2:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menuProfile",startFilter:!1,selectFilter:null,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"all",adding:{state:null,field:null},canUpdate:!0,updating:{state:null,field:null,previous:{}},canDelete:!1,updateSingleField:{state:null,field:null},calendarAttendance:null,calendarLeave:null,calendarAppointments:null,calendarVisits:null,pocketVars:null,s3State:{action:null,target:null,status:null}},n.submitAddAddressForm=function(e){e.preventDefault(),console.log("...adding address..."),n.context.setUserAlert("...adding address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.number.value,o=e.target.street.value,l=e.target.town.value,c=e.target.city.value,r=e.target.parish.value,m=e.target.country.value,d=e.target.postalCode.value;if(0===s.trim().length||0===o.trim().length||0===c.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var p={query:'\n      mutation {addUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(o,'",\n          addressTown:"').concat(l,'",\n          addressCity:"').concat(c,'",\n          addressParish:"').concat(r,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.addUserAddress,activityA:"addUserAddress?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.activityUser=e.data.addUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteAddress=function(e){console.log("...deleting address..."),n.context.setUserAlert("...deleting address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n      mutation {deleteUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'",\n          addressPrimary: ').concat(e.primary,"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.deleteUserAddress,activityA:"deleteUserAddress?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=e.data.deleteUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.setAddressPrimary=function(e){console.log("...setting primary address..."),n.context.setUserAlert("...setting primary address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n      mutation {setUserAddressPrimary(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address set primary success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.setUserAddressPrimary,activityA:"setUserAddressPrimary?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=e.data.setUserAddressPrimary,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateAddressForm=function(e){e.preventDefault(),console.log("updating address..."),n.context.setUserAlert("...updating address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={number:n.state.updating.previous.number,street:n.state.updating.previous.street,town:n.state.updating.previous.town,city:n.state.updating.previous.city,parish:n.state.updating.previous.parish,country:n.state.updating.previous.country,postalCode:n.state.updating.previous.postalCode,primary:n.state.updating.previous.primary},o={number:e.target.number.value,street:e.target.street.value,town:e.target.town.value,city:e.target.city.value,parish:e.target.parish.value,country:e.target.country.value,postalCode:e.target.postalCode.value,primary:s.primary};if(0===o.number.trim().length||0===o.street.trim().length||0===o.city.trim().length||0===o.country.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(s.number,',\n          addressStreet:"').concat(s.street,'",\n          addressTown:"').concat(s.town,'",\n          addressCity:"').concat(s.city,'",\n          addressParish:"').concat(s.parish,'",\n          addressCountry:"').concat(s.country,'",\n          addressPostalCode:"').concat(s.postalCode,'",\n          addressPrimary: ').concat(s.primary,"\n        }\n        userInput2:{\n          addressNumber:").concat(o.number,',\n          addressStreet:"').concat(o.street,'",\n          addressTown:"').concat(o.town,'",\n          addressCity:"').concat(o.city,'",\n          addressParish:"').concat(o.parish,'",\n          addressCountry:"').concat(o.country,'",\n          addressPostalCode:"').concat(o.postalCode,'",\n          addressPrimary: ').concat(o.primary,",\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.updateUserAddress,activityA:"updateUserAddress?activityId:".concat(a,",userId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.activityUser=e.data.updateUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddAttendanceForm=function(e){e.preventDefault(),console.log("...adding attendance..."),n.context.setUserAlert("...attendance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.date.value,o=e.target.status.value,l=e.target.description.value;if(0===s.trim().length||0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var c={query:'\n      mutation {addUserAttendance(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          attendanceDate:"').concat(s,'",\n          attendanceStatus:"').concat(o,'",\n          attendanceDescription:"').concat(l,'"\n        })\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.addUserAttendance,activityA:"addUserAttendance?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:e.data.addUserAttendance.attendance,leave:e.data.addUserAttendance.leave,appointments:e.data.addUserAttendance.appointments}),n.context.activityUser=e.data.addUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteAttendance=function(e){console.log("...deleting attendance..."),n.context.setUserAlert("...deleting attendance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n        mutation {deleteUserAttendance(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            attendanceDate:"').concat(e.date,'",\n            attendanceStatus:"').concat(e.status,'",\n            attendanceDescription:"').concat(e.description,'",\n            attendanceHighlighted:').concat(e.highlighted,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.deleteUserAttendance,activityA:"deleteUserAttendance?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:e.data.deleteUserAttendance.attendance,leave:e.data.deleteUserAttendance.leave,appointments:e.data.deleteUserAttendance.appointments}),n.context.activityUser=e.data.deleteUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleStaffAttendanceHighlighted=function(e){console.log("toggleStaffAttendanceHighlighted"),n.context.setUserAlert("...toggling staff attendance highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=i;t={query:'\n      mutation {toggleUserAttendanceHighlighted(\n        activityId:"'.concat(i,'",\n        userId:"').concat(s,'",\n        userInput:{\n          attendanceDate:"').concat(e.date,'",\n          attendanceStatus:"').concat(e.status,'",\n          attendanceDescription:"').concat(e.description,'",\n          attendanceHighlighted:').concat(e.highlighted,"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...attendance highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.toggleUserAttendanceHighlighted,activityA:"toggleUserAttendanceHighlighted?activityId:".concat(i,",userId:").concat(s),adding:{state:null,field:null}}),n.context.selectedUser=e.data.toggleUserAttendanceHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateAttendanceForm=function(e){e.preventDefault(),console.log("updating attendance..."),n.context.setUserAlert("...updating attendance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={date:n.state.updating.previous.date,status:n.state.updating.previous.status,description:n.state.updating.previous.description,highlighted:n.state.updating.previous.highlighted},o={date:e.target.date.value,status:e.target.status.value,description:e.target.description.value,highlighted:s.highlighted};if(0===o.date.trim().length||0===o.status.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateUserAttendance(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          attendanceDate:"').concat(s.date,'",\n          attendanceStatus:"').concat(s.status,'",\n          attendanceDescription:"').concat(s.description,'",\n          attendanceHighlighted: ').concat(s.highlighted,'\n        }\n        userInput2:{\n          attendanceDate:"').concat(o.date,'",\n          attendanceStatus:"').concat(o.status,'",\n          attendanceDescription:"').concat(o.description,'",\n          attendanceHighlighted: ').concat(o.highlighted,"\n        }\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.updateUserAttendance,activityA:"updateUserAttendance?activityId:".concat(a,",userId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.parseForCalendar({attendance:e.data.updateUserAttendance.attendance,leave:e.data.updateUserAttendance.leave,appointments:e.data.updateUserAttendance.appointments}),n.context.activityUser=e.data.updateUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddLeaveForm=function(e){e.preventDefault(),console.log("...adding leave..."),n.context.setUserAlert("...leave..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.startDate.value,o=e.target.endDate.value,l=e.target.type.value,c=e.target.description.value;if(0===s.trim().length||0===o.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var r={query:'\n      mutation {addUserLeave(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          leaveType:"').concat(l,'",\n          leaveStartDate:"').concat(s,'",\n          leaveEndDate:"').concat(o,'",\n          leaveDescription:"').concat(c,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.addUserLeave,activityA:"addUserLeave?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:e.data.addUserLeave.attendance,leave:e.data.addUserLeave.leave,appointments:e.data.addUserLeave.appointments}),n.context.activityUser=e.data.addUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteLeave=function(e){console.log("...deleting leave..."),n.context.setUserAlert("...deleting leave..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n        mutation {deleteUserLeave(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            leaveType:"').concat(e.type,'",\n            leaveStartDate:"').concat(e.startDate,'",\n            leaveEndDate:"').concat(e.endDate,'",\n            leaveDescription:"').concat(e.description,'",\n            leaveHighlighted:').concat(e.highlighted,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.deleteUserLeave,activityA:"deleteUserLeave?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:e.data.addUserLeave.attendance,leave:e.data.addUserLeave.leave,appointments:e.data.addUseLeavce.appointments}),n.context.activityUser=e.data.deleteUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleStaffLeaveHighlighted=function(e){console.log("toggleStaffLeaveHighlighted"),n.context.setUserAlert("...toggling staff leave highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=i;t={query:'\n      mutation {toggleUserLeaveHighlighted(\n        activityId:"'.concat(i,'",\n        userId:"').concat(s,'",\n        userInput:{\n          leaveType:"').concat(e.type,'",\n          leaveStartDate:"').concat(e.startDate,'",\n          leaveEndDate:"').concat(e.endDate,'",\n          leaveDescription:"').concat(e.description,'",\n          leaveHighlighted:').concat(e.highlighted,"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...leave highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.toggleUserLeaveHighlighted,activityA:"toggleUserLeaveHighlighted?activityId:".concat(i,",userId:").concat(s),adding:{state:null,field:null}}),n.context.selectedUser=e.data.toggleUserLeaveHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateLeaveForm=function(e){e.preventDefault(),console.log("updating leave..."),n.context.setUserAlert("...updating leave..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={startDate:n.state.updating.previous.startDate,endDate:n.state.updating.previous.endDate,type:n.state.updating.previous.type,description:n.state.updating.previous.description,highlighted:n.state.updating.previous.highlighted},o={startDate:e.target.startDate.value,endDate:e.target.endDate.value,type:e.target.type.value,description:e.target.description.value,highlighted:s.highlighted};if(0===o.startDate.trim().length||0===o.endDate.trim().length||0===o.type.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateUserLeave(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          leaveStartDate:"').concat(s.startDate,'",\n          leaveEndDate:"').concat(s.endDate,'",\n          leaveType:"').concat(s.type,'",\n          leaveDescription:"').concat(s.description,'",\n          leaveHighlighted: ').concat(s.highlighted,'\n        }\n        userInput2:{\n          leaveStartDate:"').concat(o.startDate,'",\n          leaveEndDate:"').concat(o.endDate,'",\n          leaveType:"').concat(o.type,'",\n          leaveDescription:"').concat(o.description,'",\n          leaveHighlighted: ').concat(o.highlighted,"\n        }\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.updateUserLeave,activityA:"updateUserLeave?activityId:".concat(a,",userId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.parseForCalendar({attendance:e.data.updateUserLeave.attendance,leave:e.data.updateUserLeave.leave,appointments:e.data.updateUserLeave.appointments}),n.context.activityUser=e.data.updateUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding image..."),n.context.setUserAlert("...image..."),n.setState({isLoading:!0,overlay2:!0});var t,a,i,s=n.context.token,o=n.state.activityUser._id,l=o;n.state.activityUser.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="staff/"+o+"/images";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),g.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var h={query:'\n      mutation {addUserImage(\n        activityId:"'.concat(o,'",\n        userId:"').concat(l,'",\n        userInput:{\n          imageName:"').concat(t,'",\n          imageType:"').concat(a,'",\n          imagePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.addUserImage,activityA:"addUserImage?activityId:".concat(o,",userId:").concat(l),adding:{state:null,field:null}}),n.context.activityUser=e.data.addUserImage,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteImage=function(e){console.log("...deleting image..."),n.context.setUserAlert("...deleting image..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=(n.state.activityUser.username,e.name,{query:'\n        mutation {deleteUserImage(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            imageName:"').concat(e.name,'",\n            imageType:"').concat(e.type,'",\n            imagePath:"').concat(e.path,'",\n            imageHighlighted:').concat(e.highlighted,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...image delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.setState({isLoading:!1,overlay2:!1,activityUser:s.data.deleteUserImage,activityA:"deleteUserImage?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=s.data.deleteUserImage,n.logUserActivity({activityId:a,token:t});var l="staff/"+a+"/images",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleStaffImageHighlighted=function(e){console.log("toggleStaffImageHighlighted"),n.context.setUserAlert("...toggling staff image highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=i,o=e.name,l=e.type,c=e.path,r=e.highlighted;t={query:'\n      mutation {\n        toggleUserImageHighlighted(\n          activityId:"'.concat(i,'",\n          userId:"').concat(s,'",\n          userInput:{\n            imageName:"').concat(o,'",\n            imageType:"').concat(l,'",\n            imagePath:"').concat(c,'",\n            imageHighlighted: ').concat(r,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.toggleUserImageHighlighted,activityA:"toggleUserImageHighlighted?activityId:".concat(i,",userId:").concat(s),adding:{state:null,field:null}}),n.context.selectedUser=e.data.toggleUserImageHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding file..."),n.context.setUserAlert("...file..."),n.setState({isLoading:!0,overlay2:!0});var t,a,i,s=n.context.token,o=n.state.activityUser._id,l=o;n.state.activityUser.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="staff/"+o+"/files";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),g.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var h={query:'\n      mutation {addUserFile(\n        activityId:"'.concat(o,'",\n        userId:"').concat(l,'",\n        userInput:{\n          fileName:"').concat(t,'",\n          fileType:"').concat(a,'",\n          filePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.addUserFile,activityA:"addUserFile?activityId:".concat(o,",userId:").concat(l),adding:{state:null,field:null}}),n.context.activityUser=e.data.addUserFile,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteFile=function(e){console.log("...deleting file..."),n.context.setUserAlert("...deleting file..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=(n.state.activityUser.username,e.name,{query:'\n        mutation {deleteUserFile(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            fileName:"').concat(e.name,'",\n            fileType:"').concat(e.type,'",\n            filePath:"').concat(e.path,'",\n            fileHighlighted:').concat(e.highlighted,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...file delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.setState({isLoading:!1,overlay2:!1,activityUser:s.data.deleteUserFile,activityA:"deleteUserFile?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=s.data.deleteUserFile,n.logUserActivity({activityId:a,token:t});var l="staff/"+a+"/files",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleStaffFileHighlighted=function(e){console.log("toggleStaffFileHighlighted"),n.context.setUserAlert("...toggling staff file highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=i,o=e.name,l=e.type,c=e.path,r=e.highlighted;t={query:'\n      mutation {\n        toggleUserFileHighlighted(\n          activityId:"'.concat(i,'",\n          userId:"').concat(s,'",\n          userInput:{\n            fileName:"').concat(o,'",\n            fileType:"').concat(l,'",\n            filePath:"').concat(c,'",\n            fileHighlighted: ').concat(r,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.toggleUserFileHighlighted,activityA:"toggleUserFileHighlighted?activityId:".concat(i,",userId:").concat(s),adding:{state:null,field:null}}),n.context.selectedUser=e.data.toggleUserFileHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding note..."),n.context.setUserAlert("...note..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.notes.value;if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var o={query:'\n      mutation {addUserNotes(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          notes:"').concat(s,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.addUserNotes,activityA:"addUserNotes?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.activityUser=e.data.addUserNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteNote=function(e){console.log("...deleting note..."),n.context.setUserAlert("...deleting note..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n        mutation {deleteUserNote(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            note: "').concat(e,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.deleteUserNote,activityA:"deleteUserNote?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=e.data.deleteUserNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.field.value,o=e.target.query.value;if(0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateUserSingleField(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,overlay2:!1,activityUser:e.data.updateUserSingleField,activityA:"updateUserSingleField?activityId:".concat(a,",userId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.activityUser=e.data.updateUserSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null},updating:{state:null,field:null,previous:{}}})},n.startUpdate=function(e){n.setState({updating:{state:!0,field:e.field,previous:e.data}})},n.parseForCalendar=function(e){console.log("...parsing profile dates for calendar..."),n.setState({overlay2:!0});e.attendance.map((function(e){return{title:e.status,date:D.a.unix(e.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),props:{date:e.date,status:e.status,description:e.description,highlighted:e.highlighted,field:"attendance"}}})),e.leave.map((function(e){return{title:e.type,date:D.a.unix(e.startDate.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),end:D.a.unix(e.endDate.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),props:{date:e.date,type:e.type,startDate:e.startDate,endDate:e.endDate,description:e.description,highlighted:e.highlighted,field:"leave"}}}));var t,a=[],i=Object(ae.a)(e.attendance);try{for(i.s();!(t=i.n()).done;){var s=t.value,o="blue";!0===s.highlighted&&(o="red");var l=void 0;12===s.date.length?l=D.a.unix(s.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"):13===s.date.length&&(l=D.a.unix(s.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var c={title:s.status,color:o,date:l,props:{date:l,status:s.status,description:s.description,highlighted:s.highlighted,field:"attendance"}};a.push(c)}}catch(w){i.e(w)}finally{i.f()}var r,m=[],d=Object(ae.a)(e.leave);try{for(d.s();!(r=d.n()).done;){var p=r.value,g="blue";!0===p.highlighted&&(g="red");var h=void 0,u=void 0;12===p.startDate.length&&(h=D.a.unix(p.startDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===p.startDate.length&&(h=D.a.unix(p.startDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),12===p.endDate.length&&(u=D.a.unix(p.endDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===p.endDate.length&&(u=D.a.unix(p.endDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var y={title:p.type,color:g,date:h,end:u,props:{date:h,type:p.type,startDate:h,endDate:u,description:p.description,highlighted:p.highlighted,field:"leave"}};m.push(y)}}catch(w){d.e(w)}finally{d.f()}e.appointments.map((function(e){return{title:e.title,date:D.a.unix(e.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,field:"appointments"}}}));var v,f=[],E=Object(ae.a)(e.appointments);try{for(E.s();!(v=E.n()).done;){var b=v.value,_=void 0;12===b.date.length?_=D.a.unix(b.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"):13===b.date.length&&(_=D.a.unix(b.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"));var A={title:b.title,date:_,props:{_id:b._id,date:_,title:b.title,type:b.type,subType:b.subType,time:b.time,location:b.location,description:b.description,important:b.important,patient:b.patient,field:"appointments"}};f.push(A)}}catch(w){E.e(w)}finally{E.f()}var C,N=[],x=Object(ae.a)(e.visits);try{for(x.s();!(C=x.n()).done;){var I=C.value,T=void 0;12===I.date.length?T=D.a.unix(I.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"):13===I.date.length&&(T=D.a.unix(I.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var S={title:I.title,date:T,props:{_id:I._id,consultants:I.consultants,date:T,patient:I.patient,subType:I.subType,time:I.time,title:I.title,type:I.type,field:"visits"}};N.push(S)}}catch(w){x.e(w)}finally{x.f()}n.setState({calendarAttendance:a,calendarLeave:m,calendarAppointments:f,calendarVisits:N,overlay2:!1})},n.viewCalendarEvent=function(e){var t,a=e.event.extendedProps.props;"attendance"===a.field&&(t={date:a.date,status:a.status,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarAttendance",data:t}})),"leave"===a.field&&(t={type:a.type,startDate:a.startDate,endDate:a.endDate,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarLeave",data:t}})),"appointments"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,location:a.location,description:a.description,important:a.important,patient:a.patient},n.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:t,goLink:!0}})),"visits"===a.field&&(t={_id:a._id,consultants:a.consultants,date:a.date,patient:a.patient,subType:a.subType,time:a.time,title:a.title,type:a.type},n.setState({overlay:!0,overlayStatus:{type:"calendarVisit",data:t,goLink:!0}}))},n.dateClick=function(e){console.log("dateClick",e)},n.toggleOverlay=function(){n.setState({overlay:!1})},n.socket=x()("http://localhost:9099"),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...MyProfile component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getThisUser(e),this.getPocketVars(e)}}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.context.setUserAlert(e.errors[0].message);else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"getThisUser",value:function(e){var t=this;console.log("...retrieving your profile info..."),this.context.setUserAlert("...retrieving your profile info..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getUserById(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'"\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(a){console.log("...resData...",a.data.getUserById);var s="...profile retrieval success!...";a.errors&&(s=a.errors[0].message),a.data.error&&(s=a.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,activityUser:a.data.getUserById,activityA:"getUserById?activityId:".concat(n,",userId:").concat(i)}),t.context.activityUser=a.data.getUserById,"Admin"===a.data.getUserById.role&&t.setState({canDelete:!0}),t.parseForCalendar({attendance:a.data.getUserById.attendance,leave:a.data.getUserById.leave,appointments:a.data.getUserById.appointments,visits:a.data.getUserById.visits}),t.logUserActivity(e),t.props.sendSocketAdminMessage("".concat(n," just logged in..."))})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,o=D()().tz("America/Bogota").format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(o,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.addUserActivity.error&&t.context.setUserAlert(e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe,{state:this.state.sideCol,menuSelect:this.menuSelect,role:this.context.role,page:"profile",menu:this.state.menuSelect}),!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),!0===this.state.overlay2&&i.a.createElement(de,{toggleOverlay2:this.toggleOverlay2}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(_.a,{className:"headTopRow"},i.a.createElement("h1",{className:""},"My Profile")),i.a.createElement(_.a,{className:""},this.state.isLoading&&i.a.createElement(T.a,{src:F,className:"loadingGif",fluid:!0}))),i.a.createElement(_.a,{className:""},this.state.activityUser&&i.a.createElement(A.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(Me,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"menuProfile"===this.state.sideCol&&i.a.createElement(A.a,null,"all"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol tabColDetail"},i.a.createElement(_.a,{className:"tabRowAll "},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.username),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.role)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),12===this.state.activityUser.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.state.activityUser.dob.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.state.activityUser.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.state.activityUser.dob.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.gender),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone2),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit"))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.registrationNumber)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employment Date:"),this.state.activityUser.employmentDate&&12===this.state.activityUser.employmentDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.state.activityUser.employmentDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),this.state.activityUser.employmentDate&&13===this.state.activityUser.employmentDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.state.activityUser.employmentDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"employmentDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.code))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Fe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ze,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"address"===this.state.updating.field&&i.a.createElement(ze,{onConfirm:this.submitUpdateAddressForm,onCancel:this.cancelAdd,previousAddress:this.state.updating.previous}),i.a.createElement(he,{filter:this.state.filter,addresses:this.state.activityUser.addresses,authId:this.state.activityUser._id,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Attendance:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(je,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"attendance"===this.state.updating.field&&i.a.createElement(je,{onConfirm:this.submitUpdateAttendanceForm,onCancel:this.cancelAdd,previousAttendance:this.state.updating.previous}),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example",className:"subTabs"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"attendance"===this.state.selectFilter&&i.a.createElement(Le,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"attendance")},"Filter")),i.a.createElement(ve,{filter:this.state.filter,attendance:this.state.activityUser.attendance,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteAttendance,toggleStaffAttendanceHighlighted:this.toggleStaffAttendanceHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Leave:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(Re,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"leave"===this.state.updating.field&&i.a.createElement(Re,{onConfirm:this.submitUpdateLeaveForm,onCancel:this.cancelAdd,previousLeave:this.state.updating.previous}),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"leave")},"Filter")),!0===this.state.startFilter&&"leave"===this.state.selectFilter&&i.a.createElement(Ve,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(be,{filter:this.state.filter,leave:this.state.activityUser.leave,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteLeave,toggleStaffLeaveHighlighted:this.toggleStaffLeaveHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Pe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(He,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Ce,{filter:this.state.filter,images:this.state.activityUser.images,authId:this.state.activityUser._id,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage,toggleStaffImageHighlighted:this.toggleStaffImageHighlighted}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(Be,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ke,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ie,{filter:this.state.filter,files:this.state.activityUser.files,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteFile,toggleStaffFileHighlighted:this.toggleStaffFileHighlighted}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("p",{className:""},"Appointments:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(qe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Se,{filter:this.state.filter,appointments:this.state.activityUser.appointments,authId:this.state.activityUser._id})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(Oe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Ye,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(De,{filter:this.state.filter,notes:this.state.activityUser.notes,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteNote}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("p",{className:""},"Visits:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"visit"===this.state.selectFilter&&i.a.createElement(Ge,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"visit")},"Filter")),i.a.createElement(ke,{filter:this.state.filter,visits:this.state.activityUser.visits,authId:this.state.activityUser._id})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))))))),"basic"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.username),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.role)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),12===this.state.activityUser.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.state.activityUser.dob.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.state.activityUser.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.state.activityUser.dob.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.gender),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone2),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")))),"admin"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.registrationNumber)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employment Date:"),this.state.activityUser.employmentDate&&12===this.state.activityUser.employmentDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.state.activityUser.employmentDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),this.state.activityUser.employmentDate&&13===this.state.activityUser.employmentDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.state.activityUser.employmentDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"employmentDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.code)))),"address"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Fe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ze,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"address"===this.state.updating.field&&i.a.createElement(ze,{onConfirm:this.submitUpdateAddressForm,onCancel:this.cancelAdd,previousAddress:this.state.updating.previous}),i.a.createElement(he,{filter:this.state.filter,addresses:this.state.activityUser.addresses,authId:this.state.activityUser._id,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"attendance"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Attendance:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(je,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"attendance"===this.state.updating.field&&i.a.createElement(je,{onConfirm:this.submitUpdateAttendanceForm,onCancel:this.cancelAdd,previousAttendance:this.state.updating.previous}),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example",className:"subTabs"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"attendance")},"Filter")),!0===this.state.startFilter&&"attendance"===this.state.selectFilter&&i.a.createElement(Le,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(ve,{filter:this.state.filter,attendance:this.state.activityUser.attendance,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteAttendance,toggleStaffAttendanceHighlighted:this.toggleStaffAttendanceHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"leave"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Leave:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(Re,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"leave"===this.state.updating.field&&i.a.createElement(Re,{onConfirm:this.submitUpdateLeaveForm,onCancel:this.cancelAdd,previousLeave:this.state.updating.previous}),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"leave"===this.state.selectFilter&&i.a.createElement(Ve,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"leave")},"Filter")),i.a.createElement(be,{filter:this.state.filter,leave:this.state.activityUser.leave,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteLeave,toggleStaffLeaveHighlighted:this.toggleStaffLeaveHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"image"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Pe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(He,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Ce,{filter:this.state.filter,images:this.state.activityUser.images,authId:this.state.activityUser._id,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage,toggleStaffImageHighlighted:this.toggleStaffImageHighlighted})),"file"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(Be,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ke,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ie,{filter:this.state.filter,files:this.state.activityUser.files,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteFile,toggleStaffFileHighlighted:this.toggleStaffFileHighlighted})),"appointment"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("p",{className:""},"Appointments:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(qe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Se,{filter:this.state.filter,appointments:this.state.activityUser.appointments,authId:this.state.activityUser._id})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"visit"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("p",{className:""},"Visits:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"visit"===this.state.selectFilter&&i.a.createElement(Ge,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"visit")},"Filter")),i.a.createElement(ke,{filter:this.state.filter,visits:this.state.activityUser.visits,authId:this.state.activityUser._id})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"note"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(Oe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Ye,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(De,{filter:this.state.filter,notes:this.state.activityUser.notes,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteNote})))))))}}]),a}(n.Component));We.contextType=E;var Xe=We,Ze=(a(231),a(317),function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Login"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"username",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Username"),i.a.createElement(J.a.Control,{type:"username",placeholder:"username"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"password",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Password"),i.a.createElement(J.a.Control,{type:"password",placeholder:"Password"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"searchBtn loginFormBtn"},"Login"),i.a.createElement(I.a,{variant:"primary",className:"searchBtn ",onClick:e.onStartVerification},"Verify"),i.a.createElement(I.a,{variant:"secondary",className:"searchBtn loginFormBtn",onClick:e.onStartForgotPassword},"ForgotPassword"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn loginFormBtn"},i.a.createElement(p.c,{to:"/signup"},"Signup")))))}),$e=(a(318),function(e){return i.a.createElement("div",{className:"UpdateFormContainer"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Verify"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{className:"searchInput formGroup",controlId:"type"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"email")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"username",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Username"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"email",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Email"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"code",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Code"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.canCancel&&i.a.createElement(I.a,{variant:"danger",className:"formButton",onClick:e.onCancel},"Cancel"),e.canConfirm&&i.a.createElement(I.a,{variant:"primary",className:"formButton",type:"submit"},"Verify"))))}),et=(a(514),a(515),function(e){return i.a.createElement("div",{className:"CreateFormContainer"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Forgot Password"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"username",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Username"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"email",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Email"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"danger",className:"formButton searchBtn",onClick:e.onCancel},"Cancel"),i.a.createElement(I.a,{variant:"primary",className:"formButton searchBtn",type:"submit"},"Request New Password"))))}),tt=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={verifying:!1,role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",userSeshStore:!1,user:{},activityA:null,requestingPasswordReset:!1,showForm:"login"},e.submitLoginForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitLoginForm..."),console.log("...submitLoginForm...");var a=t.target.username.value,n=t.target.password.value;if(0!==a.trim().length&&0!==n.trim().length){var i={query:'\n          {login(username:"'.concat(a,'",password:"').concat(n,'")\n          {activityId,role,token,tokenExpiration,error}}')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...login success!...";console.log("...login success...");if(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),t.data.login.error&&(a=t.data.login.error),e.context.setUserAlert(a),""!==t.data.login.token){var n={token:t.data.login.token,activityId:t.data.login.activityId,role:t.data.login.role,tokenExpiration:t.data.login.tokenExpiration};e.context.setUserAlert(a),sessionStorage.setItem("logInfo",JSON.stringify(n)),console.log("...session storage set..."),e.setState({activityA:"login?".concat(n.activityId)}),e.logUserActivity(),e.context.login(t.data.login.token,t.data.login.activityId,t.data.login.role,t.data.login.tokenExpiration)}})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank required fields!!!...")},e.verifyUser=function(t){t.preventDefault(),console.log("...verify user...");var a=t.target.email.value,n=t.target.type.value,i=t.target.code.value,s=t.target.username.value,o={query:'\n        mutation {verifyUser(\n          userInput:{\n            username:"'.concat(s,'",\n            contactEmail:"').concat(a,'",\n            verificationType:"').concat(n,'",\n            verificationCode:"').concat(i,'"\n          }\n        )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="Verified...Please try loggin in again..";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),t.data.verifyUser&&e.setState({showForm:"login"})})).catch((function(t){e.context.setUserAlert(t)}))},e.toggleVerification=function(){"verify"===e.state.showForm?e.setState({showForm:"login"}):e.setState({showForm:"verify"})},e.toggleForgotPassword=function(){"forgotPassword"===e.state.showForm?e.setState({showForm:"login"}):e.setState({showForm:"forgotPassword"})},e.requestPasswordReset=function(t){t.preventDefault(),console.log("...requesting password reset..."),e.setState({isLoading:!0});var n=t.target.username.value,i=t.target.email.value,s={query:'\n         mutation {requestPasswordReset(\n           userInput:{\n             username:"'.concat(n,'",\n             contactEmail:"').concat(i,'"\n           })\n           {_id,username,contact{email}verification{verified,type,code}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.requestPasswordReset);var n="...";if(t.errors)e.context.setUserAlert(t.errors[0].message);else if(t.data.error)e.context.setUserAlert(t.data.error);else{var i=a(516)("Request_MBJ_ENT__emr_v2_Password").encrypt(t.data.requestPasswordReset.verification.code),s="http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/passwordReset/"+t.data.requestPasswordReset._id+"@"+i;console.log("resetUrl",s),n="...password reset request sent.....url: "+s,e.context.setUserAlert(n),e.setState({isLoading:!1,requestingPasswordReset:!1}),e.toggleForgotPassword()}})).catch((function(t){e.setState({userAlert:t})}))},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){console.log("...login component mounted...")}},{key:"logUserActivity",value:function(){var e=this;console.log("...logUserActivity...");var t=JSON.parse(sessionStorage.getItem("logInfo")),a=t.activityId,n=t.token,i=a,s=this.state.activityA,o=D()().tz("America/Bogota").format("YYYY-MM-DD"),l={query:'\n        mutation {addUserActivity(\n          activityId:"'.concat(a,'",userId:"').concat(i,'",\n          userInput:{\n            activityDate:"').concat(o,'",\n            activityRequest:"').concat(s,'"\n          })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n      ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){t.errors&&e.context.setUserAlert(t.errors[0].message),t.data.addUserActivity.error&&(e.context.setUserAlert(t.data.addUserActivity.error),console.log("...resDataError...",t.data.addUserActivity.error))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(C.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus}),"login"===this.state.showForm&&i.a.createElement(_.a,{className:"authPageContainerRow"},i.a.createElement(A.a,{className:"authPageContainerCol"},i.a.createElement(Ze,{onConfirm:this.submitLoginForm,onStartForgotPassword:this.toggleForgotPassword,onStartVerification:this.toggleVerification}))),"verify"===this.state.showForm&&i.a.createElement(_.a,{className:"authPageContainerRow"},i.a.createElement(A.a,{className:"authPageContainerCol"},i.a.createElement($e,{canCancel:!0,canConfirm:!0,onCancel:this.toggleVerification,onConfirm:this.verifyUser}))),"forgotPassword"===this.state.showForm&&i.a.createElement(_.a,{className:"authPageContainerRow"},i.a.createElement(A.a,{className:"authPageContainerCol"},i.a.createElement(et,{onCancel:this.toggleForgotPassword,onConfirm:this.requestPasswordReset}))))}}]),n}(n.Component);tt.contextType=E;var at=tt,nt=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Signup"),i.a.createElement("div",{className:"formDivider1"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"email"},i.a.createElement(J.a.Label,{className:"formLabel"},"Email Address"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"password"},i.a.createElement(J.a.Label,{className:"formLabel"},"Password"),i.a.createElement(J.a.Control,{type:"password",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"role"},i.a.createElement(J.a.Label,{className:"formLabel"},"Role"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Staff"),i.a.createElement("option",null,"Nurse"),i.a.createElement("option",null,"Doctor"))),i.a.createElement(J.a.Group,{as:A.a,controlId:"title"},i.a.createElement(J.a.Label,{className:"formLabel"},"Title"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Mr"),i.a.createElement("option",null,"Mrs"),i.a.createElement("option",null,"Ms"),i.a.createElement("option",null,"Dr")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"name"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"username"},i.a.createElement(J.a.Label,{className:"formLabel"},"Username"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"dob"},i.a.createElement(J.a.Label,{className:"formLabel"},"D.O.B"),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"gender"},i.a.createElement(J.a.Label,{className:"formLabel"},"Gender"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Female"),i.a.createElement("option",null,"Male"),i.a.createElement("option",null,"Prefer Not to Say")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"phone"},i.a.createElement(J.a.Label,{className:"formLabel"},"Phone"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"phone2"},i.a.createElement(J.a.Label,{className:"formLabel"},"Phone #2"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider3"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"addressNumber"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Number"),i.a.createElement(J.a.Control,{type:"number",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"addressStreet"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Street"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"addressTown"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Town"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"addressCity"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address City"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"addressParish"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Parish"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"none"),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"St. Thomas"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"))),i.a.createElement(J.a.Group,{as:A.a,controlId:"addressCountry"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Country"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"addressPostalCode"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Postalcode"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"loginFormBtn searchBtn"},"Signup"),i.a.createElement(I.a,{variant:"warning",className:"loginFormBtn searchBtn"},i.a.createElement(p.c,{to:"/login"},"Login")))))},it=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={verifying:!1,role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",userSeshStore:!1,user:{},activityA:null,requestingPasswordReset:!1,signupStatus:null,invited:!1},e.submitSignupForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitSignupForm..."),console.log("...submitSignupForm...");var a=t.target.email.value,n=t.target.password.value,i=t.target.role.value,s=t.target.name.value,o=t.target.title.value,l=t.target.username.value,c=t.target.dob.value,r=t.target.gender.value,m=t.target.phone.value,d=t.target.phone2.value,p=t.target.addressNumber.value,g=t.target.addressStreet.value,h=t.target.addressTown.value,u=t.target.addressCity.value,y=t.target.addressParish.value,v=t.target.addressCountry.value,f=t.target.addressPostalCode.value;if(0!==a.trim().length&&0!==n.trim().length&&0!==i.trim().length&&0!==s.trim().length&&0!==l.trim().length&&0!==c.trim().length&&0!==r.trim().length&&0!==m.trim().length&&0!==d.trim().length&&0!==p.trim().length&&0!==g.trim().length&&0!==h.trim().length&&0!==u.trim().length&&0!==y.trim().length&&0!==v.trim().length){var E={query:'\n            mutation {createUser(\n              userInput:{\n                password:"'.concat(n,'",\n                title:"').concat(o,'",\n                name:"').concat(s,'",\n                role:"').concat(i,'",\n                username:"').concat(l,'",\n                dob:"').concat(c,'",\n                gender:"').concat(r,'",\n                contactPhone:"').concat(m,'",\n                contactPhone2:"').concat(d,'",\n                contactEmail:"').concat(a,'",\n                addressNumber:').concat(p,',\n                addressStreet:"').concat(g,'",\n                addressTown:"').concat(h,'",\n                addressCity:"').concat(u,'",\n                addressParish:"').concat(y,'",\n                addressCountry:"').concat(v,'",\n                addressPostalCode:"').concat(f,'"\n              }\n            )\n            {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(E),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...Signup success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),a="...verificationCode: "+t.data.createUser.verification.code,e.context.setUserAlert(a),e.setState({signupStatus:"success"})})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank required fields!!!...")},e.submitInviteForm=function(t){t.preventDefault(),console.log("...checking inviteCode..."),e.context.setUserAlert("...checking inviteCode...");var a=t.target.inviteCode.value,n={query:'\n            query {verifyInvitation(challenge:"'.concat(a,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...Signup success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),"matched"===t.data.verifyInvitation?(e.setState({invited:!0}),e.context.setUserAlert("...invite code accepted...")):e.context.setUserAlert("...invite code rejected. Check & try again...")})).catch((function(t){e.context.setUserAlert(t)}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("...signup component mounted...")}},{key:"render",value:function(){return i.a.createElement(C.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus}),i.a.createElement(_.a,{className:"authPageContainerRow"},i.a.createElement(A.a,{className:"authPageContainerCol"},!0!==this.state.invited&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{onSubmit:this.submitInviteForm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"inviteCode"},i.a.createElement(J.a.Label,null,"inviteCode"),i.a.createElement(J.a.Control,{type:"text",placeholder:"inviteCode"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Submit")))),"success"!==this.state.signupStatus&&!0===this.state.invited&&i.a.createElement(nt,{onConfirm:this.submitSignupForm}),"success"===this.state.signupStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"SignUp Success...Proceed to Login"),i.a.createElement(I.a,{variant:"warning",className:"loginFormBtn"},i.a.createElement(p.c,{to:"/login"},"Login"))))))}}]),a}(n.Component);it.contextType=E;var st=it,ot=function(e){return i.a.createElement("div",{className:"UpdateFormContainer"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Reset Password"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"verificationCode",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"verification Code"),i.a.createElement(J.a.Control,{type:"text",value:e.verf}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"password",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Password"),i.a.createElement(J.a.Control,{type:"password",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"primary",className:"formButton",type:"submit"},"Reset"),i.a.createElement(I.a,{variant:"danger",className:"formButton",onClick:e.onCancel},i.a.createElement(p.c,{to:"/landing"},"Cancel")))))},lt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",passwordResetStatus:null,user:{},activityA:null,activityId:null,verfCode:null},e.submitResetPasswordForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitSignupForm..."),console.log("...submitSignupForm...");var a=t.target.password.value,n=e.state.verfCode,s=e.state.activityId;if(0!==a.trim().length&&0!==n.trim().length){var o={query:'\n            mutation {resetUserPassword(\n              userId:"'.concat(s,'",\n              userInput:{\n                verificationCode:"').concat(n,'",\n                password:"').concat(a,'"\n              })\n            {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.resetUserPassword);var a="...Password Reset Success!...";return t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({passwordResetStatus:"success"}),i.a.createElement(g.a,{to:"/login"})})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank required fields!!!...")},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("...password component mounted..."),console.log(),this.setState({activityId:this.props.location.pathname.split("@")[0].split("/")[2],verfCode:this.props.location.pathname.split("@")[1]})}},{key:"render",value:function(){return i.a.createElement(C.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus}),i.a.createElement(_.a,{className:"authPageContainerRow"},i.a.createElement(A.a,{className:"authPageContainerCol"},"success"!==this.state.passwordResetStatus&&i.a.createElement(ot,{onConfirm:this.submitResetPasswordForm,verf:this.state.verfCode}),"success"===this.state.passwordResetStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Reset Success...Proceed to Login")))))}}]),a}(n.Component);lt.contextType=E;var ct=lt,rt=a(103),mt=function(e){var t=Object.assign({},e.filter),a=e.users,n=[];"staff"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"staff"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"staff"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"staff"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"staff"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"staff"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"staff"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"staff"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"staff"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"staff"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"staff"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"staff"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Z,{key:s,user:t,canDelete:e.canDelete,showDetails:e.showDetails})}));return i.a.createElement("ul",{className:"userList"},o)},dt=(a(185),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlay2:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",startFilter:!1,selectFilter:null,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"basic",adding:{state:null,field:null},canUpdate:!1,updating:{state:null,field:null,previous:{}},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,calendarAttendance:null,calendarLeave:null,calendarAppointments:null,calendarVisits:null,pocketVars:null,s3State:{action:null,target:null,status:null}},n.submitAddAddressForm=function(e){e.preventDefault(),console.log("...adding address..."),n.context.setUserAlert("...adding address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.number.value,o=e.target.street.value,l=e.target.town.value,c=e.target.city.value,r=e.target.parish.value,m=e.target.country.value,d=e.target.postalCode.value;if(0===s.trim().length||0===o.trim().length||0===c.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var p={query:'\n      mutation {addUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(o,'",\n          addressTown:"').concat(l,'",\n          addressCity:"').concat(c,'",\n          addressParish:"').concat(r,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserAddress),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.addUserAddress,activityA:"addUserAddress?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteAddress=function(e){console.log("...deleting address..."),n.context.setUserAlert("...deleting address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n      mutation {deleteUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'",\n          addressPrimary: ').concat(e.primary,"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserAddress),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.deleteUserAddress,activityA:"deleteUserAddress?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.deleteUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.setAddressPrimary=function(e){console.log("...setting primary address..."),n.context.setUserAlert("...setting primary address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n      mutation {setUserAddressPrimary(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address set primary success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.setUserAddressPrimary),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.setUserAddressPrimary,activityA:"setUserAddressPrimary?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.setUserAddressPrimary,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateAddressForm=function(e){e.preventDefault(),console.log("updating address..."),n.context.setUserAlert("...updating address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={number:n.state.updating.previous.number,street:n.state.updating.previous.street,town:n.state.updating.previous.town,city:n.state.updating.previous.city,parish:n.state.updating.previous.parish,country:n.state.updating.previous.country,postalCode:n.state.updating.previous.postalCode,primary:n.state.updating.previous.primary},o={number:e.target.number.value,street:e.target.street.value,town:e.target.town.value,city:e.target.city.value,parish:e.target.parish.value,country:e.target.country.value,postalCode:e.target.postalCode.value,primary:s.primary};if(0===o.number.trim().length||0===o.street.trim().length||0===o.city.trim().length||0===o.country.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(s.number,',\n          addressStreet:"').concat(s.street,'",\n          addressTown:"').concat(s.town,'",\n          addressCity:"').concat(s.city,'",\n          addressParish:"').concat(s.parish,'",\n          addressCountry:"').concat(s.country,'",\n          addressPostalCode:"').concat(s.postalCode,'",\n          addressPrimary: ').concat(s.primary,"\n        }\n        userInput2:{\n          addressNumber:").concat(o.number,',\n          addressStreet:"').concat(o.street,'",\n          addressTown:"').concat(o.town,'",\n          addressCity:"').concat(o.city,'",\n          addressParish:"').concat(o.parish,'",\n          addressCountry:"').concat(o.country,'",\n          addressPostalCode:"').concat(o.postalCode,'",\n          addressPrimary: ').concat(o.primary,",\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.updateUserAddress),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.updateUserAddress,activityA:"updateUserAddress?activityId:".concat(a,",userId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedUser=e.data.updateUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddAttendanceForm=function(e){e.preventDefault(),console.log("...adding attendance..."),n.context.setUserAlert("...attendance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.date.value,o=e.target.status.value,l=e.target.description.value.replace(/\n/g," ");if(0===s.trim().length||0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var c={query:'\n      mutation {addUserAttendance(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          attendanceDate:"').concat(s,'",\n          attendanceStatus:"').concat(o,'",\n          attendanceDescription:"').concat(l,'"\n        })\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserAttendance),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.addUserAttendance,activityA:"addUserAttendance?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.addUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteAttendance=function(e){console.log("...deleting attendance..."),n.context.setUserAlert("...deleting attendance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserAttendance(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            attendanceDate:"').concat(e.date,'",\n            attendanceStatus:"').concat(e.status,'",\n            attendanceDescription:"').concat(e.description,'",\n            attendanceHighlighted:').concat(e.highlighted,"\n          }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserAttendance),n.setState({isLoading:!1,selectedUser:e.data.deleteUserAttendance,activityA:"deleteUserAttendance?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.deleteUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleStaffAttendanceHighlighted=function(e){console.log("toggleStaffAttendanceHighlighted"),n.context.setUserAlert("...toggling staff attendance highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.user._id;t={query:'\n      mutation {toggleUserAttendanceHighlighted(\n        activityId:"'.concat(i,'",\n        userId:"').concat(s,'",\n        userInput:{\n          attendanceDate:"').concat(e.date,'",\n          attendanceStatus:"').concat(e.status,'",\n          attendanceDescription:"').concat(e.description,'",\n          attendanceHighlighted:').concat(e.highlighted,"\n        }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...attendance highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.toggleUserAttendanceHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.toggleUserAttendanceHighlighted,activityA:"toggleUserAttendanceHighlighted?activityId:".concat(i,",userId:").concat(s),adding:{state:null,field:null}}),n.context.selectedUser=e.data.toggleUserAttendanceHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateAttendanceForm=function(e){e.preventDefault(),console.log("updating attendance..."),n.context.setUserAlert("...updating attendance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={date:n.state.updating.previous.date,status:n.state.updating.previous.status,description:n.state.updating.previous.description,highlighted:n.state.updating.previous.highlighted},o={date:e.target.date.value,status:e.target.status.value,description:e.target.description.value,highlighted:s.highlighted};if(0===o.date.trim().length||0===o.status.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateUserAttendance(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          attendanceDate:"').concat(s.date,'",\n          attendanceStatus:"').concat(s.status,'",\n          attendanceDescription:"').concat(s.description,'",\n          attendanceHighlighted: ').concat(s.highlighted,'\n        }\n        userInput2:{\n          attendanceDate:"').concat(o.date,'",\n          attendanceStatus:"').concat(o.status,'",\n          attendanceDescription:"').concat(o.description,'",\n          attendanceHighlighted: ').concat(o.highlighted,"\n        }\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.updateUserAttendance),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.updateUserAttendance,activityA:"updateUserAttendance?activityId:".concat(a,",userId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.parseForCalendar({attendance:e.data.updateUserAttendance.attendance,leave:e.data.updateUserAttendance.leave,appointments:e.data.updateUserAttendance.appointments}),n.context.selectedUser=e.data.updateUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddLeaveForm=function(e){e.preventDefault(),console.log("...adding leave..."),n.context.setUserAlert("...leave..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.startDate.value,o=e.target.endDate.value,l=e.target.type.value,c=e.target.description.value.replace(/\n/g," ");if(0===s.trim().length||0===o.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var r={query:'\n      mutation {addUserLeave(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          leaveType:"').concat(l,'",\n          leaveStartDate:"').concat(s,'",\n          leaveEndDate:"').concat(o,'",\n          leaveDescription:"').concat(c,'"\n        }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserLeave),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.addUserLeave,activityA:"addUserLeave?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.addUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteLeave=function(e){console.log("...deleting leave..."),n.context.setUserAlert("...deleting leave..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserLeave(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            leaveType:"').concat(e.type,'",\n            leaveStartDate:"').concat(e.startDate,'",\n            leaveEndDate:"').concat(e.endDate,'",\n            leaveDescription:"').concat(e.description,'",\n            leaveHighlighted:').concat(e.highlighted,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserLeave),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.deleteUserLeave,activityA:"deleteUserLeave?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.deleteUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleStaffLeaveHighlighted=function(e){console.log("toggleStaffLeaveHighlighted"),n.context.setUserAlert("...toggling staff leave highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.user._id;t={query:'\n      mutation {toggleUserLeaveHighlighted(\n        activityId:"'.concat(i,'",\n        userId:"').concat(s,'",\n        userInput:{\n          leaveType:"').concat(e.type,'",\n          leaveStartDate:"').concat(e.startDate,'",\n          leaveEndDate:"').concat(e.endDate,'",\n          leaveDescription:"').concat(e.description,'",\n          leaveHighlighted:').concat(e.highlighted,"\n        }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...leave highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.toggleUserLeaveHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.toggleUserLeaveHighlighted,activityA:"toggleUserLeaveHighlighted?activityId:".concat(i,",userId:").concat(s),adding:{state:null,field:null}}),n.context.selectedUser=e.data.toggleUserLeaveHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateLeaveForm=function(e){e.preventDefault(),console.log("updating leave..."),n.context.setUserAlert("...updating leave..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={startDate:n.state.updating.previous.startDate,endDate:n.state.updating.previous.endDate,type:n.state.updating.previous.type,description:n.state.updating.previous.description,highlighted:n.state.updating.previous.highlighted},o={startDate:e.target.startDate.value,endDate:e.target.endDate.value,type:e.target.type.value,description:e.target.description.value,highlighted:s.highlighted};if(0===o.startDate.trim().length||0===o.endDate.trim().length||0===o.type.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateUserLeave(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          leaveStartDate:"').concat(s.startDate,'",\n          leaveEndDate:"').concat(s.endDate,'",\n          leaveType:"').concat(s.type,'",\n          leaveDescription:"').concat(s.description,'",\n          leaveHighlighted: ').concat(s.highlighted,'\n        }\n        userInput2:{\n          leaveStartDate:"').concat(o.startDate,'",\n          leaveEndDate:"').concat(o.endDate,'",\n          leaveType:"').concat(o.type,'",\n          leaveDescription:"').concat(o.description,'",\n          leaveHighlighted: ').concat(o.highlighted,"\n        }\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.updateUserLeave),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.updateUserLeave,activityA:"updateUserLeave?activityId:".concat(a,",userId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.parseForCalendar({attendance:e.data.updateUserLeave.attendance,leave:e.data.updateUserLeave.leave,appointments:e.data.updateUserLeave.appointments}),n.context.selectedUser=e.data.updateUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding image..."),n.context.setUserAlert("...image..."),n.setState({isLoading:!0,overlay2:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.user._id;n.props.user.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="staff/"+l+"/images",d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),g.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var h={query:'\n      mutation {addUserImage(\n        activityId:"'.concat(o,'",\n        userId:"').concat(l,'",\n        userInput:{\n          imageName:"').concat(t,'",\n          imageType:"').concat(a,'",\n          imagePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.addUserImage),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.addUserImage,activityA:"addUserImage?activityId:".concat(o,",userId:").concat(l),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserImage,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteImage=function(e){console.log("...deleting image..."),n.context.setUserAlert("...deleting image..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=(n.props.user.username,e.name,{query:'\n        mutation {deleteUserImage(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            imageName:"').concat(e.name,'",\n            imageType:"').concat(e.type,'",\n            imagePath:"').concat(e.path,'",\n            imageHighlighted:').concat(e.highlighted,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...image delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateUser(s.data.deleteUserImage),n.setState({isLoading:!1,overlay2:!1,selectedUser:s.data.deleteUserImage,activityA:"deleteUserImage?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=s.data.deleteUserImage,n.logUserActivity({activityId:a,token:t});var l="staff/"+i+"/images",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleStaffImageHighlighted=function(e){console.log("toggleStaffImageHighlighted"),n.context.setUserAlert("...toggling staff image highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.user._id,o=e.name,l=e.type,c=e.path,r=e.highlighted;t={query:'\n      mutation {\n        toggleUserImageHighlighted(\n          activityId:"'.concat(i,'",\n          userId:"').concat(s,'",\n          userInput:{\n            imageName:"').concat(o,'",\n            imageType:"').concat(l,'",\n            imagePath:"').concat(c,'",\n            imageHighlighted: ').concat(r,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.toggleUserImageHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.toggleUserImageHighlighted,activityA:"toggleUserImageHighlighted?activityId:".concat(i,",userId:").concat(s),adding:{state:null,field:null}}),n.context.selectedUser=e.data.toggleUserImageHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding file..."),n.context.setUserAlert("...file..."),n.setState({isLoading:!0,overlay2:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.user._id;n.props.user.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="staff/"+l+"/files";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),g.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var h={query:'\n      mutation {addUserFile(\n        activityId:"'.concat(o,'",\n        userId:"').concat(l,'",\n        userInput:{\n          fileName:"').concat(t,'",\n          fileType:"').concat(a,'",\n          filePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.addUserFile),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.addUserFile,activityA:"addUserFile?activityId:".concat(o,",userId:").concat(l),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserFile,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteFile=function(e){console.log("...deleting file..."),n.context.setUserAlert("...deleting file..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=(n.props.user.username,e.name,{query:'\n        mutation {deleteUserFile(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            fileName:"').concat(e.name,'",\n            fileType:"').concat(e.type,'",\n            filePath:"').concat(e.path,'",\n            fileHighlighted:').concat(e.highlighted,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...file delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateUser(s.data.deleteUserFile),n.setState({isLoading:!1,overlay2:!1,selectedUser:s.data.deleteUserFile,activityA:"deleteUserFile?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=s.data.deleteUserFile,n.logUserActivity({activityId:a,token:t});var l="staff/"+i+"/files",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleStaffFileHighlighted=function(e){console.log("toggleStaffFileHighlighted"),n.context.setUserAlert("...toggling staff file highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.user._id,o=e.name,l=e.type,c=e.path,r=e.highlighted;t={query:'\n      mutation {\n        toggleUserFileHighlighted(\n          activityId:"'.concat(i,'",\n          userId:"').concat(s,'",\n          userInput:{\n            fileName:"').concat(o,'",\n            fileType:"').concat(l,'",\n            filePath:"').concat(c,'",\n            fileHighlighted: ').concat(r,"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.toggleUserFileHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.toggleUserFileHighlighted,activityA:"toggleUserFileHighlighted?activityId:".concat(i,",userId:").concat(s),adding:{state:null,field:null}}),n.context.selectedUser=e.data.toggleUserFileHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding note..."),n.context.setUserAlert("...adding note..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.notes.value;if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});s=s.replace(/\n/g,"");var o={query:'\n      mutation {addUserNotes(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          notes:"').concat(s,'"\n        }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserNotes),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.addUserNotes,activityA:"addUserNotes?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteNote=function(e){console.log("...deleting note..."),n.context.setUserAlert("...deleting note..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserNote(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            note: "').concat(e,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserNote),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.deleteUserNote,activityA:"deleteUserNote?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.deleteUserNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.field.value,o=e.target.query.value;if(0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateUserSingleField(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.updateUserSingleField),n.setState({isLoading:!1,overlay2:!1,selectedUser:e.data.updateUserSingleField,activityA:"updateUserSingleField?activityId:".concat(a,",userId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedUser=e.data.updateUserSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null},updating:{state:null,field:null,previous:{}}})},n.startUpdate=function(e){n.setState({updating:{state:!0,field:e.field,previous:e.data}})},n.parseForCalendar=function(e){console.log("...parsing staff dates for calendar..."),n.setState({overlay2:!0});e.attendance.map((function(e){return{title:e.status,date:D.a.unix(e.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),props:{date:e.date,status:e.status,description:e.description,highlighted:e.highlighted,field:"attendance"}}})),e.leave.map((function(e){return{title:e.type,date:D.a.unix(e.startDate.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),end:D.a.unix(e.endDate.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),props:{date:e.date,type:e.type,startDate:e.startDate,endDate:e.endDate,description:e.description,highlighted:e.highlighted,field:"leave"}}}));var t,a=[],i=Object(ae.a)(e.attendance);try{for(i.s();!(t=i.n()).done;){var s=t.value,o="blue";!0===s.highlighted&&(o="red");var l=void 0;12===s.date.length?l=D.a.unix(s.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"):13===s.date.length&&(l=D.a.unix(s.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var c={title:s.status,color:o,date:l,props:{date:l,status:s.status,description:s.description,highlighted:s.highlighted,field:"attendance"}};a.push(c)}}catch(w){i.e(w)}finally{i.f()}var r,m=[],d=Object(ae.a)(e.leave);try{for(d.s();!(r=d.n()).done;){var p=r.value,g="blue";!0===p.highlighted&&(g="red");var h=void 0,u=void 0;12===p.startDate.length&&(h=D.a.unix(p.startDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),12===p.endDate.length&&(u=D.a.unix(p.endDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===p.startDate.length&&(h=D.a.unix(p.startDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===p.endDate.length&&(u=D.a.unix(p.endDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var y={title:p.type,color:g,date:h,end:u,props:{date:h,type:p.type,startDate:h,endDate:u,description:p.description,highlighted:p.highlighted,field:"leave"}};m.push(y)}}catch(w){d.e(w)}finally{d.f()}e.appointments.map((function(e){return{title:e.title,date:D.a.unix(e.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,field:"appointments",patient:e.patient}}}));var v,f=[],E=Object(ae.a)(e.appointments);try{for(E.s();!(v=E.n()).done;){var b=v.value,_=void 0;12===b.date.length?_=D.a.unix(b.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"):13===b.date.length&&(_=D.a.unix(b.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"));var A={title:b.title,date:_,props:{_id:b._id,date:_,title:b.title,type:b.type,subType:b.subType,time:b.time,location:b.location,description:b.description,important:b.important,field:"appointments",patient:b.patient}};f.push(A)}}catch(w){E.e(w)}finally{E.f()}var C,N=[],x=Object(ae.a)(e.visits);try{for(x.s();!(C=x.n()).done;){var I=C.value,T=void 0;12===I.date.length?T=D.a.unix(I.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"):13===I.date.length&&(T=D.a.unix(I.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var S={title:I.title,date:T,props:{_id:I._id,consultants:I.consultants,date:T,patient:I.patient,subType:I.subType,time:I.time,title:I.title,type:I.type,field:"visits"}};N.push(S)}}catch(w){x.e(w)}finally{x.f()}n.setState({calendarAttendance:a,calendarLeave:m,calendarAppointments:f,calendarVisits:N,overlay2:!1})},n.viewCalendarEvent=function(e){var t,a=e.event.extendedProps.props;"attendance"===a.field&&(t={date:a.date,status:a.status,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarAttendance",data:t}})),"leave"===a.field&&(t={type:a.type,startDate:a.startDate,endDate:a.endDate,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarLeave",data:t}})),"appointments"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,location:a.location,description:a.description,important:a.important,patient:a.patient},n.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:t,goLink:!0}})),"visits"===a.field&&(t={_id:a._id,consultants:a.consultants,date:a.date,patient:a.patient,subType:a.subType,time:a.time,title:a.title,type:a.type},n.setState({overlay:!0,overlayStatus:{type:"calendarVisit",data:t,goLink:!0}}))},n.dateClick=function(e){console.log("dateClick",e)},n.toggleOverlay=function(){n.setState({overlay:!1})},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...staff details component mounted...",this.props.user),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getPocketVars(e)}"Admin"===this.context.role&&this.setState({canDelete:!0,canUpdate:!0}),this.setState({selectedUser:this.context.selectedUser,menuSelect:this.props.subMenu}),this.parseForCalendar({attendance:this.props.user.attendance,leave:this.props.user.leave,appointments:this.props.user.appointments,visits:this.props.user.visits})}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){t.setState({userAlert:e})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,o=D()().tz("America/Bogota").format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(o,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.addUserActivity.error&&t.context.setUserAlert(e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),!0===this.state.overlay2&&i.a.createElement(de,{toggleOverlay2:this.toggleOverlay2}),i.a.createElement("div",{className:"detailContainer"},i.a.createElement(_.a,{className:""},!this.props.user&&i.a.createElement("h3",null,"...")),i.a.createElement(_.a,{className:""},this.props.user&&i.a.createElement(A.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(Me,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"all"===this.props.subMenu&&i.a.createElement(_.a,{className:"tabRowAll"},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.title),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.name),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.username),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.role),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),12===this.props.user.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.user.dob.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.user.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.user.dob.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.gender),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.email),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone2),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit"))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.registrationNumber)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employment Date:"),this.props.user.employmentDate&&12===this.props.user.employmentDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.user.employmentDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),this.props.user.employmentDate&&13===this.props.user.employmentDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.user.employmentDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"employmentDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.code))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Fe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ze,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"address"===this.state.updating.field&&i.a.createElement(ze,{onConfirm:this.submitUpdateAddressForm,onCancel:this.cancelAdd,previousAddress:this.state.updating.previous}),i.a.createElement(he,{filter:this.state.filter,addresses:this.props.user.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Attendance:")),i.a.createElement(A.a,{className:"subTabCol"},!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(je,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"leave"===this.state.updating.field&&i.a.createElement(Re,{onConfirm:this.submitUpdateLeaveForm,onCancel:this.cancelAdd,previousLeave:this.state.updating.previous}),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"attendance"===this.state.selectFilter&&i.a.createElement(Le,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"attendance")},"Filter")),i.a.createElement(ve,{filter:this.state.filter,attendance:this.props.user.attendance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAttendance,toggleStaffAttendanceHighlighted:this.toggleStaffAttendanceHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Leave:")),i.a.createElement(A.a,{className:"subTabCol"},!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(Re,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"leave"===this.state.updating.field&&i.a.createElement(Re,{onConfirm:this.submitUpdateLeaveForm,onCancel:this.cancelAdd,previousLeave:this.state.updating.previous}),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"leave"===this.state.selectFilter&&i.a.createElement(Ve,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"leave")},"Filter")),i.a.createElement(be,{filter:this.state.filter,leave:this.props.user.leave,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteLeave,toggleStaffLeaveHighlighted:this.toggleStaffLeaveHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Images:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Pe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(He,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Ce,{filter:this.state.filter,images:this.props.user.images,authId:this.context.activityId,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage,toggleStaffImageHighlighted:this.toggleStaffImageHighlighted}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Files:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(Be,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ke,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ie,{filter:this.state.filter,files:this.props.user.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile,toggleStaffFileHighlighted:this.toggleStaffFileHighlighted}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Appointments:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(qe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Se,{filter:this.state.filter,appointments:this.props.user.appointments,authId:this.context.activityId})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Visits:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"visit"===this.state.selectFilter&&i.a.createElement(Ge,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"visit")},"Filter")),i.a.createElement(ke,{filter:this.state.filter,visits:this.props.user.visits,authId:this.context.activityId})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Notes:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(Oe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Ye,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(De,{filter:this.state.filter,notes:this.props.user.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))))),"basic"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.title),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.name),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.username),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.role),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),12===this.props.user.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.user.dob.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.user.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.user.dob.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.gender),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.email),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone2),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")))),"admin"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.registrationNumber)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employment Date:"),this.props.user.employmentDate&&12===this.props.user.employmentDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.user.employmentDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),this.props.user.employmentDate&&13===this.props.user.employmentDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.user.employmentDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"employmentDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.code)))),"address"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Fe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ze,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"address"===this.state.updating.field&&i.a.createElement(ze,{onConfirm:this.submitUpdateAddressForm,onCancel:this.cancelAdd,previousAddress:this.state.updating.previous}),i.a.createElement(he,{filter:this.state.filter,addresses:this.props.user.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"attendance"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Attendance:")),i.a.createElement(A.a,{className:"subTabCol"},!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(je,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"attendance"===this.state.updating.field&&i.a.createElement(je,{onConfirm:this.submitUpdateAttendanceForm,onCancel:this.cancelAdd,previousAddress:this.state.updating.previous}),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"attendance"===this.state.selectFilter&&i.a.createElement(Le,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"attendance")},"Filter")),i.a.createElement(ve,{filter:this.state.filter,attendance:this.props.user.attendance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAttendance,toggleStaffAttendanceHighlighted:this.toggleStaffAttendanceHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"leave"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Leave:")),i.a.createElement(A.a,{className:"subTabCol"},!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(Re,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"leave"===this.state.updating.field&&i.a.createElement(Re,{onConfirm:this.submitUpdateLeaveForm,onCancel:this.cancelAdd,previousLeave:this.state.updating.previous}),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"leave"===this.state.selectFilter&&i.a.createElement(Ve,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"leave")},"Filter")),i.a.createElement(be,{filter:this.state.filter,leave:this.props.user.leave,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteLeave,toggleStaffLeaveHighlighted:this.toggleStaffLeaveHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"image"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Images:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Pe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(He,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Ce,{filter:this.state.filter,images:this.props.user.images,authId:this.context.activityId,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage,toggleStaffImageHighlighted:this.toggleStaffImageHighlighted})),"file"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Files:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(Be,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ke,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ie,{filter:this.state.filter,files:this.props.user.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile,toggleStaffFileHighlighted:this.toggleStaffFileHighlighted})),"appointment"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Appointments:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter},"Filter")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(qe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Se,{filter:this.state.filter,appointments:this.props.user.appointments,authId:this.context.activityId})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"visit"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Visits:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter},"Filter")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"visit"===this.state.selectFilter&&i.a.createElement(Ge,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"visit")},"Filter")),i.a.createElement(ke,{filter:this.state.filter,visits:this.props.user.visits,authId:this.context.activityId})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"note"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Notes:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(Oe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Ye,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(De,{filter:this.state.filter,notes:this.props.user.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))))))}}]),a}(n.Component));dt.contextType=E;var pt=dt,gt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"staff"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"loggedIn")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},ht=(a(606),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,searchUsers:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menuStaff",startFilter:!1,selectFilter:null,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"list",subMenuState:!1,subMenu:"all",adding:{state:null,field:null},showDetails:!1,selectedUser:null,canDelete:!1,fromGoLink:null,goLinkId:null,tabKey:"list"},e.searchUsers=function(t){t.preventDefault(),console.log("...searching users..."),e.context.setUserAlert("...searching users..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"age"!==o&&"dob"!==o&&"employmentDate"!==o&&"addresses.number"!==o&&"addresses.primary"!==o&&"loggedIn"!==o&&"clientConnected"!==o&&"verification.verified"!==o&&"attendance.date"!==o&&"leave.startDate"!==o&&"leave.endDate"!==o||(c=!1),console.log("regex",c),!0===c&&(a={query:'\n        query {getUsersByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n      ')}),!1===c&&(a={query:'\n        query {getUsersByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...staff search success!...";!0===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===c&&(e.setState({isLoading:!1,searchUsers:t.data.getUsersByFieldRegex,activityA:"getUsersByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByFieldRegex),!1===c&&(e.setState({isLoading:!1,searchUsers:t.data.getUsersByField,activityA:"getUsersByField?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByField),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.toggleFilter=function(){e.setState({startFilter:!e.state.startFilter})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t}),"detail"===t&&e.state.selectedUser?e.setState({subMenuState:!0}):e.setState({subMenuState:!1})},e.subMenuSelect=function(t){e.setState({subMenu:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedUser:t,tabKey:"detail",menuSelect:"detail",subMenuState:!0}),e.props.selectUser(t),e.props.sendSocketNotification({userId:t._id,data:"".concat(e.context.activityId," is watching you...")})},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updateUser=function(t){console.log("...updating user..."),e.setState({selectedUser:t}),e.props.selectUser(t)},e.deleteUser=function(t){console.log("...deleteing user...",t),e.context.setUserAlert("...deleteing user..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteUserById(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'"\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete user success!...";t.errors&&(s=t.errors[0].message),t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteUserById?activityId:".concat(n,",userId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllUsers({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e.clearSearch=function(){e.setState({searchUsers:null})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all users component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.props.location.state&&this.props.location.state.user&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.user}),this.getAllUsers(e),this.props.selectedUser&&(console.log("...found existing user selection... loading..."),this.setState({showDetails:!0,selectedUser:this.props.selectedUser}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...all users retrieval success!...");var s="...all users retrieval success!...";if(e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),!0===t.state.fromGoLink){var o=e.data.getAllUsers.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,menuSelect:"detail",selectedUser:o,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,o=D()().tz("America/Bogota").format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(o,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.error&&t.context.setUserAlert(e.data.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe,(e={state:this.state.sideCol,menuSelect:this.menuSelect,subMenuState:this.state.subMenuState,menu:this.state.menuSelect,subMenu:this.state.subMenu,subMenuSelect:this.subMenuSelect},Object(rt.a)(e,"menu",this.state.menuSelect),Object(rt.a)(e,"page","staff"),Object(rt.a)(e,"role",this.context.role),e)),!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(_.a,{className:"headTopRow"},i.a.createElement("h1",null,"Staff: "),!0===this.state.showDetails&&this.state.selectedUser&&"detail"===this.state.tabKey&&i.a.createElement("h1",{className:"ul"}," ",this.state.selectedUser.name," ")),i.a.createElement(_.a,{className:""},this.state.isLoading&&i.a.createElement(T.a,{src:F,className:"loadingGif",fluid:!0}))),i.a.createElement(_.a,{className:""},this.state.users&&i.a.createElement(A.a,{md:12,className:""},"list"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},!0===this.state.startFilter&&i.a.createElement(A.a,null,i.a.createElement(gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter},"Filter"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn",onClick:this.resetFilter},"Reset Filter")),i.a.createElement($,{filter:this.state.filter,users:this.state.users,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteUser})),"search"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Search"),i.a.createElement(_.a,{className:""},i.a.createElement(W,{onConfirm:this.searchUsers,onCancel:this.clearSearch})),i.a.createElement(_.a,null,this.state.searchUsers&&i.a.createElement(I.a,{variant:"primary",className:"centered_btn",onClick:this.toggleFilter},"Filter")),!0===this.state.startFilter&&i.a.createElement(A.a,null,i.a.createElement(gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),i.a.createElement(_.a,{className:""},this.state.searchUsers&&i.a.createElement(mt,{filter:this.state.filter,users:this.state.searchUsers,authId:this.context.activityId,showDetails:this.showDetails})))),"detail"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol tabColDetail"},!1===this.state.showDetails&&!this.state.selectedUser&&i.a.createElement("h3",null,"Select a Staff Member to see details"),!0===this.state.showDetails&&this.state.selectedUser&&i.a.createElement(pt,{user:this.state.selectedUser,updateUser:this.updateUser,subMenu:this.state.subMenu}))))))}}]),a}(n.Component));ht.contextType=E;var ut,yt=ht,vt=(a(252),function(e){var t=D()().format("YYYY-MM-DD");return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create Patient Form"),i.a.createElement("p",null,' " * " indicates required fields...'),i.a.createElement("div",{className:"formDivider1"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Title *"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Mr"),i.a.createElement("option",null,"Mrs"),i.a.createElement("option",null,"Ms"),i.a.createElement("option",null,"Dr"))),i.a.createElement(J.a.Group,{as:A.a,controlId:"name",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"First Name *"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"lastName",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Last Name *"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"username",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"username *"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"role",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"role "),i.a.createElement(J.a.Control,{type:"text",value:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"contactEmail",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"email *"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"dob",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"dob *"),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"gender",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"gender *"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Female"),i.a.createElement("option",null,"Male"),i.a.createElement("option",null,"Prefer Not to Say")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"contactPhone",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"phone *"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"contactPhone2",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"phone2"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"addressNumber",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressNumber"),i.a.createElement(J.a.Control,{type:"number",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"addressStreet",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressStreet"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"addressTown",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressTown"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"addressCity",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressCity"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"addressParish",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressParish"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"none"),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"St. Thomas"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"))),i.a.createElement(J.a.Group,{as:A.a,controlId:"addressCountry",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressCountry"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"addressPostalCode",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressPostalCode"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider3"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"referralDate",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralDate: YYYY-MM-DD"),i.a.createElement(J.a.Control,{type:"date",placeholder:t})),i.a.createElement(J.a.Group,{as:A.a,controlId:"referralReason",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralReason"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"referralPhysicianName",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralPhysicianName"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"referralPhysicianPhone",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralPhysicianPhone"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"referralPhysicianEmail",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralPhysicianEmail"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"referralPhysicianAddress",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralPhysicianAddress"),i.a.createElement(J.a.Control,{as:"textarea",rows:"5",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"attendingPhysician",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"attendingPhysician"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider1"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"occupationRole",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationRole"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"occupationEmployerName",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationEmployerName"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"occupationEmployerEmail",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationEmployerEmail"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"occupationEmployerPhone",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationEmployerPhone"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"occupationEmployerAddress",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationEmployerAddress"),i.a.createElement(J.a.Control,{as:"textarea",rows:"5",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"insuranceCompany",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceCompany"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Guardian"),i.a.createElement("option",null,"Sagicor"),i.a.createElement("option",null,"Canopy"),i.a.createElement("option",null,"Other"))),i.a.createElement(J.a.Group,{as:A.a,controlId:"insurancePolicyNumber",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insurancePolicyNumber"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"insuranceExpiryDate",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceExpiryDate"),i.a.createElement(J.a.Control,{type:"date",placeholder:t})),i.a.createElement(J.a.Group,{as:A.a,controlId:"insuranceDescription",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceDescription"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"insuranceSubscriberCompany",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceSubscriberCompany"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"insuranceSubscriberDescription",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceSubscriberDescription"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."})))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"loginFormBtn searchBtn"},"Create"),i.a.createElement(I.a,{variant:"danger",className:"loginFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))}),ft=function(e){var t=Object.assign({},e.filter),a=e.patients,n=[];"patient"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"patient"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"patient"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"patient"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"patient"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"patient"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"patient"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"patient"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"patient"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"patient"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"patient"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"patient"===t.field&&"active"===t.key&&(n=a.filter((function(e){return e.active===t.value}))),"patient"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(G,{key:s,patient:t,canDelete:e.canDelete,showDetails:e.showDetails})}));return i.a.createElement("ul",{className:"userList"},o)},Et=a(14),bt=a.p+"static/media/letterhead2.06bfadec.png",_t=(a(771),Et.e.create({body:{paddingTop:25,paddingBottom:65,paddingHorizontal:35},title:{fontSize:24,textAlign:"center",fontFamily:"Times-Roman"},author:{fontSize:12,textAlign:"center",marginBottom:40},subtitle:{fontSize:18,margin:12,fontFamily:"Times-Roman"},text:{margin:12,fontSize:14,textAlign:"justify",fontFamily:"Times-Roman"},textClose:{margin:9,fontSize:14,textAlign:"justify",fontFamily:"Times-Roman"},textCenter:{margin:12,fontSize:14,textAlign:"center",fontFamily:"Times-Roman"},textCenterClose:{margin:10,fontSize:14,textAlign:"center",fontFamily:"Times-Roman"},textRight:{margin:12,fontSize:14,textAlign:"right",fontFamily:"Times-Roman"},textLeft:{margin:12,fontSize:14,textAlign:"left",fontFamily:"Times-Roman"},image:{},header:{fontSize:12,marginBottom:20,textAlign:"center",color:"grey"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},page:{flexDirection:"row",backgroundColor:"#E4E4E4"},section:{margin:10,padding:10,flexGrow:1},table:{display:"table",width:"auto"},tableRow:{margin:"auto",flexDirection:"row"},tableRowTall:{margin:"auto",flexDirection:"row",height:"50%"},table3Col:{width:"33%",borderStyle:"solid",borderWidth:1},tableCol3Free:{width:"33%"},tableCol2:{width:"50%",borderStyle:"solid",borderWidth:1},tableCol2Free:{width:"50%"},tableCell:(ut={margin:"auto"},Object(rt.a)(ut,"margin",5),Object(rt.a)(ut,"fontSize",14),Object(rt.a)(ut,"textAlign","justify"),Object(rt.a)(ut,"fontFamily","Times-Roman"),ut),tableCol7:{width:"60%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,borderBottomWidth:0},rxiconimg:{height:"25rem",width:"25rem"}})),At=function(e){return i.a.createElement("div",{className:"pdfViewBg"},i.a.createElement("div",{className:"pdfView"},i.a.createElement(A.a,{className:"pdfViewClose"},i.a.createElement(I.a,{variant:"outline-danger",id:"pdfViewCloseBtn",size:"sm",class:"centered_btn",onClick:e.close},"X")),i.a.createElement(A.a,{className:"pdfViewCol"},i.a.createElement("h3",null,"Document Generator")),i.a.createElement(Et.c,{className:"viewer"},"test"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.f,{style:_t.title},e.pdfViewData.type),i.a.createElement(Et.f,{style:_t.author},"Miguel de Cervantes"),i.a.createElement(Et.f,{style:_t.subtitle},"Patient name: ",e.patient.name),i.a.createElement(Et.f,{style:_t.text},"En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha mucho tiempo que viv\xeda un hidalgo de los de lanza en astillero, adarga antigua, roc\xedn flaco y galgo corredor. Una olla de algo m\xe1s vaca que carnero, salpic\xf3n las m\xe1s noches, duelos y quebrantos los s\xe1bados, lentejas los viernes, alg\xfan palomino de a\xf1adidura los domingos, consum\xedan las tres partes de su hacienda. El resto della conclu\xedan sayo de velarte, calzas de velludo para las fiestas con sus pantuflos de lo mismo, los d\xedas de entre semana se honraba con su vellori de lo m\xe1s fino. Ten\xeda en su casa una ama que pasaba de los cuarenta, y una sobrina que no llegaba a los veinte, y un mozo de campo y plaza, que as\xed ensillaba el roc\xedn como tomaba la podadera. Frisaba la edad de nuestro hidalgo con los cincuenta a\xf1os, era de complexi\xf3n recia, seco de carnes, enjuto de rostro; gran madrugador y amigo de la caza. Quieren decir que ten\xeda el sobrenombre de Quijada o Quesada (que en esto hay alguna diferencia en los autores que deste caso escriben), aunque por conjeturas veros\xedmiles se deja entender que se llama Quijana; pero esto importa poco a nuestro cuento; basta que en la narraci\xf3n d\xe9l no se salga un punto de la verdad"),i.a.createElement(Et.f,{style:_t.text},"_________________________________________________________")),i.a.createElement(Et.d,null,i.a.createElement(Et.g,{style:_t.section},i.a.createElement(Et.f,null,"xtyz")),i.a.createElement(Et.g,{style:_t.section},i.a.createElement(Et.f,null,"Section #2")))),"referral"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.f,{style:_t.text},"Dear Dr  _____________________________________"),i.a.createElement(Et.f,{style:_t.text},"Thank you for referring  _____________________________________"),i.a.createElement(Et.f,{style:_t.text},"who I saw on  _____________________________________"),i.a.createElement(Et.f,{style:_t.text},"My findings are as follows :"),i.a.createElement(Et.f,{style:_t.text},"_________________________________________________________ _________________________________________________________ _________________________________________________________ _________________________________________________________"),i.a.createElement(Et.f,{style:_t.text},"For this, I reccommend the following :"),i.a.createElement(Et.f,{style:_t.text},"_________________________________________________________ _________________________________________________________ _________________________________________________________ _________________________________________________________"),i.a.createElement(Et.f,{style:_t.text},"He/She is booked to have  _____________________________________"),i.a.createElement(Et.f,{style:_t.text},"and to be seen by me  _____________________________________"),i.a.createElement(Et.f,{style:_t.text},"Thanks again for referring him/her."))),"admissionReminder"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.f,{style:_t.textCenter},"Operation/Admission Reminder"),i.a.createElement(Et.f,{style:_t.textClose},"Name :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Age :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Address :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Name of Operation :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Hospital Name :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Address :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Date of Operation :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Time :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"You must attend  _____________________________________ Hospital"),i.a.createElement(Et.f,{style:_t.textClose},"at ______________________________ a.m/p.m on ______________________________"),i.a.createElement(Et.f,{style:_t.textClose},"You should have nothing to eat or drink after ______________________________"),i.a.createElement(Et.f,{style:_t.textClose},"_______________________________ on _______________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Please take night clothes, toilet articles and hospital fee with you."),i.a.createElement(Et.f,{style:_t.textClose},"Estimated Cost :"))),"sickNote"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.f,{style:_t.textCenter},"TO WHOM IT MAY CONCERN"),i.a.createElement(Et.f,{style:_t.textRight},"Date : __________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________"),i.a.createElement(Et.f,{style:_t.text},"Dear Sir/Madam,"),i.a.createElement(Et.f,{style:_t.text},"This is to certify that I have seen and examined"),i.a.createElement(Et.f,{style:_t.text},"Mr. / Mrs. / Miss  __________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"____________________________________________________________________"),i.a.createElement(Et.f,{style:_t.text},"and recommended that he/she should refrain from active duty"),i.a.createElement(Et.f,{style:_t.text},"for at least  ____________________________ days"),i.a.createElement(Et.f,{style:_t.text},"commencing  ____________________________________________________________"),i.a.createElement(Et.f,{style:_t.textRight},"Yours Truly"),i.a.createElement(Et.f,{style:_t.textRight},"__________________________________"))),"insurance"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.f,{style:_t.textCenter},"INSURANCE"),i.a.createElement(Et.f,{style:_t.textClose},"Patient's Name :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Age :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Address :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Subscriber :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Policy No :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Plan :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Employer :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Proposed Operation :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Date of Operation :  _____________________________________"),i.a.createElement(Et.g,{style:_t.table},i.a.createElement(Et.g,{style:_t.tableRow},i.a.createElement(Et.g,{style:_t.tableCol3Free},i.a.createElement(Et.f,{style:_t.tableCell})),i.a.createElement(Et.g,{style:_t.tableCol3Free},i.a.createElement(Et.f,{style:_t.tableCell},"Total  ")),i.a.createElement(Et.g,{style:_t.tableCol3Free},i.a.createElement(Et.f,{style:_t.tableCell},"Ins will pay"))),i.a.createElement(Et.g,{style:_t.tableRow},i.a.createElement(Et.g,{style:_t.tableCol3Free},i.a.createElement(Et.f,{style:_t.tableCell},"Surgeon's Fee:")),i.a.createElement(Et.g,{style:_t.tableCol3},i.a.createElement(Et.f,{style:_t.tableCell})),i.a.createElement(Et.g,{style:_t.tableCol3},i.a.createElement(Et.f,{style:_t.tableCell}))),i.a.createElement(Et.g,{style:_t.tableRow},i.a.createElement(Et.g,{style:_t.tableCol3Free},i.a.createElement(Et.f,{style:_t.tableCell},"Assistant Surgeon's Fee:")),i.a.createElement(Et.g,{style:_t.tableCol3},i.a.createElement(Et.f,{style:_t.tableCell})),i.a.createElement(Et.g,{style:_t.tableCol3},i.a.createElement(Et.f,{style:_t.tableCell}))),i.a.createElement(Et.g,{style:_t.tableRow},i.a.createElement(Et.g,{style:_t.tableCol3Free},i.a.createElement(Et.f,{style:_t.tableCell},"Anesthetist's Fee:")),i.a.createElement(Et.g,{style:_t.tableCol3},i.a.createElement(Et.f,{style:_t.tableCell})),i.a.createElement(Et.g,{style:_t.tableCol3},i.a.createElement(Et.f,{style:_t.tableCell})))),i.a.createElement(Et.f,{style:_t.textClose},"Please review or approval for surgery and insurance payment."),i.a.createElement(Et.f,{style:_t.textClose},"Thanks"))),"diagnosisTesting"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.f,{style:_t.textRight},"Date : ___________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Name :  _______________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Age :  _______________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Address :  _______________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"________________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Diagnosis :  _______________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"________________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"________________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"________________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Test(s) Required :  _______________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"________________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"________________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"________________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"________________________________________________________________________"))),"prescription"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.g,{style:_t.table},i.a.createElement(Et.g,{style:_t.tableRow},i.a.createElement(Et.g,{style:_t.tableCol2Free},i.a.createElement(Et.f,{style:_t.tableCell},"Age : ________")),i.a.createElement(Et.g,{style:_t.tableCol2Free},i.a.createElement(Et.f,{style:_t.tableCell},"Date : ________")))),i.a.createElement(Et.f,{style:_t.textClose},"Name :  _____________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Address :  _____________________________________"),i.a.createElement(Et.g,{style:_t.table},i.a.createElement(Et.g,{style:_t.tableRowTall},i.a.createElement(Et.g,{style:_t.tableCol7},i.a.createElement(Et.b,{style:_t.rxiconimg,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAACG/AAAhvwEy4RuMAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAv1QTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMtkj8AAAAP50Uk5TAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f4jzaUuAAAVLklEQVR42u3diX+NVx7H8XNvbhIREUnsa4oSGvtOq5iOqtpaLUpLKVNlWlOddpTWbhSjaA260kVnSi1Vtat9bG3tGsQWFLUmkU1yz2swnZlWg9yb8zvP+eV8P3+A557n95Y89+a5zxHiNkVLk/OmnD9xcNeWtUvnz37/7fEjBg3o06ZmEYEUZjaAbEuLXzd7/AsdG5YOwPisBPC/Mk9u+WLEo+VdmKKlAH7u8ropvWoFY5TWArhRxs5Zf2oeiXlaC+A/HZvdowRmajGA6+14o0UQ5moxgGslL+p/N0ZrMYDrHZ7WPgzjtRjA9QvDld3zY8IWA7hW4nv3YsY2A7jWgVdLY8w2A5Aya1mXfJi0xQCudXFafczaZgDX2tvTg3HbDODaO8M+gRi4zQCkPNYXHxJaDUDKhP64HrQagJSnBoRg7DYDkPL0S6EYvM0ApPzpedxOZjUAKbfXweytBiAzJxXA9G0GcO0NQQeM32oAUi4oAwBWA5BJAwIAwO6+rQMAdpc5MQgA7G5zaQCwu7PNAcDyXwMvA4DlzQ0DALvbXwUA7C7pcQCwvAkeALC7NZEAYHffRwGA3e0qAgB2t7cYAFj+drAEANhdXCkAsLtDZQDA7g6XAwC7O3oXANjd8fIAYPm7wTAAsLsFLgCwuxEAYHfejgBgd8nVAcDyjwOiAMDuVnsAwO6mAIDl9QIAu0tvAAB290MwANjdSACwu4xYALC7zW4AsLvnAcDuksoCgN0tBgDL6wIAdncmEgDs7kMAsLzmAGB3GwHA8loAgN2tAQDLuw8A7G45AFheQwDAB8J5ssCYbNqv6rT1i8ldVWo1eaBt56f7DhwyeuL0WQt3XHBOgFWPld+h6qwp35QlLLZ137GzN57I0g5gPgCYAOB/P7iq9JyxM1MnAG91ADAIwI0KNB+08LQ2AZ8DgGkAbnRXtzlXtADIqgAAJgK4VmjnuSkaBAwDAEMBXP9t0GVeKjWAgwBgLoDrbxC67yQW0AgATAZwrYc3kgKYCgCGAxDi/qWEAM4FAoDpAISoPYfuQ6J2AGA+ACEa7aMCMAcAOAAQwaOv0gBIDQcADgCEqPU9jYDeAMADgPAMTsOtYTYDuHYxeIriL0JlAYALAFF2D4GAQQDABoAIX60ewL8AgA8AEfSRcgAZ+QGADwAhxioX8AAAcAIgPlQNYAQAsAIQuEoxgLUAwAqAKLRXLYC0YABgBUBEK75rsCkA8AIgGqu9eXgIADADICYoBbACALgBCDmoEkByIAAwAyDu96oU0BAAuAEQ01QCeBkA2AEoeE4hgMUAwA6AGKIQwEUA4Acg/JJCAUUBgB0AMUohgMYAwA9A4WR1ALoDAD8A4m38QdBuAI3UAZgNAAwBuI4qA7AVABgCUHhz0AUA4AighrrfAZEAwBCAiFcGoD4AcATwgTIAXQGAI4CeygC8DgAcAVRQBuAjAOAIQCj7suAmAGAJ4CtVqzoNACwBTFW1qnQAYAngz8ouAgIBgCOATsoARAAARwANlAEoAwAcARRXBiAGADgCcCl7mnBdAOAIQMSpWlYzAGAJYIWqZbUBAJYA5qpaVmcAYAlgtqplPQMALAHMVLWsFwCAJYB3VC1rMACwBKDs1vC/AgBLABNVLWsKALAE8IaqZb0PACwBjFe1rBkAwBLAm6qWNRkAWAJ4S9WyxgEASwDKnhQzAgBYAngXnwPYDeBDVcsaCAAsAXypaln9AIAlgG2qltUbAFgCSFC1rCcBgOUtYRl50zUA5LAiym4KbQIAHAFUUwagEgBwBNASXwyxG0AvVau66gIAjgCmq1oVvh3ME8AuVavaDQAcARTMUrWq1QDAEYC6a8B/AgBHAMOUAZgMABwBLFcG4I8AwBCAO1EZgFYAwBBAdWXzlxUAgCGAAcrmn+EBAIYAtisDcEAAAD8AVdX9BlgMAAwBqNsuQE4CAH4A3CfUAegHAPwAqHtGoJQtAIAdANdOdfP3FgIAdgDaK/wBYMGbgLwHYJtCALMBgB2AhxXOX74IANwAhMSrBNAUALgBGKty/lkFAIAZgOpXVQLYJwCAFwD3ZpXzl7MAgBmA15XOX/YCAF4AOnjVAigDAKwAxCapnf9+AQCcAETFq51/3n9GZN4CkG+14vnLtgDACEDoKtXzzwgDAD4ACm5QPX+5TgAAGwARW5XPX74GAGwAFNuhfv6yFgBwAfC7HwnmHycAgAeAgFFZBPOXwwGAB4DS6yVJVQCABYCO52jmv1MAAAMA1VdJogYBgPkAir2TRTV/WR4ATAcQ/JdEsvHLLQIAzAYQ+dIxSVg/ADAaQM33UijHL5PCAMBcAIFdNkji/i4AwFAAnhaTT0nyYgHASAAFO316UWporQAA8wBUfG5ZutRTJwAwCoCrYudxqy5KbZ0KBABDAIRVaNhl3GqNs7/RMAEADgFw5Y8qU7lm41bdXxo38+ttx1KlEyVFAYAfHdmRu3YeSDjvzMBvbowAAJtLjAQAqxspAMDmLkcAgNUNFwBgc5cKAYDVvSIAwOYOBAGA1T0kAMDmvhQAYHNpFQDA6kYLALC5hFAAsLp2AgBs7gMBADZ3tCAA2Jy3uQAAmyPbHyp84WallQAAivaHEM0/VPW3WKIBgKCr9YjmH7xCAgCDqHYJ9yyUAMCgWUTzd38mAYBB3+ajmb/rXQkADPqpLNEPgEkSABiUSbU/6EgJAByi2hzuFQkAHJpONP/nJABwaK6bZv49vADAoVXBNPN/LFMCAIO2Ez0NqnWGBAAGxRWhmX8zwu85A4C6TpajmX+DJAkADDpeiWb+NS5IAGDQQaL//5XPSABg0O7iNPOPTpAAwKCtRA8CKRkvAYBBa4ne/xXZJwGAQYuI7gAr9J0EAAZNIPr8N3STBADzS+9J9PeffKskAJjf2XuJ5h+4SAKA+e2KJpq/+58SAMxvQQGi+bs+kABgfGnPC6qmSAAwvr3VyeY/RgKA8U0LIZv/IAkApneOcE+LP0oAML1lpejm39MLAIZ3phvd+EWnTAkARud9l/IZ4G0yJACYffF/L+H4RQu9G50AgK+lDibdBaxRsgQAoztVgnL+NXXvaQYAPreR8BHgVc5KADC+6WTzL39SAgCDehPNv9RhCQAcSm9AMv+i+yUA8OgkxT3ghRw5eQDgV+vVvxUssFkCAJ+mKr8B8BsJAJzqpfgGwMUSAFiVVl/leQuYIwGAWQlFFd4AOFMCALvWeZSdtrclADDsLVVnbawEAJb1UHPSBksA4FlqXRXn7AUJAFw7ruCpUM94AYBva3J9IdglSwIA43K7N1DbqxIAWPdUrs7XA2kSAHiXUjsXp6tJsgQA7h0r7PfZqn1JAsAtWjQpd00cO/zVgf17P9WpfavmjeuQ/qV1dYCfJ6vqTxIAbpXaL96VOk15Dif696IqnJIAoAmAuJf02zZd/XlJpY9KANAGQPQjvRCs6fsLKhYnAUAjAEH6xJUjUb6+nIidEgC0AgjeSnkaV/p4IRi2RQKAXgCiNOlTt8f79FpC1kgA0A1ANCX91LWLD68kaIkEAP0AaB+8ciXnD4wK+EICgBMAxCzKM3k4pw+Md30kAcAZAPm2U57KZTm8EJwmAcAhAKIs6bev38jRaxgnAcAxAKIZ6YVgpxy8gtclADgIQAygPJnJ1e54/D9JAHAUgPiY8mweutPTw/pIAHAYQAjpLixLbr93SNcsAHAagChH+lf4Mbc7dPurEgAcByBakD6Is+OtD/x7HTcAfvG0bxWwD4B4kXIASffc8p6EKxrmv9AjHI0FAPEp5QgOFsr+oHUva5j/imABAHcu//eUQ1ic7YVg7DkN89+QXwBAToomncaobI5Y8UcN898eLgAgZz1AeSHofeS3n0Ef0zD/PVECAHLaS5STSKx609GKH9Aw/0MlBADkvM8oZxH365/Fkbs1zP94OQEAvlwIkt6Vucj1i0MV3KZh/qcrCQDwqfLnKecx/BfU1mmY//lqAgB8rCXlB/Pe9v89TNAyDfNPrCcAwOdeoRzJ5Zj/HMQzX8P8U5oKAPCjzymH8kPB64dwf6Jh/ukPCgDwp1DSq/OF1y8EZ2iYf+YjAgD8q8IFysEMFeJvGuaf9aQAAH9rRXoh2HaYhvnLZwUA+B/pLs1aHgA0UABAbporeTdMAECuKrCH9fwnCADIZRUvMp7/dAEAua51Ftv5f+IGAAUN4Tr/eR4BAApyzeM5/6VBAgCUFLaP4/zXhQgAUFSlS/zmvzVMAICy2ni5zX9XpAAAhb3ObP4HigkAUHohuIDV/I+WEQCgtoL7Gc3/VEUBAKqrfJnN/M/dIwBAfe24XAheriMAgKJhPOZ/pYkAAJoLwS85zD/t9wIAiAqPM3/+V9sJACCrSqLp8896QgAAYR0MvxD09hYAQNpIswEMEABAm/srk+c/RAAA+YXgAXPn/4YAAPqqJpk6/6kCAHT0qKHzn+kCAD2NNnL+cwIEAGi6EPzawPkvDhQAoKtCh4yb/zf5BADoKzbZsPlvLiAAQGePmzX/HRECAPQ21qT5/1BUAIDuC8Gl5sz/SCkBANqLiDdl/ifLCwBwoOqGXAierSIAwJE6GzH/i7UEADiUCVs8JjcSAOBUAcsdn39qCwEAzhV52OH5Z7QRAOBkNa44Ov/MTgIAnO0JJ+fv7SkAwOkmOAigvwAA5y8EVzo2/0ECAAwo6qhD8x8tAMCIaqU4Mv8pAgAMqZsT83/fBQDG9Kb++f/DLQDAmDyrdc9/UaAAAIMqckzv/FfmEwBg1LLqpOqc/8ZQAQBmARDdNc7/u3ABAKYBEJO1zX9fYQEA5gHwrNE0//iSAgAMBCCKHtcy/4RoAQBGAhBNdcz/TGU+sy48M5su5FkAQUs0zP9CdUb/2aNJT4VpAAK+0DD/xAYCAMwE4PpYw/xT7hcAYCiAaRrmn/WQAABDAYzX8g7gWQAwFMBQPR8BpDcGACMBvKjrQ8BTJQDAQAB/0PdngE1BAGAcgG46NxadAQCmAehwVeutAH0AwCwAD6brvRckvSEAmATgPu3fDTtZHADMAVDPgY2kNgYCgCkAqp2XDjQNAAwBcPdp6Ui9AcAIAOWOOzN/mdYAAAwAUOKgdKoTxQHAcQBRe6RzrQ8EAIdXV3C7dLKpAODs4vJvkM7WCwCcLNjx54Ol1QcA5/IslI6XUAwAnMo9WxrQukAAcCbXu9KI3gIAZ3pTGtLTAOBE5mwem1oXAPT3sjSn40UBQHfPSZNa4wEAvfUwbPv4yQCgtccypWF1BwCNtc4wbf4ytQ4AaKtZqjSvY0UAQFMNzNw3/hsPAGipxgVpZpMAQEcxZ6SpPQkA9N11wtj5y5TaAEBdyXhpcEcLAwBtRfZJo1sVAACUFfpeGt5EACCswCZpfF0BgKx8q8yfv0ypCQBEBX4lOXQkCgBICvhc8mhlAAAQ5PpQcmkCABD0luTTEwCgvL8ymr+8UgMAFPeqZNXhSABQ2vOSWcsDAEBhvbzcAMhxAKCuzlmSX50BQFVtrzKcv7xSHQDU9Ls0ybL4SABQUeNkybRlbgDIfbUvSbaNBYBcV/UnybjHASCXVTjFef4yORYAclXpo5J3hyIAIBcVi9Pxqe0uyn99iRsA/C5ip4b5n7irPOn3TMYAgL+FbdEw/7MxQrQk/aDxMQDwrxAd28BfvHED3yuUh0i6BwD8ScsW0Ek/b/tCerPZwUIA4HtatoBObf7z0UJ3Ux7mazcA+JrrIw3zz3j4/583kF4IjgIAX9OxBXTmLz+na0V5Ieh9FAB8S8cW0N6nf3XIQaTXGlUBwJeG6viQrv9NB51LebAD4QCQ87RsAf2Xm49agHTjka/cAJDTtGwBPfq3x614kfKAIwAgh2nZAjrbxzq2Jr0Q7AAAOUrLFtDvu7I99mDKYyZWAYAc1FLHFtD/uMUvZNc8yqPGhQPAHdOyBfSXt9zhI2wv6XFdDgGIGEuZyre4dXVsAb0y361fQCXSOxCHC3TbYnVsAb0x9HYvoQ3ld5C87TDj26VlC+jv7vCb+DXKg1+OwZRvXVkdW0Dvu9OD/FwLKA+/vyDmfKuK69gCOr7kHV9H2H7KF7DQhUlnn5YtoBOic/BKKpNeiQ7FqLNNyxbQZyrn6LW0Jb0QbIthZ1P+9RrmfyGnD24h/Wvk5UoY92/SsgV0UoOcvhwX6Y7E+8Iw8JvyLNAw/5RmPvxC+oHylczHheCv07IFdMZDvrykmETK1/JaHh9oQIxv6dgCOtPH72e0J70Q7BrjR4FsABSXxuXt4esiRhi3hmgA8L/nfF6EaxEA5B0AL/uxivA4AMgrAEb6tYyqiQCQNwD4u53fI14AyAsA3vP7bfcoAMgDAD7z/45892IAYA9gYW429C10EACYA1gRnKul3JMEAKwBbAjN5Vo6AgBnAN/m/lb8MQDAF8BeBTv5upcAAFcAh0qoWE3EIQDgCSChnJrlxCYDAEcAp5XdevU4ADAEcEHhhh1jAYAdgMT6ChfkXgYAzACk3K90RRHxAMAKQHorxUuqngwAjABkqn8uX2cA4APA+xTBosYBABsAfSkWFbAcAJgA+DPNqiIPAwALAGQP5KtxBQAYAJhIt64nAMB8AO9QLmwCAJgO4FPSR/IGrAQAswEs8NCuLOoIAJgMYHkw9dJqpgCAuQDW56dfWzcAMBbAdi2PYJsIAIYC2BOlZXEBqwHASAAHS2haXeFjAGAggOPltC2vdgoAGAfg9N0a1/cUAJgG4Hw1rQucBABmAUisp3eBnm8AwCQAKU11r7DIcQAwB0D6g/qXWCcVAEwBkPmIE2vsAQCGAPA+6cwipwCAGQCedWiRnrUAYAKAgY6tsmgCADgPYJiDy6yXBgBOA/ibo+vsCQAOA5jh8ELfBgBHAXzidnihgesAwEEA8z2Or7TYCQBwDMCyIAOWWj8NABwCsC6/EWt9BgCcAbDNlD1Y/w4ATgDYHWnKYgM3AIB+AAeKG7TakwCgG8CxsiYtt2E6AOgF8OPdZq23DwBoBXAu1rQFTwcAjQAu1zVuwUGbAEAbgCv3GbjiEqcAQBOA9JZGLrlROgBoAXC1g6FrfhYAdADI6mbsot8BAA0A/mDuooP+BQDkAF40edUlfwQAYgBDzV52kwwAIAUw3vR19wUASgDTzF/4ewBAB+Bjl/kLD94CAFQA5gVwWHmp0wBAA2BpEI+l35cBABQA1oZwWXs/ACAAsDWMzdrFBwCgHMCuSD7zF8FbAUAxgLhiglOlzzgB4N8PkgENzwXrbgAAAABJRU5ErkJggg=="})),i.a.createElement(Et.g,{style:_t.tableCol3Free},i.a.createElement(Et.f,{style:_t.tableCell},"Pharmacy Use Only")))),i.a.createElement(Et.f,{style:_t.text},"Repeat _____________________________________ times"),i.a.createElement(Et.g,{style:_t.table},i.a.createElement(Et.g,{style:_t.tableRow},i.a.createElement(Et.g,{style:_t.tableCol2Free},i.a.createElement(Et.f,{style:_t.tableCell},"Pharmacist Sig : ________")),i.a.createElement(Et.g,{style:_t.tableCol2Free},i.a.createElement(Et.f,{style:_t.tableCell},"Dr : ________")))))),"treatmentConsent"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.f,{style:_t.textCenter},"Consent for Medical/Surgical Treatment"),i.a.createElement(Et.f,{style:_t.textClose},"Date :  _______________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Patient's Name :  _______________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Patient's Age :  _______________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"I  _______________________ do hereby give consent to have _______________________"),i.a.createElement(Et.f,{style:_t.textClose},"_____________________________ performed upon _____________________________"),i.a.createElement(Et.f,{style:_t.textClose},"myself /my daughter /my son/ my spouse"),i.a.createElement(Et.f,{style:_t.text},"The procedure, it's risks and possible complications have been fully explained to me. This procedure will be done under local anesthetic and or sedation. I understand and am in agreement with proceeding with same."),i.a.createElement(Et.f,{style:_t.text},"Signed : _______________________________________________"),i.a.createElement(Et.f,{style:_t.text},"Name : _______________________________________________"),i.a.createElement(Et.f,{style:_t.text},"Signed : _______________________________________________"),i.a.createElement(Et.f,{style:_t.text},"Witness : _______________________________________________"),i.a.createElement(Et.f,{style:_t.text},"Doctor/ Surgeon Signature : _______________________________________________"),i.a.createElement(Et.f,{style:_t.text},"Name : _______________________________________________"))),"treatmentInstructions"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{size:"A4",style:_t.page},i.a.createElement(Et.g,{style:_t.section},i.a.createElement(Et.f,null,e.pdfViewData.type)),i.a.createElement(Et.g,{style:_t.section},i.a.createElement(Et.f,null,"Section #2")))),"unfitToFly"===e.pdfViewData.type&&i.a.createElement(Et.a,null,i.a.createElement(Et.d,{style:_t.body},i.a.createElement(Et.b,{style:_t.image,src:bt}),i.a.createElement(Et.f,{style:_t.textCenter},"UNFIT TO FLY AUTHORIZATION"),i.a.createElement(Et.f,{style:_t.textCenterClose},"Today's Date : ____________________________________"),i.a.createElement(Et.f,{style:_t.textCenterClose},"Patient's Name : ____________________________________"),i.a.createElement(Et.f,{style:_t.textCenterClose},"Date of Birth : ___________ Age : __________ Sex : _____"),i.a.createElement(Et.f,{style:_t.textClose},"Clinical Features : _____________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Provisional Investigation : _____________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"Conclusion : _____________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________________________________________"),i.a.createElement(Et.f,{style:_t.textClose},"__________________________________________________________________"))))))},Ct=function(e){var t=Object.assign({},e.filter),a=e.addresses,n=[];"address"===t.field&&"number"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.number>t.number?1:-1}))),"address"===t.field&&"number"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.number<t.number?1:-1}))),"address"===t.field&&"street"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.street>t.street?1:-1}))),"address"===t.field&&"street"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.street<t.street?1:-1}))),"address"===t.field&&"town"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.town>t.town?1:-1}))),"address"===t.field&&"town"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.town<t.town?1:-1}))),"address"===t.field&&"city"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.city>t.city?1:-1}))),"address"===t.field&&"city"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.city<t.city?1:-1}))),"address"===t.field&&"parish"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.parish>t.parish?1:-1}))),"address"===t.field&&"parish"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.parish<t.parish?1:-1}))),"address"===t.field&&"country"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.country>t.country?1:-1}))),"address"===t.field&&"country"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.country<t.country?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.postalCode>t.postalCode?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.postalCode<t.postalCode?1:-1}))),"address"===t.field&&"primary"===t.key&&(n=a.filter((function(e){return e.primary===t.value}))),"address"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ge,{count:s,address:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"addressList"},o)},Nt=void 0,xt=function(e){var t;t=!1===e.nextOfKin.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.name)),i.a.createElement(B.a.Text,{className:"cardText"},"Relation: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.relation)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.togglePatientNextOfKinHighlighted.bind(Nt,e.nextOfKin)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Nt,{field:"nextOfKin",data:e.nextOfKin})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Relation: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.relation))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Email: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.email))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Phone: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.phone1))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Phone2: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.phone2))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Nt,e.nextOfKin)},"Delete"))))))))},It=function(e){var t=Object.assign({},e.filter),a=e.nextOfKin,n=[];"nextOfKin"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"nextOfKin"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"nextOfKin"===t.field&&"relation"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.relation>t.relation?1:-1}))),"nextOfKin"===t.field&&"relation"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.relation<t.relation?1:-1}))),"nextOfKin"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"nextOfKin"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(xt,{key:s,nextOfKin:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary,togglePatientNextOfKinHighlighted:e.togglePatientNextOfKinHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"addressList"},o)},Tt=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(_.a,null,i.a.createElement("a",{href:e.attachment,target:"_blank",rel:"noopener noreferrer"},e.attachment),!0===e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.g,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0===e.canDelete&&!0===s&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,{type:e.type,attachment:e.attachment,item:e.item})},"Delete")))},St=function(e){var t=0,a=e.attachments.map((function(a){return t=e.attachments.indexOf(a)+1,i.a.createElement(Tt,{key:t,item:e.item,attachment:a,onDelete:e.onDelete,canDelete:e.canDelete,type:e.type})}));return i.a.createElement("ul",{className:"addressList"},a)},wt=void 0,kt=function(e){var t;t=!1===e.allergy.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.allergy.title)),i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.allergy.type)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),!0!==e.visitPage&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.togglePatientAllergyHighlighted.bind(wt,e.allergy)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(wt,{field:"allergy",data:e.allergy})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.allergy.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.allergy.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.allergy.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(wt,{field:"allergy",data:e.allergy})}))),i.a.createElement(St,{item:e.allergy,attachments:e.allergy.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"allergy"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(wt,e.allergy)},"Delete"))))))))},Ut=function(e){var t=Object.assign({},e.filter),a=e.allergies,n=[];"allergy"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"allergy"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"allergy"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"allergy"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"allergy"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"allergy"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(kt,{key:s,allergy:t,onDelete:e.onDelete,canDelete:e.canDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,visitPage:e.visitPage,togglePatientAllergyHighlighted:e.togglePatientAllergyHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"addressList"},o)},Dt=void 0,Ft=function(e){var t;t=!1===e.medication.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Name : ",i.a.createElement("span",{className:"bold"},e.medication.title)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),!0!==e.visitPage&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.togglePatientMedicationHighlighted.bind(Dt,e.medication)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Dt,{field:"medication",data:e.medication})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.medication.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.medication.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.medication.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Dosage: ",i.a.createElement("span",{className:"bold"},e.medication.dosage))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(Dt,{field:"medication",data:e.medication})}))),i.a.createElement(St,{item:e.medication,attachments:e.medication.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"medication"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Dt,e.medication)},"Delete"))))))))},Lt=function(e){var t=Object.assign({},e.filter),a=e.medication,n=[];"medication"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"medication"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"medication"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"medication"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"medication"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"medication"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ft,{key:s,medication:t,onDelete:e.onDelete,canDelete:e.canDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,visitPage:e.visitPage,togglePatientMedicationHighlighted:e.togglePatientMedicationHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"addressList"},o)},Vt=void 0,Pt=function(e){var t;t=!1===e.comorbidity.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.comorbidity.title)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),!0!==e.visitPage&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.togglePatientComorbidityHighlighted.bind(Vt,e.comorbidity)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Vt,{field:"comorbidity",data:e.comorbidity})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.comorbidity.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.comorbidity.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.comorbidity.description))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Vt,e.comorbidity)},"Delete"))))))))},Bt=function(e){var t=Object.assign({},e.filter),a=e.comorbidities,n=[];"comorbidity"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"comorbidity"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"comorbidity"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"comorbidity"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"comorbidity"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"comorbidity"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Pt,{key:s,comorbidity:t,onDelete:e.onDelete,canDelete:e.canDelete,visitPage:e.visitPage,togglePatientComorbidityHighlighted:e.togglePatientComorbidityHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"addressList"},o)},qt=void 0,Gt=function(e){var t;t=!1===e.image.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},i.a.createElement("img",{src:e.image.path,className:"imgPreview"}),i.a.createElement("a",{href:e.image.path,target:"_blank",rel:"noopener noreferrer"},e.image.name)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.togglePatientImageHighlighted.bind(qt,e.image)})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(qt,e.image)},"Delete"))))))))},Ot=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"image"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Gt,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete,togglePatientImageHighlighted:e.togglePatientImageHighlighted})}));return i.a.createElement("ul",{className:"imageList"},o)},Mt=void 0,zt=function(e){var t;t=!1===e.file.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},i.a.createElement("a",{href:e.file.path,target:"_blank",rel:"noopener noreferrer"},e.file.name)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.togglePatientFileHighlighted.bind(Mt,e.file)})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.file.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.file.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.file.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Mt,e.file)},"Delete"))))))))},jt=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"file"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(zt,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete,togglePatientFileHighlighted:e.togglePatientFileHighlighted})}));return i.a.createElement("ul",{className:"fileList"},o)},Rt=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),!0===e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.note)},"Delete")))))},Yt=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Rt,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},Ht=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Tag: ",i.a.createElement("span",{className:"bold"},e.tag)),!0===e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.tag)},"Delete")))))},Kt=function(e){var t=Object.assign({},e.filter),a=e.tags,n=[];"tag"===t.field&&"tag"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"tag"===t.field&&"tag"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"tag"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ht,{key:s,tag:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},Jt=(a(75),void 0),Qt=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(!1),c=Object(h.a)(l,2),r=c[0],m=c[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},12===e.visit.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.visit.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.visit.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(B.a.Text,{className:"cardText"},"Time: ",i.a.createElement("span",{className:"bold"},e.visit.time)),i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.visit.title)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!e.patientPage&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go to Visit Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon",onClick:e.showDetails.bind(Jt,e.visit)})),e.patientPage&&i.a.createElement(p.b,{to:{pathname:"/visits",state:{visit:e.visit._id}}},i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Go to Visit Details")))},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===r&&m(!1),!1===r&&m(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Id: ",i.a.createElement("span",{className:"bold"},e.visit._id))),i.a.createElement("li",null,12===e.visit.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),13===e.visit.date.length&&i.a.createElement(B.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},D.a.unix(e.visit.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"type: ",i.a.createElement("span",{className:"bold"},e.visit.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"subType: ",i.a.createElement("span",{className:"bold"},e.visit.subType))),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Patient:")),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Id: ",i.a.createElement("span",{className:"bold"},e.visit.patient._id))),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.visit.patient.name))))),!0===r&&i.a.createElement(_.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Jt,e.visit)},"Delete")))))},Wt=(a(76),function(e){var t=Object.assign({},e.filter),a=e.visits,n=[];"visit"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"visit"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"visit"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"visit"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"visit"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"visit"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"visit"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"visit"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"visit"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"visit"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"visit"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Qt,{key:s,visit:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,patientPage:e.patientPage})}));return i.a.createElement("ul",{className:"visitList"},o)}),Xt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"allergy"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Zt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"medication"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"name")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},$t=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"comorbidity"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},ea=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"nextOfKin"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"relation")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},ta=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"tag"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"tag")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},aa=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Update Single Field"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field"),i.a.createElement(J.a.Control,{type:"text",value:e.field}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"New Data"),i.a.createElement(J.a.Control,{type:"text",placeholder:"(Date format = YYYY-MM-DD!!)"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn searchBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},na=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Tags"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"tags",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Tags"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"...tag,tag,tag..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ia=function(e){var t={name:"...",relation:"...",email:"...",phone:"...",phone2:"..."};return e.previousNextOfKin&&(t={name:e.previousNextOfKin.name,relation:e.previousNextOfKin.relation,email:e.previousNextOfKin.contact.email,phone:e.previousNextOfKin.contact.phone1,phone2:e.previousNextOfKin.contact.phone2}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousNextOfKin&&i.a.createElement("h4",null,"Update Next of Kin"),!e.previousNextOfKin&&i.a.createElement("h4",null,"Add Next of Kin"),i.a.createElement("p",null,"Required fields are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"name",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.name}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"relation",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Relation (select) * "),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,t.relation),i.a.createElement("option",null,"Mother"),i.a.createElement("option",null,"Father"),i.a.createElement("option",null,"Brother"),i.a.createElement("option",null,"Sister"),i.a.createElement("option",null,"Grandfather"),i.a.createElement("option",null,"Grandmother"),i.a.createElement("option",null,"Uncle"),i.a.createElement("option",null,"Aunt"),i.a.createElement("option",null,"Niece"),i.a.createElement("option",null,"Uncle"),i.a.createElement("option",null,"Cousin")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"email",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Email"),i.a.createElement(J.a.Control,{type:"email",placeholder:t.email}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"phone",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Phone * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.phone}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"phone2",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Phone #2"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.phone2}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousNextOfKin&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousNextOfKin&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},sa=function(e){var t={title:"...",type:"...",description:"..."};return e.previousAllergy&&(t={title:e.previousAllergy.title,type:e.previousAllergy.type,description:e.previousAllergy.description}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousAllergy&&i.a.createElement("h4",null,"Update Allergy"),!e.previousAllergy&&i.a.createElement("h4",null,"Add Allergy"),i.a.createElement("p",null,"Required fields are denoted by a ' * '"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type (select) * "),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,t.type),i.a.createElement("option",null,"Food"),i.a.createElement("option",null,"Drug")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousAllergy&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousAllergy&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},oa=function(e){var t={title:"....",type:"....",dosage:"....",description:"...."};return e.previousMedication&&(t={title:e.previousMedication.title,type:e.previousMedication.type,dosage:e.previousMedication.dosage,description:e.previousMedication.description}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousMedication&&i.a.createElement("h4",null,"Update Medication"),!e.previousMedication&&i.a.createElement("h4",null,"Add Medication"),i.a.createElement("p",null,"Required fields are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.title}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.type}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description})),i.a.createElement(J.a.Group,{as:A.a,controlId:"dosage",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Dosage"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.dosage}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousMedication&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousMedication&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},la=function(e){var t={title:"....",type:"....",description:"...."};return e.previousComorbidity&&(t={title:e.previousComorbidity.title,type:e.previousComorbidity.type,description:e.previousComorbidity.description}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousComorbidity&&i.a.createElement("h4",null,"Update Comorbidity"),!e.previousComorbidity&&i.a.createElement("h4",null,"Add Comorbidity"),i.a.createElement("p",null,"Required fields are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comorbidity * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.title}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousComorbidity&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousComorbidity&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ca=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Attachment"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"attachment",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"textarea",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ra=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlay2:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",startFilter:!1,selectFilter:null,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"basic",adding:{state:null,field:null},canUpdate:!0,updating:{state:null,field:null,previous:{}},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:n.props.patient,addAttachmentForm:!1,addAttachmentArgs:null,calendarAppointments:null,calendarVisits:null,pocketVars:null,s3State:{action:null,target:null,status:null},showPdfView:!1,showPdfData:{type:null,data:null},hasComorbidities:!1,hasAllergies:!1},n.submitAddAddressForm=function(e){e.preventDefault(),console.log("...adding address..."),n.context.setUserAlert("...adding address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.number.value,o=e.target.street.value,l=e.target.town.value,c=e.target.city.value,r=e.target.parish.value,m=e.target.country.value,d=e.target.postalCode.value;if(0===s.trim().length||0===o.trim().length||0===c.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var p={query:'\n      mutation {addPatientAddress(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(o,'",\n          addressTown:"').concat(l,'",\n          addressCity:"').concat(c,'",\n          addressParish:"').concat(r,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientAddress),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientAddress,activityA:"addPatientAddress?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteAddress=function(e){console.log("...deleting address..."),n.context.setUserAlert("...deleting address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientAddress(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'",\n          addressPrimary:').concat(e.primary,"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientAddress),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.deletePatientAddress,activityA:"deletePatientAddress?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.setAddressPrimary=function(e){console.log("...setting primary address..."),n.context.setUserAlert("...setting primary address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {setPatientAddressPrimary(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address set primary success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.setPatientAddressPrimary),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.setPatientAddressPrimary,activityA:"setPatientAddressPrimary?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.setPatientAddressPrimary,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateAddressForm=function(e){e.preventDefault(),console.log("updating address..."),n.context.setUserAlert("...updating address..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={number:n.state.updating.previous.number,street:n.state.updating.previous.street,town:n.state.updating.previous.town,city:n.state.updating.previous.city,parish:n.state.updating.previous.parish,country:n.state.updating.previous.country,postalCode:n.state.updating.previous.postalCode,primary:n.state.updating.previous.primary},o={number:e.target.number.value,street:e.target.street.value,town:e.target.town.value,city:e.target.city.value,parish:e.target.parish.value,country:e.target.country.value,postalCode:e.target.postalCode.value,primary:s.primary};if(0===o.number.trim().length||0===o.street.trim().length||0===o.city.trim().length||0===o.country.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updatePatientAddress(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(s.number,',\n          addressStreet:"').concat(s.street,'",\n          addressTown:"').concat(s.town,'",\n          addressCity:"').concat(s.city,'",\n          addressParish:"').concat(s.parish,'",\n          addressCountry:"').concat(s.country,'",\n          addressPostalCode:"').concat(s.postalCode,'",\n          addressPrimary: ').concat(s.primary,"\n        }\n        patientInput2:{\n          addressNumber:").concat(o.number,',\n          addressStreet:"').concat(o.street,'",\n          addressTown:"').concat(o.town,'",\n          addressCity:"').concat(o.city,'",\n          addressParish:"').concat(o.parish,'",\n          addressCountry:"').concat(o.country,'",\n          addressPostalCode:"').concat(o.postalCode,'",\n          addressPrimary: ').concat(o.primary,",\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.updatePatientAddress),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.updatePatientAddress,activityA:"updatePatientAddress?activityId:".concat(a,",patientId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedPatient=e.data.updatePatientAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddNextOfKinForm=function(e){e.preventDefault(),console.log("...add next of kin..."),n.context.setUserAlert("...adding next of kin..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.name.value,o=e.target.relation.value,l=e.target.email.value,c=e.target.phone.value,r=e.target.phone2.value;if(0===s.trim().length||0===o.trim().length||0===c.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var m={query:'\n      mutation {addPatientNextOfKin(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          nextOfKinName:"').concat(s,'",\n          nextOfKinRelation:"').concat(o,'",\n          nextOfKinContactEmail:"').concat(l,'",\n          nextOfKinContactPhone1:"').concat(c,'",\n          nextOfKinContactPhone2:"').concat(r,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...next of kin add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientNextOfKin),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientNextOfKin,activityA:"addPatientNextOfKin?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientNextOfKin,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteNextOfKin=function(e){console.log("...deleting next of kin..."),n.context.setUserAlert("...deleting next of kin...."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientNextOfKin(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          nextOfKinName:"').concat(e.name,'",\n          nextOfKinRelation:"').concat(e.relation,'",\n          nextOfKinContactEmail:"').concat(e.contact.email,'",\n          nextOfKinContactPhone1:"').concat(e.contact.phone1,'",\n          nextOfKinContactPhone2:"').concat(e.contact.phone2,'",\n          nextOfKinHighlighted:').concat(e.highlighted,"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...resData...",e.data.deletePatientNextOfKin);var s="...next of kin delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientNextOfKin),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.deletePatientNextOfKin,activityA:"deletePatientNextOfKin?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.deletePatientNextOfKin,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.togglePatientNextOfKinHighlighted=function(e){console.log("togglePatientNextOfKinHighlighted"),n.context.setUserAlert("...toggling patient nextOfKin highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id;t={query:'\n      mutation {\n        togglePatientNextOfKinHighlighted(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            nextOfKinName:"').concat(e.name,'",\n            nextOfKinRelation:"').concat(e.relation,'",\n            nextOfKinContactEmail:"').concat(e.contact.email,'",\n            nextOfKinContactPhone1:"').concat(e.contact.phone1,'",\n            nextOfKinContactPhone2:"').concat(e.contact.phone2,'",\n            nextOfKinHighlighted: ').concat(e.highlighted,",\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...nextOfKin highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.togglePatientNextOfKinHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.togglePatientNextOfKinHighlighted,activityA:"togglePatientNextOfKinHighlighted?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.togglePatientNextOfKinHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateNextOfKinForm=function(e){e.preventDefault(),console.log("updating nextOfKin..."),n.context.setUserAlert("...updating nextOfKin..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={name:n.state.updating.previous.name,relation:n.state.updating.previous.relation,email:n.state.updating.previous.contact.email,phone:n.state.updating.previous.contact.phone1,phone2:n.state.updating.previous.contact.phone2,highlighted:n.state.updating.previous.highlighted},o={name:e.target.name.value,relation:e.target.relation.value,email:e.target.email.value,phone:e.target.phone.value,phone2:e.target.phone2.value,highlighted:s.highlighted};if(0===o.name.trim().length||0===o.relation.trim().length||0===o.phone.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updatePatientNextOfKin(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          nextOfKinName: "').concat(s.name,'",\n          nextOfKinRelation: "').concat(s.relation,'",\n          nextOfKinContactEmail: "').concat(s.email,'",\n          nextOfKinContactPhone1: "').concat(s.phone,'",\n          nextOfKinContactPhone2: "').concat(s.phone2,'",\n          nextOfKinHighlighted: ').concat(s.highlighted,',\n        }\n        patientInput2:{\n          nextOfKinName: "').concat(o.name,'",\n          nextOfKinRelation: "').concat(o.relation,'",\n          nextOfKinContactEmail: "').concat(o.email,'",\n          nextOfKinContactPhone1: "').concat(o.phone,'",\n          nextOfKinContactPhone2: "').concat(o.phone2,'",\n          nextOfKinHighlighted: ').concat(o.highlighted,",\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...nextOfKin update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.updatePatientNextOfKin),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.updatePatientNextOfKin,activityA:"updatePatientNextOfKin?activityId:".concat(a,",patientId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedPatient=e.data.updatePatientNextOfKin,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddAllergyForm=function(e){e.preventDefault(),console.log("...add allergy..."),n.context.setUserAlert("...adding allergy..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,o=n.props.patient.name+"_allergy_"+D()().format("YYYY-MM-DD, h:mm:ss a"),l=e.target.type.value,c=e.target.description.value.replace(/\n/g," ");if(0===c.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=E._currentValue.file,m=r.name,d="patient/"+s+"/allergy/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+r.type.split("/")[1];var p={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"allergy attachment"}},overlay:!0,s3State:{action:"upload",target:"allergy attachment",status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"failed"}})}))}var h={query:'\n      mutation {addPatientAllergy(\n        activityId:"'.concat(i,'",\n        patientId:"').concat(s,'",\n        patientInput:{\n          allergyType:"').concat(l,'",\n          allergyTitle:"').concat(o,'",\n          allergyDescription:"').concat(c,'",\n          allergyAttachment:"').concat(t,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...allergy add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientAllergy),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientAllergy,activityA:"addPatientAllergy?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientAllergy,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteAllergy=function(e){console.log("...deleting allergy..."),n.context.setUserAlert("...deleting allergy..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientAllergy(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          allergyType:"').concat(e.type,'",\n          allergyTitle:"').concat(e.title,'",\n          allergyDescription:"').concat(e.description,'",\n          allergyAttachments:"').concat(e.attachments,'",\n          allergyHighlighted:').concat(e.highlighted,"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...allergy delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updatePatient(s.data.deletePatientAllergy),n.setState({isLoading:!1,overlay2:!1,selectedPatient:s.data.deletePatientAllergy,activityA:"deletePatientAllergy?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=s.data.deletePatientAllergy,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/patient/"+i+"/allergy/attachments/",r={bucketName:"mbjentemrstorage",dirName:"patient/"+i+"/allergy/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"allergy attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.togglePatientAllergyHighlighted=function(e){console.log("togglePatientAllergyHighlighted"),n.context.setUserAlert("...toggling patient allergy highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id;t={query:'\n      mutation {\n        togglePatientAllergyHighlighted(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            allergyType:"').concat(e.type,'",\n            allergyTitle:"').concat(e.title,'",\n            allergyDescription:"').concat(e.description,'",\n            allergyAttachments:"').concat(e.attachments,'",\n            allergyHighlighted: ').concat(e.highlighted,"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...allergy highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.togglePatientAllergyHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.togglePatientAllergyHighlighted,activityA:"togglePatientAllergyHighlighted?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.togglePatientAllergyHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateAllergyForm=function(e){e.preventDefault(),console.log("updating allergy..."),n.context.setUserAlert("...updating allergy..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={title:n.state.updating.previous.title,type:n.state.updating.previous.type,description:n.state.updating.previous.description,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:n.props.patient.name+"_allergy_"+D()().format("YYYY-MM-DD, h:mm:ss a"),type:e.target.type.value,description:e.target.description.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.description.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updatePatientAllergy(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          allergyType:"').concat(s.type,'",\n          allergyTitle:"').concat(s.title,'",\n          allergyDescription:"').concat(s.description,'",\n          allergyAttachments:"').concat(s.attachments,'",\n          allergyHighlighted: ').concat(s.highlighted,'\n        }\n        patientInput2:{\n          allergyType:"').concat(o.type,'",\n          allergyTitle:"').concat(o.title,'",\n          allergyDescription:"').concat(o.description,'",\n          allergyAttachments:"').concat(o.attachments,'",\n          allergyHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...allergy update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.updatePatientAllergy),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.updatePatientAllergy,activityA:"updatePatientAllergy?activityId:".concat(a,",patientId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedPatient=e.data.updatePatientAllergy,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddMedicationForm=function(e){e.preventDefault(),console.log("...add medication..."),n.context.setUserAlert("...adding medication..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,o=e.target.title.value,l=e.target.type.value,c=e.target.dosage.value,r=e.target.description.value.replace(/\n/g," ");if(0===o.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var m=E._currentValue.file,d=m.name,p="patient/"+s+"/medication/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+p+"/"+d+"."+m.type.split("/")[1];var g={bucketName:"mbjentemrstorage",dirName:p,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},h=new me.a(g);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"medication attachment"}},overlay:!0,s3State:{action:"upload",target:"medication attachment",status:"inProgress"}}),h.uploadFile(m,d).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"medication attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"medication attachment",status:"failed"}})}))}var u={query:'\n      mutation {addPatientMedication(\n        activityId:"'.concat(i,'",\n        patientId:"').concat(s,'",\n        patientInput:{\n          medicationType:"').concat(l,'",\n          medicationTitle:"').concat(o,'",\n          medicationDescription:"').concat(r,'",\n          medicationDosage:"').concat(c,'",\n          medicationAttachment:"').concat(t,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...medication add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientMedication),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientMedication,activityA:"addPatientMedication?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientMedication,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteMedication=function(e){console.log("...deleting medication...",e),n.context.setUserAlert("...deleting medication..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientMedication(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          medicationType:"').concat(e.type,'",\n          medicationTitle:"').concat(e.title,'",\n          medicationDescription:"').concat(e.description,'",\n          medicationDosage:"').concat(e.dosage,'",\n          medicationHighlighted:').concat(e.highlighted,',\n          medicationAttachments:"').concat(e.attachments,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...medication delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updatePatient(s.data.deletePatientMedication),n.setState({isLoading:!1,overlay2:!1,selectedPatient:s.data.deletePatientMedication,activityA:"deletePatientMedication?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=s.data.deletePatientMedication,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/patient/"+i+"/medication/attachments/",r={bucketName:"mbjentemrstorage",dirName:"patient/"+i+"/medication/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"medication attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.togglePatientMedicationHighlighted=function(e){console.log("togglePatientMedicationHighlighted"),n.context.setUserAlert("...toggling patient medication highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id;t={query:'\n      mutation {\n        togglePatientMedicationHighlighted(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            medicationType:"').concat(e.type,'",\n            medicationTitle:"').concat(e.title,'",\n            medicationDescription:"').concat(e.description,'",\n            medicationDosage:"').concat(e.dosage,'",\n            medicationAttachments:"').concat(e.attachments,'",\n            medicationHighlighted:').concat(e.highlighted,"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...medication highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.togglePatientMedicationHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.togglePatientMedicationHighlighted,activityA:"togglePatientMedicationHighlighted?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.togglePatientMedicationHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateMedicationForm=function(e){e.preventDefault(),console.log("updating medication..."),n.context.setUserAlert("...updating medication..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={title:n.state.updating.previous.title,type:n.state.updating.previous.type,dosage:n.state.updating.previous.dosage,description:n.state.updating.previous.description,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:e.target.title.value,type:e.target.type.value,dosage:e.target.dosage.value,description:e.target.description.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.title.trim().length||0===o.type.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updatePatientMedication(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          medicationType:"').concat(s.type,'",\n          medicationTitle:"').concat(s.title,'",\n          medicationDescription:"').concat(s.description,'",\n          medicationDosage:"').concat(s.dosage,'",\n          medicationAttachments:"').concat(s.attachments,'",\n          medicationHighlighted: ').concat(s.highlighted,'\n        }\n        patientInput2:{\n          medicationType:"').concat(o.type,'",\n          medicationTitle:"').concat(o.title,'",\n          medicationDescription:"').concat(o.description,'",\n          medicationDosage:"').concat(o.dosage,'",\n          medicationAttachments:"').concat(o.attachments,'",\n          medicationHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...medication update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.updatePatientMedication),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.updatePatientMedication,activityA:"updatePatientMedication?activityId:".concat(a,",patientId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedPatient=e.data.updatePatientMedication,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddComorbidityForm=function(e){e.preventDefault(),console.log("...add comorbidities..."),n.context.setUserAlert("...adding comorbidities..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.title.value,o=e.target.description.value.replace(/\n/g," ");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {addPatientComorbidity(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          comorbidityType:"').concat("",'",\n          comorbidityTitle:"').concat(s,'",\n          comorbidityDescription:"').concat(o,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...resData...",e.data.addPatientComorbidity);var s="...Comorbidity add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientComorbidity),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientComorbidity,activityA:"addPatientComorbidity?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientComorbidity,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteComorbidity=function(e){console.log("...deleting medication...",e),n.context.setUserAlert("...deleting medication..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientComorbidity(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          comorbidityType:"').concat(e.type,'",\n          comorbidityTitle:"').concat(e.title,'",\n          comorbidityDescription:"').concat(e.description,'",\n          comorbidityHighlighted:').concat(e.highlighted,"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Comorbidity delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientComorbidity),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.deletePatientComorbidity,activityA:"deletePatientComorbidity?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.deletePatientComorbidity,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.togglePatientComorbidityHighlighted=function(e){console.log("togglePatientComorbidityHighlighted"),n.context.setUserAlert("...toggling patient comorbidity highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id;t={query:'\n      mutation {\n        togglePatientComorbidityHighlighted(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            comorbidityType:"').concat(e.type,'",\n            comorbidityTitle:"').concat(e.title,'",\n            comorbidityDescription:"').concat(e.description,'",\n            comorbidityHighlighted: ').concat(e.highlighted,"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...comorbidity highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.togglePatientComorbidityHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.togglePatientComorbidityHighlighted,activityA:"togglePatientComorbidityHighlighted?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.togglePatientComorbidityHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateComorbidityForm=function(e){e.preventDefault(),console.log("updating medication..."),n.context.setUserAlert("...updating medication..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={title:n.state.updating.previous.title,type:n.state.updating.previous.type,description:n.state.updating.previous.description,highlighted:n.state.updating.previous.highlighted},o={title:e.target.title.value,type:s.type,description:e.target.description.value,highlighted:s.highlighted};if(0===o.title.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updatePatientComorbidity(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          comorbidityType:"').concat(s.type,'",\n          comorbidityTitle:"').concat(s.title,'",\n          comorbidityDescription:"').concat(s.description,'",\n          comorbidityHighlighted: ').concat(s.highlighted,'\n        }\n        patientInput2:{\n          comorbidityType:"').concat(o.type,'",\n          comorbidityTitle:"').concat(o.title,'",\n          comorbidityDescription:"').concat(o.description,'",\n          comorbidityHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...medication update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.updatePatientComorbidity),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.updatePatientComorbidity,activityA:"updatePatientComorbidity?activityId:".concat(a,",patientId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedPatient=e.data.updatePatientComorbidity,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.startAddAttachment=function(e){console.log("...start add attachment..."),n.setState({addAttachmentForm:!0,addAttachmentArgs:e})},n.cancelAddAttachment=function(){n.setState({addAttachmentForm:!1})},n.addAttachment=function(e){e.preventDefault(),console.log("...adding attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0,addAttachmentForm:!1,overlay2:!0});var t,a,i,s,o,l,c,r,m,d,p=n.context.token,g=n.context.activityId,h=n.props.patient._id,u=n.state.addAttachmentArgs,y=u.field;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var v=E._currentValue.file,f=v.name,b="patient/"+h+"/"+y+"/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+b+"/"+f+"."+v.type.split("/")[1];var _={bucketName:"mbjentemrstorage",dirName:b,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},A=new me.a(_);n.context.setUserAlert("...s3 uploading allergy attachment ..."),console.log("...s3 uploading allergy attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"".concat(y," attachment")}},overlay:!0,s3State:{action:"upload",target:"".concat(y," attachment"),status:"inProgress"}}),A.uploadFile(v,f).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"".concat(y," attachment"),status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"".concat(y," attachment"),status:"failed"}})}))}"allergy"===y&&(a=u.data.title,i=u.data.type,s=u.data.description,o=t),"medication"===y&&(l=u.data.title,c=u.data.type,r=u.data.description,m=t),"allergy"===y&&(d={query:'\n        mutation {addPatientAllergyAttachment(\n          activityId:"'.concat(g,'",\n          patientId:"').concat(h,'",\n          patientInput:{\n            allergyType:"').concat(i,'",\n            allergyTitle:"').concat(a,'",\n            allergyDescription:"').concat(s,'",\n            allergyAttachment:"').concat(o,'"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n      ')}),"medication"===y&&(d={query:'\n        mutation {addPatientMedicationAttachment(\n          activityId:"'.concat(g,'",\n          patientId:"').concat(h,'",\n          patientInput:{\n            medicationType:"').concat(c,'",\n            medicationTitle:"').concat(l,'",\n            medicationDescription:"').concat(r,'",\n            medicationAttachment:"').concat(m,'"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json",Authorization:"Bearer "+p}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...add attachment success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"allergy"===y&&(n.props.updatePatient(e.data.addPatientAllergyAttachment),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientAllergyAttachment,activityA:"addPatientAllergyAttachmentRegex?activityId:".concat(g,",patientId:").concat(h)})),"medication"===y&&(n.props.updatePatient(e.data.addPatientMedicationAttachment),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientMedicationAttachment,activityA:"addPatientMedicationAttachment?activityId:".concat(g,",patientId:").concat(h)})),n.logUserActivity({activityId:g,token:p})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteAttachment=function(e){console.log("...deleting attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,o=e.type,l=e.attachment,c=e.item;if("allergy"===o){var r=c.type,m=c.title,d=c.description,p=l;t={query:'\n        mutation {deletePatientAllergyAttachment(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            allergyType:"').concat(r,'",\n            allergyTitle:"').concat(m,'",\n            allergyDescription:"').concat(d,'",\n            allergyAttachment:"').concat(p,'"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n      ')}}if("medication"===o){var g=c.type,h=c.title,u=c.description,y=l;t={query:'\n        mutation {deletePatientMedicationAttachment(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            medicationType:"').concat(g,'",\n            medicationTitle:"').concat(h,'",\n            medicationDescription:"').concat(u,'",\n            medicationAttachment:"').concat(y,'"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...delete attachment success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"allergy"===o&&(n.props.updatePatient(e.data.deletePatientAllergyAttachment),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.deletePatientAllergyAttachment,activityA:"deletePatientAllergyAttachment?activityId:".concat(i,",patientId:").concat(s)})),"medication"===o&&(n.props.updatePatient(e.data.deletePatientMedicationAttachment),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.deletePatientMedicationAttachment,activityA:"deletePatientMedicationAttachment?activityId:".concat(i,",patientId:").concat(s)})),n.logUserActivity({activityId:i,token:a});var c="patient/"+s+"/"+o+"/attachments",r="https://mbjentemrstorage.s3.amazonaws.com/patient/"+s+"/"+o+"/attachments/",m=l,d=m.replace(r,"");console.log("1:",c),console.log("2:",m),console.log("3:",d);var p={bucketName:"mbjentemrstorage",dirName:c,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 deleting attachment.."),console.log("...s3 deleting attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"".concat(o," attachment")}},overlay:!0,s3State:{action:"delete",target:"".concat(o," attachment"),status:"inProgress"}}),g.deleteFile(d,p).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding image..."),n.context.setUserAlert("...adding image..."),n.setState({isLoading:!0,overlay2:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.patient._id;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="patient/"+l+"/images";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),g.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var h={query:'\n      mutation {addPatientImage(\n        activityId:"'.concat(o,'",\n        patientId:"').concat(l,'",\n        patientInput:{\n          imageName:"').concat(t,'",\n          imageType:"').concat(a,'",\n          imagePath:"').concat(i,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientImage),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientImage,activityA:"addPatientImage?activityId:".concat(o,",patientId:").concat(l),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientImage,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteImage=function(e){console.log("...deleting image..."),n.context.setUserAlert("...deleting image..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s="patient/"+i+"/images",o=e.name,l={query:'\n    mutation {deletePatientImage(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      patientInput:{\n        imageName:"').concat(e.name,'",\n        imageType:"').concat(e.type,'",\n        imagePath:"').concat(e.path,'",\n        imageHighlighted:').concat(e.highlighted,"\n      })\n    {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var l="...image delete success!...";e.errors&&(l=e.errors[0].message),e.data.error&&(l=e.data.error),n.context.setUserAlert(l),n.props.updatePatient(e.data.deletePatientImage),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.deletePatientImage,activityA:"deletePatientImage?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientImage,n.logUserActivity({activityId:a,token:t});var c={bucketName:"mbjentemrstorage",dirName:s,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},r=new me.a(c);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),r.deleteFile(o,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.togglePatientImageHighlighted=function(e){console.log("togglePatientImageHighlighted"),n.context.setUserAlert("...toggling patient image highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,o=e.name,l=e.type,c=e.path,r=e.highlighted;t={query:'\n      mutation {\n        togglePatientImageHighlighted(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            imageName:"').concat(o,'",\n            imageType:"').concat(l,'",\n            imagePath:"').concat(c,'"\n            imageHighlighted: ').concat(r,",\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.togglePatientImageHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.togglePatientImageHighlighted,activityA:"togglePatientImageHighlighted?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.togglePatientImageHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding file..."),n.context.setUserAlert("...adding file..."),n.setState({isLoading:!0,overlay2:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.patient._id;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="patient/"+l+"/files";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),g.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var h={query:'\n      mutation {addPatientFile(\n        activityId:"'.concat(o,'",\n        patientId:"').concat(l,'",\n        patientInput:{\n          fileName:"').concat(t,'",\n          fileType:"').concat(a,'",\n          filePath:"').concat(i,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientFile),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientFile,activityA:"addPatientFile?activityId:".concat(o,",patientId:").concat(l),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientFile,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteFile=function(e){console.log("...deleting file..."),n.context.setUserAlert("...deleting file..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n    mutation {deletePatientFile(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      patientInput:{\n        fileName:"').concat(e.name,'",\n        fileType:"').concat(e.type,'",\n        filePath:"').concat(e.path,'",\n        fileHighlighted:').concat(e.highlighted,"\n      })\n    {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...file delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updatePatient(s.data.deletePatientFile),n.setState({isLoading:!1,overlay2:!1,selectedPatient:s.data.deletePatientFile,activityA:"deletePatientFile?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=s.data.deletePatientFile,n.logUserActivity({activityId:a,token:t});var l="patient/"+i+"/files",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.togglePatientFileHighlighted=function(e){console.log("togglePatientFileHighlighted"),n.context.setUserAlert("...toggling patient file highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id;t={query:'\n      mutation {\n        togglePatientFileHighlighted(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            fileName:"').concat(e.name,'",\n            fileType:"').concat(e.type,'",\n            filePath:"').concat(e.path,'",\n            fileHighlighted: ').concat(e.highlighted,",\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.togglePatientFileHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.togglePatientFileHighlighted,activityA:"togglePatientFileHighlighted?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.togglePatientFileHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding notes..."),n.context.setUserAlert("...adding notes..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.notes.value.replace(/\n/g,"");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var o={query:'\n      mutation {addPatientNotes(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          notes:"').concat(s,'",\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientNotes),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientNotes,activityA:"addPatientNotes?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteNote=function(e){console.log("...deleting note..."),n.context.setUserAlert("...deleting note..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientNote(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          note:"').concat(e,'"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientNote),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.deletePatientNote,activityA:"deletePatientNote?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddTagForm=function(e){e.preventDefault(),console.log("...adding tags..."),n.context.setUserAlert("...adding tags..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.tags.value.replace(/\n/g,"");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var o={query:'\n      mutation {addPatientTags(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          tags:"').concat(s,'",\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tags add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientTags),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.addPatientTags,activityA:"addPatientTags?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientTags,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteTag=function(e){console.log("...deleting tag..."),n.context.setUserAlert("...deleting tag..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientTag(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          tag:"').concat(e,'"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tag delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientTag),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.deletePatientTag,activityA:"deletePatienTag?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientTag,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.field.value,o=e.target.query.value;if(0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n    mutation {updatePatientSingleField(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      field:"').concat(s,'",\n      query:"').concat(o,'"\n    )\n    {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.updatePatientSingleField),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.updatePatientSingleField,activityA:"updatePatientSingleField?activityId:".concat(a,",patientId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedPatient=e.data.updatePatientSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null},updating:{state:null,field:null,previous:{}}})},n.startUpdate=function(e){n.setState({updating:{state:!0,field:e.field,previous:e.data}})},n.parseForCalendar=function(e){console.log("...parsing patient dates for calendar..."),n.setState({overlay2:!0});var t,a=[],i=Object(ae.a)(e.appointments);try{for(i.s();!(t=i.n()).done;){var s=t.value,o=void 0;12===s.date.length?o=D.a.unix(s.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"):13===s.date.length&&(o=D.a.unix(s.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"));var l={title:s.title,date:o,props:{_id:s._id,date:o,title:s.title,type:s.type,subType:s.subType,time:s.time,location:s.location,description:s.description,important:s.important,field:"appointments"}};a.push(l)}}catch(h){i.e(h)}finally{i.f()}var c,r=[],m=Object(ae.a)(e.visits);try{for(m.s();!(c=m.n()).done;){var d=c.value,p=void 0;12===d.date.length?p=D.a.unix(d.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"):13===d.date.length&&(p=D.a.unix(d.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var g={title:d.title,date:p,props:{_id:d._id,date:p,title:d.title,type:d.type,subType:d.subType,time:d.time,field:"visits"}};r.push(g)}}catch(h){m.e(h)}finally{m.f()}n.setState({calendarAppointments:a,calendarVisits:r,overlay2:!1})},n.viewCalendarEvent=function(e){var t,a=e.event.extendedProps.props;"appointments"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,location:a.location,description:a.description,important:a.important,patient:n.props.patient},n.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:t,goLink:!0}})),"visits"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,patient:n.props.patient},n.setState({overlay:!0,overlayStatus:{type:"calendarVisit",data:t,goLink:!0}}))},n.dateClick=function(e){console.log("dateClick",e),"appointment"===n.props.subMenu&&n.setState({overlay:!0,overlayStatus:{type:"dateClickAppointmentPatient",data:{date:e.dateStr,patient:n.props.patient}}})},n.toggleOverlay=function(){n.setState({overlay:!1})},n.showPdfView=function(e){n.setState({showPdfView:!0,showPdfData:{type:e.type,data:e.data}})},n.closePdfView=function(){n.setState({showPdfView:!1,showPdfData:{type:null,data:null}})},n.new=function(e){console.log("new: ",e)},n.checkAllergies=function(){n.propsPatient.allergies.length>0===!0&&(n.setState({hasAllergies:!0}),n.hasAllergies=!0),n.propsPatient.comorbidities.length>0===!0&&(n.setState({hasComorbidities:!0}),n.hasComorbidities=!0),n.props.setAllergyCheck({hasAllergies:n.hasAllergies,hasComorbidities:n.hasComorbidities})},n.propsPatient=n.props.patient,n.hasComorbidities=!1,n.hasAllergies=!1,n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...patient details component mounted...",this.props.patient),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getPocketVars(e)}this.setState({selectedPatient:this.context.selectedPatient,menuSelect:this.props.subMenu}),"Admin"===this.context.role&&this.setState({canDelete:!0}),this.parseForCalendar({appointments:this.props.patient.appointments,visits:this.props.patient.visits}),this.checkAllergies()}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=D()().tz("America/Bogota").format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),!0===this.state.overlay2&&i.a.createElement(de,{toggleOverlay2:this.toggleOverlay2}),i.a.createElement("div",{className:"detailContainer"},i.a.createElement(_.a,{className:""},!this.props.patient&&i.a.createElement("h3",null,"...")),i.a.createElement(_.a,{className:""},this.props.patient&&i.a.createElement(A.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(aa,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"all"===this.props.subMenu&&i.a.createElement(_.a,{className:"tabRowAll"},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"subTabCol"},"Nurse"===this.context.role&&i.a.createElement(p.b,{to:{pathname:"/appointments",state:{newAppointment:this.props.patient}}},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.new.bind(this,"appointment")},"New Appointment")),"Doctor"===this.context.role&&i.a.createElement(p.b,{to:{pathname:"/appointments",state:{newAppointment:this.props.patient}}},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.new.bind(this,"appointment")},"New Appointment")),"Nurse"===this.context.role&&i.a.createElement(p.b,{to:{pathname:"/visits",state:{newVisit:this.props.patient}}},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.new.bind(this,"visit")},"New Visit")),"Doctor"===this.context.role&&i.a.createElement(p.b,{to:{pathname:"/visits",state:{newVisit:this.props.patient}}},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.new.bind(this,"visit")},"New Visit")))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Fisrt Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Last Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.lastName),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"lastName")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.username),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),12===this.props.patient.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.dob.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.patient.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.dob.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.gender),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone2),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.role),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Registration:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),12===this.props.patient.registration.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.registration.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.patient.registration.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.registration.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Number:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.registration.number)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Referral:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),this.props.patient.referral.date&&12===this.props.patient.referral.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.referral.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),this.props.patient.referral.date&&13===this.props.patient.referral.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.referral.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.date")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reason:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.reason),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.reason")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral Physician Contact:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.attendingPhysician),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attendingPhysician")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Occupation:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.role),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employer:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Contact:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Address:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.address),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.address")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Insurance:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Company:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.company),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.company")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Number:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.policyNumber),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.policyNumber")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.description")},"Edit")),this.props.patient.insurance.expiryDate&&i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Expiry:"),12===this.props.patient.insurance.expiryDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.insurance.expiryDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.patient.insurance.expiryDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.insurance.expiryDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.expiryDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Subscriber:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Company:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.company),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.company")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.description")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date of Death:"),12===this.props.patient.expiryDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.expiryDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.patient.expiryDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.expiryDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"expiryDate")},"Edit"))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Comorbidities:",!0===this.hasComorbidities&&i.a.createElement(y.a,{icon:v.h,className:"visitAttentionIcon",color:"red",size:"lg"}))),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"comorbidities")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"comorbidity")},"Add")),this.state.startFilter&&"comorbidities"===this.state.selectFilter&&i.a.createElement($t,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"comorbidity"===this.state.adding.field&&i.a.createElement(la,{onConfirm:this.submitAddComorbidityForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"comorbidity"===this.state.updating.field&&i.a.createElement(la,{onConfirm:this.submitUpdateComorbidityForm,onCancel:this.cancelAdd,previousComorbidity:this.state.updating.previous}),i.a.createElement(Bt,{filter:this.state.filter,comorbidities:this.props.patient.comorbidities,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComorbidity,togglePatientComorbidityHighlighted:this.togglePatientComorbidityHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.code))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Fe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ze,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"address"===this.state.updating.field&&i.a.createElement(ze,{onConfirm:this.submitUpdateAddressForm,onCancel:this.cancelAdd,previousAddress:this.state.updating.previous}),i.a.createElement(Ct,{filter:this.state.filter,addresses:this.props.patient.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Next of Kin:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"nextOfKin")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"nextOfKin")},"Add")),this.state.startFilter&&"nextOfKin"===this.state.selectFilter&&i.a.createElement(ea,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"nextOfKin"===this.state.adding.field&&i.a.createElement(ia,{onConfirm:this.submitAddNextOfKinForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"nextOfKin"===this.state.updating.field&&i.a.createElement(ia,{onConfirm:this.submitUpdateNextOfKinForm,onCancel:this.cancelAdd,previousNextOfKin:this.state.updating.previous}),i.a.createElement(It,{filter:this.state.filter,nextOfKin:this.props.patient.nextOfKin,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNextOfKin,togglePatientNextOfKinHighlighted:this.togglePatientNextOfKinHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Allergies:",!0===this.hasAllergies&&i.a.createElement(y.a,{icon:v.h,className:"visitAttentionIcon",color:"red",size:"lg"}))),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"allergy")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"allergy")},"Add")),this.state.startFilter&&"allergy"===this.state.selectFilter&&i.a.createElement(Xt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"allergy"===this.state.adding.field&&i.a.createElement(sa,{onConfirm:this.submitAddAllergyForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"allergy"===this.state.updating.field&&i.a.createElement(sa,{onConfirm:this.submitUpdateAllergyForm,onCancel:this.cancelAdd,previousAllergy:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ut,{filter:this.state.filter,allergies:this.props.patient.allergies,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAllergy,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,togglePatientAllergyHighlighted:this.togglePatientAllergyHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Medication:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"medication")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"medication")},"Add")),this.state.startFilter&&"medication"===this.state.selectFilter&&i.a.createElement(Zt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"medication"===this.state.adding.field&&i.a.createElement(oa,{onConfirm:this.submitAddMedicationForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"medication"===this.state.updating.field&&i.a.createElement(oa,{onConfirm:this.submitUpdateMedicationForm,onCancel:this.cancelAdd,previousMedication:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Lt,{filter:this.state.filter,medication:this.props.patient.medication,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteMedication,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,togglePatientMedicationHighlighted:this.togglePatientMedicationHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Pe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(He,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Ot,{filter:this.state.filter,images:this.props.patient.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage,togglePatientImageHighlighted:this.togglePatientImageHighlighted}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(Be,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ke,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(jt,{filter:this.state.filter,files:this.props.patient.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile,togglePatientFileHighlighted:this.togglePatientFileHighlighted}))),i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Appointments:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(qe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Se,{filter:this.state.filter,appointments:this.props.patient.appointments,authId:this.context.activityId})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Visits:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},this.state.startFilter&&"visit"===this.state.selectFilter&&i.a.createElement(Ge,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"visit")},"Filter")),i.a.createElement(Wt,{filter:this.state.filter,visits:this.props.patient.visits,authId:this.context.activityId,patientPage:!0})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(Oe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Ye,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(Yt,{filter:this.state.filter,notes:this.props.patient.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Tags:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"tag")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"tag")},"Add")),this.state.startFilter&&"tag"===this.state.selectFilter&&i.a.createElement(ta,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(na,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(Kt,{filter:this.state.filter,tags:this.props.patient.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag}))))),"basic"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Fisrt Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Last Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.lastName),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"lastName")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.username),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),12===this.props.patient.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.dob.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.patient.dob.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.dob.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.gender),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone2),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.role),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Registration:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),12===this.props.patient.registration.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.registration.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.patient.registration.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.registration.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Number:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.registration.number)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Referral:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),this.props.patient.referral.date&&12===this.props.patient.referral.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.referral.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),this.props.patient.referral.date&&13===this.props.patient.referral.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.referral.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.date")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reason:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.reason),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.reason")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral Physician Contact:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.attendingPhysician),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attendingPhysician")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Occupation:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.role),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employer:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Contact:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Address:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.address),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.address")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Insurance:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Company:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.company),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.company")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Number:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.policyNumber),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.policyNumber")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.description")},"Edit")),this.props.patient.insurance.expiryDate&&i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Expiry:"),12===this.props.patient.insurance.expiryDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.insurance.expiryDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.patient.insurance.expiryDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.insurance.expiryDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.expiryDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Subscriber:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Company:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.company),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.company")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.description")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date of Death:"),12===this.props.patient.expiryDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.expiryDate.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.patient.expiryDate.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.patient.expiryDate.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"expiryDate")},"Edit")))),"admin"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.code)))),"address"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Fe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(ze,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"address"===this.state.updating.field&&i.a.createElement(ze,{onConfirm:this.submitUpdateAddressForm,onCancel:this.cancelAdd,previousAddress:this.state.updating.previous}),i.a.createElement(Ct,{filter:this.state.filter,addresses:this.props.patient.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"nextOfKin"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Next of Kin:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"nextOfKin")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"nextOfKin")},"Add")),this.state.startFilter&&"nextOfKin"===this.state.selectFilter&&i.a.createElement(ea,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"nextOfKin"===this.state.adding.field&&i.a.createElement(ia,{onConfirm:this.submitAddNextOfKinForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"nextOfKin"===this.state.updating.field&&i.a.createElement(ia,{onConfirm:this.submitUpdateNextOfKinForm,onCancel:this.cancelAdd,previousNextOfKin:this.state.updating.previous}),i.a.createElement(It,{filter:this.state.filter,nextOfKin:this.props.patient.nextOfKin,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNextOfKin,togglePatientNextOfKinHighlighted:this.togglePatientNextOfKinHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"allergy"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Allergies:",!0===this.hasAllergies&&i.a.createElement(y.a,{icon:v.h,className:"visitAttentionIcon",color:"red",size:"lg"}))),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"allergy")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"allergy")},"Add")),this.state.startFilter&&"allergy"===this.state.selectFilter&&i.a.createElement(Xt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"allergy"===this.state.adding.field&&i.a.createElement(sa,{onConfirm:this.submitAddAllergyForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"allergy"===this.state.updating.field&&i.a.createElement(sa,{onConfirm:this.submitUpdateAllergyForm,onCancel:this.cancelAdd,previousAllergy:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ut,{filter:this.state.filter,allergies:this.props.patient.allergies,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAllergy,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,togglePatientAllergyHighlighted:this.togglePatientAllergyHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"medication"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Medication:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"medication")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"medication")},"Add")),this.state.startFilter&&"medication"===this.state.selectFilter&&i.a.createElement(Zt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"medication"===this.state.adding.field&&i.a.createElement(oa,{onConfirm:this.submitAddMedicationForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"medication"===this.state.updating.field&&i.a.createElement(oa,{onConfirm:this.submitUpdateMedicationForm,onCancel:this.cancelAdd,previousMedication:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Lt,{filter:this.state.filter,medication:this.props.patient.medication,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteMedication,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,togglePatientMedicationHighlighted:this.togglePatientMedicationHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"comorbidities"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Comorbidities:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"comorbidities")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"comorbidity")},"Add")),this.state.startFilter&&"comorbidities"===this.state.selectFilter&&i.a.createElement($t,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"comorbidity"===this.state.adding.field&&i.a.createElement(la,{onConfirm:this.submitAddComorbidityForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"comorbidity"===this.state.updating.field&&i.a.createElement(la,{onConfirm:this.submitUpdateComorbidityForm,onCancel:this.cancelAdd,previousComorbidity:this.state.updating.previous}),i.a.createElement(Bt,{filter:this.state.filter,comorbidities:this.props.patient.comorbidities,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComorbidity,togglePatientComorbidityHighlighted:this.togglePatientComorbidityHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"image"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Pe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(He,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Ot,{filter:this.state.filter,images:this.props.patient.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage,togglePatientImageHighlighted:this.togglePatientImageHighlighted})),"file"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(Be,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ke,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(jt,{filter:this.state.filter,files:this.props.patient.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile,togglePatientFileHighlighted:this.togglePatientFileHighlighted})),"appointment"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Appointments:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(qe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Se,{filter:this.state.filter,appointments:this.props.patient.appointments,authId:this.context.activityId})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"visit"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Visits:")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},this.state.startFilter&&"visit"===this.state.selectFilter&&i.a.createElement(Ge,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"visit")},"Filter")),i.a.createElement(Wt,{filter:this.state.filter,visits:this.props.patient.visits,authId:this.context.activityId,patientPage:!0})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"note"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(Oe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Ye,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(Yt,{filter:this.state.filter,notes:this.props.patient.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote})),"tag"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Tags:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"tag")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"tag")},"Add")),this.state.startFilter&&"tag"===this.state.selectFilter&&i.a.createElement(ta,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(na,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(Kt,{filter:this.state.filter,tags:this.props.patient.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag})),"doc"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Document Generator:")),i.a.createElement(_.a,{className:"displayPaneHeadRow"},i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Test"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"test",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"referral",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Admission Reminder"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"admissionReminder",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Sick Note"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"sickNote",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Insurance"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"insurance",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Diagnosis/Testing"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"diagnosisTesting",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Prescription"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"prescription",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Treatment Consent"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"treatmentConsent",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Treatment Instructions"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"treatmentInstructions",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Unfit-To-Fly"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"unfitToFly",data:"abc_xyz"})},"Create")))),!0===this.state.showPdfView&&i.a.createElement(At,{pdfViewData:this.state.showPdfData,close:this.closePdfView,patient:this.props.patient}))))))}}]),a}(n.Component);ra.contextType=E;var ma=ra,da=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"patient"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"active"),i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"registration.date"),i.a.createElement("option",null,"registration.number"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"expiryDate"),i.a.createElement("option",null,"loggedIn")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},pa=(a(772),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,searchPatients:null,isLoading:!1,seshStore:null,profileLoaded:!1,canDelete:!1,sideCol:"menuPatient",startFilter:!1,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"list",subMenuState:!1,subMenu:"all",adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,creatingPatient:!1,newPatient:null,fromGoLink:null,goLinkId:null,tabKey:"list",dateClickPatientSelect:!1,hasComorbidities:!1,hasAllergies:!1},e.searchPatients=function(t){t.preventDefault(),console.log("...searching patients..."),e.context.setUserAlert("...searching patients..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=e.context.activityId,o=t.target.field.value,l=t.target.query.value,c=!0;"active"!==o&&"age"!==o&&"dob"!==o&&"addresses.number"!==o&&"addresses.primary"!==o&&"loggedIn"!==o&&"clientConnected"!==o&&"verification.verified"!==o&&"registration.date"!==o&&"expiryDate"!==o&&"referral.date"!==o&&"insurance.expiryDate"!==o&&"insurance.expiryDate"!==o||(c=!1),!0===c&&(a={query:'\n        query {getPatientsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n      ')}),!1===c&&(a={query:'\n        query {getPatientsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...patient search success!...";!0===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===c&&e.setState({isLoading:!1,searchPatients:t.data.getPatientsByFieldRegex,activityA:"getPatientsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===c&&e.setState({isLoading:!1,searchPatients:t.data.getPatientsByField,activityA:"getPatientsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewPatient=function(){e.setState({creatingPatient:!0})},e.cancelCreateNewPatient=function(){e.setState({creatingPatient:!1})},e.submitCreateNewPatientForm=function(t){t.preventDefault(),console.log("...creating new patient..."),e.context.setUserAlert("...creating new patient..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t.target.title.value,s=t.target.name.value,o=t.target.lastName.value,l=t.target.username.value,c=t.target.dob.value,r=t.target.role.value,m=t.target.gender.value,d=t.target.contactEmail.value,p=t.target.contactPhone.value,g=t.target.contactPhone2.value,h=t.target.addressNumber.value;""===h&&(h=0);var u=t.target.addressStreet.value,y=t.target.addressTown.value,v=t.target.addressCity.value,f=t.target.addressParish.value,E=t.target.addressCountry.value,b=t.target.addressPostalCode.value,_=t.target.referralDate.value,A=t.target.referralReason.value.replace(/\n/g," "),C=t.target.referralPhysicianName.value,N=t.target.referralPhysicianPhone.value,x=t.target.referralPhysicianEmail.value,I=(t.target.referralPhysicianAddress.value.replace(/\n/g," "),t.target.attendingPhysician.value),T=t.target.occupationRole.value,S=t.target.occupationEmployerName.value,w=t.target.occupationEmployerEmail.value,k=t.target.occupationEmployerPhone.value,U=t.target.occupationEmployerAddress.value.replace(/\n/g," "),D=t.target.insuranceCompany.value,F=t.target.insurancePolicyNumber.value,L=t.target.insuranceDescription.value.replace(/\n/g," "),V=t.target.insuranceExpiryDate.value,P=t.target.insuranceSubscriberCompany.value,B=t.target.insuranceSubscriberDescription.value.replace(/\n/g," ");if(0===i.trim().length||0===s.trim().length||0===l.trim().length||0===c.trim().length||0===r.trim().length||0===m.trim().length||0===d.trim().length||0===p.trim().length)return e.context.setUserAlert("...blank required fields!!!..."),void e.setState({isLoading:!1});var q={query:'\n      mutation {createPatient(\n        activityId:"'.concat(n,'",\n        patientInput:{\n          active:').concat(!1,',\n          username:"').concat(l,'",\n          dob:"').concat(c,'",\n          title:"').concat(i,'",\n          name:"').concat(s,'",\n          lastName:"').concat(o,'",\n          role:"').concat(r,'",\n          gender:"').concat(m,'",\n          contactEmail:"').concat(d,'",\n          contactPhone:"').concat(p,'",\n          contactPhone2:"').concat(g,'",\n          addressNumber:').concat(h,',\n          addressStreet:"').concat(u,'",\n          addressTown:"').concat(y,'",\n          addressCity:"').concat(v,'",\n          addressParish:"').concat(f,'",\n          addressCountry:"').concat(E,'",\n          addressPostalCode:"').concat(b,'",\n          referralDate:"').concat(_,'",\n          referralReason:"').concat(A,'",\n          referralPhysicianName:"').concat(C,'",\n          referralPhysicianEmail:"').concat(x,'",\n          referralPhysicianPhone:"').concat(N,'",\n          attendingPhysician:"').concat(I,'",\n          occupationRole:"').concat(T,'",\n          occupationEmployerName:"').concat(S,'",\n          occupationEmployerPhone:"').concat(k,'",\n          occupationEmployerEmail:"').concat(w,'",\n          occupationEmployerAddress:"').concat(U,'",\n          insuranceCompany:"').concat(D,'",\n          insurancePolicyNumber:"').concat(F,'",\n          insuranceDescription:"').concat(L,'",\n          insuranceExpiryDate:"').concat(V,'",\n          insuranceSubscriberCompany:"').concat(P,'",\n          insuranceSubscriberDescription:"').concat(B,'"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(q),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create patient success!...";t.errors&&(i=t.errors[0].message),t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,showDetails:!0,creatingPatient:!1,tabKey:"detail",menuSelect:"detail",selectedPatient:t.data.createPatient,newPatient:t.data.createPatient,activityA:"createPatient?activityId:".concat(n,",patientId:").concat(t.data.createPatient._id)}),e.logUserActivity({activityId:n,token:a});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllPatients(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.toggleFilter=function(){e.setState({startFilter:!e.state.startFilter})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t}),"detail"===t&&e.state.selectedPatient?e.setState({subMenuState:!0}):e.setState({subMenuState:!1})},e.subMenuSelect=function(t){e.setState({subMenu:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedPatient:t,tabKey:"detail",menuSelect:"detail",subMenuState:!0}),e.props.selectPatient(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updatePatient=function(t){console.log("...updating selected patient..."),e.setState({selectedPatient:t}),e.props.selectPatient(t)},e.deletePatient=function(t){console.log("...deleteing patient...",t),e.context.setUserAlert("...deleteing patient..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deletePatientById(\n        activityId:"'.concat(n,'",\n        patientId:"').concat(i,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete patient success!...";t.errors&&(s=t.errors[0].message),t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deletePatientById?activityId:".concat(n,",patientId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllPatients({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e.clearSearch=function(){e.setState({searchPatients:null})},e.setAllergyCheck=function(t){e.setState({hasAllergies:t.hasAllergies,hasComorbidities:t.hasComorbidities})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all patients component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.props.location.state&&this.props.location.state.patient&&(this.setState({fromGoLink:!0,goLinkId:this.props.location.state.patient}),this.props.location.state&&this.props.location.state.selectPatient&&this.setState({dateClickPatientSelect:!0})),this.getAllPatients(e),this.props.selectedPatient&&(console.log("...found existing Patient selection... loading..."),this.setState({showDetails:!0,tabKey:"detail",menuSelect:"detail",subMenuState:!0,selectedPatient:this.props.selectedPatient}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all patients retrieval success!...";if(e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a}),!0===t.state.fromGoLink){var o=e.data.getAllPatients.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,menuSelect:"detail",selectedPatient:o,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.state.dateClickPatientSelect.true&&t.setState({menuSelect:"list",dateClickPatientSelect:!1})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,o=D()().tz("America/Bogota").format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(o,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.error&&t.context.setUserAlert(e.data.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe,{state:this.state.sideCol,menuSelect:this.menuSelect,subMenuState:this.state.subMenuState,menu:this.state.menuSelect,subMenu:this.state.subMenu,subMenuSelect:this.subMenuSelect,page:"patient",role:this.context.role,hasAllergies:this.state.hasAllergies,hasComorbidities:this.state.hasComorbidities}),!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(_.a,{className:"headTopRow"},i.a.createElement("h1",null,"Patients: "),!0===this.state.showDetails&&this.state.selectedPatient&&"detail"===this.state.tabKey&&i.a.createElement("h1",{className:"ul"}," ",this.state.selectedPatient.name," ")),i.a.createElement(_.a,{className:""},this.state.isLoading&&i.a.createElement(T.a,{src:F,className:"loadingGif",fluid:!0}))),i.a.createElement(_.a,{className:""},this.state.patients&&i.a.createElement(A.a,{lg:12,className:""},"list"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},!0===this.state.startFilter&&i.a.createElement(A.a,null,i.a.createElement(da,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter},"Filter"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn",onClick:this.resetFilter},"Reset")),i.a.createElement(O,{filter:this.state.filter,patients:this.state.patients,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deletePatient})),"search"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Search Patient"),i.a.createElement(_.a,{className:""},i.a.createElement(Q,{onConfirm:this.searchPatients,onCancel:this.clearSearch})),i.a.createElement(_.a,null,this.state.searchPatients&&i.a.createElement(I.a,{variant:"primary",className:"centered_btn",onClick:this.toggleFilter},"Filter")),!0===this.state.startFilter&&i.a.createElement(A.a,null,i.a.createElement(da,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),i.a.createElement(_.a,{className:""},this.state.searchPatients&&i.a.createElement(ft,{filter:this.state.filter,patients:this.state.searchPatients,authId:this.context.activityId,showDetails:this.showDetails})))),"detail"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol tabColDetail"},!1===this.state.showDetails&&!this.state.selectedPatient&&i.a.createElement("h3",null,"Select a Patient to see details"),!0===this.state.showDetails&&this.state.selectedPatient&&i.a.createElement(ma,{patient:this.state.selectedPatient,updatePatient:this.updatePatient,subMenu:this.state.subMenu,setAllergyCheck:this.setAllergyCheck})),"new"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},!1===this.state.creatingPatient&&i.a.createElement(I.a,{variant:"secondary",className:"filterFormBtn",onClick:this.onStartCreateNewPatient},"Create New"),!0===this.state.creatingPatient&&i.a.createElement(vt,{onConfirm:this.submitCreateNewPatientForm,onCancel:this.cancelCreateNewPatient}))))))}}]),a}(n.Component));pa.contextType=E;var ga=pa,ha=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create New"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"patientId",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Patient: ",e.patient.username),i.a.createElement(J.a.Control,{type:"text",value:e.patient._id}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"new_unreferred"),i.a.createElement("option",null,"referral"),i.a.createElement("option",null,"follow_up")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"important",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Important ?"),i.a.createElement(J.a.Control,{type:"checkbox"}))),i.a.createElement(J.a.Row,{className:"formRow"},!e.preFillDate&&i.a.createElement(J.a.Group,{as:A.a,controlId:"date",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Date"),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."})),e.preFillDate&&i.a.createElement(J.a.Group,{as:A.a,controlId:"date",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Date"),i.a.createElement(J.a.Control,{type:"date",placeholder:"...",value:e.preFillDate}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"time",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Time"),i.a.createElement(J.a.Control,{type:"time",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"location",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Location"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"loginFormBtn searchBtn"},"Create"),i.a.createElement(I.a,{variant:"danger",className:"loginFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},ua=a(293),ya=a.n(ua),va=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),!0===e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.note)},"Delete")))))},fa=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(va,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},Ea=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:"cardBody"},i.a.createElement(B.a.Text,{className:"cardText"},"Tag: ",i.a.createElement("span",{className:"bold"},e.tag)),!0===e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===s&&o(!1),!1===s&&o(!0)}})),!0===s&&i.a.createElement(_.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.tag)},"Delete")))))},ba=function(e){var t=Object.assign({},e.filter),a=e.tags,n=[];"tag"===t.field&&"tag"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"tag"===t.field&&"tag"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"tag"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ea,{key:s,tag:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},o)},_a=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),s=a[0],o=a[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Staff"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement($,{users:e.users,selectUser:function(e){o(e)},filter:e.filter})),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"user",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"User"),i.a.createElement(J.a.Control,{type:"text",value:s._id}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Aa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlay2:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},startFilter:!1,selectFilter:null,menuSelected:null,menuSelect:"basic",adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:null,selectedAppointment:n.props.appointment,addAttachmentForm:!1,addAttachmentArgs:null,showAddConsultantForm:!1,users:null,calEvent:{}},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding notes..."),n.context.setUserAlert("...adding notes..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.notes.value.replace(/\n/g,"");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var o={query:'\n      mutation {addAppointmentNotes(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          notes:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.addAppointmentNotes),n.setState({isLoading:!1,overlay2:!1,selectedAppointment:e.data.addAppointmentNotes,activityA:"addAppointmentNotes?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.addAppointmentNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteNote=function(e){console.log("...deleting notes..."),n.context.setUserAlert("...deleting notes..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e,o={query:'\n      mutation {deleteAppointmentNote(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          note:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.deleteAppointmentNote),n.setState({isLoading:!1,overlay2:!1,selectedAppointment:e.data.deleteAppointmentNote,activityA:"deleteAppointmentNote?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.deleteAppointmentNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddTagForm=function(e){e.preventDefault(),console.log("...adding tags..."),n.context.setUserAlert("...adding tags..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.tags.value.replace(/\n/g,"");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var o={query:'\n      mutation {addAppointmentTags(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          tags:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tags add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.addAppointmentTags),n.setState({isLoading:!1,overlay2:!1,selectedAppointment:e.data.addAppointmentTags,activityA:"addAppointmentTags?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.addAppointmentTags,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteTag=function(e){console.log("...deleting tags..."),n.context.setUserAlert("...deleting tags..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e,o={query:'\n      mutation {deleteAppointmentTag(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          tag:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tag delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.deleteAppointmentTag),n.setState({isLoading:!1,overlay2:!1,selectedAppointment:e.data.deleteAppointmentTag,activityA:"deleteAppointmentTag?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.deleteAppointmentTag,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddUserForm=function(e){e.preventDefault(),console.log("...adding consultant..."),n.context.setUserAlert("...adding consultant..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=e.target.user.value,s=n.props.appointment._id;if(0===i.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var o=n.state.users.filter((function(e){return e._id===i}))[0].role;if("Doctor"!==o&&"Nurse"!==o)return console.log("...please choose a Doctor or Nurse to add please..."),void n.context.setUserAlert("...please choose a Doctor or Nurse to add please...");var l={query:'\n      mutation {addAppointmentConsultant(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...add consultant success!...";e.errors&&(o=e.errors[0].message),e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updateAppointment(e.data.addAppointmentConsultant),n.setState({isLoading:!1,overlay2:!1,activityA:"addAppointmentConsultant?activityId:".concat(a,",appointmentId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd(),n.checkConsultantAppointments(n.props.appointment.date,i)})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteConsultant=function(e){console.log("...deleting consultant..."),n.context.setUserAlert("...deleting consultant..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=e._id,s=n.props.appointment._id,o={query:'\n      mutation {deleteAppointmentConsultant(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...delete consultant success!...";e.errors&&(o=e.errors[0].message),e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updateAppointment(e.data.deleteAppointmentConsultant),n.setState({isLoading:!1,overlay2:!1,activityA:"deleteAppointmentConsultant?activityId:".concat(a,",appointmentId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.startUpdatePatient=function(){console.log("show update patient select list")},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.field.value,o=e.target.query.value;if(0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var l={query:'\n      mutation {updateAppointmentSingleField(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.updateAppointmentSingleField),n.setState({isLoading:!1,overlay2:!1,selectedPatient:e.data.updateAppointmentSingleField,activityA:"updateAppointmentSingleField?activityId:".concat(a,",appointmentId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedPatient=e.data.updateAppointmentSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.checkConsultantAppointments=function(e,t){console.log("...checking consultant appointments",e),n.context.setUserAlert("...checking consultant appointments");var a=n.context.token,i=n.context.activityId,s=D.a.unix(e.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),o={query:'\n      query {checkConsultantAppointments(\n        activityId:"'.concat(i,'",\n        consultantId:"').concat(t,'",\n        date:"').concat(s,'"\n      )}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...resData...",e.data.checkConsultantAppointments),window.alert("Consultant has ".concat(e.data.checkConsultantAppointments," appointments scheduled for that date"));var t="Consultant has ".concat(e.data.checkConsultantAppointments," appointments scheduled for that date");e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t)})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.setStateCalEvent=function(){12===n.props.appointment.date.length&&n.setState({calEvent:{title:n.props.appointment.title,description:n.props.appointment.description,location:n.props.appointment.location,startTime:D.a.unix(n.props.appointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD, h:mm:ss a"),endTime:D.a.unix(n.props.appointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD, h:mm:ss a")}}),13===n.props.appointment.date.length&&n.setState({calEvent:{title:n.props.appointment.title,description:n.props.appointment.description,location:n.props.appointment.location,startTime:D.a.unix(n.props.appointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD, h:mm:ss a"),endTime:D.a.unix(n.props.appointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD, h:mm:ss a")}})},n.propsPatient=n.props.appointment,n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e;console.log("...appointment details component mounted...",this.props.appointment),sessionStorage.getItem("logInfo")&&(e=JSON.parse(sessionStorage.getItem("logInfo"))),this.setState({selectedPatient:this.context.selectedPatient}),"Admin"===this.context.role&&this.setState({canDelete:!0}),this.getAllUsers(e)}},{key:"componentWillUnmount",value:function(){}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=D()().tz("America/Bogota").format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all users retrieval success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a}),t.setStateCalEvent()})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay2&&i.a.createElement(de,{toggleOverlay2:this.toggleOverlay2}),!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus}),i.a.createElement("div",{className:"topContainer"},i.a.createElement(_.a,{className:""},!this.props.appointment&&i.a.createElement("h3",null,"...")),i.a.createElement(_.a,{className:""},this.props.appointment&&i.a.createElement(A.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(aa,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"all"===this.props.subMenu&&i.a.createElement(_.a,{className:"tabRowAll"},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.type),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.subType),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.date)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.time),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Location:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.location),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"location")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"description")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Important:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.important.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"important")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"In Progress:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.inProgress.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"inProgress")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attended:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.attended.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attended")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Patient:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.name),i.a.createElement(p.b,{to:{pathname:"/patients",state:{patient:this.props.appointment.patient._id}}},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient._id)),this.props.appointment.visit&&i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Visit:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.visit._id)),i.a.createElement(S.a.Item,null,i.a.createElement(ya.a,{event:this.state.calEvent}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Creator:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.creator._id))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Consultants:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"consultant")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.startFilter&&"consultant"===this.state.selectFilter&&i.a.createElement(gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(_a,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement($,{filter:this.state.filter,authId:this.context.activityId,users:this.props.appointment.consultants,appointmentPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(Oe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Ye,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(fa,{filter:this.state.filter,notes:this.props.appointment.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Tags:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"tag")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"tag")},"Add")),!0===this.state.startFilter&&"tag"===this.state.selectFilter&&i.a.createElement(ta,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(na,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(ba,{filter:this.state.filter,tags:this.props.appointment.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag}))))),"basic"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.type),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.subType),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),12===this.props.appointment.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.appointment.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.appointment.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.appointment.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.time),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Location:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.location),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"location")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"description")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Important:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.important.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"important")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"In Progress:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.inProgress.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"inProgress")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attended:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.attended.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attended")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Patient:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.name),i.a.createElement(p.b,{to:{pathname:"/patients",state:{patient:this.props.appointment.patient._id}}},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient._id)),this.props.appointment.visit&&i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Visit:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.visit._id)),i.a.createElement(S.a.Item,null,i.a.createElement(ya.a,{event:this.state.calEvent})))),"admin"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Creator:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.creator._id)))),"consultant"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Consultants:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"consultant")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.startFilter&&"consultant"===this.state.selectFilter&&i.a.createElement(gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(_a,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement($,{filter:this.state.filter,authId:this.context.activityId,users:this.props.appointment.consultants,appointmentPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant})),"note"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(Oe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Ye,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(fa,{filter:this.state.filter,notes:this.props.appointment.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote})),"tag"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Tags:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"tag")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"tag")},"Add")),!0===this.state.startFilter&&"tag"===this.state.selectFilter&&i.a.createElement(ta,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(na,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(ba,{filter:this.state.filter,tags:this.props.appointment.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag}))))))}}]),a}(n.Component);Aa.contextType=E;var Ca=Aa,Na=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Field"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"checkinTime"),i.a.createElement("option",null,"seenTime"),i.a.createElement("option",null,"location"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"inProgress"),i.a.createElement("option",null,"attended"),i.a.createElement("option",null,"important"),i.a.createElement("option",null,"notes"),i.a.createElement("option",null,"tags")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Query"),i.a.createElement(J.a.Control,{type:"text",className:"fontAwesome",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Search"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},xa=(a(773),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,canDelete:!1,appointments:null,searchAppointments:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menuAppointment",startFilter:!1,filter:{calendar:!1,field:null,key:null,value:null},menuSelected:null,menuSelect:"list",subMenuState:!1,subMenu:"all",adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,selectedAppointment:null,creatingAppointment:!1,newAppointment:null,calendarAppointments:null,fromGoLink:null,goLinkId:null,sublistSearch:!1,tabKey:"list",preFillDate:null},e.searchAppointments=function(t){t.preventDefault(),console.log("...searching appointments..."),e.context.setUserAlert("...searching appointments..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"date"!==o&&"inProgress"!==o&&"attended"!==o&&"important"!==o&&"important"!==o||(c=!1),!0===c&&(a={query:'\n        query {getAppointmentsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),!1===c&&(a={query:'\n      query {getAppointmentsByField(\n        activityId:"'.concat(i,'",\n        field:"').concat(o,'",\n        query:"').concat(l,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...appointment search success!...";!0===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===c&&e.setState({isLoading:!1,searchAppointments:t.data.getAppointmentsByFieldRegex,activityA:"getAppointmentsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===c&&e.setState({isLoading:!1,searchAppointments:t.data.getAppointmentsByField,activityA:"getAppointmentsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewAppointment=function(){e.setState({creatingAppointment:!0})},e.cancelCreateNewAppointment=function(){e.setState({creatingAppointment:!1,selectedPatient:null})},e.submitCreateNewAppointmentForm=function(t){t.preventDefault(),console.log("...creating new appointment..."),e.context.setUserAlert("...creating new appointment..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.selectedPatient._id,s=e.state.selectedPatient.name+"_appointment_"+t.target.date.value,o=t.target.type.value,l=t.target.date.value,c=t.target.time.value,r=t.target.location.value,m=t.target.description.value.replace(/\n/g," "),d=t.target.important.checked;if(0!==s.trim().length&&0!==l.trim().length&&0!==c.trim().length&&0!==r.trim().length){if(console.log("foo",l),l<D()().tz("America/Bogota").format("YYYY-MM-DD"))return console.log("...ummm no! Please pick a date today or in the future..."),e.context.setUserAlert("...ummm no! Please pick a date today or in the future..."),void e.setState({isLoading:!1});var p={query:'\n      mutation {createAppointment(\n        activityId:"'.concat(n,'",\n        patientId:"').concat(i,'",\n        appointmentInput:{\n          title:"').concat(s,'",\n          type:"').concat(o,'",\n          subType:"').concat("",'",\n          date:"').concat(l,'",\n          time:"').concat(c,'",\n          location:"').concat(r,'",\n          description:"').concat(m,'",\n          important:').concat(d,"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create appointment success!...";t.errors&&(i=t.errors[0].message),t.data.error&&(i=t.data.error),"Doctor"===e.context.role&&e.checkConsultantAppointments(l),e.context.setUserAlert(i),e.setState({isLoading:!1,showDetails:!0,creatingAppointment:!1,selectedAppointment:t.data.createAppointment,newAppointment:t.data.createAppointment,tabKey:"detail",menuSelect:"detail",activityA:"createAppointment?activityId:".concat(n,",appointmentId:").concat(t.data.createAppointment._id)}),e.logUserActivity({activityId:n,token:a});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllAppointments(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))}else e.context.setUserAlert("...blank required fields!!!...")},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.toggleFilter=function(t){"calendar"===t&&e.setState({filter:{calendar:!e.state.calendar,field:e.state.field,key:e.state.key,value:e.state.value}}),e.setState({startFilter:!e.state.startFilter})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t}),"detail"===t&&e.state.selectedAppointment?e.setState({subMenuState:!0}):e.setState({subMenuState:!1})},e.subMenuSelect=function(t){e.setState({subMenu:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{calendar:e.state.filter.calendar,field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedAppointment:t,overlay:!1,tabKey:"detail",menuSelect:"detail",subMenuState:!0}),e.props.selectAppointment(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.selectPatient=function(t){e.setState({selectedPatient:t})},e.updateAppointment=function(t){console.log("...updating selected appointment..."),e.setState({selectedAppointment:t}),e.props.selectAppointment(t)},e.deleteAppointment=function(t){console.log("...deleteing appointment...",t),e.context.setUserAlert("...deleteing appointment..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteAppointmentById(\n        activityId:"'.concat(n,'",\n        appointmentId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete appointment success!...";t.errors&&(s=t.errors[0].message),t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteAppointmentById?activityId:".concat(n,",appointmentId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllAppointments({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.parseForCalendar=function(t){console.log("...parsing appointments for calendar...");t.map((function(e){return{title:e.title,date:D.a.unix(e.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important}}}));var a,n=[],i=Object(ae.a)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=void 0;12===s.date.length?o=D.a.unix(s.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"):13===s.date.length&&(o=D.a.unix(s.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"));var l={title:s.title,date:o,props:{_id:s._id,date:o,title:s.title,type:s.type,subType:s.subType,time:s.time,location:s.location,description:s.description,important:s.important}};n.push(l)}}catch(c){i.e(c)}finally{i.f()}e.setState({calendarAppointments:n})},e.viewCalendarEvent=function(t){console.log("...viewing calendar appointment...");var a=e.state.appointments.filter((function(e){return e._id===t.event.extendedProps.props._id}))[0];12===a.date.length&&(a.date=D.a.unix(a.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD")),13===a.date.length&&(a.date=D.a.unix(a.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD")),e.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:a}})},e.dateClick=function(t){console.log("dateClick"),e.setState({overlay:!0,overlayStatus:{type:"dateClickAppointment",data:t.dateStr}})},e.startCreateDateClickAppt=function(){e.setState({overlay:!1,menuSelect:"new",creatingAppointment:!0,preFillDate:e.state.overlayStatus.data})},e.toggleOverlay=function(){e.setState({overlay:!1})},e.startSublistSearch=function(){e.setState({sublistSearch:!0})},e.cancelSublistSearch=function(){e.setState({sublistSearch:!1}),e.getAllPatients({activityId:e.context.activityId,token:e.context.token})},e.submitSublistSearchForm=function(t){t.preventDefault(),console.log("...searching patient sublist..."),e.context.setUserAlert("...searching patient sublist..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"active"!==o&&"age"!==o&&"dob"!==o&&"addresses.number"!==o&&"addresses.primary"!==o&&"loggedIn"!==o&&"clientConnected"!==o&&"verification.verified"!==o&&"registration.date"!==o&&"expiryDate"!==o&&"referral.date"!==o&&"insurance.expiryDate"!==o&&"insurance.expiryDate"!==o||(c=!1),!0===c&&(a={query:'\n        query {getPatientsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),!1===c&&(a={query:'\n        query {getPatientsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...patient search success!...";!0===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===c&&e.setState({isLoading:!1,patients:t.data.getPatientsByFieldRegex,activityA:"getPatientsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===c&&e.setState({isLoading:!1,patients:t.data.getPatientsByField,activityA:"getPatientsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null,calendar:!1}})},e.clearSearch=function(){e.setState({searchAppointments:null})},e.checkConsultantAppointments=function(t){console.log("...checking consultant appointments"),e.context.setUserAlert("...checking consultant appointments");var a=e.context.token,n=e.context.activityId,i=(D()(t).tz("America/Bogota").format("YYYY-MM-DD"),{query:'\n      query {checkConsultantAppointments(\n        activityId:"'.concat(n,'",\n        consultantId:"').concat(n,'",\n        date:"').concat(t,'"\n      )}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.checkConsultantAppointments),window.alert("You have ".concat(t.data.checkConsultantAppointments," appointments scheduled for that date"));var a="You have ".concat(t.data.checkConsultantAppointments," appointments scheduled for that date");t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all appointments component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.getAllPatients(e),this.props.location.state&&this.props.location.state.appointment&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.appointment}),this.getAllAppointments(e),this.props.selectedAppointment&&(console.log("...found existing Appointment selection... loading..."),this.setState({showDetails:!0,selectedAppointment:this.props.selectedAppointment})),this.props.location.state&&this.props.location.state.newAppointment&&(console.log("...creating a new appt from patient detail..."),this.setState({creatingAppointment:!0,selectedPatient:this.props.location.state.newAppointment,menuSelect:"new"})),this.props.location.state&&this.props.location.state.newAppointmentDate&&(console.log("...creating a new appt from patient date click..."),this.setState({creatingAppointment:!0,selectedPatient:this.props.location.state.newAppointmentDate.patient,preFillDate:this.props.location.state.newAppointmentDate.date,menuSelect:"new"}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllAppointments",value:function(e){var t=this;console.log("...retrieving all appointments..."),this.context.setUserAlert("...retrieving all appointments..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllAppointments(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all appointments retrieval success!...";if(e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),!0===t.state.fromGoLink){var s=e.data.getAllAppointments.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,menuSelect:"detail",selectedAppointment:s,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(i),t.setState({isLoading:!1,appointments:e.data.getAllAppointments,activityA:"getAllAppointments?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a}),t.parseForCalendar(e.data.getAllAppointments)})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all patients retrieval success!...";e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,o=D()().tz("America/Bogota").format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(o,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.addUserActivity.error&&t.context.setUserAlert(e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe,{state:this.state.sideCol,menuSelect:this.menuSelect,subMenuState:this.state.subMenuState,subMenu:this.state.subMenu,menu:this.state.menuSelect,subMenuSelect:this.subMenuSelect,page:"appointment",role:this.context.role}),!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus,selectCalendarDetails:this.showDetails,toggleOverlay:this.toggleOverlay,startCreateDateClickAppt:this.startCreateDateClickAppt}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(_.a,{className:"headTopRow"},i.a.createElement("h1",null,"Appointments: "),!0===this.state.showDetails&&this.state.selectedAppointment&&"detail"===this.state.tabKey&&i.a.createElement("h1",{className:"ul"}," ",this.state.selectedAppointment.title," ")),i.a.createElement(_.a,{className:""},this.state.isLoading&&i.a.createElement(T.a,{src:F,className:"loadingGif",fluid:!0}))),i.a.createElement(_.a,{className:""},this.state.appointments&&i.a.createElement(A.a,{md:12,className:""},"list"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol tabRowAppt"},!0===this.state.startFilter&&i.a.createElement(A.a,null,i.a.createElement(qe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter},"Filter"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn",onClick:this.resetFilter},"Reset")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},i.a.createElement(j,{filter:this.state.filter,appointments:this.state.appointments,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteAppointment})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAppointments,dateClick:this.dateClick,eventClick:this.viewCalendarEvent})))),"search"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Search:"),i.a.createElement(_.a,{className:""},i.a.createElement(Na,{onConfirm:this.searchAppointments,onCancel:this.clearSearch})),i.a.createElement(_.a,null,this.state.searchAppointments&&i.a.createElement(I.a,{variant:"primary",className:"centered_btn",onClick:this.toggleFilter},"Filter")),!0===this.state.startFilter&&i.a.createElement(A.a,null,i.a.createElement(qe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),i.a.createElement(_.a,{className:""},this.state.searchAppointments&&i.a.createElement(j,{filter:this.state.filter,appointments:this.state.searchAppointments,authId:this.context.activityId,showDetails:this.showDetails})))),"detail"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol tabColDetail"},!1===this.state.showDetails&&!this.state.selectedAppointment&&i.a.createElement("h3",null,"Select a Appointment to see details"),!0===this.state.showDetails&&this.state.selectedAppointment&&i.a.createElement(Ca,{appointment:this.state.selectedAppointment,updateAppointment:this.updateAppointment,subMenu:this.state.subMenu})),"new"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},!1===this.state.creatingAppointment&&i.a.createElement(I.a,{variant:"secondary",className:"filterFormBtn",onClick:this.onStartCreateNewAppointment},"Create New"),!0===this.state.creatingAppointment&&this.state.patients&&!this.state.selectedPatient&&i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Select a Patient"),i.a.createElement(_.a,{className:""},i.a.createElement(I.a,{variant:"success",className:"patientSublistSearchBtn",onClick:this.startSublistSearch},"Search")),i.a.createElement(_.a,{className:""},!0===this.state.sublistSearch&&i.a.createElement(Q,{onCancel:this.cancelSublistSearch,onConfirm:this.submitSublistSearchForm})),i.a.createElement(_.a,{className:""},i.a.createElement(O,{filter:this.state.filter,patients:this.state.patients,authId:this.context.activityId,onSelect:this.selectPatient,appointmentPage:!0}))),!0===this.state.creatingAppointment&&this.state.selectedPatient&&i.a.createElement(_.a,null,i.a.createElement(ha,{onConfirm:this.submitCreateNewAppointmentForm,onCancel:this.cancelCreateNewAppointment,patient:this.state.selectedPatient,preFillDate:this.state.preFillDate})))))))}}]),a}(n.Component));xa.contextType=E;var Ia=xa,Ta=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create Visit Form"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"appointmentId",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Appointment: ",e.appointment.title),i.a.createElement(J.a.Control,{type:"text",value:e.appointment._id}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:A.a,controlId:"followUp",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"FollowUp ?"),i.a.createElement(J.a.Control,{type:"checkbox"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"loginFormBtn"},"Create"),i.a.createElement(I.a,{variant:"danger",className:"loginFormBtn",onClick:e.onCancel},"Cancel"))))},Sa=void 0,wa=function(e){var t;t=!1===e.complaint.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.complaint.title)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitComplaintHighlighted.bind(Sa,e.complaint)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Sa,{field:"complaint",data:e.complaint})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.complaint.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.complaint.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Anamnesis: ",i.a.createElement("span",{className:"bold"},e.complaint.anamnesis))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(Sa,{field:"complaint",data:e.complaint})}))),i.a.createElement(St,{item:e.complaint,attachments:e.complaint.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"complaint"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Sa,e.complaint)},"Delete"))))))))},ka=function(e){var t=Object.assign({},e.filter),a=e.complaints,n=[];"complaint"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"complaint"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"complaint"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"complaint"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"complaint"===t.field&&"anamnesis"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.anamnesis>t.anamnesis?1:-1}))),"complaint"===t.field&&"anamnesis"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.anamnesis<t.anamnesis?1:-1}))),"complaint"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"complaint"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(wa,{key:s,complaint:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,toggleVisitComplaintHighlighted:e.toggleVisitComplaintHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},Ua=void 0,Da=function(e){var t;t=!1===e.survey.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.survey.title)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitSurveyHighlighted.bind(Ua,e.survey)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Ua,{field:"survey",data:e.survey})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.survey.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.survey.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(Ua,{field:"survey",data:e.survey})}))),i.a.createElement(St,{item:e.survey,attachments:e.survey.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"survey"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Ua,e.survey)},"Delete"))))))))},Fa=function(e){var t=Object.assign({},e.filter),a=e.surveys,n=[];"survey"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"survey"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"survey"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"survey"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"survey"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"survey"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Da,{key:s,survey:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,toggleVisitSurveyHighlighted:e.toggleVisitSurveyHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},La=void 0,Va=function(e){var t;t=!1===e.systematicInquiry.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.title)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitSysInquiryHighlighted.bind(La,e.systematicInquiry)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(La,{field:"systematicInquiry",data:e.systematicInquiry})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(La,{field:"systematicInquiry",data:e.systematicInquiry})}))),i.a.createElement(St,{item:e.systematicInquiry,attachments:e.systematicInquiry.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"systematicInquiry"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(La,e.systematicInquiry)},"Delete"))))))))},Pa=function(e){var t=Object.assign({},e.filter),a=e.systematicInquiry,n=[];"systematicInquiry"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"systematicInquiry"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"systematicInquiry"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"systematicInquiry"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"systematicInquiry"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"systematicInquiry"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Va,{key:s,systematicInquiry:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,toggleVisitSysInquiryHighlighted:e.toggleVisitSysInquiryHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},Ba=void 0,qa=function(e){var t;t=!1===e.vitals.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Pulse Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.pr)),i.a.createElement(B.a.Text,{className:"cardText"},"Respiratory Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.rr)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitVitalsHighlighted.bind(Ba,e.vitals)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Ba,{field:"vitals",data:e.vitals})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Pulse Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.pr))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Respiratory Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.rr))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Blood Pressure: ",i.a.createElement("span",{className:"bold"},e.vitals.bp1,"/",e.vitals.bp2))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Temperature: ",i.a.createElement("span",{className:"bold"},e.vitals.temp))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"SP02: ",i.a.createElement("span",{className:"bold"},e.vitals.sp02))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Height : ",i.a.createElement("span",{className:"bold"},e.vitals.heightValue),"  ",i.a.createElement("span",{className:"bold"},e.vitals.heightUnit))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Weight : ",i.a.createElement("span",{className:"bold"},e.vitals.weightValue),"  ",i.a.createElement("span",{className:"bold"},e.vitals.weightUnit))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"BMI : ",i.a.createElement("span",{className:"bold"},e.vitals.bmi))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Urine"),i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.vitals.urine.type)," Value: ",i.a.createElement("span",{className:"bold"},e.vitals.urine.value))),i.a.createElement("li",null,!0===e.canDelete&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Ba,e.vitals)},"Delete")))))))},Ga=function(e){var t=Object.assign({},e.filter),a=e.vitals,n=[];"vitals"===t.field&&"pr"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.pr>t.pr?1:-1}))),"vitals"===t.field&&"pr"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.pr<t.pr?1:-1}))),"vitals"===t.field&&"bp1"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bp1>t.bp1?1:-1}))),"vitals"===t.field&&"bp1"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bp1<t.bp1?1:-1}))),"vitals"===t.field&&"bp2"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bp2>t.bp2?1:-1}))),"vitals"===t.field&&"bp2"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bp2<t.bp2?1:-1}))),"vitals"===t.field&&"rr"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.rr>t.rr?1:-1}))),"vitals"===t.field&&"rr"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.rr<t.rr?1:-1}))),"vitals"===t.field&&"temp"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.temp>t.temp?1:-1}))),"vitals"===t.field&&"temp"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.temp<t.temp?1:-1}))),"vitals"===t.field&&"sp02"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.sp02>t.sp02?1:-1}))),"vitals"===t.field&&"sp02"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.sp02<t.sp02?1:-1}))),"vitals"===t.field&&"heightValue"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.heightValue>t.heightValue?1:-1}))),"vitals"===t.field&&"heightValue"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.heightValue<t.heightValue?1:-1}))),"vitals"===t.field&&"weightValue"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.weightValue>t.weightValue?1:-1}))),"vitals"===t.field&&"weightValue"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.weightValue<t.weightValue?1:-1}))),"vitals"===t.field&&"bmi"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bmi>t.bmi?1:-1}))),"vitals"===t.field&&"bmi"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bmi<t.bmi?1:-1}))),"vitals"===t.field&&"urine.type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.urine.type>t.urine.type?1:-1}))),"vitals"===t.field&&"urine.type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.urine.type<t.urine.type?1:-1}))),"vitals"===t.field&&"urine.value"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.urine.value>t.urine.value?1:-1}))),"vitals"===t.field&&"urine.value"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.urine.value<t.urine.value?1:-1}))),"vitals"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"vitals"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(qa,{key:s,vitals:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,toggleVisitVitalsHighlighted:e.toggleVisitVitalsHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},Oa=void 0,Ma=function(e){var t;t=!1===e.examination.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"General: ",i.a.createElement("span",{className:"bold"},e.examination.general)),i.a.createElement(B.a.Text,{className:"cardText"},"Area: ",i.a.createElement("span",{className:"bold"},e.examination.area)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitExaminationHighlighted.bind(Oa,e.examination)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Oa,{field:"examination",data:e.examination})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"General: ",i.a.createElement("span",{className:"bold"},e.examination.general))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Area: ",i.a.createElement("span",{className:"bold"},e.examination.area))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Inspection: ",i.a.createElement("span",{className:"bold"},e.examination.inspection))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Palpation: ",i.a.createElement("span",{className:"bold"},e.examination.palpation))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Percussion: ",i.a.createElement("span",{className:"bold"},e.examination.percussion))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Auscultation: ",i.a.createElement("span",{className:"bold"},e.examination.auscultation))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.examination.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"FollowUp: ",i.a.createElement("span",{className:"bold"},!0===e.examination.followUp?i.a.createElement(y.a,{icon:v.e,className:"listIcon"}):i.a.createElement(y.a,{icon:v.a,className:"listIcon"})))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(Oa,{field:"examination",data:e.examination})}))),i.a.createElement(St,{item:e.examination,attachments:e.examination.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"examination"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Oa,e.examination)},"Delete"))))))))},za=function(e){var t=Object.assign({},e.filter),a=e.examination,n=[];"examination"===t.field&&"general"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.general>t.general?1:-1}))),"examination"===t.field&&"general"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.general<t.general?1:-1}))),"examination"===t.field&&"area"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.area>t.area?1:-1}))),"examination"===t.field&&"area"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.area<t.area?1:-1}))),"examination"===t.field&&"inspection"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.inspection>t.inspection?1:-1}))),"examination"===t.field&&"inspection"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.inspection<t.inspection?1:-1}))),"examination"===t.field&&"palpation"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.palpation>t.palpation?1:-1}))),"examination"===t.field&&"palpation"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.palpation<t.palpation?1:-1}))),"examination"===t.field&&"percussion"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.percussion>t.percussion?1:-1}))),"examination"===t.field&&"percussion"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.percussion<t.percussion?1:-1}))),"examination"===t.field&&"auscultation"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.auscultation>t.auscultation?1:-1}))),"examination"===t.field&&"auscultation"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.auscultation<t.auscultation?1:-1}))),"examination"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"examination"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"examination"===t.field&&"followUp"===t.key&&(n=a.filter((function(e){return e.followUp===t.value}))),"examination"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"examination"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ma,{key:s,examination:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,toggleVisitExaminationHighlighted:e.toggleVisitExaminationHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},ja=void 0,Ra=function(e){var t;t=!1===e.investigation.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.investigation.title)),i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.investigation.type)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitInvestigationHighlighted.bind(ja,e.investigation)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(ja,{field:"investigation",data:e.investigation})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.investigation.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.investigation.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.investigation.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(ja,{field:"investigation",data:e.investigation})}))),i.a.createElement(St,{item:e.investigation,attachments:e.investigation.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"investigation"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(ja,e.investigation)},"Delete"))))))))},Ya=function(e){var t=Object.assign({},e.filter),a=e.investigation,n=[];"investigation"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"investigation"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"investigation"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"investigation"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"investigation"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"investigation"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ra,{key:s,investigation:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,toggleVisitInvestigationHighlighted:e.toggleVisitInvestigationHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},Ha=void 0,Ka=function(e){var t;t=!1===e.diagnosis.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.diagnosis.title)),i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.diagnosis.type)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitDiagnosisHighlighted.bind(Ha,e.diagnosis)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Ha,{field:"diagnosis",data:e.diagnosis})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.diagnosis.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.diagnosis.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.diagnosis.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(Ha,{field:"diagnosis",data:e.diagnosis})}))),i.a.createElement(St,{item:e.diagnosis,attachments:e.diagnosis.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"diagnosis"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Ha,e.diagnosis)},"Delete"))))))))},Ja=function(e){var t=Object.assign({},e.filter),a=e.diagnosis,n=[];"diagnosis"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"diagnosis"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"diagnosis"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"diagnosis"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"diagnosis"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"diagnosis"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"diagnosis"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"diagnosis"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ka,{key:s,diagnosis:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,toggleVisitDiagnosisHighlighted:e.toggleVisitDiagnosisHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},Qa=void 0,Wa=function(e){var t;t=!1===e.treatment.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.treatment.title)),i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.treatment.type)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitTreatmentHighlighted.bind(Qa,e.treatment)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Qa,{field:"treatment",data:e.treatment})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.treatment.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.treatment.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.treatment.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Dose: ",i.a.createElement("span",{className:"bold"},e.treatment.dose))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Frequency: ",i.a.createElement("span",{className:"bold"},e.treatment.frequency))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(Qa,{field:"treatment",data:e.treatment})}))),i.a.createElement(St,{item:e.treatment,attachments:e.treatment.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"treatment"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Qa,e.treatment)},"Delete"))))))))},Xa=function(e){var t=Object.assign({},e.filter),a=e.treatment,n=[];"treatment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"treatment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"treatment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"treatment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"treatment"===t.field&&"dose"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dose>t.dose?1:-1}))),"treatment"===t.field&&"dose"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dose<t.dose?1:-1}))),"treatment"===t.field&&"frequency"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.frequency>t.frequency?1:-1}))),"treatment"===t.field&&"frequency"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.frequency<t.frequency?1:-1}))),"treatment"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"treatment"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"treatment"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"treatment"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Wa,{key:s,treatment:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,toggleVisitTreatmentHighlighted:e.toggleVisitTreatmentHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},Za=void 0,$a=function(e){var t;t=!1===e.billing.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.billing.title)),i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.billing.type)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitBillingHighlighted.bind(Za,e.billing)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(Za,{field:"billing",data:e.billing})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.billing.title))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.billing.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.billing.description))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Notes: ",i.a.createElement("span",{className:"bold"},e.billing.notes))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Amount: ",i.a.createElement("span",{className:"bold"},e.billing.amount))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Paid: ",i.a.createElement("span",{className:"bold"},!0===e.billing.paid?i.a.createElement(y.a,{icon:v.e,className:"listIcon"}):i.a.createElement(y.a,{icon:v.a,className:"listIcon"})),!1===e.billing.paid&&i.a.createElement("span",{onClick:e.updateBillingPaid.bind(Za,e.billing)},"Update?"))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(y.a,{icon:v.m,className:"listIcon",onClick:e.onAddAttachment.bind(Za,{field:"billing",data:e.billing})}))),i.a.createElement(St,{item:e.billing,attachments:e.billing.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"billing"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Za,e.billing)},"Delete"))))))))},en=function(e){var t=Object.assign({},e.filter),a=e.billing,n=[];"billing"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"billing"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"billing"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"billing"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"billing"===t.field&&"amount"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.amount>t.amount?1:-1}))),"billing"===t.field&&"amount"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.amount<t.amount?1:-1}))),"billing"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"billing"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"billing"===t.field&&"notes"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.notes>t.notes?1:-1}))),"billing"===t.field&&"notes"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.notes<t.notes?1:-1}))),"billing"===t.field&&"paid"===t.key&&(n=a.filter((function(e){return e.paid===t.value}))),"billing"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"billing"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement($a,{key:s,billing:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,updateBillingPaid:e.updateBillingPaid,toggleVisitBillingHighlighted:e.toggleVisitBillingHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"visitList"},o)},tn=void 0,an=function(e){var t;t=!1===e.vigilance.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},"#: ",i.a.createElement("span",{className:"bold"},e.count)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitVigilanceHighlighted.bind(tn,e.vigilance)})),!0===e.canUpdate&&i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Edit")))},i.a.createElement(y.a,{icon:v.f,className:"listIcon",onClick:e.startUpdate.bind(tn,{field:"vigilance",data:e.vigilance})})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("h5",null,"chronicIllness:")),i.a.createElement("li",null,i.a.createElement("p",null,"Diabetes")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"High BloodPressure")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Dyslipidemia")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Cad")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.comment))),i.a.createElement("li",null,i.a.createElement("h5",null,"Lifestyle")),i.a.createElement("li",null,i.a.createElement("p",null,"Weight")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Diet")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Smoking")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"SubstanceAbuse")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Exercise")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Allergies")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Asthma")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.comment))),i.a.createElement("li",null,i.a.createElement("h5",null,"Screening :")),i.a.createElement("li",null,i.a.createElement("p",null,"Breast")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Prostate")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Cervix")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Colon")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Dental")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.comment))),i.a.createElement("li",null,i.a.createElement("h5",null,"Vaccines :")),i.a.createElement("li",null,i.a.createElement("p",null,"Influenza")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Varicella")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"HPV")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"MMR")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Tetanus")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Pneumovax")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Other")),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Other: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.name)),i.a.createElement(B.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.medication.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.testing.toString())),i.a.createElement(B.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.comment))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(tn,e.vigilance)},"Delete")))))))},nn=function(e){var t=Object.assign({},e.filter),a=e.vigilance,n=[];"vigilance"===t.field&&"chronicIllness.diabetes.medication"===t.key&&(n=a.filter((function(e){return e.chronicIllness.diabetes.medication===t.value}))),"vigilance"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"vigilance"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(an,{key:s,count:s,vigilance:t,canDelete:e.canDelete,onDelete:e.onDelete,toggleVisitVigilanceHighlighted:e.toggleVisitVigilanceHighlighted,canUpdate:e.canUpdate,startUpdate:e.startUpdate})}));return i.a.createElement("ul",{className:"fileList"},o)},sn=void 0,on=function(e){var t;t=!1===e.image.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},i.a.createElement("img",{src:e.image.path,className:"imgPreview"}),i.a.createElement("a",{href:e.image.path,target:"_blank",rel:"noopener noreferrer"},e.image.name)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitImageHighlighted.bind(sn,e.image)})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(sn,e.image)},"Delete"))))))))},ln=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"image"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(on,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete,toggleVisitImageHighlighted:e.toggleVisitImageHighlighted})}));return i.a.createElement("ul",{className:"imageList"},o)},cn=void 0,rn=function(e){var t;t=!1===e.file.highlighted?"cardBody":"cardBodyHighlighted";var a=Object(n.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(!1),r=Object(h.a)(c,2),m=r[0],d=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(B.a,null,i.a.createElement(B.a.Body,{className:t},i.a.createElement(B.a.Text,{className:"cardText"},i.a.createElement("a",{href:e.file.path,target:"_blank",rel:"noopener noreferrer"},e.file.name)),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(y.a,{icon:v.j,className:"listIcon",onClick:function(){!0===o&&l(!1),!1===o&&l(!0)}})),i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Toggle Highlight")))},i.a.createElement(y.a,{icon:v.k,className:"listIcon",onClick:e.toggleVisitFileHighlighted.bind(cn,e.file)})),!0===o&&i.a.createElement(_.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.file.name))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.file.type))),i.a.createElement("li",null,i.a.createElement(B.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.file.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(w.a,{placement:"top",overlay:i.a.createElement(k.a,{id:"popover-positioned-".concat("top")},i.a.createElement(k.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(y.a,{icon:v.n,className:"listIcon",onClick:function(){!0===m&&d(!1),!1===m&&d(!0)}}))),!0===m&&i.a.createElement("li",null,i.a.createElement(_.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(cn,e.file)},"Delete"))))))))},mn=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"===t.field&&"highlighted"===t.key&&(n=a.filter((function(e){return e.highlighted===t.value}))),"file"!==t.field&&(n=a);var s=0,o=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(rn,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete,toggleVisitFileHighlighted:e.toggleVisitFileHighlighted})}));return i.a.createElement("ul",{className:"fileList"},o)},dn=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"complaint"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"anamnesis")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},pn=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"survey"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},gn=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"systematicInquiry"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},hn=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"diagnosis"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},un=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"vitals"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"pr"),i.a.createElement("option",null,"bp1"),i.a.createElement("option",null,"bp2"),i.a.createElement("option",null,"rr"),i.a.createElement("option",null,"temp"),i.a.createElement("option",null,"sp02"),i.a.createElement("option",null,"heightUnit"),i.a.createElement("option",null,"heightValue"),i.a.createElement("option",null,"weightUnit"),i.a.createElement("option",null,"weightValue"),i.a.createElement("option",null,"bmi"),i.a.createElement("option",null,"urine.type"),i.a.createElement("option",null,"urine.value")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},yn=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"examination"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"general"),i.a.createElement("option",null,"area"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"measure"),i.a.createElement("option",null,"value"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"followUp")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},vn=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"investigation"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},fn=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"treatment"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"dose"),i.a.createElement("option",null,"frequency")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},En=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"billing"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"amount"),i.a.createElement("option",null,"paid"),i.a.createElement("option",null,"notes")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},bn=function(e){var t={title:"....",description:"....",anamnesis:"...."};return e.previousComplaint&&(t={title:e.previousComplaint.title,description:e.previousComplaint.description,anamnesis:e.previousComplaint.anamnesis}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousComplaint&&i.a.createElement("h4",null,"Update Complaint"),!e.previousComplaint&&i.a.createElement("h4",null,"Add Complaint"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"anamnesis",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Anamnesis/History * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.anamnesis}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousComplaint&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousComplaint&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},_n=function(e){var t={title:"....",description:"...."};return e.previousSurvey&&(t={title:e.previousSurvey.title,description:e.previousSurvey.description}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousSurvey&&i.a.createElement("h4",null,"Update Survey"),!e.previousSurvey&&i.a.createElement("h4",null,"Add Survey"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousSurvey&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousSurvey&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},An=function(e){var t={title:"....",description:"...."};return e.previousSystematicInquiry&&(t={title:e.previousSystematicInquiry.title,description:e.previousSystematicInquiry.description}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousSystematicInquiry&&i.a.createElement("h4",null,"Update SystematicInquiry"),!e.previousSystematicInquiry&&i.a.createElement("h4",null,"Add SystematicInquiry"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousSystematicInquiry&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousSystematicInquiry&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Cn=function(e){var t,a={pr:0,bp1:0,bp2:0,rr:0,temp:0,sp02:0,heightUnit:"...",heightValue:0,weightUnit:"...",weightValue:0,urineType:"...",urineValue:"..."};e.previousVitals&&("In"===(a={pr:e.previousVitals.pr,bp1:e.previousVitals.bp1,bp2:e.previousVitals.bp2,rr:e.previousVitals.rr,temp:e.previousVitals.temp,sp02:e.previousVitals.sp02,heightUnit:e.previousVitals.heightUnit,heightValue:e.previousVitals.heightValue,weightUnit:e.previousVitals.weightUnit,weightValue:e.previousVitals.weightValue,urineType:e.previousVitals.urine.type,urineValue:e.previousVitals.urine.value}).heightUnit?t="Lbs":"M"===a.heightUnit&&(t="Kg"));var s=Object(n.useState)(t),o=Object(h.a)(s,2),l=o[0],c=o[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousVitals&&i.a.createElement("h4",null,"Update Vitals"),!e.previousVitals&&i.a.createElement("h4",null,"Add Vitals"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement("div",{className:"formDivider1"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"pr",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Pulse Rate * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:a.pr})),i.a.createElement(J.a.Group,{as:A.a,controlId:"rr",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Respiratory Rate * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:a.rr}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"bp1",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Blood Pressure (top) * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:a.bp1})),i.a.createElement(J.a.Group,{as:A.a,controlId:"bp2",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Blood Pressure (bottom) * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:a.bp2}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"temp",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Temperature * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:a.temp})),i.a.createElement(J.a.Group,{as:A.a,controlId:"sp02",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"SP-02 * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:a.sp02})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"heightUnit",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Height: Unit * "),i.a.createElement(J.a.Control,{as:"select",onChange:function(e){return"M"===(t=e.target.value)&&c("Kg"),void("In"===t&&c("Lbs"));var t}},i.a.createElement("option",null,a.heightUnit),i.a.createElement("option",null,"In"),i.a.createElement("option",null,"M"))),i.a.createElement(J.a.Group,{as:A.a,controlId:"heightValue",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Height: Value * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:a.heightValue}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"weightUnit",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Weight: Unit * "),i.a.createElement(J.a.Control,{type:"text",value:l})),i.a.createElement(J.a.Group,{as:A.a,controlId:"weightValue",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Weight: Value * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:a.weightValue}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"urineType",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Urine: Type"),i.a.createElement(J.a.Control,{type:"text",placeholder:a.urineType})),i.a.createElement(J.a.Group,{as:A.a,controlId:"urineValue",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Urine: Value"),i.a.createElement(J.a.Control,{type:"text",placeholder:a.urineValue})))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousVitals&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousVitals&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Nn=function(e){var t={general:"...",area:"...",inspection:"...",palpation:"...",percussion:"...",auscultation:"...",description:"...",followUp:!1};e.previousExamination&&(t={general:e.previousExamination.general,area:e.previousExamination.area,inspection:e.previousExamination.inspection,palpation:e.previousExamination.palpation,percussion:e.previousExamination.percussion,auscultation:e.previousExamination.auscultation,description:e.previousExamination.description,followUp:e.previousExamination.followUp});var a=Object(n.useState)(t.followUp),s=Object(h.a)(a,2),o=s[0],l=s[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousExamination&&i.a.createElement("h4",null,"Update Examination"),!e.previousExamination&&i.a.createElement("h4",null,"Add Examination"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"general",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"General * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.general}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"area",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Area * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.area}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"inspection",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Inspection * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.inspection}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"palpation",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Palpation * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.palpation}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"percussion",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Percussion * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.percussion}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"auscultation",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Auscultation * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.auscultation}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"followUp",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"FollowUp ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:o,onChange:function(e){var t;t=e.target.checked,l(t)}}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousExamination&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousExamination&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},xn=function(e){var t={title:"...",type:"...",description:"..."};return e.previousInvestigation&&(t={title:e.previousInvestigation.title,type:e.previousInvestigation.type,description:e.previousInvestigation.description}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousInvestigation&&i.a.createElement("h4",null,"Update Investigation"),!e.previousInvestigation&&i.a.createElement("h4",null,"Add Investigation"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.type}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousInvestigation&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousInvestigation&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},In=function(e){var t={title:"...",type:"...",description:"..."};return e.previousDiagnosis&&(t={title:e.previousDiagnosis.title,type:e.previousDiagnosis.type,description:e.previousDiagnosis.description}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousDiagnosis&&i.a.createElement("h4",null,"Update Diagnosis"),!e.previousDiagnosis&&i.a.createElement("h4",null,"Add Diagnosis"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Diagnosis * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.title}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousDiagnosis&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousDiagnosis&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Tn=function(e){var t={title:"...",type:"...",description:"...",dose:"...",frequency:"..."};return e.previousTreatment&&(t={title:e.previousTreatment.title,type:e.previousTreatment.type,description:e.previousTreatment.description,dose:e.previousTreatment.dose,frequency:e.previousTreatment.frequency}),i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousTreatment&&i.a.createElement("h4",null,"Update Treatment"),!e.previousTreatment&&i.a.createElement("h4",null,"Add Treatment"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Treatment * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.title}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"dose",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Dose (medication) * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.dose}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"frequency",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Frequency * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.frequency}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousTreatment&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousTreatment&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Sn=function(e){var t={title:"...",type:"...",description:"...",amount:0,paid:!1,notes:"..."};e.previousBilling&&(t={title:e.previousBilling.title,type:e.previousBilling.type,description:e.previousBilling.description,amount:e.previousBilling.amount,paid:e.previousBilling.paid,notes:e.previousBilling.notes});var a=Object(n.useState)(t.paid),s=Object(h.a)(a,2),o=s[0],l=s[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousBilling&&i.a.createElement("h4",null,"Update Billing"),!e.previousBilling&&i.a.createElement("h4",null,"Add Billing"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:t.type}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.description}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"amount",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Amount * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:t.amount}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"paid",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Paid ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:o,onChange:function(e){var t;t=e.target.checked,l(t)}}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"notes",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Notes"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:t.notes}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){E._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousBilling&&i.a.createElement(I.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Update"),!e.previousBilling&&i.a.createElement(I.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"outline-danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},wn=function(e){var t={chronicIllness:{diabetes:{medication:!1,testing:!1,comment:"..."},hbp:{medication:!1,testing:!1,comment:"..."},dyslipidemia:{medication:!1,testing:!1,comment:"..."},cad:{medication:!1,testing:!1,comment:"..."}},lifestyle:{weight:{medication:!1,testing:!1,comment:"..."},diet:{medication:!1,testing:!1,comment:"..."},smoking:{medication:!1,testing:!1,comment:"..."},substanceAbuse:{medication:!1,testing:!1,comment:"..."},exercise:{medication:!1,testing:!1,comment:"..."},allergies:{medication:!1,testing:!1,comment:"..."},asthma:{medication:!1,testing:!1,comment:"..."}},screening:{breast:{medication:!1,testing:!1,comment:"..."},prostate:{medication:!1,testing:!1,comment:"..."},cervix:{medication:!1,testing:!1,comment:"..."},colon:{medication:!1,testing:!1,comment:"..."},dental:{medication:!1,testing:!1,comment:"..."}},vaccines:{influenza:{medication:!1,testing:!1,comment:"..."},varicella:{medication:!1,testing:!1,comment:"..."},hpv:{medication:!1,testing:!1,comment:"..."},mmr:{medication:!1,testing:!1,comment:"..."},tetanus:{medication:!1,testing:!1,comment:"..."},pneumovax:{medication:!1,testing:!1,comment:"..."},other:{name:"...",medication:!1,testing:!1,comment:"..."}},highlighted:!1};e.previousVigilance&&(t={chronicIllness:{diabetes:{medication:e.previousVigilance.chronicIllness.diabetes.medication,testing:e.previousVigilance.chronicIllness.diabetes.testing,comment:e.previousVigilance.chronicIllness.diabetes.comment},hbp:{medication:e.previousVigilance.chronicIllness.hbp.medication,testing:e.previousVigilance.chronicIllness.hbp.testing,comment:e.previousVigilance.chronicIllness.hbp.comment},dyslipidemia:{medication:e.previousVigilance.chronicIllness.dyslipidemia.medication,testing:e.previousVigilance.chronicIllness.dyslipidemia.testing,comment:e.previousVigilance.chronicIllness.dyslipidemia.comment},cad:{medication:e.previousVigilance.chronicIllness.cad.medication,testing:e.previousVigilance.chronicIllness.cad.testing,comment:e.previousVigilance.chronicIllness.cad.comment}},lifestyle:{weight:{medication:e.previousVigilance.lifestyle.weight.medication,testing:e.previousVigilance.lifestyle.weight.testing,comment:e.previousVigilance.lifestyle.weight.comment},diet:{medication:e.previousVigilance.lifestyle.diet.medication,testing:e.previousVigilance.lifestyle.diet.testing,comment:e.previousVigilance.lifestyle.diet.comment},smoking:{medication:e.previousVigilance.lifestyle.smoking.medication,testing:e.previousVigilance.lifestyle.smoking.testing,comment:e.previousVigilance.lifestyle.smoking.comment},substanceAbuse:{medication:e.previousVigilance.lifestyle.substanceAbuse.medication,testing:e.previousVigilance.lifestyle.substanceAbuse.testing,comment:e.previousVigilance.lifestyle.substanceAbuse.comment},exercise:{medication:e.previousVigilance.lifestyle.exercise.medication,testing:e.previousVigilance.lifestyle.exercise.testing,comment:e.previousVigilance.lifestyle.exercise.comment},allergies:{medication:e.previousVigilance.lifestyle.allergies.medication,testing:e.previousVigilance.lifestyle.allergies.testing,comment:e.previousVigilance.lifestyle.allergies.comment},asthma:{medication:e.previousVigilance.lifestyle.asthma.medication,testing:e.previousVigilance.lifestyle.asthma.testing,comment:e.previousVigilance.lifestyle.asthma.comment}},screening:{breast:{medication:e.previousVigilance.screening.breast.medication,testing:e.previousVigilance.screening.breast.testing,comment:e.previousVigilance.screening.breast.comment},prostate:{medication:e.previousVigilance.screening.prostate.medication,testing:e.previousVigilance.screening.prostate.testing,comment:e.previousVigilance.screening.prostate.comment},cervix:{medication:e.previousVigilance.screening.cervix.medication,testing:e.previousVigilance.screening.cervix.testing,comment:e.previousVigilance.screening.cervix.comment},colon:{medication:e.previousVigilance.screening.colon.medication,testing:e.previousVigilance.screening.colon.testing,comment:e.previousVigilance.screening.colon.comment},dental:{medication:e.previousVigilance.screening.dental.medication,testing:e.previousVigilance.screening.dental.testing,comment:e.previousVigilance.screening.dental.comment}},vaccines:{influenza:{medication:e.previousVigilance.vaccines.influenza.medication,testing:e.previousVigilance.vaccines.influenza.testing,comment:e.previousVigilance.vaccines.influenza.comment},varicella:{medication:e.previousVigilance.vaccines.varicella.medication,testing:e.previousVigilance.vaccines.varicella.testing,comment:e.previousVigilance.vaccines.varicella.comment},hpv:{medication:e.previousVigilance.vaccines.hpv.medication,testing:e.previousVigilance.vaccines.hpv.testing,comment:e.previousVigilance.vaccines.hpv.comment},mmr:{medication:e.previousVigilance.vaccines.mmr.medication,testing:e.previousVigilance.vaccines.mmr.testing,comment:e.previousVigilance.vaccines.mmr.comment},tetanus:{medication:e.previousVigilance.vaccines.tetanus.medication,testing:e.previousVigilance.vaccines.tetanus.testing,comment:e.previousVigilance.vaccines.tetanus.comment},pneumovax:{medication:e.previousVigilance.vaccines.pneumovax.medication,testing:e.previousVigilance.vaccines.pneumovax.testing,comment:e.previousVigilance.vaccines.pneumovax.comment},other:{name:e.previousVigilance.vaccines.other.name,medication:e.previousVigilance.vaccines.other.medication,testing:e.previousVigilance.vaccines.other.testing,comment:e.previousVigilance.vaccines.other.comment}},highlighted:!1});var a=Object(n.useState)(t.chronicIllness.diabetes.medication),s=Object(h.a)(a,2),o=s[0],l=s[1],c=Object(n.useState)(t.chronicIllness.diabetes.testing),r=Object(h.a)(c,2),m=r[0],d=r[1],p=Object(n.useState)(t.chronicIllness.hbp.medication),g=Object(h.a)(p,2),u=g[0],y=g[1],v=Object(n.useState)(t.chronicIllness.hbp.testing),f=Object(h.a)(v,2),E=f[0],b=f[1],_=Object(n.useState)(t.chronicIllness.dyslipidemia.medication),C=Object(h.a)(_,2),N=C[0],x=C[1],T=Object(n.useState)(t.chronicIllness.dyslipidemia.testing),S=Object(h.a)(T,2),w=S[0],k=S[1],U=Object(n.useState)(t.chronicIllness.cad.medication),D=Object(h.a)(U,2),F=D[0],L=D[1],V=Object(n.useState)(t.chronicIllness.cad.testing),P=Object(h.a)(V,2),B=P[0],q=P[1],G=Object(n.useState)(t.lifestyle.weight.medication),O=Object(h.a)(G,2),M=O[0],z=O[1],j=Object(n.useState)(t.lifestyle.weight.testing),R=Object(h.a)(j,2),Y=R[0],H=R[1],K=Object(n.useState)(t.lifestyle.diet.medication),Q=Object(h.a)(K,2),W=Q[0],X=Q[1],Z=Object(n.useState)(t.lifestyle.diet.testing),$=Object(h.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(t.lifestyle.smoking.medication),ne=Object(h.a)(ae,2),ie=ne[0],se=ne[1],oe=Object(n.useState)(t.lifestyle.smoking.testing),le=Object(h.a)(oe,2),ce=le[0],re=le[1],me=Object(n.useState)(t.lifestyle.substanceAbuse.medication),de=Object(h.a)(me,2),pe=de[0],ge=de[1],he=Object(n.useState)(t.lifestyle.substanceAbuse.testing),ue=Object(h.a)(he,2),ye=ue[0],ve=ue[1],fe=Object(n.useState)(t.lifestyle.exercise.medication),Ee=Object(h.a)(fe,2),be=Ee[0],_e=Ee[1],Ae=Object(n.useState)(t.lifestyle.exercise.testing),Ce=Object(h.a)(Ae,2),Ne=Ce[0],xe=Ce[1],Ie=Object(n.useState)(t.lifestyle.allergies.medication),Te=Object(h.a)(Ie,2),Se=Te[0],we=Te[1],ke=Object(n.useState)(t.lifestyle.allergies.testing),Ue=Object(h.a)(ke,2),De=Ue[0],Fe=Ue[1],Le=Object(n.useState)(t.lifestyle.asthma.medication),Ve=Object(h.a)(Le,2),Pe=Ve[0],Be=Ve[1],qe=Object(n.useState)(t.lifestyle.asthma.testing),Ge=Object(h.a)(qe,2),Oe=Ge[0],Me=Ge[1],ze=Object(n.useState)(t.screening.breast.medication),je=Object(h.a)(ze,2),Re=je[0],Ye=je[1],He=Object(n.useState)(t.screening.breast.testing),Ke=Object(h.a)(He,2),Je=Ke[0],Qe=Ke[1],We=Object(n.useState)(t.screening.prostate.medication),Xe=Object(h.a)(We,2),Ze=Xe[0],$e=Xe[1],et=Object(n.useState)(t.screening.prostate.testing),tt=Object(h.a)(et,2),at=tt[0],nt=tt[1],it=Object(n.useState)(t.screening.cervix.medication),st=Object(h.a)(it,2),ot=st[0],lt=st[1],ct=Object(n.useState)(t.screening.cervix.testing),rt=Object(h.a)(ct,2),mt=rt[0],dt=rt[1],pt=Object(n.useState)(t.screening.colon.medication),gt=Object(h.a)(pt,2),ht=gt[0],ut=gt[1],yt=Object(n.useState)(t.screening.colon.testing),vt=Object(h.a)(yt,2),ft=vt[0],Et=vt[1],bt=Object(n.useState)(t.screening.dental.medication),_t=Object(h.a)(bt,2),At=_t[0],Ct=_t[1],Nt=Object(n.useState)(t.screening.dental.testing),xt=Object(h.a)(Nt,2),It=xt[0],Tt=xt[1],St=Object(n.useState)(t.vaccines.influenza.medication),wt=Object(h.a)(St,2),kt=wt[0],Ut=wt[1],Dt=Object(n.useState)(t.vaccines.influenza.testing),Ft=Object(h.a)(Dt,2),Lt=Ft[0],Vt=Ft[1],Pt=Object(n.useState)(t.vaccines.varicella.medication),Bt=Object(h.a)(Pt,2),qt=Bt[0],Gt=Bt[1],Ot=Object(n.useState)(t.vaccines.varicella.testing),Mt=Object(h.a)(Ot,2),zt=Mt[0],jt=Mt[1],Rt=Object(n.useState)(t.vaccines.hpv.medication),Yt=Object(h.a)(Rt,2),Ht=Yt[0],Kt=Yt[1],Jt=Object(n.useState)(t.vaccines.hpv.testing),Qt=Object(h.a)(Jt,2),Wt=Qt[0],Xt=Qt[1],Zt=Object(n.useState)(t.vaccines.mmr.medication),$t=Object(h.a)(Zt,2),ea=$t[0],ta=$t[1],aa=Object(n.useState)(t.vaccines.mmr.testing),na=Object(h.a)(aa,2),ia=na[0],sa=na[1],oa=Object(n.useState)(t.vaccines.tetanus.medication),la=Object(h.a)(oa,2),ca=la[0],ra=la[1],ma=Object(n.useState)(t.vaccines.tetanus.testing),da=Object(h.a)(ma,2),pa=da[0],ga=da[1],ha=Object(n.useState)(t.vaccines.pneumovax.medication),ua=Object(h.a)(ha,2),ya=ua[0],va=ua[1],fa=Object(n.useState)(t.vaccines.pneumovax.testing),Ea=Object(h.a)(fa,2),ba=Ea[0],_a=Ea[1],Aa=Object(n.useState)(t.vaccines.other.medication),Ca=Object(h.a)(Aa,2),Na=Ca[0],xa=Ca[1],Ia=Object(n.useState)(t.vaccines.other.testing),Ta=Object(h.a)(Ia,2),Sa=Ta[0],wa=Ta[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},e.previousVigilance&&i.a.createElement("h3",null,"Update Vigilance"),!e.previousVigilance&&i.a.createElement("h3",null,"Add Vigilance"),i.a.createElement("div",{className:"formDivider1"},i.a.createElement("h4",null,"Chronic Illness:"),i.a.createElement("p",{className:"underlined"},"Diabetes"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessDiabetesMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:o,onChange:function(e){var t;t=e.target.checked,l(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessDiabetesTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:m,onChange:function(e){var t;t=e.target.checked,d(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessDiabetesComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.chronicIllness.diabetes.comment}))),i.a.createElement("p",{className:"underlined"},"HBP"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessHbpMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:u,onChange:function(e){var t;t=e.target.checked,y(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessHbpTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:E,onChange:function(e){var t;t=e.target.checked,b(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessHbpComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.chronicIllness.hbp.comment}))),i.a.createElement("p",{className:"underlined"},"Dyslipidemia"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessDyslipidemiaMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:N,onChange:function(e){var t;t=e.target.checked,x(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessDyslipidemiaTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:w,onChange:function(e){var t;t=e.target.checked,k(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessDyslipidemiaComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.chronicIllness.dyslipidemia.comment}))),i.a.createElement("p",{className:"underlined"},"Cad"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessCadMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:F,onChange:function(e){var t;t=e.target.checked,L(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessCadTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:B,onChange:function(e){var t;t=e.target.checked,q(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceChronicIllnessCadComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.chronicIllness.cad.comment})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement("h4",null,"Lifestyle:"),i.a.createElement("p",{className:"underlined"},"Weight"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleWeightMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:M,onChange:function(e){var t;t=e.target.checked,z(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleWeightTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Y,onChange:function(e){var t;t=e.target.checked,H(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleWeightComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.lifestyle.weight.comment}))),i.a.createElement("p",{className:"underlined"},"Diet"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleDietMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:W,onChange:function(e){var t;t=e.target.checked,X(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleDietTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ee,onChange:function(e){var t;t=e.target.checked,te(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleDietComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.lifestyle.diet.comment}))),i.a.createElement("p",{className:"underlined"},"Smoking"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleSmokingMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ie,onChange:function(e){var t;t=e.target.checked,se(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleSmokingTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ce,onChange:function(e){var t;t=e.target.checked,re(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleSmokingComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.lifestyle.smoking.comment}))),i.a.createElement("p",{className:"underlined"},"SubstanceAbuse"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleSubstanceAbuseMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:pe,onChange:function(e){var t;t=e.target.checked,ge(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleSubstanceAbuseTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ye,onChange:function(e){var t;t=e.target.checked,ve(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleSubstanceAbuseComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.lifestyle.substanceAbuse.comment}))),i.a.createElement("p",{className:"underlined"},"Exercise"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleExerciseMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:be,onChange:function(e){var t;t=e.target.checked,_e(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleExerciseTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Ne,onChange:function(e){var t;t=e.target.checked,xe(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleExerciseComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.lifestyle.exercise.comment}))),i.a.createElement("p",{className:"underlined"},"Allergies"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleAllergiesMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Se,onChange:function(e){var t;t=e.target.checked,we(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleAllergiesTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:De,onChange:function(e){var t;t=e.target.checked,Fe(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleAllergiesComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.lifestyle.allergies.comment}))),i.a.createElement("p",{className:"underlined"},"Asthma"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleAsthmaMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Pe,onChange:function(e){var t;t=e.target.checked,Be(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleAsthmaTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Oe,onChange:function(e){var t;t=e.target.checked,Me(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceLifestyleAsthmaComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.lifestyle.asthma.comment})))),i.a.createElement("div",{className:"formDivider3"},i.a.createElement("h4",null,"Screening:"),i.a.createElement("p",{className:"underlined"},"Breast"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningBreastMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Re,onChange:function(e){var t;t=e.target.checked,Ye(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningBreastTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Je,onChange:function(e){var t;t=e.target.checked,Qe(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningBreastComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.screening.breast.comment}))),i.a.createElement("p",{className:"underlined"},"Prostate"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningProstateMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Ze,onChange:function(e){var t;t=e.target.checked,$e(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningProstateTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:at,onChange:function(e){var t;t=e.target.checked,nt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningProstateComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.screening.prostate.comment}))),i.a.createElement("p",{className:"underlined"},"Cervix"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningCervixMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ot,onChange:function(e){var t;t=e.target.checked,lt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningCervixTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:mt,onChange:function(e){var t;t=e.target.checked,dt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningCervixComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.screening.cervix.comment}))),i.a.createElement("p",{className:"underlined"},"Colon"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningColonMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ht,onChange:function(e){var t;t=e.target.checked,ut(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningColonTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ft,onChange:function(e){var t;t=e.target.checked,Et(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningColonComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.screening.colon.comment}))),i.a.createElement("p",{className:"underlined"},"Dental"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningDentalMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:At,onChange:function(e){var t;t=e.target.checked,Ct(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningDentalTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:It,onChange:function(e){var t;t=e.target.checked,Tt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceScreeningDentalComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.screening.dental.comment})))),i.a.createElement("div",{className:"formDivider1"},i.a.createElement("h4",null,"Vaccines"),i.a.createElement("p",{className:"underlined"},"Influenza"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesInfluenzaMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:kt,onChange:function(e){var t;t=e.target.checked,Ut(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesInfluenzaTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Lt,onChange:function(e){var t;t=e.target.checked,Vt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesInfluenzaComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.vaccines.influenza.comment}))),i.a.createElement("p",{className:"underlined"},"Varicella"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesVaricellaMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:qt,onChange:function(e){var t;t=e.target.checked,Gt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesVaricellaTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:zt,onChange:function(e){var t;t=e.target.checked,jt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesVaricellaComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.vaccines.varicella.comment}))),i.a.createElement("p",{className:"underlined"},"Hpv"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesHpvMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Ht,onChange:function(e){var t;t=e.target.checked,Kt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesHpvTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Wt,onChange:function(e){var t;t=e.target.checked,Xt(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesHpvComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.vaccines.hpv.comment}))),i.a.createElement("p",{className:"underlined"},"Mmr"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesMmrMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ea,onChange:function(e){var t;t=e.target.checked,ta(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesMmrTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ia,onChange:function(e){var t;t=e.target.checked,sa(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesMmrComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.vaccines.mmr.comment}))),i.a.createElement("p",{className:"underlined"},"Tetanus"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesTetanusMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ca,onChange:function(e){var t;t=e.target.checked,ra(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesTetanusTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:pa,onChange:function(e){var t;t=e.target.checked,ga(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesTetanusComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.vaccines.tetanus.comment}))),i.a.createElement("p",{className:"underlined"},"Pneumovax"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesPneumovaxMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ya,onChange:function(e){var t;t=e.target.checked,va(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesPneumovaxTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:ba,onChange:function(e){var t;t=e.target.checked,_a(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesPneumovaxComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.vaccines.pneumovax.comment}))),i.a.createElement("p",{className:"underlined"},"Other"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesOtherName"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.vaccines.other.name})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesOtherMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Na,onChange:function(e){var t;t=e.target.checked,xa(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesOtherTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",checked:Sa,onChange:function(e){var t;t=e.target.checked,wa(t)}})),i.a.createElement(J.a.Group,{as:A.a,controlId:"vigilanceVaccinesOtherComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:t.vaccines.other.comment})))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.previousVigilance&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Update"),!e.previousVigilance&&i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},kn=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={visitPage:!0,activityA:null,role:null,overlay:!1,overlay2:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},startFilter:!1,selectFilter:null,menuSelected:null,menuSelect:"basic",adding:{state:null,field:null},canUpdate:!1,updating:{state:null,field:null,previous:{}},canDelete:!1,canEdit:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:null,selectedVisit:null,selectedAppointment:null,addAttachmentForm:!1,addAttachmentArgs:null,showAddConsultantForm:!1,users:null,calEvent:{},pocketVars:null,s3State:{action:null,target:null,status:null},hasComorbidities:!1,hasAllergies:!1},n.submitAddComplaintForm=function(e){e.preventDefault(),console.log("...adding complaint..."),n.context.setUserAlert("...adding complaint..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=n.props.visit.patient.name+"_complaint_"+D()().format("YYYY-MM-DD, h:mm:ss a"),l=e.target.description.value.replace(/\n/g," "),c=e.target.anamnesis.value.replace(/\n/g," ");if(0===o.trim().length||0===l.trim().length||0===c.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=E._currentValue.file,m=r.name,d="visit/"+s+"/complaint/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+r.type.split("/")[1];var p={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"complaint attachment"}},overlay:!0,s3State:{action:"upload",target:"complaint attachment",status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"complaint attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"complaint attachment",status:"failed"}})}))}var h={query:'\n      mutation {addVisitComplaint(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            complaintTitle:"').concat(o,'",\n            complaintDescription:"').concat(l,'",\n            complaintAnamnesis:"').concat(c,'",\n            complaintAttachment:"').concat(t,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...complaint add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitComplaint),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitComplaint,activityA:"addVisitComplaint?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitComplaint,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteComplaint=function(e){console.log("...deleting complaint..."),n.context.setUserAlert("...deleting complaint..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.description,l=e.anamnesis,c=e.attachments,r={query:'\n      mutation {deleteVisitComplaint(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            complaintTitle:"').concat(s,'",\n            complaintDescription:"').concat(o,'",\n            complaintAnamnesis:"').concat(l,'",\n            complaintAttachments:"').concat(c,'",\n            complaintHighlighted:').concat(e.highlighted,"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...complaint delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitComplaint),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitComplaint,activityA:"deleteVisitComplaint?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitComplaint,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/complaint/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/complaint/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"complaint attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitComplaintHighlighted=function(e){console.log("...toggling visit complaint highlight..."),n.context.setUserAlert("...toggling visit complaint highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.title,l=e.description.replace(/\n/g," "),c=e.anamnesis.replace(/\n/g," "),r=e.highlighted,m=e.attachments.join();t={query:'\n      mutation {toggleVisitComplaintHighlighted(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          complaintTitle:"').concat(o,'",\n          complaintDescription:"').concat(l,'",\n          complaintAnamnesis:"').concat(c,'",\n          complaintHighlighted:').concat(r,',\n          complaintAttachments:"').concat(m,'"\n        })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...complaint highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitComplaintHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitComplaintHighlighted,activityA:"toggleVisitComplaintHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitComplaintHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateComplaintForm=function(e){e.preventDefault(),console.log("updating complaint..."),n.context.setUserAlert("...updating complaint..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={title:n.state.updating.previous.title,description:n.state.updating.previous.description,anamnesis:n.state.updating.previous.anamnesis,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:n.props.visit.patient.name+"_complaint_"+D()().format("YYYY-MM-DD, h:mm:ss a"),description:e.target.description.value,anamnesis:e.target.anamnesis.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.title.trim().length||0===o.description.trim().length||0===o.anamnesis.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitComplaint(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          complaintTitle:"').concat(s.title,'",\n          complaintDescription:"').concat(s.description,'",\n          complaintAnamnesis:"').concat(s.anamnesis,'",\n          complaintAttachments:"').concat(s.attachments,'",\n          complaintHighlighted: ').concat(s.highlighted,'\n        }\n        visitInput2:{\n          complaintTitle:"').concat(o.title,'",\n          complaintDescription:"').concat(o.description,'",\n          complaintAnamnesis:"').concat(o.anamnesis,'",\n          complaintAttachments:"').concat(o.attachments,'",\n          complaintHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...complaint update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitComplaint),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitComplaint,activityA:"updateVisitComplaint?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitComplaint,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddSurveyForm=function(e){e.preventDefault(),console.log("...adding survey..."),n.context.setUserAlert("...adding survey..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=n.props.visit.patient.name+"_survey_"+D()().format("YYYY-MM-DD, h:mm:ss a"),l=e.target.description.value.replace(/\n/g," ");if(0===o.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="visit/"+s+"/survey/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+c.type.split("/")[1];var d={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},p=new me.a(d);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"survey attachment"}},overlay:!0,s3State:{action:"upload",target:"survey attachment",status:"inProgress"}}),p.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"survey attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"survey attachment",status:"failed"}})}))}var g={query:'\n      mutation {addVisitSurvey(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          surveyTitle:"').concat(o,'",\n          surveyDescription:"').concat(l,'",\n          surveyAttachment:"').concat(t,'"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...survey add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitSurvey),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitSurvey,activityA:"addVisitSurvey?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitSurvey,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteSurvey=function(e){console.log("...deleting survey..."),n.context.setUserAlert("...deleting survey..."),n.setState({isLoading:!0,overlay2:!1});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.description,l=e.attachments,c={query:'\n      mutation {deleteVisitSurvey(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          surveyTitle:"').concat(s,'",\n          surveyDescription:"').concat(o,'",\n          surveyAttachments:"').concat(l,'",\n          surveyHighlighted:').concat(e.highlighted,"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...survey delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitSurvey),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitSurvey,activityA:"deleteVisitSurvey?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitSurvey,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/survey/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/survey/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"survey attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitSurveyHighlighted=function(e){console.log("...toggling visit survey highlight..."),n.context.setUserAlert("...toggling visit survey highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.title,l=e.description.replace(/\n/g," "),c=e.highlighted,r=e.attachments.join();t={query:'\n      mutation {toggleVisitSurveyHighlighted(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          surveyTitle:"').concat(o,'",\n          surveyDescription:"').concat(l,'",\n          surveyHighlighted:').concat(c,',\n          surveyAttachments:"').concat(r,'"\n        })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...survey highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitSurveyHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitSurveyHighlighted,activityA:"toggleVisitSurveyHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitSurveyHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateSurveyForm=function(e){e.preventDefault(),console.log("updating survey..."),n.context.setUserAlert("...updating survey..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={title:n.state.updating.previous.title,description:n.state.updating.previous.description,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:n.props.visit.patient.name+"_survey_"+D()().format("YYYY-MM-DD, h:mm:ss a"),description:e.target.description.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.title.trim().length||0===o.description.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitSurvey(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          surveyTitle:"').concat(s.title,'",\n          surveyDescription:"').concat(s.description,'",\n          surveyAttachments:"').concat(s.attachments,'",\n          surveyHighlighted: ').concat(s.highlighted,'\n        }\n        visitInput2:{\n          surveyTitle:"').concat(o.title,'",\n          surveyDescription:"').concat(o.description,'",\n          surveyAttachments:"').concat(o.attachments,'",\n          surveyHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...survey update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitSurvey),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitSurvey,activityA:"updateVisitSurvey?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitSurvey,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddSystematicInquiryForm=function(e){e.preventDefault(),console.log("...adding systematicInquiry..."),n.context.setUserAlert("...adding systematicInquiry..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=n.props.visit.patient.name+"_systematicInquiry_"+D()().format("YYYY-MM-DD, h:mm:ss a"),l=e.target.description.value.replace(/\n/g," ");if(0===o.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="visit/"+s+"/systematicInquiry/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+c.type.split("/")[1];var d={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},p=new me.a(d);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"systematicInquiry attachment"}},overlay:!0,s3State:{action:"upload",target:"systematicInquiry attachment",status:"inProgress"}}),p.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"systematicInquiry attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"systematicInquiry attachment",status:"failed"}})}))}var g={query:'\n      mutation {addVisitSysInquiry(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          systematicInquiryTitle:"').concat(o,'",\n          systematicInquiryDescription:"').concat(l,'",\n          systematicInquiryAttachment:"').concat(t,'"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...systematicInquiry add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitSysInquiry),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitSysInquiry,activityA:"addVisitSysInquiry?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitSysInquiry,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteSystematicInquiry=function(e){console.log("...deleting systematicInquiry..."),n.context.setUserAlert("...deleting systematicInquiry..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.description,l=e.attachments,c={query:'\n      mutation {deleteVisitSysInquiry(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          systematicInquiryTitle:"').concat(s,'",\n          systematicInquiryDescription:"').concat(o,'",\n          systematicInquiryAttachments:"').concat(l,'",\n          systematicInquiryHighlighted:').concat(e.highlighted,"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...sys inquiry delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitSysInquiry),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitSysInquiry,activityA:"deleteVisitSysInquiry?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitSysInquiry,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/systematicInquiry/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/systematicInquiry/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"systematicInquiry attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitSysInquiryHighlighted=function(e){console.log("...toggling visit systematicInquiry highlight..."),n.context.setUserAlert("...toggling visit systematicInquiry highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.title,l=e.description.replace(/\n/g," "),c=e.highlighted,r=e.attachments.join();t={query:'\n      mutation {toggleVisitSysInquiryHighlighted(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          systematicInquiryTitle:"').concat(o,'",\n          systematicInquiryDescription:"').concat(l,'",\n          systematicInquiryHighlighted:').concat(c,',\n          systematicInquiryAttachments:"').concat(r,'"\n        })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...systematicInquiry highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitSysInquiryHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitSysInquiryHighlighted,activityA:"toggleVisitSysInquiryHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitSysInquiryHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateSystematicInquiryForm=function(e){e.preventDefault(),console.log("updating systematicInquiry..."),n.context.setUserAlert("...updating systematicInquiry..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={title:n.state.updating.previous.title,description:n.state.updating.previous.description,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:n.props.visit.patient.name+"_systematicInquiry_"+D()().format("YYYY-MM-DD, h:mm:ss a"),description:e.target.description.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.title.trim().length||0===o.description.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitSysInquiry(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          systematicInquiryTitle:"').concat(s.title,'",\n          systematicInquiryDescription:"').concat(s.description,'",\n          systematicInquiryAttachments:"').concat(s.attachments,'",\n          systematicInquiryHighlighted: ').concat(s.highlighted,'\n        }\n        visitInput2:{\n          systematicInquiryTitle:"').concat(o.title,'",\n          systematicInquiryDescription:"').concat(o.description,'",\n          systematicInquiryAttachments:"').concat(o.attachments,'",\n          systematicInquiryHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...systematicInquiry update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitSysInquiry),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitSysInquiry,activityA:"updateVisitSysInquiry?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitSysInquiry,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddVitalsForm=function(e){e.preventDefault(),console.log("...adding Vitals..."),n.context.setUserAlert("...adding Vitals..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.target.pr.value,o=e.target.bp1.value,l=e.target.bp2.value,c=e.target.rr.value,r=e.target.temp.value,m=e.target.sp02.value,d=e.target.heightUnit.value,p=e.target.heightValue.value,g=e.target.weightUnit.value,h=e.target.weightValue.value,u=0,y=e.target.urineType.value,v=e.target.urineValue.value;if("M"===d&&(u=h/Math.pow(p,2)),"In"===d&&(u=h/Math.pow(p,2)*703),u=u.toFixed(2),console.log("bmi",u),0===s.trim().length||0===o.trim().length||0===l.trim().length||0===c.trim().length||0===r.trim().length||0===m.trim().length||0===d.trim().length||0===p.trim().length||0===g.trim().length||0===h.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var f={query:'\n      mutation {addVisitVitals(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          vitalsPr:').concat(s,",\n          vitalsBp1:").concat(o,",\n          vitalsBp2:").concat(l,",\n          vitalsRr:").concat(c,",\n          vitalsTemp:").concat(r,",\n          vitalsSp02:").concat(m,',\n          vitalsHeightUnit:"').concat(d,'",\n          vitalsHeightValue:').concat(p,',\n          vitalsWeightUnit:"').concat(g,'",\n          vitalsWeightValue:').concat(h,",\n          vitalsBmi:").concat(u,',\n          vitalsUrineType:"').concat(y,'",\n          vitalsUrineValue:"').concat(v,'"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vitals add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.addVisitVitals),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitVitals,activityA:"addVisitVitals?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitVitals,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteVitals=function(e){console.log("...deleting Vitals..."),n.context.setUserAlert("...deleting Vitals..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.pr,o=e.bp1,l=e.bp2,c=e.rr,r=e.temp,m=e.sp02,d=e.heightUnit,p=e.heightValue,g=e.weightUnit,h=e.weightValue,u=e.bmi,y=e.urine.type,v=e.urine.value,f={query:'\n    mutation {deleteVisitVitals(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        vitalsPr:').concat(s,",\n        vitalsBp1:").concat(o,",\n        vitalsBp2:").concat(l,",\n        vitalsRr:").concat(c,",\n        vitalsTemp:").concat(r,",\n        vitalsSp02:").concat(m,',\n        vitalsHeightUnit:"').concat(d,'",\n        vitalsHeightValue:').concat(p,',\n        vitalsWeightUnit:"').concat(g,'",\n        vitalsWeightValue:').concat(h,",\n        vitalsBmi:").concat(u,',\n        vitalsUrineType:"').concat(y,'",\n        vitalsUrineValue:"').concat(v,'",\n        vitalsHighlighted:').concat(e.highlighted,"\n      })\n      {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...vitals delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.deleteVisitVitals),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitVitals,activityA:"deleteVisitVitals?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.deleteVisitVitals,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitVitalsHighlighted=function(e){console.log("...toggling visit vitals highlight..."),n.context.setUserAlert("...toggling visit vitals highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.pr,l=e.bp1,c=e.bp2,r=e.rr,m=e.temp,d=e.sp02,p=e.heightUnit,g=e.heightValue,h=e.weightUnit,u=e.weightValue,y=e.bmi,v=e.urine.type,f=e.urine.value,E=e.highlighted;t={query:'\n      mutation {\n        toggleVisitVitalsHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            vitalsPr: ').concat(o,",\n            vitalsBp1: ").concat(l,",\n            vitalsBp2: ").concat(c,",\n            vitalsRr: ").concat(r,",\n            vitalsTemp: ").concat(m,",\n            vitalsSp02: ").concat(d,',\n            vitalsHeightUnit: "').concat(p,'",\n            vitalsHeightValue: ').concat(g,',\n            vitalsWeightUnit: "').concat(h,'",\n            vitalsWeightValue: ').concat(u,",\n            vitalsBmi: ").concat(y,',\n            vitalsUrineType: "').concat(v,'",\n            vitalsUrineValue: "').concat(f,'",\n            vitalsHighlighted: ').concat(E,",\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...vitals highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitVitalsHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitVitalsHighlighted,activityA:"toggleVisitVitalsHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitVitalsHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateVitalsForm=function(e){e.preventDefault(),console.log("updating vitals..."),n.context.setUserAlert("...updating vitals..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={pr:n.state.updating.previous.pr,bp1:n.state.updating.previous.bp1,bp2:n.state.updating.previous.bp2,rr:n.state.updating.previous.rr,temp:n.state.updating.previous.temp,sp02:n.state.updating.previous.sp02,heightUnit:n.state.updating.previous.heightUnit,heightValue:n.state.updating.previous.heightValue,weightUnit:n.state.updating.previous.weightUnit,weightValue:n.state.updating.previous.weightValue,bmi:n.state.updating.previous.bmi,urineType:n.state.updating.previous.urine.type,urineValue:n.state.updating.previous.urine.value,highlighted:n.state.updating.previous.highlighted},o={pr:e.target.pr.value,bp1:e.target.bp1.value,bp2:e.target.bp2.value,rr:e.target.rr.value,temp:e.target.temp.value,sp02:e.target.sp02.value,heightUnit:e.target.heightUnit.value,heightValue:e.target.heightValue.value,weightUnit:e.target.weightUnit.value,weightValue:e.target.weightValue.value,bmi:0,urineType:e.target.urineType.value,urineValue:e.target.urineValue.value,highlighted:s.highlighted};if("M"===o.heightUnit&&(o.bmi=o.weightValue/Math.pow(o.heightValue,2)),"In"===o.heightUnit&&(o.bmi=o.weightValue/Math.pow(o.heightValue,2)*703),o.bmi=o.bmi.toFixed(2),console.log("bmi",s,o,o.bmi),0===o.pr.trim().length||0===o.bp1.trim().length||0===o.bp2.trim().length||0===o.rr.trim().length||0===o.temp.trim().length||0===o.sp02.trim().length||0===o.heightUnit.trim().length||0===o.heightValue.trim().length||0===o.weightUnit.trim().length||0===o.weightValue.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitVitals(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          vitalsPr:').concat(s.pr,",\n          vitalsBp1:").concat(s.bp1,",\n          vitalsBp2:").concat(s.bp2,",\n          vitalsRr:").concat(s.rr,",\n          vitalsTemp:").concat(s.temp,",\n          vitalsSp02:").concat(s.sp02,',\n          vitalsHeightUnit:"').concat(s.heightUnit,'",\n          vitalsHeightValue:').concat(s.heightValue,',\n          vitalsWeightUnit:"').concat(s.weightUnit,'",\n          vitalsWeightValue:').concat(s.weightValue,",\n          vitalsBmi:").concat(s.bmi,',\n          vitalsUrineType:"').concat(s.urineType,'",\n          vitalsUrineValue:"').concat(s.urineValue,'",\n          vitalsHighlighted: ').concat(s.highlighted,"\n        }\n        visitInput2:{\n          vitalsPr:").concat(o.pr,",\n          vitalsBp1:").concat(o.bp1,",\n          vitalsBp2:").concat(o.bp2,",\n          vitalsRr:").concat(o.rr,",\n          vitalsTemp:").concat(o.temp,",\n          vitalsSp02:").concat(o.sp02,',\n          vitalsHeightUnit:"').concat(o.heightUnit,'",\n          vitalsHeightValue:').concat(o.heightValue,',\n          vitalsWeightUnit:"').concat(o.weightUnit,'",\n          vitalsWeightValue:').concat(o.weightValue,",\n          vitalsBmi:").concat(o.bmi,',\n          vitalsUrineType:"').concat(o.urineType,'",\n          vitalsUrineValue:"').concat(o.urineValue,'",\n          vitalsHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...vitals update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitVitals),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitVitals,activityA:"updateVisitVitals?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitVitals,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddExaminationForm=function(e){e.preventDefault(),console.log("...adding Examination..."),n.context.setUserAlert("...adding Examination..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.general.value,l=e.target.area.value,c=e.target.inspection.value,r=e.target.palpation.value,m=e.target.percussion.value,d=e.target.auscultation.value,p=e.target.description.value.replace(/\n/g," "),g=e.target.followUp.checked;if(0===o.trim().length||0===l.trim().length||0===c.trim().length||0===r.trim().length||0===m.trim().length||0===d.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var h=E._currentValue.file,u=h.name,y="visit/"+s+"/examination/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+y+"/"+u+"."+h.type.split("/")[1];var v={bucketName:"mbjentemrstorage",dirName:y,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},f=new me.a(v);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"examination attachment"}},overlay:!0,s3State:{action:"upload",target:"examination attachment",status:"inProgress"}}),f.uploadFile(h,u).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"examination attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"examination attachment",status:"failed"}})}))}var b={query:'\n      mutation {addVisitExamination(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          examinationGeneral:"').concat(o,'",\n          examinationArea:"').concat(l,'",\n          examinationInspection: "').concat(c,'",\n          examinationPalpation: "').concat(r,'",\n          examinationPercussion: "').concat(m,'",\n          examinationAuscultation: "').concat(d,'",\n          examinationDescription:"').concat(p,'",\n          examinationFollowUp:').concat(g,',\n          examinationAttachment:"').concat(t,'"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Examination add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitExamination),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitExamination,activityA:"addVisitExamination?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitExamination,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteExamination=function(e){console.log("...deleting Examination..."),n.context.setUserAlert("...deleting Examination..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.general,o=e.area,l=e.inspection,c=e.palpation,r=e.percussion,m=e.auscultation,d=e.description,p=e.followUp,g=e.attachments,h={query:'\n      mutation {deleteVisitExamination(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          examinationGeneral:"').concat(s,'",\n          examinationArea:"').concat(o,'",\n          examinationInspection: "').concat(l,'",\n          examinationPalpation: "').concat(c,'",\n          examinationPercussion: "').concat(r,'",\n          examinationAuscultation: "').concat(m,'",\n          examinationDescription:"').concat(d,'",\n          examinationFollowUp:').concat(p,',\n          examinationAttachments:"').concat(g,'",\n          examinationHighlighted:').concat(e.highlighted,"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Examination delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitExamination),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitExamination,activityA:"deleteVisitExamination?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitExamination,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/examination/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/examination/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"examination attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitExaminationHighlighted=function(e){console.log("...toggling visit examination highlight..."),n.context.setUserAlert("...toggling visit examination highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.general,l=e.area,c=e.inspection,r=e.palpation,m=e.percussion,d=e.auscultation,p=e.description.replace(/\n/g," "),g=e.followUp,h=e.attachments.join(),u=e.highlighted;t={query:'\n      mutation {\n        toggleVisitExaminationHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            examinationGeneral:"').concat(o,'",\n            examinationArea:"').concat(l,'",\n            examinationInspection: "').concat(c,'",\n            examinationPalpation: "').concat(r,'",\n            examinationPercussion: "').concat(m,'",\n            examinationAuscultation: "').concat(d,'",\n            examinationDescription:"').concat(p,'",\n            examinationFollowUp:').concat(g,',\n            examinationAttachments:"').concat(h,'"\n            examinationHighlighted: ').concat(u,",\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...examination highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitExaminationHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitExaminationHighlighted,activityA:"toggleVisitExaminationHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitExaminationHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateExaminationForm=function(e){e.preventDefault(),console.log("updating examination..."),n.context.setUserAlert("...updating examination..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={general:n.state.updating.previous.general,area:n.state.updating.previous.area,inspection:n.state.updating.previous.inspection,palpation:n.state.updating.previous.palpation,percussion:n.state.updating.previous.percussion,auscultation:n.state.updating.previous.auscultation,description:n.state.updating.previous.description,followUp:n.state.updating.previous.followUp,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={general:e.target.general.value,area:e.target.area.value,inspection:e.target.inspection.value,palpation:e.target.palpation.value,percussion:e.target.percussion.value,auscultation:e.target.auscultation.value,description:e.target.description.value,followUp:e.target.followUp.checked,attachments:s.attachments,highlighted:s.highlighted};if(0===o.general.trim().length||0===o.area.trim().length||0===o.inspection.trim().length||0===o.palpation.trim().length||0===o.percussion.trim().length||0===o.auscultation.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitExamination(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          examinationGeneral:"').concat(s.general,'",\n          examinationArea:"').concat(s.area,'",\n          examinationInspection: "').concat(s.inspection,'",\n          examinationPalpation: "').concat(s.palpation,'",\n          examinationPercussion: "').concat(s.percussion,'",\n          examinationAuscultation: "').concat(s.auscultation,'",\n          examinationDescription:"').concat(s.description,'",\n          examinationFollowUp:').concat(s.followUp,',\n          examinationAttachments:"').concat(s.attachments,'",\n          examinationHighlighted: ').concat(s.highlighted,'\n        }\n        visitInput2:{\n          examinationGeneral:"').concat(o.general,'",\n          examinationArea:"').concat(o.area,'",\n          examinationInspection: "').concat(o.inspection,'",\n          examinationPalpation: "').concat(o.palpation,'",\n          examinationPercussion: "').concat(o.percussion,'",\n          examinationAuscultation: "').concat(o.auscultation,'",\n          examinationDescription:"').concat(o.description,'",\n          examinationFollowUp:').concat(o.followUp,',\n          examinationAttachments:"').concat(o.attachments,'",\n          examinationHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...examination update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitExamination),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitExamination,activityA:"updateVisitExamination?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitExamination,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddInvestigationForm=function(e){e.preventDefault(),console.log("...adding Investigation..."),n.context.setUserAlert("...adding Investigation..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=n.props.visit.patient.name+"_investigation_"+D()().format("YYYY-MM-DD, h:mm:ss a"),l=e.target.type.value,c=e.target.description.value.replace(/\n/g," ");if(0===l.trim().length||0===c.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=E._currentValue.file,m=r.name,d="visit/"+s+"/investigation/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+r.type.split("/")[1];var p={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"investigation attachment"}},overlay:!0,s3State:{action:"upload",target:"investigation attachment",status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"investigation attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"investigation attachment",status:"failed"}})}))}var h={query:'\n      mutation {addVisitInvestigation(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          investigationTitle:"').concat(o,'",\n          investigationType:"').concat(l,'",\n          investigationDescription:"').concat(c,'",\n          investigationAttachment:"').concat(t,'"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Investigation add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitInvestigation),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitInvestigation,activityA:"addVisitInvestigation?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitInvestigation,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteInvestigation=function(e){console.log("...deleting Investigation..."),n.context.setUserAlert("...deleting Investigation..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.type,l=e.description,c=e.attachments,r={query:'\n      mutation {deleteVisitInvestigation(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          investigationTitle:"').concat(s,'",\n          investigationType:"').concat(o,'",\n          investigationDescription:"').concat(l,'",\n          investigationAttachments:"').concat(c,'",\n          investigationHighlighted:').concat(e.highlighted,"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Investigation delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitInvestigation),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitInvestigation,activityA:"deleteVisitInvestigation?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitInvestigation,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/investigation/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/investigation/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"investigation attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitInvestigationHighlighted=function(e){console.log("...toggling visit investigation highlight..."),n.context.setUserAlert("...toggling visit investigation highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.title,l=e.type,c=e.description.replace(/\n/g," "),r=e.attachments.join(),m=e.highlighted;t={query:'\n      mutation {\n        toggleVisitInvestigationHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            investigationTitle:"').concat(o,'",\n            investigationType:"').concat(l,'",\n            investigationDescription:"').concat(c,'",\n            investigationAttachments:"').concat(r,'"\n            investigationHighlighted: ').concat(m,",\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...investigation highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitInvestigationHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitInvestigationHighlighted,activityA:"toggleVisitInvestigationHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitInvestigationHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateInvestigationForm=function(e){e.preventDefault(),console.log("updating investigation..."),n.context.setUserAlert("...updating investigation..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={title:n.state.updating.previous.title,type:n.state.updating.previous.type,description:n.state.updating.previous.description,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:n.props.visit.patient.name+"_investigation_"+D()().format("YYYY-MM-DD, h:mm:ss a"),type:e.target.type.value,description:e.target.description.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.title.trim().length||0===o.type.trim().length||0===o.description.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitInvestigation(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          investigationTitle:"').concat(s.title,'",\n          investigationType:"').concat(s.type,'",\n          investigationDescription:"').concat(s.description,'",\n          investigationAttachments:"').concat(s.attachments,'",\n          investigationHighlighted: ').concat(s.highlighted,'\n        }\n        visitInput2:{\n          investigationTitle:"').concat(o.title,'",\n          investigationType:"').concat(o.type,'",\n          investigationDescription:"').concat(o.description,'",\n          investigationAttachments:"').concat(o.attachments,'",\n          investigationHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...investigation update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitInvestigation),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitInvestigation,activityA:"updateVisitInvestigation?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitInvestigation,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddDiagnosisForm=function(e){e.preventDefault(),console.log("...adding Diagnosis..."),n.context.setUserAlert("...adding Diagnosis..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.description.value.replace(/\n/g," ");if(0===o.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="visit/"+s+"/diagnosis/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+c.type.split("/")[1];var d={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},p=new me.a(d);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"diagnosis attachment"}},overlay:!0,s3State:{action:"upload",target:"diagnosis attachment",status:"inProgress"}}),p.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"diagnosis attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"diagnosis attachment",status:"failed"}})}))}var g={query:'\n      mutation {addVisitDiagnosis(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          diagnosisTitle:"').concat(o,'",\n          diagnosisType:"').concat("",'",\n          diagnosisDescription:"').concat(l,'",\n          diagnosisAttachment:"').concat(t,'"\n        })\n       {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Diagnosis add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitDiagnosis),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitDiagnosis,activityA:"addVisitDiagnosis?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitDiagnosis,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteDiagnosis=function(e){console.log("...deleting Diagnosis..."),n.context.setUserAlert("...deleting Diagnosis..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.type,l=e.description,c=e.attachments,r={query:'\n      mutation {deleteVisitDiagnosis(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          diagnosisTitle:"').concat(s,'",\n          diagnosisType:"').concat(o,'",\n          diagnosisDescription:"').concat(l,'",\n          diagnosisAttachments:"').concat(c,'",\n          diagnosisHighlighted: ').concat(e.highlighted,"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Diagnosis delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitDiagnosis),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitDiagnosis,activityA:"deleteVisitDiagnosis?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitDiagnosis,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/diagnosis/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/diagnosis/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"diagnosis attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitDiagnosisHighlighted=function(e){console.log("...toggling visit diagnosis highlight..."),n.context.setUserAlert("...toggling visit diagnosis highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.title,l=e.type,c=e.description.replace(/\n/g," "),r=e.attachments.join(),m=e.highlighted;t={query:'\n      mutation {\n        toggleVisitDiagnosisHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            diagnosisTitle:"').concat(o,'",\n            diagnosisType:"').concat(l,'",\n            diagnosisDescription:"').concat(c,'",\n            diagnosisAttachments:"').concat(r,'"\n            diagnosisHighlighted: ').concat(m,",\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...diagnosis highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitDiagnosisHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitDiagnosisHighlighted,activityA:"toggleVisitDiagnosisHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitDiagnosisHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateDiagnosisForm=function(e){e.preventDefault(),console.log("updating diagnosis..."),n.context.setUserAlert("...updating diagnosis..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={title:n.state.updating.previous.title,type:n.state.updating.previous.type,description:n.state.updating.previous.description,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:e.target.title.value,type:"",description:e.target.description.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.title.trim().length||0===o.description.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitDiagnosis(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          diagnosisTitle:"').concat(s.title,'",\n          diagnosisType:"').concat(s.type,'",\n          diagnosisDescription:"').concat(s.description,'",\n          diagnosisAttachments:"').concat(s.attachments,'",\n          diagnosisHighlighted: ').concat(s.highlighted,'\n        }\n        visitInput2:{\n          diagnosisTitle:"').concat(o.title,'",\n          diagnosisType:"').concat(o.type,'",\n          diagnosisDescription:"').concat(o.description,'",\n          diagnosisAttachments:"').concat(o.attachments,'",\n          diagnosisHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...diagnosis update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitDiagnosis),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitDiagnosis,activityA:"updateVisitDiagnosis?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitDiagnosis,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddTreatmentForm=function(e){e.preventDefault(),console.log("...adding Treatment..."),n.context.setUserAlert("...adding Treatment..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.target.title.value,l=e.target.description.value.replace(/\n/g," "),c=e.target.dose.value,r=e.target.frequency.value;if(0===o.trim().length||0===l.trim().length||0===c.trim().length||0===r.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var m=E._currentValue.file,d=m.name,p="visit/"+s+"/treatment/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+p+"/"+d+"."+m.type.split("/")[1];var g={bucketName:"mbjentemrstorage",dirName:p,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},h=new me.a(g);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"treatment attachment"}},overlay:!0,s3State:{action:"upload",target:"treatment attachment",status:"inProgress"}}),h.uploadFile(m,d).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"treatment attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"treatment attachment",status:"failed"}})}))}var u={query:'\n        mutation {addVisitTreatment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            treatmentType:"').concat("",'",\n            treatmentTitle:"').concat(o,'",\n            treatmentDescription:"').concat(l,'",\n            treatmentDose:"').concat(c,'",\n            treatmentFrequency:"').concat(r,'",\n            treatmentAttachment:"').concat(t,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Treatment add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitTreatment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitTreatment,activityA:"addVisitTreatment?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitTreatment,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteTreatment=function(e){console.log("...deleting Treatment..."),n.context.setUserAlert("...deleting Treatment..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.type,l=e.description,c=e.dose,r=e.frequency,m=e.attachments,d={query:'\n        mutation {deleteVisitTreatment(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            treatmentType:"').concat(o,'",\n            treatmentTitle:"').concat(s,'",\n            treatmentDescription:"').concat(l,'",\n            treatmentDose:"').concat(c,'",\n            treatmentFrequency:"').concat(r,'",\n            treatmentAttachments:"').concat(m,'",\n            treatmentHighlighted: ').concat(e.highlighted,"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Treatment delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitTreatment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitTreatment,activityA:"deleteVisitTreatment?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitTreatment,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/treatment/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/treatment/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"treatment attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitTreatmentHighlighted=function(e){console.log("...toggling visit treatment highlight..."),n.context.setUserAlert("...toggling visit treatment highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.title,l=e.type,c=e.description.replace(/\n/g," "),r=e.dose,m=e.frequency,d=e.attachments.join(),p=e.highlighted;t={query:'\n      mutation {\n        toggleVisitTreatmentHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            treatmentType:"').concat(l,'",\n            treatmentTitle:"').concat(o,'",\n            treatmentDescription:"').concat(c,'",\n            treatmentDose:"').concat(r,'",\n            treatmentFrequency:"').concat(m,'",\n            treatmentAttachments:"').concat(d,'"\n            treatmentHighlighted: ').concat(p,",\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...treatment highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitTreatmentHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitTreatmentHighlighted,activityA:"toggleVisitTreatmentHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitTreatmentHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateTreatmentForm=function(e){e.preventDefault(),console.log("updating treatment..."),n.context.setUserAlert("...updating treatment..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={title:n.state.updating.previous.title,type:n.state.updating.previous.type,description:n.state.updating.previous.description,dose:n.state.updating.previous.dose,frequency:n.state.updating.previous.frequency,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:e.target.title.value,type:"",description:e.target.description.value,dose:e.target.dose.value,frequency:e.target.frequency.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.title.trim().length||0===o.description.trim().length||0===o.dose.trim().length||0===o.frequency.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitTreatment(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          treatmentTitle:"').concat(s.title,'",\n          treatmentType:"').concat(s.type,'",\n          treatmentDescription:"').concat(s.description,'",\n          treatmentDose:"').concat(s.dose,'",\n          treatmentFrequency:"').concat(s.frequency,'",\n          treatmentAttachments:"').concat(s.attachments,'",\n          treatmentHighlighted: ').concat(s.highlighted,'\n        }\n        visitInput2:{\n          treatmentTitle:"').concat(o.title,'",\n          treatmentType:"').concat(o.type,'",\n          treatmentDescription:"').concat(o.description,'",\n          treatmentDose:"').concat(o.dose,'",\n          treatmentFrequency:"').concat(o.frequecy,'",\n          treatmentAttachments:"').concat(o.attachments,'",\n          treatmentHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...treatment update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitTreatment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitTreatment,activityA:"updateVisitTreatment?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitTreatment,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddBillingForm=function(e){e.preventDefault(),console.log("...adding Billing...",e.target.amount.value.trim().length),n.context.setUserAlert("...adding Billing..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=n.props.visit.patient.name+"_billing_"+D()().format("YYYY-MM-DD, h:mm:ss a"),l=e.target.type.value,c=e.target.description.value.replace(/\n/g," "),r=e.target.amount.value,m=e.target.paid.checked,d=e.target.notes.value.replace(/\n/g," ");if(0===o.trim().length||0===c.trim().length||parseFloat(r)<=0)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var p=E._currentValue.file,g=p.name,h="visit/"+s+"/billing/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+h+"/"+g+"."+p.type.split("/")[1];var u={bucketName:"mbjentemrstorage",dirName:h,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},y=new me.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"billing attachment"}},overlay:!0,s3State:{action:"upload",target:"billing attachment",status:"inProgress"}}),y.uploadFile(p,g).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"billing attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"billing attachment",status:"failed"}})}))}var v={query:'\n        mutation {addVisitBilling(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            billingTitle:"').concat(o,'",\n            billingType:"').concat(l,'",\n            billingDescription:"').concat(c,'",\n            billingAmount:').concat(r,",\n            billingPaid:").concat(m,',\n            billingAttachment:"').concat(t,'",\n            billingNotes:"').concat(d,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(v),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Billing add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitBilling),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitBilling,activityA:"addVisitBilling?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitBilling,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.updateBillingPaid=function(e){console.log("...updating billing paid..."),n.context.setUserAlert("...updating billing paid..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={query:'\n    mutation {updateVisitBillingPaid(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        billingTitle:"').concat(e.title,'",\n        billingType:"').concat(e.type,'",\n        billingDescription:"').concat(e.description,'",\n        billingAmount:').concat(e.amount,",\n        billingPaid:").concat(e.paid,',\n        billingNotes:"').concat(e.notes,'"\n      })\n       {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...billing update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitBillingPaid),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitBillingPaid,activityA:"updateVisitBillingPaid?activityId:".concat(a,",visitId:").concat(i)}),n.context.selectedVisit=e.data.updateVisitBillingPaid,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteBilling=function(e){console.log("...deleting Billing...",e),n.context.setUserAlert("...deleting Billing..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,o=e.type,l=e.description,c=e.amount,r=e.paid,m=e.notes,d=e.attachments,p={query:'\n        mutation {deleteVisitBilling(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            billingTitle:"').concat(s,'",\n            billingType:"').concat(o,'",\n            billingDescription:"').concat(l,'",\n            billingAmount:').concat(c,",\n            billingPaid:").concat(r,',\n            billingAttachments:"').concat(d,'",\n            billingNotes:"').concat(m,'",\n            billingHighlighted:').concat(e.highlighted,"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Billing delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitBilling),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitBilling,activityA:"deleteVisitBilling?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitBilling,n.logUserActivity({activityId:a,token:t});var l=e.attachments,c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/billing/attachments/",r={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/billing/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"billing attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<l.length;d++){var p=l[d];console.log("multifile deletion...",d);var g=p.replace(c,"");m.deleteFile(g,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitBillingHighlighted=function(e){console.log("...toggling visit billing highlight..."),n.context.setUserAlert("...toggling visit billing highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.title,l=e.type,c=e.description.replace(/\n/g," "),r=e.amount,m=e.paid,d=e.notes,p=e.attachments.join(),g=e.highlighted;t={query:'\n      mutation {\n        toggleVisitBillingHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            billingTitle:"').concat(o,'",\n            billingType:"').concat(l,'",\n            billingDescription:"').concat(c,'",\n            billingAmount:').concat(r,",\n            billingPaid:").concat(m,',\n            billingAttachments:"').concat(p,'",\n            billingNotes:"').concat(d,'"\n            billingHighlighted: ').concat(g,",\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...billing highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitBillingHighlighted),n.setState({isLoading:!1,overlay2:!0,selectedVisit:e.data.toggleVisitBillingHighlighted,activityA:"toggleVisitBillingHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitBillingHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateBillingForm=function(e){e.preventDefault(),console.log("updating billing..."),n.context.setUserAlert("...updating billing..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={title:n.state.updating.previous.title,type:n.state.updating.previous.type,description:n.state.updating.previous.description,amount:n.state.updating.previous.amount,paid:n.state.updating.previous.paid,notes:n.state.updating.previous.notes,attachments:n.state.updating.previous.attachments,highlighted:n.state.updating.previous.highlighted},o={title:n.props.visit.patient.name+"_billing_"+D()().format("YYYY-MM-DD, h:mm:ss a"),type:e.target.type.value,description:e.target.description.value,amount:e.target.amount.value,paid:e.target.paid.checked,notes:e.target.notes.value,attachments:s.attachments,highlighted:s.highlighted};if(0===o.title.trim().length||0===o.description.trim().length||parseFloat(o.amount)<=0)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitBilling(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          billingTitle:"').concat(s.title,'",\n          billingType:"').concat(s.type,'",\n          billingDescription:"').concat(s.description,'",\n          billingAmount:').concat(s.amount,",\n          billingPaid:").concat(s.paid,',\n          billingNotes:"').concat(s.notes,'",\n          billingAttachments:"').concat(s.attachments,'",\n          billingHighlighted: ').concat(s.highlighted,'\n        }\n        visitInput2:{\n          billingTitle:"').concat(o.title,'",\n          billingType:"').concat(o.type,'",\n          billingDescription:"').concat(o.description,'",\n          billingAmount:').concat(o.amount,",\n          billingPaid:").concat(o.paid,',\n          billingNotes:"').concat(o.notes,'",\n          billingAttachments:"').concat(o.attachments,'",\n          billingHighlighted: ').concat(o.highlighted,"\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...billing update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitBilling),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitBilling,activityA:"updateVisitBilling?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitBilling,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding Image..."),n.context.setUserAlert("...adding Image..."),n.setState({isLoading:!0,overlay2:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.visit._id;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="visit/"+l+"/images";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),g.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var h={query:'\n        mutation {addVisitImage(\n          activityId:"'.concat(o,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            imageName:"').concat(t,'",\n            imageType:"').concat(a,'",\n            imagePath:"').concat(i,'"\n          })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Image add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitImage),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitImage,activityA:"addVisitImage?activityId:".concat(o,",visitId:").concat(l),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitImage,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteImage=function(e){console.log("...deleting Image...",e),n.context.setUserAlert("...deleting Image..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.name,o=e.type,l=e.path,c={query:'\n    mutation {deleteVisitImage(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        imageName:"').concat(s,'",\n        imageType:"').concat(o,'",\n        imagePath:"').concat(l,'",\n        imageHighlighted:').concat(e.highlighted,"\n      })\n     {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...Image delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitImage),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitImage,activityA:"deleteVisitImage?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitImage,n.logUserActivity({activityId:a,token:t});var l="visit/"+i+"/images",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitImageHighlighted=function(e){console.log("...toggling visit image highlight..."),n.context.setUserAlert("...toggling visit image highlight..."),n.setState({isLoading:!0,overlay2:!1});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.name,l=e.type,c=e.path,r=e.highlighted;t={query:'\n      mutation {\n        toggleVisitImageHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            imageName:"').concat(o,'",\n            imageType:"').concat(l,'",\n            imagePath:"').concat(c,'"\n            imageHighlighted: ').concat(r,",\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitImageHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitImageHighlighted,activityA:"toggleVisitImageHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitImageHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding File..."),n.context.setUserAlert("...adding File..."),n.setState({isLoading:!0,overlay2:!0});var t,a,i,s=n.context.token,o=n.context.activityId,l=n.props.visit._id;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var c=E._currentValue.file,r=c.name,m="visit/"+l+"/files";console.log("...file present...");var d=c.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+r+"."+d,t=r+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),g.uploadFile(c,r).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var h={query:'\n        mutation {addVisitFile(\n          activityId:"'.concat(o,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            fileName:"').concat(t,'",\n            fileType:"').concat(a,'",\n            filePath:"').concat(i,'"\n          })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...File add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitFile),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitFile,activityA:"addVisitFile?activityId:".concat(o,",visitId:").concat(l),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitFile,n.logUserActivity({activityId:o,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteFile=function(e){console.log("...deleting File...",e),n.context.setUserAlert("...deleting File..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.name,o=e.type,l=e.path,c={query:'\n    mutation {deleteVisitFile(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        fileName:"').concat(s,'",\n        fileType:"').concat(o,'",\n        filePath:"').concat(l,'",\n        fileHighlighted:').concat(e.highlighted,"\n      })\n     {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var o="...File delete success!...";s.errors&&(o=s.errors[0].message),s.data.error&&(o=s.data.error),n.context.setUserAlert(o),n.props.updateVisit(s.data.deleteVisitFile),n.setState({isLoading:!1,overlay2:!1,selectedVisit:s.data.deleteVisitFile,activityA:"deleteVisitFile?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitFile,n.logUserActivity({activityId:a,token:t});var l="visit/"+i+"/files",c=e.name,r={bucketName:"mbjentemrstorage",dirName:l,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new me.a(r);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(c,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitFileHighlighted=function(e){console.log("...toggling visit file highlight..."),n.context.setUserAlert("...toggling visit file highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.name,l=e.type,c=e.path,r=e.highlighted;t={query:'\n      mutation {\n        toggleVisitFileHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            fileName:"').concat(o,'",\n            fileType:"').concat(l,'",\n            filePath:"').concat(c,'"\n            fileHighlighted: ').concat(r,",\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitFileHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitFileHighlighted,activityA:"toggleVisitFileHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitFileHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddVigilanceForm=function(e){e.preventDefault(),console.log("...adding Vigilance..."),n.context.setUserAlert("...adding Vigilance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={query:'\n    mutation {addVisitVigilance(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        vigilanceChronicIllnessDiabetesMedication:').concat(e.target.vigilanceChronicIllnessDiabetesMedication.checked,",\n        vigilanceChronicIllnessDiabetesTesting:").concat(e.target.vigilanceChronicIllnessDiabetesTesting.checked,',\n        vigilanceChronicIllnessDiabetesComment:"').concat(e.target.vigilanceChronicIllnessDiabetesComment.value,'",\n        vigilanceChronicIllnessHbpMedication:').concat(e.target.vigilanceChronicIllnessHbpMedication.checked,",\n        vigilanceChronicIllnessHbpTesting:").concat(e.target.vigilanceChronicIllnessHbpTesting.checked,',\n        vigilanceChronicIllnessHbpComment:"').concat(e.target.vigilanceChronicIllnessHbpComment.value,'",\n        vigilanceChronicIllnessDyslipidemiaMedication:').concat(e.target.vigilanceChronicIllnessDyslipidemiaMedication.checked,",\n        vigilanceChronicIllnessDyslipidemiaTesting:").concat(e.target.vigilanceChronicIllnessDyslipidemiaTesting.checked,',\n        vigilanceChronicIllnessDyslipidemiaComment:"').concat(e.target.vigilanceChronicIllnessDyslipidemiaComment.value,'",\n        vigilanceChronicIllnessCadMedication:').concat(e.target.vigilanceChronicIllnessCadMedication.checked,",\n        vigilanceChronicIllnessCadTesting:").concat(e.target.vigilanceChronicIllnessCadTesting.checked,',\n        vigilanceChronicIllnessCadComment:"').concat(e.target.vigilanceChronicIllnessCadComment.value,'",\n        vigilanceLifestyleWeightMedication:').concat(e.target.vigilanceLifestyleWeightMedication.checked,",\n        vigilanceLifestyleWeightTesting:").concat(e.target.vigilanceLifestyleWeightTesting.checked,',\n        vigilanceLifestyleWeightComment:"').concat(e.target.vigilanceLifestyleWeightComment.value,'",\n        vigilanceLifestyleDietMedication:').concat(e.target.vigilanceLifestyleDietMedication.checked,",\n        vigilanceLifestyleDietTesting:").concat(e.target.vigilanceLifestyleDietTesting.checked,',\n        vigilanceLifestyleDietComment:"').concat(e.target.vigilanceLifestyleDietComment.value,'",\n        vigilanceLifestyleSmokingMedication:').concat(e.target.vigilanceLifestyleSmokingMedication.checked,",\n        vigilanceLifestyleSmokingTesting:").concat(e.target.vigilanceLifestyleSmokingTesting.checked,',\n        vigilanceLifestyleSmokingComment:"').concat(e.target.vigilanceLifestyleSmokingComment.value,'",\n        vigilanceLifestyleSubstanceAbuseMedication:').concat(e.target.vigilanceLifestyleSubstanceAbuseMedication.checked,",\n        vigilanceLifestyleSubstanceAbuseTesting:").concat(e.target.vigilanceLifestyleSubstanceAbuseTesting.checked,',\n        vigilanceLifestyleSubstanceAbuseComment:"').concat(e.target.vigilanceLifestyleSubstanceAbuseComment.value,'",\n        vigilanceLifestyleExerciseMedication:').concat(e.target.vigilanceLifestyleExerciseMedication.checked,",\n        vigilanceLifestyleExerciseTesting:").concat(e.target.vigilanceLifestyleExerciseTesting.checked,',\n        vigilanceLifestyleExerciseComment:"').concat(e.target.vigilanceLifestyleExerciseComment.value,'",\n        vigilanceLifestyleAllergiesMedication:').concat(e.target.vigilanceLifestyleAllergiesMedication.checked,",\n        vigilanceLifestyleAllergiesTesting:").concat(e.target.vigilanceLifestyleAllergiesTesting.checked,',\n        vigilanceLifestyleAllergiesComment:"').concat(e.target.vigilanceLifestyleAllergiesComment.value,'",\n        vigilanceLifestyleAsthmaMedication:').concat(e.target.vigilanceLifestyleAsthmaMedication.checked,",\n        vigilanceLifestyleAsthmaTesting:").concat(e.target.vigilanceLifestyleAsthmaTesting.checked,',\n        vigilanceLifestyleAsthmaComment:"').concat(e.target.vigilanceLifestyleAsthmaComment.value,'",\n        vigilanceScreeningBreastMedication:').concat(e.target.vigilanceScreeningBreastMedication.checked,",\n        vigilanceScreeningBreastTesting:").concat(e.target.vigilanceScreeningBreastTesting.checked,',\n        vigilanceScreeningBreastComment:"').concat(e.target.vigilanceScreeningBreastComment.value,'",\n        vigilanceScreeningProstateMedication:').concat(e.target.vigilanceScreeningProstateMedication.checked,",\n        vigilanceScreeningProstateTesting:").concat(e.target.vigilanceScreeningProstateTesting.checked,',\n        vigilanceScreeningProstateComment:"').concat(e.target.vigilanceScreeningProstateComment.value,'",\n        vigilanceScreeningCervixMedication:').concat(e.target.vigilanceScreeningCervixMedication.checked,",\n        vigilanceScreeningCervixTesting:").concat(e.target.vigilanceScreeningCervixTesting.checked,',\n        vigilanceScreeningCervixComment:"').concat(e.target.vigilanceScreeningCervixComment.value,'",\n        vigilanceScreeningColonMedication:').concat(e.target.vigilanceScreeningColonMedication.checked,",\n        vigilanceScreeningColonTesting:").concat(e.target.vigilanceScreeningColonTesting.checked,',\n        vigilanceScreeningColonComment:"').concat(e.target.vigilanceScreeningColonComment.value,'",\n        vigilanceScreeningDentalMedication:').concat(e.target.vigilanceScreeningDentalMedication.checked,",\n        vigilanceScreeningDentalTesting:").concat(e.target.vigilanceScreeningDentalTesting.checked,',\n        vigilanceScreeningDentalComment:"').concat(e.target.vigilanceScreeningDentalComment.value,'",\n        vigilanceVaccinesInfluenzaMedication:').concat(e.target.vigilanceVaccinesInfluenzaMedication.checked,",\n        vigilanceVaccinesInfluenzaTesting:").concat(e.target.vigilanceVaccinesInfluenzaTesting.checked,',\n        vigilanceVaccinesInfluenzaComment:"').concat(e.target.vigilanceVaccinesInfluenzaComment.value,'",\n        vigilanceVaccinesVaricellaMedication:').concat(e.target.vigilanceVaccinesVaricellaMedication.checked,",\n        vigilanceVaccinesVaricellaTesting:").concat(e.target.vigilanceVaccinesVaricellaTesting.checked,',\n        vigilanceVaccinesVaricellaComment:"').concat(e.target.vigilanceVaccinesVaricellaComment.value,'",\n        vigilanceVaccinesHpvMedication:').concat(e.target.vigilanceVaccinesHpvMedication.checked,",\n        vigilanceVaccinesHpvTesting:").concat(e.target.vigilanceVaccinesHpvTesting.checked,',\n        vigilanceVaccinesHpvComment:"').concat(e.target.vigilanceVaccinesHpvComment.value,'",\n        vigilanceVaccinesMmrMedication:').concat(e.target.vigilanceVaccinesMmrMedication.checked,",\n        vigilanceVaccinesMmrTesting:").concat(e.target.vigilanceVaccinesMmrTesting.checked,',\n        vigilanceVaccinesMmrComment:"').concat(e.target.vigilanceVaccinesMmrComment.value,'",\n        vigilanceVaccinesTetanusMedication:').concat(e.target.vigilanceVaccinesTetanusMedication.checked,",\n        vigilanceVaccinesTetanusTesting:").concat(e.target.vigilanceVaccinesTetanusTesting.checked,',\n        vigilanceVaccinesTetanusComment:"').concat(e.target.vigilanceVaccinesTetanusComment.value,'",\n        vigilanceVaccinesPneumovaxMedication:').concat(e.target.vigilanceVaccinesPneumovaxMedication.checked,",\n        vigilanceVaccinesPneumovaxTesting:").concat(e.target.vigilanceVaccinesPneumovaxTesting.checked,',\n        vigilanceVaccinesPneumovaxComment:"').concat(e.target.vigilanceVaccinesPneumovaxComment.value,'",\n        vigilanceVaccinesOtherName:"').concat(e.target.vigilanceVaccinesOtherName.value,'",\n        vigilanceVaccinesOtherMedication:').concat(e.target.vigilanceVaccinesOtherMedication.checked,",\n        vigilanceVaccinesOtherTesting:").concat(e.target.vigilanceVaccinesOtherTesting.checked,',\n        vigilanceVaccinesOtherComment:"').concat(e.target.vigilanceVaccinesOtherComment.value,'"\n      })\n     {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vigilance add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.addVisitVigilance),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitVigilance,activityA:"addVisitVigilance?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitVigilance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteVigilance=function(e){console.log("...deleting Vigilance..."),n.context.setUserAlert("...deleting Vigilance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={query:'\n        mutation {deleteVisitVigilance(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            vigilanceChronicIllnessDiabetesMedication:').concat(e.chronicIllness.diabetes.medication,",\n            vigilanceChronicIllnessDiabetesTesting:").concat(e.chronicIllness.diabetes.testing,',\n            vigilanceChronicIllnessDiabetesComment:"').concat(e.chronicIllness.diabetes.comment,'",\n            vigilanceChronicIllnessHbpMedication:').concat(e.chronicIllness.hbp.medication,",\n            vigilanceChronicIllnessHbpTesting:").concat(e.chronicIllness.hbp.testing,',\n            vigilanceChronicIllnessHbpComment:"').concat(e.chronicIllness.hbp.comment,'",\n            vigilanceChronicIllnessDyslipidemiaMedication:').concat(e.chronicIllness.dyslipidemia.medication,",\n            vigilanceChronicIllnessDyslipidemiaTesting:").concat(e.chronicIllness.dyslipidemia.testing,',\n            vigilanceChronicIllnessDyslipidemiaComment:"').concat(e.chronicIllness.dyslipidemia.comment,'",\n            vigilanceChronicIllnessCadMedication:').concat(e.chronicIllness.cad.medication,",\n            vigilanceChronicIllnessCadTesting:").concat(e.chronicIllness.cad.testing,',\n            vigilanceChronicIllnessCadComment:"').concat(e.chronicIllness.cad.comment,'",\n            vigilanceLifestyleWeightMedication:').concat(e.lifestyle.weight.medication,",\n            vigilanceLifestyleWeightTesting:").concat(e.lifestyle.weight.testing,',\n            vigilanceLifestyleWeightComment:"').concat(e.lifestyle.weight.comment,'",\n            vigilanceLifestyleDietMedication:').concat(e.lifestyle.diet.medication,",\n            vigilanceLifestyleDietTesting:").concat(e.lifestyle.diet.testing,',\n            vigilanceLifestyleDietComment:"').concat(e.lifestyle.diet.comment,'",\n            vigilanceLifestyleSmokingMedication:').concat(e.lifestyle.smoking.medication,",\n            vigilanceLifestyleSmokingTesting:").concat(e.lifestyle.smoking.testing,',\n            vigilanceLifestyleSmokingComment:"').concat(e.lifestyle.smoking.comment,'",\n            vigilanceLifestyleSubstanceAbuseMedication:').concat(e.lifestyle.substanceAbuse.medication,",\n            vigilanceLifestyleSubstanceAbuseTesting:").concat(e.lifestyle.substanceAbuse.testing,',\n            vigilanceLifestyleSubstanceAbuseComment:"').concat(e.lifestyle.substanceAbuse.comment,'",\n            vigilanceLifestyleExerciseMedication:').concat(e.lifestyle.exercise.medication,",\n            vigilanceLifestyleExerciseTesting:").concat(e.lifestyle.exercise.testing,',\n            vigilanceLifestyleExerciseComment:"').concat(e.lifestyle.exercise.comment,'",\n            vigilanceLifestyleAllergiesMedication:').concat(e.lifestyle.allergies.medication,",\n            vigilanceLifestyleAllergiesTesting:").concat(e.lifestyle.allergies.testing,',\n            vigilanceLifestyleAllergiesComment:"').concat(e.lifestyle.allergies.comment,'",\n            vigilanceLifestyleAsthmaMedication:').concat(e.lifestyle.asthma.medication,",\n            vigilanceLifestyleAsthmaTesting:").concat(e.lifestyle.asthma.testing,',\n            vigilanceLifestyleAsthmaComment:"').concat(e.lifestyle.asthma.comment,'",\n            vigilanceScreeningBreastMedication:').concat(e.screening.breast.medication,",\n            vigilanceScreeningBreastTesting:").concat(e.screening.breast.testing,',\n            vigilanceScreeningBreastComment:"').concat(e.screening.breast.comment,'",\n            vigilanceScreeningProstateMedication:').concat(e.screening.prostate.medication,",\n            vigilanceScreeningProstateTesting:").concat(e.screening.prostate.testing,',\n            vigilanceScreeningProstateComment:"').concat(e.screening.prostate.comment,'",\n            vigilanceScreeningCervixMedication:').concat(e.screening.cervix.medication,",\n            vigilanceScreeningCervixTesting:").concat(e.screening.cervix.testing,',\n            vigilanceScreeningCervixComment:"').concat(e.screening.cervix.comment,'",\n            vigilanceScreeningColonMedication:').concat(e.screening.colon.medication,",\n            vigilanceScreeningColonTesting:").concat(e.screening.colon.testing,',\n            vigilanceScreeningColonComment:"').concat(e.screening.colon.comment,'",\n            vigilanceScreeningDentalMedication:').concat(e.screening.dental.medication,",\n            vigilanceScreeningDentalTesting:").concat(e.screening.dental.testing,',\n            vigilanceScreeningDentalComment:"').concat(e.screening.dental.comment,'",\n            vigilanceVaccinesInfluenzaMedication:').concat(e.vaccines.influenza.medication,",\n            vigilanceVaccinesInfluenzaTesting:").concat(e.vaccines.influenza.testing,',\n            vigilanceVaccinesInfluenzaComment:"').concat(e.vaccines.influenza.comment,'",\n            vigilanceVaccinesVaricellaMedication:').concat(e.vaccines.varicella.medication,",\n            vigilanceVaccinesVaricellaTesting:").concat(e.vaccines.varicella.testing,',\n            vigilanceVaccinesVaricellaComment:"').concat(e.vaccines.varicella.comment,'",\n            vigilanceVaccinesHpvMedication:').concat(e.vaccines.hpv.medication,",\n            vigilanceVaccinesHpvTesting:").concat(e.vaccines.hpv.testing,',\n            vigilanceVaccinesHpvComment:"').concat(e.vaccines.hpv.comment,'",\n            vigilanceVaccinesMmrMedication:').concat(e.vaccines.mmr.medication,",\n            vigilanceVaccinesMmrTesting:").concat(e.vaccines.mmr.testing,',\n            vigilanceVaccinesMmrComment:"').concat(e.vaccines.mmr.comment,'",\n            vigilanceVaccinesTetanusMedication:').concat(e.vaccines.tetanus.medication,",\n            vigilanceVaccinesTetanusTesting:").concat(e.vaccines.tetanus.testing,',\n            vigilanceVaccinesTetanusComment:"').concat(e.vaccines.tetanus.comment,'",\n            vigilanceVaccinesPneumovaxMedication:').concat(e.vaccines.pneumovax.medication,",\n            vigilanceVaccinesPneumovaxTesting:").concat(e.vaccines.pneumovax.testing,',\n            vigilanceVaccinesPneumovaxComment:"').concat(e.vaccines.pneumovax.comment,'",\n            vigilanceVaccinesOtherName:"').concat(e.vaccines.other.name,'",\n            vigilanceVaccinesOtherMedication:').concat(e.vaccines.other.medication,",\n            vigilanceVaccinesOtherTesting:").concat(e.vaccines.other.testing,',\n            vigilanceVaccinesOtherComment:"').concat(e.vaccines.other.comment,'",\n            vigilanceHighlighted:').concat(e.highlighted,"\n          })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vigilance delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.deleteVisitVigilance),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitVigilance,activityA:"deleteVisitFile?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.deleteVisitVigilance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.toggleVisitVigilanceHighlighted=function(e){console.log("...toggling visit vigilance highlight..."),n.context.setUserAlert("...toggling visit vigilance highlight..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id;t={query:'\n      mutation {\n        toggleVisitVigilanceHighlighted(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            vigilanceChronicIllnessDiabetesMedication:').concat(e.chronicIllness.diabetes.medication,",\n            vigilanceChronicIllnessDiabetesTesting:").concat(e.chronicIllness.diabetes.testing,',\n            vigilanceChronicIllnessDiabetesComment:"').concat(e.chronicIllness.diabetes.comment,'",\n            vigilanceChronicIllnessHbpMedication:').concat(e.chronicIllness.hbp.medication,",\n            vigilanceChronicIllnessHbpTesting:").concat(e.chronicIllness.hbp.testing,',\n            vigilanceChronicIllnessHbpComment:"').concat(e.chronicIllness.hbp.comment,'",\n            vigilanceChronicIllnessDyslipidemiaMedication:').concat(e.chronicIllness.dyslipidemia.medication,",\n            vigilanceChronicIllnessDyslipidemiaTesting:").concat(e.chronicIllness.dyslipidemia.testing,',\n            vigilanceChronicIllnessDyslipidemiaComment:"').concat(e.chronicIllness.dyslipidemia.comment,'",\n            vigilanceChronicIllnessCadMedication:').concat(e.chronicIllness.cad.medication,",\n            vigilanceChronicIllnessCadTesting:").concat(e.chronicIllness.cad.testing,',\n            vigilanceChronicIllnessCadComment:"').concat(e.chronicIllness.cad.comment,'",\n            vigilanceLifestyleWeightMedication:').concat(e.lifestyle.weight.medication,",\n            vigilanceLifestyleWeightTesting:").concat(e.lifestyle.weight.testing,',\n            vigilanceLifestyleWeightComment:"').concat(e.lifestyle.weight.comment,'",\n            vigilanceLifestyleDietMedication:').concat(e.lifestyle.diet.medication,",\n            vigilanceLifestyleDietTesting:").concat(e.lifestyle.diet.testing,',\n            vigilanceLifestyleDietComment:"').concat(e.lifestyle.diet.comment,'",\n            vigilanceLifestyleSmokingMedication:').concat(e.lifestyle.smoking.medication,",\n            vigilanceLifestyleSmokingTesting:").concat(e.lifestyle.smoking.testing,',\n            vigilanceLifestyleSmokingComment:"').concat(e.lifestyle.smoking.comment,'",\n            vigilanceLifestyleSubstanceAbuseMedication:').concat(e.lifestyle.substanceAbuse.medication,",\n            vigilanceLifestyleSubstanceAbuseTesting:").concat(e.lifestyle.substanceAbuse.testing,',\n            vigilanceLifestyleSubstanceAbuseComment:"').concat(e.lifestyle.substanceAbuse.comment,'",\n            vigilanceLifestyleExerciseMedication:').concat(e.lifestyle.exercise.medication,",\n            vigilanceLifestyleExerciseTesting:").concat(e.lifestyle.exercise.testing,',\n            vigilanceLifestyleExerciseComment:"').concat(e.lifestyle.exercise.comment,'",\n            vigilanceLifestyleAllergiesMedication:').concat(e.lifestyle.allergies.medication,",\n            vigilanceLifestyleAllergiesTesting:").concat(e.lifestyle.allergies.testing,',\n            vigilanceLifestyleAllergiesComment:"').concat(e.lifestyle.allergies.comment,'",\n            vigilanceLifestyleAsthmaMedication:').concat(e.lifestyle.asthma.medication,",\n            vigilanceLifestyleAsthmaTesting:").concat(e.lifestyle.asthma.testing,',\n            vigilanceLifestyleAsthmaComment:"').concat(e.lifestyle.asthma.comment,'",\n            vigilanceScreeningBreastMedication:').concat(e.screening.breast.medication,",\n            vigilanceScreeningBreastTesting:").concat(e.screening.breast.testing,',\n            vigilanceScreeningBreastComment:"').concat(e.screening.breast.comment,'",\n            vigilanceScreeningProstateMedication:').concat(e.screening.prostate.medication,",\n            vigilanceScreeningProstateTesting:").concat(e.screening.prostate.testing,',\n            vigilanceScreeningProstateComment:"').concat(e.screening.prostate.comment,'",\n            vigilanceScreeningCervixMedication:').concat(e.screening.cervix.medication,",\n            vigilanceScreeningCervixTesting:").concat(e.screening.cervix.testing,',\n            vigilanceScreeningCervixComment:"').concat(e.screening.cervix.comment,'",\n            vigilanceScreeningColonMedication:').concat(e.screening.colon.medication,",\n            vigilanceScreeningColonTesting:").concat(e.screening.colon.testing,',\n            vigilanceScreeningColonComment:"').concat(e.screening.colon.comment,'",\n            vigilanceScreeningDentalMedication:').concat(e.screening.dental.medication,",\n            vigilanceScreeningDentalTesting:").concat(e.screening.dental.testing,',\n            vigilanceScreeningDentalComment:"').concat(e.screening.dental.comment,'",\n            vigilanceVaccinesInfluenzaMedication:').concat(e.vaccines.influenza.medication,",\n            vigilanceVaccinesInfluenzaTesting:").concat(e.vaccines.influenza.testing,',\n            vigilanceVaccinesInfluenzaComment:"').concat(e.vaccines.influenza.comment,'",\n            vigilanceVaccinesVaricellaMedication:').concat(e.vaccines.varicella.medication,",\n            vigilanceVaccinesVaricellaTesting:").concat(e.vaccines.varicella.testing,',\n            vigilanceVaccinesVaricellaComment:"').concat(e.vaccines.varicella.comment,'",\n            vigilanceVaccinesHpvMedication:').concat(e.vaccines.hpv.medication,",\n            vigilanceVaccinesHpvTesting:").concat(e.vaccines.hpv.testing,',\n            vigilanceVaccinesHpvComment:"').concat(e.vaccines.hpv.comment,'",\n            vigilanceVaccinesMmrMedication:').concat(e.vaccines.mmr.medication,",\n            vigilanceVaccinesMmrTesting:").concat(e.vaccines.mmr.testing,',\n            vigilanceVaccinesMmrComment:"').concat(e.vaccines.mmr.comment,'",\n            vigilanceVaccinesTetanusMedication:').concat(e.vaccines.tetanus.medication,",\n            vigilanceVaccinesTetanusTesting:").concat(e.vaccines.tetanus.testing,',\n            vigilanceVaccinesTetanusComment:"').concat(e.vaccines.tetanus.comment,'",\n            vigilanceVaccinesPneumovaxMedication:').concat(e.vaccines.pneumovax.medication,",\n            vigilanceVaccinesPneumovaxTesting:").concat(e.vaccines.pneumovax.testing,',\n            vigilanceVaccinesPneumovaxComment:"').concat(e.vaccines.pneumovax.comment,'",\n            vigilanceVaccinesOtherName:"').concat(e.vaccines.other.name,'",\n            vigilanceVaccinesOtherMedication:').concat(e.vaccines.other.medication,",\n            vigilanceVaccinesOtherTesting:").concat(e.vaccines.other.testing,',\n            vigilanceVaccinesOtherComment:"').concat(e.vaccines.other.comment,'",\n            vigilanceHighlighted: ').concat(e.highlighted,"\n          })\n          {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")},fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...vigilance highlight toggled!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.toggleVisitVigilanceHighlighted),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.toggleVisitVigilanceHighlighted,activityA:"toggleVisitVigilanceHighlighted?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.toggleVisitVigilanceHighlighted,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateVigilanceForm=function(e){e.preventDefault(),console.log("updating vigilance..."),n.context.setUserAlert("...updating vigilance..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={chronicIllness:{diabetes:{medication:n.state.updating.previous.chronicIllness.diabetes.medication,testing:n.state.updating.previous.chronicIllness.diabetes.testing,comment:n.state.updating.previous.chronicIllness.diabetes.comment},hbp:{medication:n.state.updating.previous.chronicIllness.hbp.medication,testing:n.state.updating.previous.chronicIllness.hbp.testing,comment:n.state.updating.previous.chronicIllness.hbp.comment},dyslipidemia:{medication:n.state.updating.previous.chronicIllness.dyslipidemia.medication,testing:n.state.updating.previous.chronicIllness.dyslipidemia.testing,comment:n.state.updating.previous.chronicIllness.dyslipidemia.comment},cad:{medication:n.state.updating.previous.chronicIllness.cad.medication,testing:n.state.updating.previous.chronicIllness.cad.testing,comment:n.state.updating.previous.chronicIllness.cad.comment}},lifestyle:{weight:{medication:n.state.updating.previous.lifestyle.weight.medication,testing:n.state.updating.previous.lifestyle.weight.testing,comment:n.state.updating.previous.lifestyle.weight.comment},diet:{medication:n.state.updating.previous.lifestyle.diet.medication,testing:n.state.updating.previous.lifestyle.diet.testing,comment:n.state.updating.previous.lifestyle.diet.comment},smoking:{medication:n.state.updating.previous.lifestyle.smoking.medication,testing:n.state.updating.previous.lifestyle.smoking.testing,comment:n.state.updating.previous.lifestyle.smoking.comment},substanceAbuse:{medication:n.state.updating.previous.lifestyle.substanceAbuse.medication,testing:n.state.updating.previous.lifestyle.substanceAbuse.testing,comment:n.state.updating.previous.lifestyle.substanceAbuse.comment},exercise:{medication:n.state.updating.previous.lifestyle.exercise.medication,testing:n.state.updating.previous.lifestyle.exercise.testing,comment:n.state.updating.previous.lifestyle.exercise.comment},allergies:{medication:n.state.updating.previous.lifestyle.allergies.medication,testing:n.state.updating.previous.lifestyle.allergies.testing,comment:n.state.updating.previous.lifestyle.allergies.comment},asthma:{medication:n.state.updating.previous.lifestyle.asthma.medication,testing:n.state.updating.previous.lifestyle.asthma.testing,comment:n.state.updating.previous.lifestyle.asthma.comment}},screening:{breast:{medication:n.state.updating.previous.screening.breast.medication,testing:n.state.updating.previous.screening.breast.testing,comment:n.state.updating.previous.screening.breast.comment},prostate:{medication:n.state.updating.previous.screening.prostate.medication,testing:n.state.updating.previous.screening.prostate.testing,comment:n.state.updating.previous.screening.prostate.comment},cervix:{medication:n.state.updating.previous.screening.cervix.medication,testing:n.state.updating.previous.screening.cervix.testing,comment:n.state.updating.previous.screening.cervix.comment},colon:{medication:n.state.updating.previous.screening.colon.medication,testing:n.state.updating.previous.screening.colon.testing,comment:n.state.updating.previous.screening.colon.comment},dental:{medication:n.state.updating.previous.screening.dental.medication,testing:n.state.updating.previous.screening.dental.testing,comment:n.state.updating.previous.screening.dental.comment}},vaccines:{influenza:{medication:n.state.updating.previous.vaccines.influenza.medication,testing:n.state.updating.previous.vaccines.influenza.testing,comment:n.state.updating.previous.vaccines.influenza.comment},varicella:{medication:n.state.updating.previous.vaccines.varicella.medication,testing:n.state.updating.previous.vaccines.varicella.testing,comment:n.state.updating.previous.vaccines.varicella.comment},hpv:{medication:n.state.updating.previous.vaccines.hpv.medication,testing:n.state.updating.previous.vaccines.hpv.testing,comment:n.state.updating.previous.vaccines.hpv.comment},mmr:{medication:n.state.updating.previous.vaccines.mmr.medication,testing:n.state.updating.previous.vaccines.mmr.testing,comment:n.state.updating.previous.vaccines.mmr.comment},tetanus:{medication:n.state.updating.previous.vaccines.tetanus.medication,testing:n.state.updating.previous.vaccines.tetanus.testing,comment:n.state.updating.previous.vaccines.tetanus.comment},pneumovax:{medication:n.state.updating.previous.vaccines.pneumovax.medication,testing:n.state.updating.previous.vaccines.pneumovax.testing,comment:n.state.updating.previous.vaccines.pneumovax.comment},other:{name:n.state.updating.previous.vaccines.other.name,medication:n.state.updating.previous.vaccines.other.medication,testing:n.state.updating.previous.vaccines.other.testing,comment:n.state.updating.previous.vaccines.other.comment}},highlighted:n.state.updating.previous.highlighted},o={chronicIllness:{diabetes:{medication:e.target.vigilanceChronicIllnessDiabetesMedication.checked,testing:e.target.vigilanceChronicIllnessDiabetesTesting.checked,comment:e.target.vigilanceChronicIllnessDiabetesComment.value},hbp:{medication:e.target.vigilanceChronicIllnessHbpMedication.checked,testing:e.target.vigilanceChronicIllnessHbpTesting.checked,comment:e.target.vigilanceChronicIllnessHbpComment.value},dyslipidemia:{medication:e.target.vigilanceChronicIllnessDyslipidemiaMedication.checked,testing:e.target.vigilanceChronicIllnessDyslipidemiaTesting.checked,comment:e.target.vigilanceChronicIllnessDyslipidemiaComment.value},cad:{medication:e.target.vigilanceChronicIllnessCadMedication.checked,testing:e.target.vigilanceChronicIllnessCadTesting.checked,comment:e.target.vigilanceChronicIllnessCadComment.value}},lifestyle:{weight:{medication:e.target.vigilanceLifestyleWeightMedication.checked,testing:e.target.vigilanceLifestyleWeightTesting.checked,comment:e.target.vigilanceLifestyleWeightComment.value},diet:{medication:e.target.vigilanceLifestyleDietMedication.checked,testing:e.target.vigilanceLifestyleDietTesting.checked,comment:e.target.vigilanceLifestyleDietComment.value},smoking:{medication:e.target.vigilanceLifestyleSmokingMedication.checked,testing:e.target.vigilanceLifestyleSmokingTesting.checked,comment:e.target.vigilanceLifestyleSmokingComment.value},substanceAbuse:{medication:e.target.vigilanceLifestyleSubstanceAbuseMedication.checked,testing:e.target.vigilanceLifestyleSubstanceAbuseTesting.checked,comment:e.target.vigilanceLifestyleSubstanceAbuseComment.value},exercise:{medication:e.target.vigilanceLifestyleExerciseMedication.checked,testing:e.target.vigilanceLifestyleExerciseTesting.checked,comment:e.target.vigilanceLifestyleExerciseComment.value},allergies:{medication:e.target.vigilanceLifestyleAllergiesMedication.checked,testing:e.target.vigilanceLifestyleAllergiesTesting.checked,comment:e.target.vigilanceLifestyleAllergiesComment.value},asthma:{medication:e.target.vigilanceLifestyleAsthmaMedication.checked,testing:e.target.vigilanceLifestyleAsthmaTesting.checked,comment:e.target.vigilanceLifestyleAsthmaComment.value}},screening:{breast:{medication:e.target.vigilanceScreeningBreastMedication.checked,testing:e.target.vigilanceScreeningBreastTesting.checked,comment:e.target.vigilanceScreeningBreastComment.value},prostate:{medication:e.target.vigilanceScreeningProstateMedication.checked,testing:e.target.vigilanceScreeningProstateTesting.checked,comment:e.target.vigilanceScreeningProstateComment.value},cervix:{medication:e.target.vigilanceScreeningCervixMedication.checked,testing:e.target.vigilanceScreeningCervixTesting.checked,comment:e.target.vigilanceScreeningCervixComment.value},colon:{medication:e.target.vigilanceScreeningColonMedication.checked,testing:e.target.vigilanceScreeningColonTesting.checked,comment:e.target.vigilanceScreeningColonComment.value},dental:{medication:e.target.vigilanceScreeningDentalMedication.checked,testing:e.target.vigilanceScreeningDentalTesting.checked,comment:e.target.vigilanceScreeningDentalComment.value}},vaccines:{influenza:{medication:e.target.vigilanceVaccinesInfluenzaMedication.checked,testing:e.target.vigilanceVaccinesInfluenzaTesting.checked,comment:e.target.vigilanceVaccinesInfluenzaComment.value},varicella:{medication:e.target.vigilanceVaccinesVaricellaMedication.checked,testing:e.target.vigilanceVaccinesVaricellaTesting.checked,comment:e.target.vigilanceVaccinesVaricellaComment.value},hpv:{medication:e.target.vigilanceVaccinesHpvMedication.checked,testing:e.target.vigilanceVaccinesHpvTesting.checked,comment:e.target.vigilanceVaccinesHpvComment.value},mmr:{medication:e.target.vigilanceVaccinesMmrMedication.checked,testing:e.target.vigilanceVaccinesMmrTesting.checked,comment:e.target.vigilanceVaccinesMmrComment.value},tetanus:{medication:e.target.vigilanceVaccinesTetanusMedication.checked,testing:e.target.vigilanceVaccinesTetanusTesting.checked,comment:e.target.vigilanceVaccinesTetanusComment.value},pneumovax:{medication:e.target.vigilanceVaccinesPneumovaxMedication.checked,testing:e.target.vigilanceVaccinesPneumovaxTesting.checked,comment:e.target.vigilanceVaccinesPneumovaxComment.value},other:{name:e.target.vigilanceVaccinesOtherName.value,medication:e.target.vigilanceVaccinesOtherMedication.checked,testing:e.target.vigilanceVaccinesOtherTesting.checked,comment:e.target.vigilanceVaccinesOtherComment.value}},highlighted:s.highlighted};console.log("1",s),console.log("2",o);var l={query:'\n      mutation {updateVisitVigilance(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          vigilanceChronicIllnessDiabetesMedication:').concat(s.chronicIllness.diabetes.medication,",\n          vigilanceChronicIllnessDiabetesTesting:").concat(s.chronicIllness.diabetes.testing,',\n          vigilanceChronicIllnessDiabetesComment:"').concat(s.chronicIllness.diabetes.comment,'",\n          vigilanceChronicIllnessHbpMedication:').concat(s.chronicIllness.hbp.medication,",\n          vigilanceChronicIllnessHbpTesting:").concat(s.chronicIllness.hbp.testing,',\n          vigilanceChronicIllnessHbpComment:"').concat(s.chronicIllness.hbp.comment,'",\n          vigilanceChronicIllnessDyslipidemiaMedication:').concat(s.chronicIllness.dyslipidemia.medication,",\n          vigilanceChronicIllnessDyslipidemiaTesting:").concat(s.chronicIllness.dyslipidemia.testing,',\n          vigilanceChronicIllnessDyslipidemiaComment:"').concat(s.chronicIllness.dyslipidemia.comment,'",\n          vigilanceChronicIllnessCadMedication:').concat(s.chronicIllness.cad.medication,",\n          vigilanceChronicIllnessCadTesting:").concat(s.chronicIllness.cad.testing,',\n          vigilanceChronicIllnessCadComment:"').concat(s.chronicIllness.cad.comment,'",\n          vigilanceLifestyleWeightMedication:').concat(s.lifestyle.weight.medication,",\n          vigilanceLifestyleWeightTesting:").concat(s.lifestyle.weight.testing,',\n          vigilanceLifestyleWeightComment:"').concat(s.lifestyle.weight.comment,'",\n          vigilanceLifestyleDietMedication:').concat(s.lifestyle.diet.medication,",\n          vigilanceLifestyleDietTesting:").concat(s.lifestyle.diet.testing,',\n          vigilanceLifestyleDietComment:"').concat(s.lifestyle.diet.comment,'",\n          vigilanceLifestyleSmokingMedication:').concat(s.lifestyle.smoking.medication,",\n          vigilanceLifestyleSmokingTesting:").concat(s.lifestyle.smoking.testing,',\n          vigilanceLifestyleSmokingComment:"').concat(s.lifestyle.smoking.comment,'",\n          vigilanceLifestyleSubstanceAbuseMedication:').concat(s.lifestyle.substanceAbuse.medication,",\n          vigilanceLifestyleSubstanceAbuseTesting:").concat(s.lifestyle.substanceAbuse.testing,',\n          vigilanceLifestyleSubstanceAbuseComment:"').concat(s.lifestyle.substanceAbuse.comment,'",\n          vigilanceLifestyleExerciseMedication:').concat(s.lifestyle.exercise.medication,",\n          vigilanceLifestyleExerciseTesting:").concat(s.lifestyle.exercise.testing,',\n          vigilanceLifestyleExerciseComment:"').concat(s.lifestyle.exercise.comment,'",\n          vigilanceLifestyleAllergiesMedication:').concat(s.lifestyle.allergies.medication,",\n          vigilanceLifestyleAllergiesTesting:").concat(s.lifestyle.allergies.testing,',\n          vigilanceLifestyleAllergiesComment:"').concat(s.lifestyle.allergies.comment,'",\n          vigilanceLifestyleAsthmaMedication:').concat(s.lifestyle.asthma.medication,",\n          vigilanceLifestyleAsthmaTesting:").concat(s.lifestyle.asthma.testing,',\n          vigilanceLifestyleAsthmaComment:"').concat(s.lifestyle.asthma.comment,'",\n          vigilanceScreeningBreastMedication:').concat(s.screening.breast.medication,",\n          vigilanceScreeningBreastTesting:").concat(s.screening.breast.testing,',\n          vigilanceScreeningBreastComment:"').concat(s.screening.breast.comment,'",\n          vigilanceScreeningProstateMedication:').concat(s.screening.prostate.medication,",\n          vigilanceScreeningProstateTesting:").concat(s.screening.prostate.testing,',\n          vigilanceScreeningProstateComment:"').concat(s.screening.prostate.comment,'",\n          vigilanceScreeningCervixMedication:').concat(s.screening.cervix.medication,",\n          vigilanceScreeningCervixTesting:").concat(s.screening.cervix.testing,',\n          vigilanceScreeningCervixComment:"').concat(s.screening.cervix.comment,'",\n          vigilanceScreeningColonMedication:').concat(s.screening.colon.medication,",\n          vigilanceScreeningColonTesting:").concat(s.screening.colon.testing,',\n          vigilanceScreeningColonComment:"').concat(s.screening.colon.comment,'",\n          vigilanceScreeningDentalMedication:').concat(s.screening.dental.medication,",\n          vigilanceScreeningDentalTesting:").concat(s.screening.dental.testing,',\n          vigilanceScreeningDentalComment:"').concat(s.screening.dental.comment,'",\n          vigilanceVaccinesInfluenzaMedication:').concat(s.vaccines.influenza.medication,",\n          vigilanceVaccinesInfluenzaTesting:").concat(s.vaccines.influenza.testing,',\n          vigilanceVaccinesInfluenzaComment:"').concat(s.vaccines.influenza.comment,'",\n          vigilanceVaccinesVaricellaMedication:').concat(s.vaccines.varicella.medication,",\n          vigilanceVaccinesVaricellaTesting:").concat(s.vaccines.varicella.testing,',\n          vigilanceVaccinesVaricellaComment:"').concat(s.vaccines.varicella.comment,'",\n          vigilanceVaccinesHpvMedication:').concat(s.vaccines.hpv.medication,",\n          vigilanceVaccinesHpvTesting:").concat(s.vaccines.hpv.testing,',\n          vigilanceVaccinesHpvComment:"').concat(s.vaccines.hpv.comment,'",\n          vigilanceVaccinesMmrMedication:').concat(s.vaccines.mmr.medication,",\n          vigilanceVaccinesMmrTesting:").concat(s.vaccines.mmr.testing,',\n          vigilanceVaccinesMmrComment:"').concat(s.vaccines.mmr.comment,'",\n          vigilanceVaccinesTetanusMedication:').concat(s.vaccines.tetanus.medication,",\n          vigilanceVaccinesTetanusTesting:").concat(s.vaccines.tetanus.testing,',\n          vigilanceVaccinesTetanusComment:"').concat(s.vaccines.tetanus.comment,'",\n          vigilanceVaccinesPneumovaxMedication:').concat(s.vaccines.pneumovax.medication,",\n          vigilanceVaccinesPneumovaxTesting:").concat(s.vaccines.pneumovax.testing,',\n          vigilanceVaccinesPneumovaxComment:"').concat(s.vaccines.pneumovax.comment,'",\n          vigilanceVaccinesOtherName:"').concat(s.vaccines.other.name,'",\n          vigilanceVaccinesOtherMedication:').concat(s.vaccines.other.medication,",\n          vigilanceVaccinesOtherTesting:").concat(s.vaccines.other.testing,',\n          vigilanceVaccinesOtherComment:"').concat(s.vaccines.other.comment,'",\n          vigilanceHighlighted: ').concat(s.highlighted,"\n        }\n        visitInput2: {\n          vigilanceChronicIllnessDiabetesMedication:").concat(o.chronicIllness.diabetes.medication,",\n          vigilanceChronicIllnessDiabetesTesting:").concat(o.chronicIllness.diabetes.testing,',\n          vigilanceChronicIllnessDiabetesComment:"').concat(o.chronicIllness.diabetes.comment,'",\n          vigilanceChronicIllnessHbpMedication:').concat(o.chronicIllness.hbp.medication,",\n          vigilanceChronicIllnessHbpTesting:").concat(o.chronicIllness.hbp.testing,',\n          vigilanceChronicIllnessHbpComment:"').concat(o.chronicIllness.hbp.comment,'",\n          vigilanceChronicIllnessDyslipidemiaMedication:').concat(o.chronicIllness.dyslipidemia.medication,",\n          vigilanceChronicIllnessDyslipidemiaTesting:").concat(o.chronicIllness.dyslipidemia.testing,',\n          vigilanceChronicIllnessDyslipidemiaComment:"').concat(o.chronicIllness.dyslipidemia.comment,'",\n          vigilanceChronicIllnessCadMedication:').concat(o.chronicIllness.cad.medication,",\n          vigilanceChronicIllnessCadTesting:").concat(o.chronicIllness.cad.testing,',\n          vigilanceChronicIllnessCadComment:"').concat(o.chronicIllness.cad.comment,'",\n          vigilanceLifestyleWeightMedication:').concat(o.lifestyle.weight.medication,",\n          vigilanceLifestyleWeightTesting:").concat(o.lifestyle.weight.testing,',\n          vigilanceLifestyleWeightComment:"').concat(o.lifestyle.weight.comment,'",\n          vigilanceLifestyleDietMedication:').concat(o.lifestyle.diet.medication,",\n          vigilanceLifestyleDietTesting:").concat(o.lifestyle.diet.testing,',\n          vigilanceLifestyleDietComment:"').concat(o.lifestyle.diet.comment,'",\n          vigilanceLifestyleSmokingMedication:').concat(o.lifestyle.smoking.medication,",\n          vigilanceLifestyleSmokingTesting:").concat(o.lifestyle.smoking.testing,',\n          vigilanceLifestyleSmokingComment:"').concat(o.lifestyle.smoking.comment,'",\n          vigilanceLifestyleSubstanceAbuseMedication:').concat(o.lifestyle.substanceAbuse.medication,",\n          vigilanceLifestyleSubstanceAbuseTesting:").concat(o.lifestyle.substanceAbuse.testing,',\n          vigilanceLifestyleSubstanceAbuseComment:"').concat(o.lifestyle.substanceAbuse.comment,'",\n          vigilanceLifestyleExerciseMedication:').concat(o.lifestyle.exercise.medication,",\n          vigilanceLifestyleExerciseTesting:").concat(o.lifestyle.exercise.testing,',\n          vigilanceLifestyleExerciseComment:"').concat(o.lifestyle.exercise.comment,'",\n          vigilanceLifestyleAllergiesMedication:').concat(o.lifestyle.allergies.medication,",\n          vigilanceLifestyleAllergiesTesting:").concat(o.lifestyle.allergies.testing,',\n          vigilanceLifestyleAllergiesComment:"').concat(o.lifestyle.allergies.comment,'",\n          vigilanceLifestyleAsthmaMedication:').concat(o.lifestyle.asthma.medication,",\n          vigilanceLifestyleAsthmaTesting:").concat(o.lifestyle.asthma.testing,',\n          vigilanceLifestyleAsthmaComment:"').concat(o.lifestyle.asthma.comment,'",\n          vigilanceScreeningBreastMedication:').concat(o.screening.breast.medication,",\n          vigilanceScreeningBreastTesting:").concat(o.screening.breast.testing,',\n          vigilanceScreeningBreastComment:"').concat(o.screening.breast.comment,'",\n          vigilanceScreeningProstateMedication:').concat(o.screening.prostate.medication,",\n          vigilanceScreeningProstateTesting:").concat(o.screening.prostate.testing,',\n          vigilanceScreeningProstateComment:"').concat(o.screening.prostate.comment,'",\n          vigilanceScreeningCervixMedication:').concat(o.screening.cervix.medication,",\n          vigilanceScreeningCervixTesting:").concat(o.screening.cervix.testing,',\n          vigilanceScreeningCervixComment:"').concat(o.screening.cervix.comment,'",\n          vigilanceScreeningColonMedication:').concat(o.screening.colon.medication,",\n          vigilanceScreeningColonTesting:").concat(o.screening.colon.testing,',\n          vigilanceScreeningColonComment:"').concat(o.screening.colon.comment,'",\n          vigilanceScreeningDentalMedication:').concat(o.screening.dental.medication,",\n          vigilanceScreeningDentalTesting:").concat(o.screening.dental.testing,',\n          vigilanceScreeningDentalComment:"').concat(o.screening.dental.comment,'",\n          vigilanceVaccinesInfluenzaMedication:').concat(o.vaccines.influenza.medication,",\n          vigilanceVaccinesInfluenzaTesting:").concat(o.vaccines.influenza.testing,',\n          vigilanceVaccinesInfluenzaComment:"').concat(o.vaccines.influenza.comment,'",\n          vigilanceVaccinesVaricellaMedication:').concat(o.vaccines.varicella.medication,",\n          vigilanceVaccinesVaricellaTesting:").concat(o.vaccines.varicella.testing,',\n          vigilanceVaccinesVaricellaComment:"').concat(o.vaccines.varicella.comment,'",\n          vigilanceVaccinesHpvMedication:').concat(o.vaccines.hpv.medication,",\n          vigilanceVaccinesHpvTesting:").concat(o.vaccines.hpv.testing,',\n          vigilanceVaccinesHpvComment:"').concat(o.vaccines.hpv.comment,'",\n          vigilanceVaccinesMmrMedication:').concat(o.vaccines.mmr.medication,",\n          vigilanceVaccinesMmrTesting:").concat(o.vaccines.mmr.testing,',\n          vigilanceVaccinesMmrComment:"').concat(o.vaccines.mmr.comment,'",\n          vigilanceVaccinesTetanusMedication:').concat(o.vaccines.tetanus.medication,",\n          vigilanceVaccinesTetanusTesting:").concat(o.vaccines.tetanus.testing,',\n          vigilanceVaccinesTetanusComment:"').concat(o.vaccines.tetanus.comment,'",\n          vigilanceVaccinesPneumovaxMedication:').concat(o.vaccines.pneumovax.medication,",\n          vigilanceVaccinesPneumovaxTesting:").concat(o.vaccines.pneumovax.testing,',\n          vigilanceVaccinesPneumovaxComment:"').concat(o.vaccines.pneumovax.comment,'",\n          vigilanceVaccinesOtherName:"').concat(o.vaccines.other.name,'",\n          vigilanceVaccinesOtherMedication:').concat(o.vaccines.other.medication,",\n          vigilanceVaccinesOtherTesting:").concat(o.vaccines.other.testing,',\n          vigilanceVaccinesOtherComment:"').concat(o.vaccines.other.comment,'",\n          vigilanceHighlighted: ').concat(o.highlighted,"\n        }\n      )\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...vigilance update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitVigilance),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitVigilance,activityA:"updateVisitVigilance?activityId:".concat(a,",visitId:").concat(i),updating:{state:null,field:null,previous:{}}}),n.context.selectedVisit=e.data.updateVisitVigilance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitAddUserForm=function(e){e.preventDefault(),console.log("...adding consultant..."),n.context.setUserAlert("...adding consultant..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=e.target.user.value,s=n.props.visit._id;if(0===i.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var o=n.state.users.filter((function(e){return e._id===i}))[0].role;if("Doctor"!==o&&"Nurse"!==o)return console.log("...please choose a Doctor or Nurse to add please..."),void n.context.setUserAlert("...please choose a Doctor or Nurse to add please...");var l={query:'\n      mutation {addVisitConsultant(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n       {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...add consultant success!...";e.errors&&(o=e.errors[0].message),e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updateVisit(e.data.addVisitConsultant),n.setState({isLoading:!1,overlay2:!1,activityA:"addVisitConsultant?activityId:".concat(a,",visitId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteConsultant=function(e){console.log("...deleting consultant..."),n.context.setUserAlert("...deleting consultant..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=e._id,s=n.props.visit._id,o={query:'\n      mutation {deleteVisitConsultant(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n       {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...delete consultant success!...";e.errors&&(o=e.errors[0].message),e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updateVisit(e.data.deleteVisitConsultant),n.setState({isLoading:!1,overlay2:!1,activityA:"deleteVisitConsultant?activityId:".concat(a,",visitId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.startAddAttachment=function(e){console.log("...start add attachment..."),n.setState({addAttachmentForm:!0,addAttachmentArgs:e})},n.cancelAddAttachment=function(){n.setState({addAttachmentForm:!1})},n.addAttachment=function(e){e.preventDefault(),console.log("...adding attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0,addAttachmentForm:!1,overlay2:!0});var t,a,i=n.context.token,s=n.context.activityId,o=n.props.visit._id,l=n.state.addAttachmentArgs,c=l.field;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1,overlay2:!1});if(""!==e.target.fileInput.value){var r=E._currentValue.file,m=r.name,d="visit/"+o+"/"+c+"/attachments";console.log("...file present..."),t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+r.type.split("/")[1];var p={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 uploading allergy attachment ..."),console.log("...s3 uploading allergy attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"".concat(c," attachment")}},overlay:!0,s3State:{action:"upload",target:"".concat(c," attachment"),status:"inProgress"}}),g.uploadFile(r,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"failed"}})}))}if("complaint"===c){var h=l.data.title,u=l.data.description,y=l.data.anamnesis,v=t;a={query:'\n        mutation {addVisitComplaintAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            complaintTitle:"').concat(h,'",\n            complaintDescription:"').concat(u,'",\n            complaintAnamnesis:"').concat(y,'",\n            complaintAttachment:"').concat(v,'"\n          })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("survey"===c){var f=l.data.title,b=l.data.description,_=t;a={query:'\n        mutation {addVisitSurveyAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            surveyTitle:"').concat(f,'",\n            surveyDescription:"').concat(b,'",\n            surveyAttachment:"').concat(_,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("systematicInquiry"===c){var A=l.data.title,C=l.data.description,N=t;a={query:'\n        mutation {addVisitSysInquiryAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            systematicInquiryTitle:"').concat(A,'",\n            systematicInquiryDescription:"').concat(C,'",\n            systematicInquiryAttachment:"').concat(N,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("examination"===c){var x=l.data.general,I=l.data.area,T=l.data.type,S=l.data.measure,w=l.data.value,k=l.data.description,U=l.data.followUp,D=t;a={query:'\n        mutation {addVisitExaminationAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            examinationGeneral:"').concat(x,'",\n            examinationArea:"').concat(I,'",\n            examinationType:"').concat(T,'",\n            examinationMeasure:"').concat(S,'",\n            examinationValue:"').concat(w,'",\n            examinationDescription:"').concat(k,'",\n            examinationFollowUp:').concat(U,',\n            examinationAttachment:"').concat(D,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("investigation"===c){var F=l.data.title,L=l.data.type,V=l.data.description,P=t;a={query:'\n        mutation {addVisitInvestigationAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            investigationTitle:"').concat(F,'",\n            investigationType:"').concat(L,'",\n            investigationDescription:"').concat(V,'",\n            investigationAttachment:"').concat(P,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("diagnosis"===c){var B=l.data.title,q=l.data.type,G=l.data.description,O=t;a={query:'\n        mutation {addVisitDiagnosisAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            diagnosisTitle:"').concat(B,'",\n            diagnosisType:"').concat(q,'",\n            diagnosisDescription:"').concat(G,'",\n            diagnosisAttachment:"').concat(O,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("treatment"===c){var M=l.data.type,z=l.data.title,j=l.data.description,R=l.data.dosage,Y=l.data.frequency,H=t;a={query:'\n        mutation {addVisitTreatmentAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            treatmentType:"').concat(M,'",\n            treatmentTitle:"').concat(z,'",\n            treatmentDescription:"').concat(j,'",\n            treatmentDose:"').concat(R,'",\n            treatmentFrequency:"').concat(Y,'",\n            treatmentAttachment:"').concat(H,'"\n        })\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("billing"===c){var K=l.data.amount,J=l.data.paid,Q=l.data.title,W=l.data.type,X=l.data.description,Z=l.data.notes,$=t;a={query:'\n        mutation {addVisitBillingAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            billingTitle:"').concat(Q,'",\n            billingType:"').concat(W,'",\n            billingDescription:"').concat(X,'",\n            billingAmount:').concat(K,",\n            billingPaid:").concat(J,',\n            billingAttachment:"').concat($,'",\n            billingNotes:"').concat(Z,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...add attachment success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"complaint"===c&&(n.props.updateVisit(e.data.addVisitComplaintAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitComplaintAttachment,activityA:"addVisitComplaintAttachment?activityId:".concat(s,",visitId:").concat(o)})),"survey"===c&&(n.props.updateVisit(e.data.addVisitSurveyAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitSurveyAttachment,activityA:"addVisitSurveyAttachment?activityId:".concat(s,",visitId:").concat(o)})),"systematicInquiry"===c&&(n.props.updateVisit(e.data.addVisitSysInquiryAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitSysInquiryAttachment,activityA:"addVisitSysInquiryAttachment?activityId:".concat(s,",visitId:").concat(o)})),"examination"===c&&(n.props.updateVisit(e.data.addVisitExaminationAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitExaminationAttachment,activityA:"addVisitExaminationAttachment?activityId:".concat(s,",visitId:").concat(o)})),"investigation"===c&&(n.props.updateVisit(e.data.addVisitInvestigationAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitInvestigationAttachment,activityA:"addVisitInvestigationAttachment?activityId:".concat(s,",visitId:").concat(o)})),"diagnosis"===c&&(n.props.updateVisit(e.data.addVisitDiagnosisAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitDiagnosisAttachment,activityA:"addVisitDiagnosisAttachment?activityId:".concat(s,",visitId:").concat(o)})),"treatment"===c&&(n.props.updateVisit(e.data.addVisitTreatmentAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitTreatmentAttachment,activityA:"addVisitTreatmentAttachment?activityId:".concat(s,",visitId:").concat(o)})),"billing"===c&&(n.props.updateVisit(e.data.addVisitBillingAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.addVisitBillingAttachment,activityA:"addVisitBillingAttachment?activityId:".concat(s,",visitId:").concat(o)})),n.logUserActivity({activityId:s,token:i})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.deleteAttachment=function(e){console.log("...deleting attachment...",e.type),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0,overlay2:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,o=e.type,l=e.attachment,c=e.item;if("complaint"===o){var r=c.title,m=c.description,d=c.anamnesis,p=l;t={query:'\n        mutation {deleteVisitComplaintAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            complaintTitle:"').concat(r,'",\n            complaintDescription:"').concat(m,'",\n            complaintAnamnesis:"').concat(d,'",\n            complaintAttachment:"').concat(p,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("survey"===o){var g=c.title,h=c.description,u=l;t={query:'\n        mutation {deleteVisitSurveyAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            surveyTitle:"').concat(g,'",\n            surveyDescription:"').concat(h,'",\n            surveyAttachment:"').concat(u,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("systematicInquiry"===o){var y=c.title,v=c.description,f=l;t={query:'\n        mutation {deleteVisitSysInquiryAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            systematicInquiryTitle:"').concat(y,'",\n            systematicInquiryDescription:"').concat(v,'",\n            systematicInquiryAttachment:"').concat(f,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("examination"===o){var E=c.general,b=c.area,_=c.type,A=c.measure,C=c.value,N=c.description,x=c.followUp,I=l;t={query:'\n        mutation {deleteVisitExaminationAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            examinationGeneral:"').concat(E,'",\n            examinationArea:"').concat(b,'",\n            examinationType:"').concat(_,'",\n            examinationMeasure:"').concat(A,'",\n            examinationValue:"').concat(C,'",\n            examinationDescription:"').concat(N,'",\n            examinationFollowUp:').concat(x,',\n            examinationAttachment:"').concat(I,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("investigation"===o){var T=c.title,S=c.type,w=c.description,k=l;t={query:'\n        mutation {deleteVisitInvestigationAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            investigationTitle:"').concat(T,'",\n            investigationType:"').concat(S,'",\n            investigationDescription:"').concat(w,'",\n            investigationAttachment:"').concat(k,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("diagnosis"===o){var U=c.title,D=c.type,F=c.description,L=l;t={query:'\n        mutation {deleteVisitDiagnosisAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            diagnosisTitle:"').concat(U,'",\n            diagnosisType:"').concat(D,'",\n            diagnosisDescription:"').concat(F,'",\n            diagnosisAttachment:"').concat(L,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("treatment"===o){var V=c.type,P=c.title,B=c.description,q=c.dosage,G=c.frequency,O=l;t={query:'\n        mutation {deleteVisitTreatmentAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            treatmentType:"').concat(V,'",\n            treatmentTitle:"').concat(P,'",\n            treatmentDescription:"').concat(B,'",\n            treatmentDose:"').concat(q,'",\n            treatmentFrequency:"').concat(G,'",\n            treatmentAttachment:"').concat(O,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("billing"===o){var M=c.title,z=c.type,j=c.description,R=c.amount,Y=c.paid,H=l,K=c.notes;t={query:'\n        mutation {deleteVisitBillingAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            billingTitle:"').concat(M,'",\n            billingType:"').concat(z,'",\n            billingDescription:"').concat(j,'",\n            billingAmount:').concat(R,",\n            billingPaid:").concat(Y,',\n            billingAttachment:"').concat(H,'",\n            billingNotes:"').concat(K,'"\n          })\n           {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...delete attachment success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"complaint"===o&&(n.props.updateVisit(e.data.deleteVisitComplaintAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitComplaintAttachment,activityA:"deleteVisitComplaintAttachment?activityId:".concat(i,",visitId:").concat(s)})),"survey"===o&&(n.props.updateVisit(e.data.deleteVisitSurveyAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitSurveyAttachment,activityA:"deleteVisitSurveyAttachment?activityId:".concat(i,",visitId:").concat(s)})),"systematicInquiry"===o&&(n.props.updateVisit(e.data.deleteVisitSysInquiryAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitSysInquiryAttachment,activityA:"deleteVisitSysInquiryAttachment?activityId:".concat(i,",visitId:").concat(s)})),"examination"===o&&(n.props.updateVisit(e.data.deleteVisitExaminationAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitExaminationAttachment,activityA:"deleteVisitExaminationAttachment?activityId:".concat(i,",visitId:").concat(s)})),"investigation"===o&&(n.props.updateVisit(e.data.deleteVisitInvestigationAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitInvestigationAttachment,activityA:"deleteVisitInvestigationAttachment?activityId:".concat(i,",visitId:").concat(s)})),"diagnosis"===o&&(n.props.updateVisit(e.data.deleteVisitDiagnosisAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitDiagnosisAttachment,activityA:"deleteVisitDiagnosisAttachment?activityId:".concat(i,",visitId:").concat(s)})),"treatment"===o&&(n.props.updateVisit(e.data.deleteVisitTreatmentAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitTreatmentAttachment,activityA:"deleteVisitTreatmentAttachment?activityId:".concat(i,",visitId:").concat(s)})),"billing"===o&&(n.props.updateVisit(e.data.deleteVisitBillingAttachment),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.deleteVisitBillingAttachment,activityA:"deleteVisitBillingAttachment?activityId:".concat(i,",visitId:").concat(s)})),n.logUserActivity({activityId:i,token:a});var c="visit/"+s+"/"+o+"/attachments",r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+s+"/"+o+"/attachments/",m=l,d=m.replace(r,"");console.log("1:",c),console.log("2:",m),console.log("3:",d);var p={bucketName:"mbjentemrstorage",dirName:c,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new me.a(p);n.context.setUserAlert("...s3 deleting attachment.."),console.log("...s3 deleting attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"".concat(o," attachment")}},overlay:!0,s3State:{action:"delete",target:"".concat(o," attachment"),status:"inProgress"}}),g.deleteFile(d,p).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0,overlay2:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.target.field.value,o=e.target.query.value;if(0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1,overlay2:!1});var l={query:'\n      mutation {updateVisitSingleField(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n       {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitSingleField),n.setState({isLoading:!1,overlay2:!1,selectedVisit:e.data.updateVisitSingleField,activityA:"updateVisitSingleField?activityId:".concat(a,",visitId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedVisit=e.data.updateVisitSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null},updating:{state:null,field:null,previous:{}}})},n.startUpdate=function(e){n.setState({updating:{state:!0,field:e.field,previous:e.data}})},n.completeVisit=function(){console.log("...completing visit..."),n.context.setUserAlert("...completing visit..."),n.setState({isLoading:!0,overlay2:!0});var e=n.context.token,t=n.context.activityId,a=n.props.visit._id,i={query:'\n      mutation {completeVisitById(\n        activityId:"'.concat(t,'",\n        visitId:"').concat(a,'"\n      )\n         {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(i){var s="...visit completed!...";i.errors&&(s=i.errors[0].message),i.data.error&&(s=i.data.error),n.context.setUserAlert(s),n.props.updateVisit(i.data.completeVisitById),n.setState({isLoading:!1,overlay2:!1,selectedVisit:i.data.completeVisitById,activityA:"completeVisitById?activityId:".concat(t,",visitId:").concat(a),updateSingleField:{state:null,field:null}}),n.context.selectedVisit=i.data.completeVisitById,n.logUserActivity({activityId:t,token:e})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1,overlay2:!1})}))},n.nullAttachment=function(e){console.log("can't add or delete attachments ".concat(e.field," for here")),n.context.setUserAlert("can't add or delete attachments ".concat(e.field," for here"))},n.checkAllergies=function(){n.propsVisit.patient.allergies.length>0===!0&&(n.setState({hasAllergies:!0}),n.hasAllergies=!0),n.propsVisit.patient.comorbidities.length>0===!0&&(n.setState({hasComorbidities:!0}),n.hasComorbidities=!0),n.props.setAllergyCheck({hasAllergies:n.hasAllergies,hasComorbidities:n.hasComorbidities})},n.toggleOverlay2=function(){n.setState({overlay2:!1}),n.overlay2=!1},n.setStateCalEvent=function(){12===n.props.visit.date.length&&n.setState({calEvent:{title:n.props.visit.title,description:n.props.visit.appointment.description,location:n.props.visit.appointment.location,startTime:D.a.unix(n.props.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD, h:mm:ss a"),endTime:D.a.unix(n.props.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD, h:mm:ss a")}}),13===n.props.visit.date.length&&n.setState({calEvent:{title:n.props.visit.title,description:n.props.visit.appointment.description,location:n.props.visit.appointment.location,startTime:D.a.unix(n.props.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD, h:mm:ss a"),endTime:D.a.unix(n.props.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD, h:mm:ss a")}})},n.propsVisit=n.props.visit,n.hasComorbidities=!1,n.hasAllergies=!1,n.overlay2=!1,n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e;console.log("...visit details component mounted...",this.props.visit),sessionStorage.getItem("logInfo")&&(e=JSON.parse(sessionStorage.getItem("logInfo")),this.getPocketVars(e)),"Admin"===this.context.role&&this.setState({canDelete:!0}),!0===this.props.visit.consultants.map((function(e){return e._id})).includes(this.context.activityId)&&(console.log("You can edit!!"),this.setState({canEdit:!0,canUpdate:!0})),this.getAllUsers(e),this.checkAllergies()}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n          query {getPocketVars(\n            activityId:"'.concat(n,'")}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,o=D()().tz("America/Bogota").format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(o,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.addUserActivity.error&&t.context.setUserAlert(e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},visits{_id,date,time,title,type,subType,patient{_id,title,name,lastName,role,username,dob,age,gender,contact{phone,phone2,email}},consultants{_id,title,name,role,username,gender,contact{phone,phone2,email}}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all users retrieval success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a}),t.setStateCalEvent()})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus}),!0===this.state.overlay2&&i.a.createElement(de,{toggleOverlay2:this.toggleOverlay2}),i.a.createElement("div",{className:"topContainer"},i.a.createElement(_.a,{className:""},!this.props.visit&&i.a.createElement("h3",null,"...")),i.a.createElement(_.a,{className:""},this.props.visit&&i.a.createElement(A.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(aa,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"all"===this.props.subMenu&&i.a.createElement(_.a,{className:"tabRowAll"},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.title),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.type),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.subType),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"followUp:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.followUp.toString()),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"followUp")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),12===this.props.visit.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.visit.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.visit.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.time),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Patient:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.name),i.a.createElement(p.b,{to:{pathname:"/patients",state:{patient:this.props.visit.patient._id}}},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.attendingPhysician)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Appointment:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.appointment.title),i.a.createElement(p.b,{to:{pathname:"/appointments",state:{appointment:this.props.visit.appointment._id}}},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),12===this.props.visit.appointment.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.visit.appointment.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.visit.appointment.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.visit.appointment.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Comorbidities:",!0===this.hasComorbidities&&i.a.createElement(y.a,{icon:v.h,className:"visitAttentionIcon",color:"yellow",size:"lg"}))),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"comorbidities")},"Filter")),this.state.startFilter&&"comorbidities"===this.state.selectFilter&&i.a.createElement($t,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(Bt,{filter:this.state.filter,comorbidities:this.props.visit.patient.comorbidities,authId:this.context.activityId,visitPage:!0}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Allergies:",!0===this.hasAllergies&&i.a.createElement(y.a,{icon:v.h,className:"visitAttentionIcon",color:"yellow",size:"sm"}))),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"allergy")},"Filter")),this.state.startFilter&&"allergy"===this.state.selectFilter&&i.a.createElement(Xt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(Ut,{filter:this.state.filter,allergies:this.props.visit.patient.allergies,authId:this.context.activityId,onAddAttachment:this.nullAttachment,deleteAttachment:this.nullAttachment,visitPage:!0}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Medication:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"medication")},"Filter")),this.state.startFilter&&"medication"===this.state.selectFilter&&i.a.createElement(Zt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(Lt,{filter:this.state.filter,medication:this.props.visit.patient.medication,authId:this.context.activityId,onAddAttachment:this.nullAttachment,deleteAttachment:this.nullAttachment,visitPage:!0}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit._id))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Consultants:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"consultant")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.startFilter&&"consultant"===this.state.selectFilter&&i.a.createElement(gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(_a,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement($,{filter:this.state.filter,authId:this.context.activityId,users:this.props.visit.consultants,visitPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Complaints:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"complaint")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"complaint")},"Add")),!0===this.state.startFilter&&"complaint"===this.state.selectFilter&&i.a.createElement(dn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"complaint"===this.state.adding.field&&i.a.createElement(bn,{onConfirm:this.submitAddComplaintForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"complaint"===this.state.updating.field&&i.a.createElement(bn,{onConfirm:this.submitUpdateComplaintForm,onCancel:this.cancelAdd,previousComplaint:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ka,{filter:this.state.filter,complaints:this.props.visit.complaints,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComplaint,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitComplaintHighlighted:this.toggleVisitComplaintHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Surveys:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"survey")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"survey")},"Add")),!0===this.state.startFilter&&"survey"===this.state.selectFilter&&i.a.createElement(pn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"survey"===this.state.adding.field&&i.a.createElement(_n,{onConfirm:this.submitAddSurveyForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"survey"===this.state.updating.field&&i.a.createElement(_n,{onConfirm:this.submitUpdateSurveyForm,onCancel:this.cancelAdd,previousSurvey:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Fa,{filter:this.state.filter,surveys:this.props.visit.surveys,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSurvey,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitSurveyHighlighted:this.toggleVisitSurveyHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Systematic Inquiry/ Review of Systems:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"systematicInquiry")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"systematicInquiry")},"Add")),!0===this.state.startFilter&&"systematicInquiry"===this.state.selectFilter&&i.a.createElement(gn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"systematicInquiry"===this.state.adding.field&&i.a.createElement(An,{onConfirm:this.submitAddSystematicInquiryForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"systematicInquiry"===this.state.updating.field&&i.a.createElement(An,{onConfirm:this.submitUpdateSystematicInquiryForm,onCancel:this.cancelAdd,previousSystematicInquiry:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Pa,{filter:this.state.filter,systematicInquiry:this.props.visit.systematicInquiry,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSystematicInquiry,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitSysInquiryHighlighted:this.toggleVisitSysInquiryHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Vitals:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"vitals")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"vitals")},"Add")),!0===this.state.startFilter&&"vitals"===this.state.selectFilter&&i.a.createElement(un,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"vitals"===this.state.adding.field&&i.a.createElement(Cn,{onConfirm:this.submitAddVitalsForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"vitals"===this.state.updating.field&&i.a.createElement(Cn,{onConfirm:this.submitUpdateVitalsForm,onCancel:this.cancelAdd,previousVitals:this.state.updating.previous}),i.a.createElement(Ga,{filter:this.state.filter,vitals:this.props.visit.vitals,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVitals,toggleVisitVitalsHighlighted:this.toggleVisitVitalsHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Examinations:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"examination")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"examination")},"Add")),!0===this.state.startFilter&&"examination"===this.state.selectFilter&&i.a.createElement(yn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"examination"===this.state.adding.field&&i.a.createElement(Nn,{onConfirm:this.submitAddExaminationForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"examination"===this.state.updating.field&&i.a.createElement(Nn,{onConfirm:this.submitUpdateExaminationForm,onCancel:this.cancelAdd,previousExamination:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(za,{filter:this.state.filter,examination:this.props.visit.examination,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteExamination,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitExaminationHighlighted:this.toggleVisitExaminationHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Investigations:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"investigation")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"investigation")},"Add")),!0===this.state.startFilter&&"investigation"===this.state.selectFilter&&i.a.createElement(vn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"investigation"===this.state.adding.field&&i.a.createElement(xn,{onConfirm:this.submitAddInvestigationForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"investigation"===this.state.updating.field&&i.a.createElement(xn,{onConfirm:this.submitUpdateInvestigationForm,onCancel:this.cancelAdd,previousInvestigation:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ya,{filter:this.state.filter,investigation:this.props.visit.investigation,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteInvestigation,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitInvestigationHighlighted:this.toggleVisitInvestigationHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Diagnoses:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"diagnosis")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"diagnosis")},"Add")),!0===this.state.startFilter&&"diagnosis"===this.state.selectFilter&&i.a.createElement(hn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"diagnosis"===this.state.adding.field&&i.a.createElement(In,{onConfirm:this.submitAddDiagnosisForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"diagnosis"===this.state.updating.field&&i.a.createElement(In,{onConfirm:this.submitUpdateDiagnosisForm,onCancel:this.cancelAdd,previousDiagnosis:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ja,{filter:this.state.filter,diagnosis:this.props.visit.diagnosis,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteDiagnosis,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitDiagnosisHighlighted:this.toggleVisitDiagnosisHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Plan:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"treatment")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"treatment")},"Add")),!0===this.state.startFilter&&"treatment"===this.state.selectFilter&&i.a.createElement(fn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"treatment"===this.state.adding.field&&i.a.createElement(Tn,{onConfirm:this.submitAddTreatmentForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"treatment"===this.state.updating.field&&i.a.createElement(Tn,{onConfirm:this.submitUpdateTreatmentForm,onCancel:this.cancelAdd,previousTreatment:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Xa,{filter:this.state.filter,treatment:this.props.visit.treatment,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTreatment,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitTreatmentHighlighted:this.toggleVisitTreatmentHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Billing:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{className:"searchBtn",variant:"outline-primary",onClick:this.toggleFilter.bind(this,"billing")},"Filter"),i.a.createElement(I.a,{className:"searchBtn",variant:"outline-success",onClick:this.startAdd.bind(this,"billing")},"Add"),!0===this.props.visit.appointment.inProgress&&i.a.createElement(I.a,{className:"searchBtn",variant:"outline-primary",size:"sm",onClick:this.completeVisit},"Complete Visit ")),!0===this.state.startFilter&&"billing"===this.state.selectFilter&&i.a.createElement(En,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"billing"===this.state.adding.field&&i.a.createElement(Sn,{onConfirm:this.submitAddBillingForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"billing"===this.state.updating.field&&i.a.createElement(Sn,{onConfirm:this.submitUpdateBillingForm,onCancel:this.cancelAdd,previousBilling:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(en,{filter:this.state.filter,billing:this.props.visit.billing,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteBilling,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,updateBillingPaid:this.updateBillingPaid,toggleVisitBillingHighlighted:this.toggleVisitBillingHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Vigilance:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"vigilance")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"vigilance")},"Add")),!0===this.state.startFilter&&"vigilance"===this.state.selectFilter&&i.a.createElement("h3",null,"Filter vigilance form"),!0===this.state.adding.state&&"vigilance"===this.state.adding.field&&i.a.createElement(wn,{onConfirm:this.submitAddVigilanceForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"vigilance"===this.state.updating.field&&i.a.createElement(wn,{onConfirm:this.submitUpdateVigilanceForm,onCancel:this.cancelAdd,previousVigilance:this.state.updating.previous}),i.a.createElement(nn,{filter:this.state.filter,vigilance:this.props.visit.vigilance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVigilance,toggleVisitVigilanceHighlighted:this.toggleVisitVigilanceHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Pe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(He,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(ln,{filter:this.state.filter,images:this.props.visit.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage,toggleVisitImageHighlighted:this.toggleVisitImageHighlighted}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(Be,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ke,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(mn,{filter:this.state.filter,files:this.props.visit.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile,toggleVisitFileHighlighted:this.toggleVisitFileHighlighted}))))),"basic"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.title),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.type),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.subType),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"FollowUp:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.followUp.toString()),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"followUp")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),12===this.props.visit.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.visit.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.visit.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.visit.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.time),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Patient:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.name),i.a.createElement(p.b,{to:{pathname:"/patients",state:{patient:this.props.visit.patient._id}}},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.attendingPhysician)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Appointment:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.appointment.title),i.a.createElement("p",{className:"listGroupText"},"Date:"),12===this.props.visit.appointment.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.visit.appointment.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===this.props.visit.appointment.date.length&&i.a.createElement("p",{className:"listGroupText bold"},D.a.unix(this.props.visit.appointment.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),i.a.createElement(p.b,{to:{pathname:"/appointments",state:{appointment:this.props.visit.appointment._id}}},i.a.createElement(y.a,{icon:v.i,className:"listIcon"}))))),"allergy"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Allergies:",!0===this.hasAllergies&&i.a.createElement(y.a,{icon:v.h,className:"visitAttentionIcon",color:"yellow",size:"sm"}))),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"allergy")},"Filter")),this.state.startFilter&&"allergy"===this.state.selectFilter&&i.a.createElement(Xt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(Ut,{filter:this.state.filter,allergies:this.props.visit.patient.allergies,authId:this.context.activityId,visitPage:!0,onAddAttachment:this.nullAttachment,deleteAttachment:this.nullAttachment})),"medication"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Medication:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"medication")},"Filter")),this.state.startFilter&&"medication"===this.state.selectFilter&&i.a.createElement(Zt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(Lt,{filter:this.state.filter,medication:this.props.visit.patient.medication,authId:this.context.activityId,visitPage:!0,onAddAttachment:this.nullAttachment,deleteAttachment:this.nullAttachment})),"comorbidities"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Comorbidities:",!0===this.hasComorbidities&&i.a.createElement(y.a,{icon:v.h,className:"visitAttentionIcon",color:"yellow",size:"sm"}))),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"comorbidities")},"Filter")),this.state.startFilter&&"comorbidities"===this.state.selectFilter&&i.a.createElement($t,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(Bt,{filter:this.state.filter,comorbidities:this.props.visit.patient.comorbidities,authId:this.context.activityId,visitPage:!0})),"admin"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit._id)))),"consultant"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Consultants:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"consultant")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.startFilter&&"consultant"===this.state.selectFilter&&i.a.createElement(gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(_a,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement($,{filter:this.state.filter,authId:this.context.activityId,users:this.props.visit.consultants,visitPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant})),"complaint"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Complaints:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"complaint")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"complaint")},"Add")),!0===this.state.startFilter&&"complaint"===this.state.selectFilter&&i.a.createElement(dn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"complaint"===this.state.adding.field&&i.a.createElement(bn,{onConfirm:this.submitAddComplaintForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"complaint"===this.state.updating.field&&i.a.createElement(bn,{onConfirm:this.submitUpdateComplaintForm,onCancel:this.cancelAdd,previousComplaint:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ka,{filter:this.state.filter,complaints:this.props.visit.complaints,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComplaint,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitComplaintHighlighted:this.toggleVisitComplaintHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"survey"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Surveys:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"survey")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"survey")},"Add")),!0===this.state.startFilter&&"survey"===this.state.selectFilter&&i.a.createElement(pn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"survey"===this.state.adding.field&&i.a.createElement(_n,{onConfirm:this.submitAddSurveyForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"survey"===this.state.updating.field&&i.a.createElement(_n,{onConfirm:this.submitUpdateSurveyForm,onCancel:this.cancelAdd,previousSurvey:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Fa,{filter:this.state.filter,surveys:this.props.visit.surveys,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSurvey,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitSurveyHighlighted:this.toggleVisitSurveyHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"systematicInquiry"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Systematic Inquiry/ Review of Systems:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"systematicInquiry")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"systematicInquiry")},"Add")),!0===this.state.startFilter&&"systematicInquiry"===this.state.selectFilter&&i.a.createElement(gn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"systematicInquiry"===this.state.adding.field&&i.a.createElement(An,{onConfirm:this.submitAddSystematicInquiryForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"systematicInquiry"===this.state.updating.field&&i.a.createElement(An,{onConfirm:this.submitUpdateSystematicInquiryForm,onCancel:this.cancelAdd,previousSystematicInquiry:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Pa,{filter:this.state.filter,systematicInquiry:this.props.visit.systematicInquiry,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSystematicInquiry,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitSysInquiryHighlighted:this.toggleVisitSysInquiryHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"vitals"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Vitals:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"vitals")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"vitals")},"Add")),!0===this.state.startFilter&&"vitals"===this.state.selectFilter&&i.a.createElement(un,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"vitals"===this.state.adding.field&&i.a.createElement(Cn,{onConfirm:this.submitAddVitalsForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"vitals"===this.state.updating.field&&i.a.createElement(Cn,{onConfirm:this.submitUpdateVitalsForm,onCancel:this.cancelAdd,previousVitals:this.state.updating.previous}),i.a.createElement(Ga,{filter:this.state.filter,vitals:this.props.visit.vitals,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVitals,toggleVisitVitalsHighlighted:this.toggleVisitVitalsHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"examination"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Examinations:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"examination")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"examination")},"Add")),!0===this.state.startFilter&&"examination"===this.state.selectFilter&&i.a.createElement(yn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"examination"===this.state.adding.field&&i.a.createElement(Nn,{onConfirm:this.submitAddExaminationForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"examination"===this.state.updating.field&&i.a.createElement(Nn,{onConfirm:this.submitUpdateExaminationForm,onCancel:this.cancelAdd,previousExamination:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(za,{filter:this.state.filter,examination:this.props.visit.examination,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteExamination,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitExaminationHighlighted:this.toggleVisitExaminationHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"investigation"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Investigations:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"investigation")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"investigation")},"Add")),!0===this.state.startFilter&&"investigation"===this.state.selectFilter&&i.a.createElement(vn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"investigation"===this.state.adding.field&&i.a.createElement(xn,{onConfirm:this.submitAddInvestigationForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"investigation"===this.state.updating.field&&i.a.createElement(xn,{onConfirm:this.submitUpdateInvestigationForm,onCancel:this.cancelAdd,previousInvestigation:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ya,{filter:this.state.filter,investigation:this.props.visit.investigation,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteInvestigation,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitInvestigationHighlighted:this.toggleVisitInvestigationHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"diagnosis"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Diagnoses:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"diagnosis")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"diagnosis")},"Add")),!0===this.state.startFilter&&"diagnosis"===this.state.selectFilter&&i.a.createElement(hn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"diagnosis"===this.state.adding.field&&i.a.createElement(In,{onConfirm:this.submitAddDiagnosisForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"diagnosis"===this.state.updating.field&&i.a.createElement(In,{onConfirm:this.submitUpdateDiagnosisForm,onCancel:this.cancelAdd,previousDiagnosis:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ja,{filter:this.state.filter,diagnosis:this.props.visit.diagnosis,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteDiagnosis,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitDiagnosisHighlighted:this.toggleVisitDiagnosisHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"treatment"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Plan:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"treatment")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"treatment")},"Add")),!0===this.state.startFilter&&"treatment"===this.state.selectFilter&&i.a.createElement(fn,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"treatment"===this.state.adding.field&&i.a.createElement(Tn,{onConfirm:this.submitAddTreatmentForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"treatment"===this.state.updating.field&&i.a.createElement(Tn,{onConfirm:this.submitUpdateTreatmentForm,onCancel:this.cancelAdd,previousTreatment:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Xa,{filter:this.state.filter,treatment:this.props.visit.treatment,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTreatment,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,toggleVisitTreatmentHighlighted:this.toggleVisitTreatmentHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"billing"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Billing:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{className:"searchBtn",variant:"outline-primary",onClick:this.toggleFilter.bind(this,"billing")},"Filter"),i.a.createElement(I.a,{className:"searchBtn",variant:"outline-success",onClick:this.startAdd.bind(this,"billing")},"Add"),i.a.createElement(I.a,{className:"searchBtn",variant:"outline-primary",size:"sm",onClick:this.completeVisit},"Complete Visit")),!0===this.state.startFilter&&"billing"===this.state.selectFilter&&i.a.createElement(En,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"billing"===this.state.adding.field&&i.a.createElement(Sn,{onConfirm:this.submitAddBillingForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"billing"===this.state.updating.field&&i.a.createElement(Sn,{onConfirm:this.submitUpdateBillingForm,onCancel:this.cancelAdd,previousBilling:this.state.updating.previous}),!0===this.state.addAttachmentForm&&i.a.createElement(ca,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(en,{filter:this.state.filter,billing:this.props.visit.billing,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteBilling,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,updateBillingPaid:this.updateBillingPaid,toggleVisitBillingHighlighted:this.toggleVisitBillingHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"vigilance"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Vigilance:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"vigilance")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"vigilance")},"Add")),!0===this.state.startFilter&&"vigilance"===this.state.selectFilter&&i.a.createElement("h3",null,"Filter vigilance form"),!0===this.state.adding.state&&"vigilance"===this.state.adding.field&&i.a.createElement(wn,{onConfirm:this.submitAddVigilanceForm,onCancel:this.cancelAdd}),!0===this.state.updating.state&&"vigilance"===this.state.updating.field&&i.a.createElement(wn,{onConfirm:this.submitUpdateVigilanceForm,onCancel:this.cancelAdd,previousVigilance:this.state.updating.previous}),i.a.createElement(nn,{filter:this.state.filter,vigilance:this.props.visit.vigilance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVigilance,toggleVisitVigilanceHighlighted:this.toggleVisitVigilanceHighlighted,canUpdate:this.state.canUpdate,startUpdate:this.startUpdate})),"image"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Pe,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(He,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(ln,{filter:this.state.filter,images:this.props.visit.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage,toggleVisitImageHighlighted:this.toggleVisitImageHighlighted})),"file"===this.props.subMenu&&i.a.createElement(A.a,{className:"tabCol2"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),!0===this.state.canEdit&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(Be,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ke,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(mn,{filter:this.state.filter,files:this.props.visit.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile,toggleVisitFileHighlighted:this.toggleVisitFileHighlighted}))))))}}]),a}(n.Component);kn.contextType=E;var Un=kn,Dn=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Field"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:A.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Query"),i.a.createElement(J.a.Control,{type:"text",placeholder:"YYYY-MM-DD"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Search"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Fn=(a(314),a(774),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,appointments:null,canDelete:!1,visits:null,searchVisits:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menuVisit",startFilter:!1,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"list",subMenuState:!1,subMenu:"all",adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,creatingVisit:!1,newVisit:null,calendarVisits:null,calendarAppointments:null,fromGoLink:null,goLinkId:null,sublistSearch:!1,tabKey:"list",newVisitPatient:!1,otfAppt:!1,hasComorbidities:!1,hasAllergies:!1,canViewVisit:!1},e.searchVisits=function(t){t.preventDefault(),console.log("...searching visits..."),e.context.setUserAlert("...searching visits..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=t.target.field.value,o=t.target.query.value,l=!0;"date"===s&&(l=!1),!0===l&&(a={query:'\n      query {getVisitsByFieldRegex(\n        activityId:"'.concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(o,'"\n      )\n      {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}),!1===l&&(a={query:'\n        query {getVisitsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(s,'",\n          query:"').concat(o,'"\n        )\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...visit search success!...";!0===l&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===l&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===l&&e.setState({isLoading:!1,searchVisits:t.data.getVisitsByFieldRegex,activityA:"getVisitsByFieldRegex?activityId:".concat(i)}),!1===l&&e.setState({isLoading:!1,searchVisits:t.data.getVisitsByField,activityA:"getVisitsByField?activityId:".concat(i)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.newVisitPatient=function(t){console.log("...new Visit from patient details..."),e.context.setUserAlert("...creating new appointment..."),e.setState({isLoading:!0,otfAppt:!0});var a=e.context.token,n=e.context.activityId,i=e.props.location.state.newVisit,s=D()().tz("America/Bogota").format("YYYY-MM-DD,h:mm a"),o=i.name+"appt"+s,l=s.split(",")[0],c=s.split(",")[1],r={query:'\n      mutation {createAppointment(\n        activityId:"'.concat(n,'",\n        patientId:"').concat(i._id,'",\n        appointmentInput:{\n          title:"').concat(o,'",\n          type:"').concat("new_unreferred",'",\n          subType:"').concat("",'",\n          date:"').concat(l,'",\n          time:"').concat(c,'",\n          location:"').concat("",'",\n          description:"').concat("appointment on-the-fly",'",\n          important:').concat(!1,"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id,name},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create appointment success!...";t.errors&&(i=t.errors[0].message),t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,activityA:"createAppointment?activityId:".concat(n,",appointmentId:").concat(t.data.createAppointment._id),creatingVisit:!0,selectedAppointment:t.data.createAppointment,menuSelect:"new"}),e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewVisit=function(){e.setState({creatingVisit:!0})},e.cancelCreateNewVisit=function(){e.setState({creatingVisit:!1,selectedAppointment:null}),!0===e.state.otfAppt&&(console.log("...cleaning up on the fly appointment..."),e.deleteOtfAppointment())},e.submitCreateNewVisitForm=function(t){t.preventDefault(),console.log("...creating new visit...",e.state.selectedAppointment),e.context.setUserAlert("...creating new visit..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=e.state.selectedAppointment._id;12===e.state.selectedAppointment.date.length?a=D.a.unix(e.state.selectedAppointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"):13===e.state.selectedAppointment.date.length&&(a=D.a.unix(e.state.selectedAppointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD")),console.log("1:",a);var o,l,c=e.state.selectedAppointment.patient.name+"visit"+a,r=t.target.type.value,m=t.target.followUp.checked;if(12===e.state.selectedAppointment.date.length?(o=D()().tz("America/Bogota").format("YYYY-MM-DD")<D.a.unix(e.state.selectedAppointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),l=D()().tz("America/Bogota").format("YYYY-MM-DD")>D.a.unix(e.state.selectedAppointment.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD")):13===e.state.selectedAppointment.date.length&&(o=D()().tz("America/Bogota").format("YYYY-MM-DD")<D.a.unix(e.state.selectedAppointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD"),l=D()().tz("America/Bogota").format("YYYY-MM-DD")>D.a.unix(e.state.selectedAppointment.date.substr(0,10)).tz("America/Bogota").format("YYYY-MM-DD")),!0===o)return console.log("...appointment for this visit is in the future...please wait or create a new appointment..."),e.context.setUserAlert("...appointment for this visit is in the future...please wait or create a new appointment..."),void e.setState({isLoading:!1});if(!0===l)return console.log("...appointment for this visit has already gone... please create a new appointment..."),e.context.setUserAlert("...appointment for this visit has already gone... please create a new appointment..."),void e.setState({isLoading:!1});var d={query:'\n      mutation {createVisit(\n        activityId:"'.concat(i,'",\n        appointmentId:"').concat(s,'",\n        visitInput:{\n          title:"').concat(c,'",\n          type:"').concat(r,'",\n          subType:"').concat("",'",\n          followUp:').concat(m,",\n        })\n        {_id,date,time,title,type,subType,followUp,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},\n          consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...create visit success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,showDetails:!0,creatingVisit:!1,selectedVisit:t.data.createVisit,newVisit:t.data.createVisit,otfAppt:!1,menuSelect:"detail",activityA:"createVisit?activityId:".concat(i,",visitId:").concat(t.data.createVisit._id)}),e.logUserActivity({activityId:i,token:n});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllVisits(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteOtfAppointment=function(){console.log("...deleting otf appointment..."),e.context.setUserAlert("...deleting otf appointment..."),e.setState({isLoading:!0});var t=e.context.token,a=e.context.activityId,n=e.state.selectedAppointment._id,i={query:'\n      mutation {deleteAppointmentById(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(n){var i="...delete appointment success!...";n.errors&&(i=n.errors[0].message),n.data.error&&(i=n.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,activityA:"deleteAppointment?activityId:".concat(a,",visitId:").concat(n.data.deleteAppointmentById._id)}),e.logUserActivity({activityId:a,token:t})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.toggleFilter=function(){e.setState({startFilter:!e.state.startFilter})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t}),"detail"===t&&e.state.selectedVisit?e.setState({subMenuState:!0}):e.setState({subMenuState:!1})},e.subMenuSelect=function(t){e.setState({subMenu:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.selectAppointment=function(t){e.setState({selectedAppointment:t})},e.selectCalendarAppointment=function(t){e.setState({selectedAppointment:t.event.extendedProps.props})},e.showDetails=function(t){e.setState({showDetails:!0,selectedVisit:t,overlay:!1,tabKey:"detail",menuSelect:"detail",subMenuState:!0}),e.props.selectVisit(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updateVisit=function(t){console.log("...updating selected visit..."),e.setState({selectedVisit:t}),e.props.selectVisit(t)},e.deleteVisit=function(t){console.log("...deleteing visit..."),e.context.setUserAlert("...deleteing visit..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteVisitById(\n        activityId:"'.concat(n,'",\n        visitId:"').concat(i,'"\n      )\n      {_id,date,time,title,type,subType,\n        patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},\n        consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete visit success!...";t.errors&&(s=t.errors[0].message),t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteVisitById?activityId:".concat(n,",visitId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllVisits({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.parseForCalendar=function(t){console.log("...parsing visits for calendar...");t.map((function(e){return{title:e.title,date:D.a.unix(e.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),props:{_id:e._id,title:e.title,type:e.type,date:D.a.unix(e.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),time:e.time,subType:e.subType}}}));var a,n=[],i=Object(ae.a)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=void 0;12===s.date.length?o=D.a.unix(s.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"):13===s.date.length&&(o=D.a.unix(s.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var l={title:s.title,date:o,props:{_id:s._id,title:s.title,type:s.type,date:o,time:s.time,subType:s.subType}};n.push(l)}}catch(c){i.e(c)}finally{i.f()}e.setState({calendarVisits:n})},e.parseForCalendarAppts=function(t){console.log("...parsing appointments for calendar...");t.map((function(e){return{title:e.title,date:D.a.unix(e.date.substr(0,9)).tz("America/Bogota").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,patient:e.patient}}}));var a,n=[],i=Object(ae.a)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=void 0;12===s.date.length?o=D.a.unix(s.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"):13===s.date.length&&(o=D.a.unix(s.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD"));var l={title:s.title,date:o,props:{_id:s._id,date:o,title:s.title,type:s.type,subType:s.subType,time:s.time,location:s.location,description:s.description,important:s.important,patient:s.patient}};n.push(l)}}catch(c){i.e(c)}finally{i.f()}e.setState({calendarAppointments:n})},e.viewCalendarEvent=function(t){console.log("...viewing calendar visit...");var a=e.state.visits.filter((function(e){return e._id===t.event.extendedProps.props._id}))[0];12===a.date.length&&(a.date=D.a.unix(a.date.substr(0,9)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),13===a.date.length&&(a.date=D.a.unix(a.date.substr(0,10)).add(1,"days").tz("America/Bogota").format("YYYY-MM-DD")),e.setState({overlay:!0,overlayStatus:{type:"calendarVisit",data:a}})},e.dateClick=function(e){console.log("dateClick",e)},e.toggleOverlay=function(){e.setState({overlay:!1})},e.startSublistSearch=function(){e.setState({sublistSearch:!0})},e.cancelSublistSearch=function(){e.setState({sublistSearch:!1}),e.getAllAppointments({activityId:e.context.activityId,token:e.context.token})},e.submitSublistSearchForm=function(t){t.preventDefault(),console.log("...searching appointments..."),e.context.setUserAlert("...searching appointments..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,o=t.target.field.value,l=t.target.query.value,c=!0;"date"!==o&&"inProgress"!==o&&"attended"!==o&&"important"!==o&&"important"!==o||(c=!1),!0===c&&(a={query:'\n        query {getAppointmentsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(o,'",\n          query:"').concat(l,'"\n        )\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),!1===c&&(a={query:'\n      query {getAppointmentsByField(\n        activityId:"'.concat(i,'",\n        field:"').concat(o,'",\n        query:"').concat(l,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...appointment search success!...";!0===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===c&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===c&&(e.setState({isLoading:!1,appointments:t.data.getAppointmentsByFieldRegex,activityA:"getAppointmentsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),e.parseForCalendarAppts(t.data.getAppointmentsByFieldRegex)),!1===c&&(e.setState({isLoading:!1,appointments:t.data.getAppointmentsByField,activityA:"getAppointmentsByField?activityId:".concat(i,",userId:").concat(s)}),e.parseForCalendarAppts(t.data.getAppointmentsByField)),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e.clearSearch=function(){e.setState({searchVisits:null})},e.setAllergyCheck=function(t){e.setState({hasAllergies:t.hasAllergies,hasComorbidities:t.hasComorbidities})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all visits component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&(console.log("!!! We have an admin here !!!"),this.setState({canDelete:!0})),this.props.location.state&&this.props.location.state.visit&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.visit}),this.getAllVisits(e),this.getAllAppointments(e),this.props.selectedVisit&&(console.log("...found existing visit selection... loading..."),this.setState({showDetails:!0,selectedVisit:this.props.selectedVisit})),console.log("Can view visit?",this.context.role),"Doctor"!==this.context.role&&"Nurse"!==this.context.role||(console.log("You can view Visits"),this.setState({canViewVisit:!0}))}}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"getAllVisits",value:function(e){var t=this;console.log("...retrieving all visits..."),this.context.setUserAlert("...retrieving all visits..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllVisits(\n        activityId:"'.concat(n,'"\n      )\n      {_id,date,time,title,type,subType,followUp,\n        patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted}},\n        consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,inspection,palpation,percussion,auscultation,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...visits loaded!...";if(e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),!0===t.state.fromGoLink){var s=e.data.getAllVisits.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,menuSelect:"detail",selectedVisit:s,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(i),t.setState({isLoading:!1,visits:e.data.getAllVisits,activityA:"getAllVisits?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a}),t.parseForCalendar(e.data.getAllVisits)})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllAppointments",value:function(e){var t=this;console.log("...retrieving all appointments..."),this.context.setUserAlert("...retrieving all appointments..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllAppointments(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...appointments loaded...";e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,appointments:e.data.getAllAppointments,activityA:"getAllAppointments?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a}),t.parseForCalendarAppts(e.data.getAllAppointments),t.props.location.state&&t.props.location.state.newVisit&&t.newVisitPatient({dateClick:!1}),t.props.location.state&&t.props.location.state.newVisitDate&&t.newVisitPatient({dateClick:!0})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...patients loaded...";e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,o=D()().tz("America/Bogota").format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(o,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.error&&t.context.setUserAlert(e.data.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe,{state:this.state.sideCol,menuSelect:this.menuSelect,subMenuState:this.state.subMenuState,menu:this.state.menuSelect,subMenu:this.state.subMenu,subMenuSelect:this.subMenuSelect,page:"visit",role:this.context.role,hasAllergies:this.state.hasAllergies,hasComorbidities:this.state.hasComorbidities}),!0===this.state.overlay&&i.a.createElement(V,{status:this.state.overlayStatus,selectCalendarDetails:this.showDetails,toggleOverlay:this.toggleOverlay}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(_.a,{className:"headTopRow"},i.a.createElement("h1",null,"Visits: "),!0===this.state.showDetails&&this.state.selectedVisit&&"detail"===this.state.tabKey&&i.a.createElement("h1",{className:"ul"}," ",this.state.selectedVisit.title," ")),i.a.createElement(_.a,{className:""},this.state.isLoading&&i.a.createElement(T.a,{src:F,className:"loadingGif",fluid:!0}))),i.a.createElement(_.a,{className:""},this.state.visits&&i.a.createElement(A.a,{md:12,className:""},"list"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol tabRowAppt"},!0===this.state.startFilter&&i.a.createElement(A.a,null,i.a.createElement(Ge,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter},"Filter"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn",onClick:this.resetFilter},"Reset")),i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},i.a.createElement(Wt,{filter:this.state.filter,visits:this.state.visits,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteVisit})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a,ce.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"search"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Search"),i.a.createElement(_.a,{className:""},i.a.createElement(Dn,{onConfirm:this.searchVisits,onCancel:this.clearSearch})),i.a.createElement(_.a,null,this.state.searchVisits&&i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter,className:"centered_btn"},"Filter")),!0===this.state.startFilter&&i.a.createElement(A.a,null,i.a.createElement(Ge,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),i.a.createElement(_.a,{className:""},this.state.searchVisits&&i.a.createElement(Wt,{filter:this.state.filter,visits:this.state.searchVisits,authId:this.context.activityId,showDetails:this.showDetails})))),"detail"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol tabColDetail"},!1===this.state.showDetails&&!this.state.selectedVisit&&i.a.createElement("h3",null,"Select a Visit to see details"),!0===this.state.showDetails&&this.state.selectedVisit&&!0===this.state.canViewVisit&&i.a.createElement(Un,{visit:this.state.selectedVisit,updateVisit:this.updateVisit,subMenu:this.state.subMenu,setAllergyCheck:this.setAllergyCheck,hasAllergies:this.hasAllergies,hasComorbidities:this.hasComorbidities}),!0===this.state.showDetails&&this.state.selectedVisit&&!1===this.state.canViewVisit&&i.a.createElement("h3",null,"Only Doctors and Nurses can view visit details!!")),"new"===this.state.menuSelect&&i.a.createElement(A.a,{className:"tabCol"},!1===this.state.creatingVisit&&i.a.createElement(I.a,{variant:"secondary",className:"filterFormBtn",onClick:this.onStartCreateNewVisit},"Create New"),!0===this.state.creatingVisit&&this.state.appointments&&!this.state.selectedAppointment&&i.a.createElement(A.a,{className:""},i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement("h3",null,"Choose an Appointment"),i.a.createElement(I.a,{variant:"secondary",className:"patientSublistSearchBtn",onClick:this.startSublistSearch},"Search")),i.a.createElement(_.a,{className:""},!0===this.state.sublistSearch&&i.a.createElement(Na,{onCancel:this.cancelSublistSearch,onConfirm:this.submitSublistSearchForm})),i.a.createElement(A.a,{className:"subTabCol"},i.a.createElement(ne.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ie.a,{eventKey:"1",title:"list"},i.a.createElement(j,{filter:this.state.filter,appointments:this.state.appointments,authId:this.context.activityId,onSelect:this.selectAppointment,visitPage:!0})),i.a.createElement(ie.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(se.a,{initialView:"dayGridMonth",plugins:[le.a,oe.a],events:this.state.calendarAppointments,eventClick:this.selectCalendarAppointment,dateClick:this.dateClick}))))),!0===this.state.creatingVisit&&this.state.selectedAppointment&&i.a.createElement(_.a,null,i.a.createElement(Ta,{onConfirm:this.submitCreateNewVisitForm,onCancel:this.cancelCreateNewVisit,appointment:this.state.selectedAppointment})),this.state.newVisit&&i.a.createElement(_.a,null,i.a.createElement("h3",null,"Review New Visit ",this.state.newVisit._id)))))))}}]),a}(n.Component));Fn.contextType=E;var Ln=Fn,Vn=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={token:null,activityId:null,role:null,context:n.context,sessionStorageAuth:JSON.parse(sessionStorage.getItem("logInfo")),sessionCookiePresent:!1,passwordResetState:"incomplete",passwordResetMessage:"...",userAlert:null,userAlertArray:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null},n.login=function(e,t,a,i){console.log("...context login..."),n.setState({token:e,activityId:t,role:a,sessionStorageAuth:{token:e,activityId:t,role:a,tokenExpiration:i}}),n.sessionStorageAuth={token:e,activityId:t,role:a,tokenExpiration:i},n.context.token=e,n.context.activityId=t,n.context.role=a,n.userOnline()},n.logout=function(){n.logout2()},n.sendSocketAdminMessage=function(e){n.socket.emit("admin_msg",{msg:e})},n.sendSocketNotification=function(e){var t=e.userId;n.socket.emit("send_notification",{room:"msg_"+t,data:e.data})},n.userOnline=function(){console.log("...domesticating socket client..."),n.socket.emit("notification_subscribe",{user:n.context.activityId,room:"msg_"+n.context.activityId}),"Admin"===n.context.role&&n.socket.emit("admin_subscribe")},n.passwordReset=function(e){e.preventDefault(),console.log("...reset password submission...");var t=e.target.formGridParams.value.split("@"),a=t[1],i=t[0],s=e.target.formGridPassword.value,o={query:'\n          mutation {resetUserPassword(\n            userId:"'.concat(i,'",\n            verification:"').concat(a,'",\n            userInput:{\n              password:"').concat(s,'"\n            })\n            {_id,password,verification{verified}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("passwordReset",e),e.errors?n.setState({passwordResetState:"error",passwordResetMessage:e.errors[0].message+"..if not, try making a new reset request.."}):n.setState({passwordResetState:"complete"})})).catch((function(e){console.log(e),n.setState({passwordResetState:"error",passwordResetMessage:e})}))},n.cancelPasswordReset=function(){n.setState({passwordResetState:"cancelled"})},n.setUserAlert=function(e){var t=e;"Unauthenticated!"===e&&(n.setState({userAlert:"...token expired! Logging you out..."}),n.logout2());var a=Object(l.a)(n.state.userAlertArray);"object"===typeof e&&(t=e.toString(),console.log("non string alert",e,t)),a.push(t),n.setState({userAlert:e}),n.setState({userAlertArray:a})},n.selectUser=function(e){console.log("...updating top-level selected user..."),n.setState({selectedUser:e})},n.selectPatient=function(e){console.log("...updating top-level selected patient..."),n.setState({selectedPatient:e})},n.selectAppointment=function(e){console.log("...updating top-level selected appointment..."),n.setState({selectedAppointment:e})},n.selectVisit=function(e){console.log("...updating top-level selected visit..."),n.setState({selectedVisit:e})},n.sessionStorageAuth=JSON.parse(sessionStorage.getItem("logInfo")),n.socket=x()("http://localhost:9099"),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(console.log("1:",this.socket),console.log("...app component mounted..."),sessionStorage.getItem("logInfo")&&null===this.state.token){console.log("...sessionStorageFound...");var t=JSON.parse(sessionStorage.getItem("logInfo"));this.login(t.token,t.activityId,t.role,t.tokenExpiration)}this.sessionStorageAuth||console.log("...noSessionStorageFound..."),this.socket.emit("unauthorizedClientConnect"),console.log("socket listening...."),this.socket.on("admin_msg",(function(e){console.log("...receiving admin msg client...",e),n(e)})),this.socket.on("receive_notification",(function(e){console.log("...receiving notification client...",e),a(e)}));var a=function(t){e.setState({userAlert:t.msg})},n=function(t){e.setState({userAlert:t.msg.msg})}}},{key:"sendSocketMessage",value:function(e){var t=this,a=e;console.log("sending socket message  ","message",a,"this.socket",this.socket),this.setState({userAlert:"sending socket message  message"+a+"this.socket"+this.socket});var n=null;if(null===this.context.receiver||void 0===this.context.receiver)return console.log("select someone to msg 1st..."),void this.setState({userAlert:"select someone to msg 1st..."});n=this.context.receiver._id,this.socket.emit("send message",{room:"msg"+n,message:a}),this.socket.on("MESSAGE_SENT",(function(e){i(e)}));var i=function(e){t.setState({userAlert:e.msg})}}},{key:"componentWillUnmount",value:function(){console.log("...app component un-mounting...")}},{key:"logout2",value:function(){var e=this;console.log("...logging you out...");var t=this.context.token,a=this.context.activityId,n={query:'\n        query{logout(\n          activityId:"'.concat(a,'")\n        {_id,loggedIn}}\n      ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){e.setState({token:null,activityId:null,role:null,sessionCookiePresent:null,sessionStorageAuth:null}),e.sessionStorageAuth=null,sessionStorage.clear(),e.context={token:null,activityId:null,activityA:null,activityUser:null,role:null,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,sender:null,receiver:null,userAlert:"...",userAlertArray:[],file:null,fancyDate:null,login:e.login,logout:e.logout,setUserAlert:e.setUserAlert,userOnline:e.userOnline},e.setState({userAlert:"...logout success..."})})).catch((function(t){e.setState({userAlert:t})}))}},{key:"render",value:function(){var e=this;return i.a.createElement(p.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(E.Provider,{value:{token:this.state.token,activityId:this.state.activityId,activityA:null,activityUser:null,role:this.state.role,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,sender:null,receiver:null,userAlert:"...",userAlertArray:[],file:null,fancyDate:null,login:this.login,logout:this.logout,setUserAlert:this.setUserAlert,userOnline:this.userOnline}},i.a.createElement(b,{role:this.state.role}),i.a.createElement(f,{authId:this.context.activityId,alert:this.state.userAlert,alertArray:this.state.userAlertArray}),i.a.createElement("main",{className:"main-content"},i.a.createElement(g.d,null,this.state.sessionStorageAuth&&i.a.createElement(g.a,{from:"/login",to:"/home",exact:!0}),this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/home",render:function(e){return i.a.createElement(te,Object.assign({},e,{title:"home"}))}}),this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/profile",render:function(t){return i.a.createElement(Xe,Object.assign({},t,{title:"profile",sendSocketAdminMessage:e.sendSocketAdminMessage,sendSocketNotification:e.sendSocketNotification}))}}),this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/staff",render:function(t){return i.a.createElement(yt,Object.assign({},t,{title:"staff",selectedUser:e.state.selectedUser,selectUser:e.selectUser,sendSocketAdminMessage:e.sendSocketAdminMessage,sendSocketNotification:e.sendSocketNotification}))}}),this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/patients",render:function(t){return i.a.createElement(ga,Object.assign({},t,{title:"patients",selectedPatient:e.state.selectedPatient,selectPatient:e.selectPatient}))}}),this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/appointments",render:function(t){return i.a.createElement(Ia,Object.assign({},t,{title:"appointments",selectedAppointment:e.state.selectedAppointment,selectAppointment:e.selectAppointment}))}}),this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/visits",render:function(t){return i.a.createElement(Ln,Object.assign({},t,{title:"visits",selectedVisit:e.state.selectedVisit,selectVisit:e.selectVisit}))}}),this.state.sessionStorageAuth&&i.a.createElement(g.a,{from:"/",to:"/home",exact:!0}),this.state.sessionStorageAuth&&i.a.createElement(g.a,{from:"*",to:"/home",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/landing",render:function(e){return i.a.createElement(P,Object.assign({},e,{title:"landing"}))}}),!this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/login",render:function(e){return i.a.createElement(at,Object.assign({},e,{title:"login"}))}}),!this.state.sessionStorageAuth&&i.a.createElement(g.b,{path:"/signup",render:function(t){return i.a.createElement(st,Object.assign({},t,{title:"signup",setUserAlert:e.setUserAlert}))}}),i.a.createElement(g.b,{path:"/passwordReset/:params",render:function(t){return i.a.createElement(ct,Object.assign({},t,{passwordReset:e.passwordReset,cancelPasswordReset:e.cancelPasswordReset,resetState:e.state.passwordResetState,message:e.state.passwordResetMessage}))}}),!this.state.sessionStorageAuth&&i.a.createElement(g.a,{from:"/home",to:"/landing",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(g.a,{from:"/",to:"/landing",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(g.a,{from:"*",to:"/landing",exact:!0}))))))}}]),a}(n.Component);Vn.contextType=E;var Pn=Vn;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Pn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},98:function(e,t,a){}},[[775,1,2]]]);
//# sourceMappingURL=main.cae8e3f7.chunk.js.map