(this.webpackJsonpmbj_ent_emr_v2_frontend=this.webpackJsonpmbj_ent_emr_v2_frontend||[]).push([[0],{104:function(e,t,a){},153:function(e,t,a){},155:function(e,t,a){},157:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},253:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){},277:function(e,t,a){},278:function(e,t,a){},354:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){},389:function(e,t){},393:function(e,t,a){},394:function(e,t,a){},428:function(e,t,a){},429:function(e,t,a){},431:function(e,t,a){},432:function(e,t,a){},433:function(e,t){},435:function(e,t){},45:function(e,t,a){},46:function(e,t,a){},475:function(e,t){},476:function(e,t){},606:function(e,t,a){},607:function(e,t,a){},608:function(e,t,a){},609:function(e,t,a){},610:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(74),l=a.n(s),o=(a(353),a(354),a(36)),r=a(37),c=a(39),m=a(38),d=a(15),p=a(58),u=(a.p,a(253),a(18)),g=a(348),h=a(12),y=a(10),v=(a(358),function(e){var t="Alerts shown here";null!==e.alert&&(t='"'+e.alert+'"');var a=Object(n.useState)("alertBoxOpen"),s=Object(u.a)(a,2),l=s[0],o=s[1],r=function(){"alertBoxClosed"===l&&o("alertBoxOpen"),"alertBoxOpen"===l&&o("alertBoxClosed")};return i.a.createElement("div",{className:l},"alertBoxOpen"===l?i.a.createElement(h.a,{icon:y.i,className:"alertIcon",size:"2x",onClick:r}):i.a.createElement(h.a,{icon:y.j,className:"alertIcon",size:"2x",onClick:r}),i.a.createElement(g.a,{variant:"warning"},i.a.createElement("p",{className:"alertBoxText"},t)))}),f=i.a.createContext({token:null,activityId:null,activityA:null,activityUser:null,role:null,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,userAlert:"...",file:null,fancyDate:null,login:function(e,t,a,n){},logout:function(){},setUserAlert:function(e){},userOnline:function(){}}),E=(a(359),function(e){return i.a.createElement(f.Consumer,null,(function(e){return i.a.createElement("header",{className:"main-navigation"},i.a.createElement("div",{className:"main-navigation__logo"},i.a.createElement("h1",null,"MBJ ENT EMR V2.0.1")),i.a.createElement("nav",{className:"main-navigation__items"},i.a.createElement("ul",null,!e.token&&i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,i.a.createElement(d.c,{to:"/landing"},"Landing")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/login"},"Login")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/signup"},"Signup"))),e.token&&i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,i.a.createElement(d.c,{to:"/home"},"Home")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/profile"},"Profile")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/staff"},"Staff")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/patients"},"Patients")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/appointments"},"Appointments")),i.a.createElement("li",null,i.a.createElement(d.c,{to:"/visits"},"Visits")),i.a.createElement("li",null,i.a.createElement("button",{onClick:e.logout},"Logout"))))))}))}),b=a(11),N=a(3),C=a(54),x=a(143),A=a.n(x),I=a(4),T=a(63),S=a(8),k=a(14),w=a(9),D=a(17),F=a.n(D),U=a.p+"static/media/loading.79041449.gif",L=(a(393),void 0),_=function(e){return i.a.createElement("div",{className:"attachmentViewerBg"},i.a.createElement("div",{className:"loadingOverlay"},i.a.createElement(b.a,{className:"overlayCloseRow"},e.toggleOverlay&&"s3"!==e.status.type&&i.a.createElement(I.a,{className:"sidebarButton",variant:"warning",onClick:e.toggleOverlay},"X")),i.a.createElement(C.a,{className:"overlayContainer"},"calendarAppointment"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},e.selectCalendarDetails&&i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Appointment Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon centered_btn",onClick:e.selectCalendarDetails.bind(L,e.status.data)}))),e.status.goLink&&i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(d.b,{className:"centered_btn",to:{pathname:"/appointments",state:{appointment:e.status.data._id}}},i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Appointment Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon centered_btn"}))))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.status.data.patient.name))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.status.data.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement("p",{className:"overlayListGroupItemText"},"Time: ",i.a.createElement("span",{className:"bold"},e.status.data.time))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Location: ",i.a.createElement("span",{className:"bold"},e.status.data.location)),i.a.createElement("p",{className:"overlayListGroupItemText"},"important: ",i.a.createElement("span",{className:"bold"},!0===e.status.data.important?i.a.createElement(h.a,{icon:y.e,className:"listIcon"}):i.a.createElement(h.a,{icon:y.a,className:"listIcon"})))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"type: ",i.a.createElement("span",{className:"bold"},e.status.data.type)),i.a.createElement("p",{className:"overlayListGroupItemText"},"description: ",i.a.createElement("span",{className:"bold"},e.status.data.description)))))),"calendarVisit"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},e.selectCalendarDetails&&i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Visit Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon centered_btn",onClick:e.selectCalendarDetails.bind(L,e.status.data)}))),e.status.goLink&&i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(d.b,{className:"centered_btn",to:{pathname:"/visits",state:{visit:e.status.data._id}}},i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Visit Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.status.data.patient.name))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.status.data.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement("p",{className:"overlayListGroupItemText"},"Time: ",i.a.createElement("span",{className:"bold"},e.status.data.time))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",{className:"overlayListGroupItemText"},"type: ",i.a.createElement("span",{className:"bold"},e.status.data.type)))))),"calendarAttendance"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.status.data.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Status: ",i.a.createElement("span",{className:"bold"},e.status.data.status))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Description: ",i.a.createElement("span",{className:"bold"},e.status.data.description)))))),"calendarLeave"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Type: ",i.a.createElement("span",{className:"bold"},e.status.data.type))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"startDate: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.status.data.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"endDate: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.status.data.endDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,"Description: ",i.a.createElement("span",{className:"bold"},e.status.data.description)))))),"s3"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement(T.a,{src:U,className:"loadingGif",fluid:!0})),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("p",null,e.status.data.action," -ing ",e.status.data.target,"...")))),i.a.createElement(b.a,{className:"overlayRow"})),"dateClickAppointment"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("h5",null,"Create new Appointment for ",e.status.data," ?")),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement(I.a,{variant:"primary",type:"button",className:"loginFormBtn searchBtn",onClick:e.startCreateDateClickAppt},"Create"),i.a.createElement(I.a,{variant:"danger",type:"button",className:"loginFormBtn searchBtn",onClick:e.toggleOverlay},"Cancel"))))),"dateClickVisit"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("h5",null,"To create new Visit for ",e.status.data,", you must select a Patient!")),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement(d.b,{to:{pathname:"/patients",state:{selectPatient:""}}},i.a.createElement(I.a,{variant:"success",type:"button",className:"loginFormBtn searchBtn"},"Select Patient")),i.a.createElement(I.a,{variant:"danger",type:"button",className:"loginFormBtn searchBtn",onClick:e.toggleOverlay},"Cancel"))))),"dateClickAppointmentPatient"===e.status.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"overlayRow"},i.a.createElement(S.a,{className:"overlayListGroup"},i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement("h5",null,"Create new Appointment for "),i.a.createElement("p",null,e.status.data.patient.name," ( ",e.status.data.patient._id," ) "),i.a.createElement("p",null,"on ",e.status.data.date," ?")),i.a.createElement(S.a.Item,{className:"overlayListGroupItem"},i.a.createElement(d.b,{to:{pathname:"/appointments",state:{newAppointmentDate:{date:e.status.data.date,patient:e.status.data.patient}}}},i.a.createElement(I.a,{variant:"primary",className:"searchBtn"},"Create")),i.a.createElement(I.a,{variant:"danger",type:"button",className:"loginFormBtn searchBtn",onClick:e.toggleOverlay},"Cancel"))))))))},P=(a(272),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={role:null,userAlert:"landing page",overlay:!1,overlayStatus:"test",isGuest:!0,context:null},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus}),i.a.createElement(C.a,{className:"landingPageContainer"},i.a.createElement(b.a,{className:"landingPageRow"},i.a.createElement(N.a,{className:"landingPageCol"},i.a.createElement("h1",null," Welcome to MBJ ENT EMR")))))}}]),a}(n.Component)),G=a(5),V=(a(82),void 0),q=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.count,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Username: ",i.a.createElement("span",{className:"bold"},e.patient.username)),i.a.createElement(G.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.patient.role)),i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0!==e.appointmentPage&&e.showDetails&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go to Patient Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon",onClick:e.showDetails.bind(V,e.patient)})),e.homePage&&i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:e.patient._id}}},i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go to Patient Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),!0===e.appointmentPage&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add/Use Patient")))},i.a.createElement(h.a,{icon:y.l,className:"listIcon",onClick:e.onSelect.bind(V,e.patient)})),e.canDelete&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.patient._id))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Regno: ",i.a.createElement("span",{className:"bold"},e.patient.registration.number))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"name: ",i.a.createElement("span",{className:"bold"},e.patient.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"username: ",i.a.createElement("span",{className:"bold"},e.patient.username))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"title: ",i.a.createElement("span",{className:"bold"},e.patient.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.patient.role))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"dob: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.patient.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"age: ",i.a.createElement("span",{className:"bold"},e.patient.age))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"gender: ",i.a.createElement("span",{className:"bold"},e.patient.gender))))),!0===c&&i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(V,e.patient)},"Delete")))))},B=(a(75),function(e){var t=Object.assign({},e.filter),a=e.patients,n=[];"patient"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"patient"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"patient"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"patient"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"patient"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"patient"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"patient"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"patient"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"patient"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"patient"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"patient"===t.field&&"registration.date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.registration.date>t.registration.date?1:-1}))),"patient"===t.field&&"registration.date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.registration.date<t.registration.date?1:-1}))),"patient"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"patient"===t.field&&"active"===t.key&&(n=a.filter((function(e){return e.active===t.value}))),"patient"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(q,{key:s,count:s,patient:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,appointmentPage:e.appointmentPage,homePage:e.homePage,onSelect:e.onSelect})}));return i.a.createElement("ul",{className:"userList"},l)}),R=(a(202),void 0),O=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title)),!e.homePage&&i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type)),!e.homePage&&i.a.createElement(G.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),e.homePage&&i.a.createElement(G.a.Text,{className:"cardText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.appointment.patient._id)),i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0!==e.visitPage&&e.showDetails&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Appointment Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon",onClick:e.showDetails.bind(R,e.appointment)})),e.homePage&&i.a.createElement(d.b,{to:{pathname:"/appointments",state:{appointment:e.appointment._id}}},i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Appointment Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),!0===e.visitPage&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add/Use Appointment")))},i.a.createElement(h.a,{icon:y.d,className:"listIcon",onClick:e.onSelect.bind(R,e.appointment)})),e.canDelete&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.appointment._id))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"time: ",i.a.createElement("span",{className:"bold"},e.appointment.time))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Patient: ",i.a.createElement("span",{className:"bold"},e.appointment.patient.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"checkinTime: ",i.a.createElement("span",{className:"bold"},e.appointment.checkinTime))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"seenTime: ",i.a.createElement("span",{className:"bold"},e.appointment.seenTime))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"location: ",i.a.createElement("span",{className:"bold"},e.appointment.location))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"description: ",i.a.createElement("span",{className:"bold"},e.appointment.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"inProgress: ",i.a.createElement("span",{className:"bold"},e.appointment.inProgress.toString()))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"attended: ",i.a.createElement("span",{className:"bold"},e.appointment.attended.toString()))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"important: ",i.a.createElement("span",{className:"bold"},e.appointment.important.toString()))))),!0===c&&i.a.createElement(b.a,null,e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(R,e.appointment)},"Delete")))))},j=(a(203),function(e){var t=Object.assign({},e.filter),a=e.appointments,n=[];"appointment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"appointment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.location>t.location?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.location<t.location?1:-1}))),"appointment"===t.field&&"important"===t.key&&(n=a.filter((function(e){return e.important===t.value}))),"appointment"===t.field&&"inProgress"===t.key&&(n=a.filter((function(e){return e.inProgress===t.value}))),"appointment"===t.field&&"attended"===t.key&&(n=a.filter((function(e){return e.attended===t.value}))),"appointment"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t),i.a.createElement(O,{key:s,appointment:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,visitPage:e.visitPage,homePage:e.homePage,onSelect:e.onSelect})}));return i.a.createElement("ul",{className:"userList"},l)}),M=(a(273),void 0),z=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Number: ",e.queueSlot.number),i.a.createElement(G.a.Text,{className:"cardText"},"Patient: ",e.queueSlot.patient.name),i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:e.queueSlot.patient._id}}},i.a.createElement(k.a,{key:"left",placement:"left",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("left")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go to Patient Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),i.a.createElement(G.a.Text,{className:"cardText"},"Seen: ",!0===e.queueSlot.seen?i.a.createElement(h.a,{icon:y.e,className:"listIcon"}):i.a.createElement(h.a,{icon:y.a,className:"listIcon"})),i.a.createElement(k.a,{key:"bottom",placement:"bottom",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("bottom")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,!0!==e.queueSlot.seen&&i.a.createElement(I.a,{variant:"outline-success",onClick:e.slotSeen.bind(M,e.queueSlot)},"Seen"),!0===e.queueSlot.seen&&i.a.createElement(I.a,{variant:"outline-success",onClick:e.slotUnseen.bind(M,e.queueSlot)},"Un-See"),i.a.createElement("li",null),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Time: ",e.queueSlot.time)),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Consultant: ",e.queueSlot.consultant.username),i.a.createElement(d.b,{to:{pathname:"/staff",state:{user:e.queueSlot.consultant._id}}},i.a.createElement(k.a,{key:"bottom",placement:"bottom",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("bottom")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Consultant Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"})))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Seen: ",!0===e.queueSlot.seen?i.a.createElement(h.a,{icon:y.e,className:"listIcon"}):i.a.createElement(h.a,{icon:y.a,className:"listIcon"}))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"SeenTime:"),e.queueSlot.seenTime&&i.a.createElement(G.a.Text,{className:"cardText"},e.queueSlot.seenTime)),i.a.createElement("li",null,i.a.createElement(k.a,{key:"right",placement:"right",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("right")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(M,e.queueSlot)},"Delete"))))))))},Y=(a(394),function(e){var t=0,a=e.queueSlots.map((function(a){return t=e.queueSlots.indexOf(a)+1,i.a.createElement(z,{key:t,queueSlot:a,onDelete:e.onDelete,canDelete:e.canDelete,slotSeen:e.slotSeen,slotUnseen:e.slotUnseen})}));return i.a.createElement("ul",{className:"userList"},a)}),K=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2);a[0],a[1];return i.a.createElement("div",{className:"itemDiv"},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Date: ",F.a.unix(e.queue.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(G.a.Text,{className:"cardText"},"Creator: ",e.queue.creator.username),i.a.createElement(Y,{queueSlots:e.queue.slots,slotSeen:e.slotSeen,slotUnseen:e.slotUnseen,onDelete:e.onDelete}))))},J=a(2),H=(a(153),function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Field"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"registration.date"),i.a.createElement("option",null,"registration.number"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"expiryDate"),i.a.createElement("option",null,"referral.date"),i.a.createElement("option",null,"referral.reason"),i.a.createElement("option",null,"referral.physician.name"),i.a.createElement("option",null,"referral.physician.email"),i.a.createElement("option",null,"referral.physician.phone"),i.a.createElement("option",null,"attendingPhysician"),i.a.createElement("option",null,"occupation.role"),i.a.createElement("option",null,"occupation.employer.name"),i.a.createElement("option",null,"occupation.employer.phone"),i.a.createElement("option",null,"occupation.employer.email"),i.a.createElement("option",null,"insurance.company"),i.a.createElement("option",null,"insurance.policyNumber"),i.a.createElement("option",null,"insurance.description"),i.a.createElement("option",null,"insurance.expiryDate"),i.a.createElement("option",null,"insurance.subscriber.company"),i.a.createElement("option",null,"insurance.subscriber.description"),i.a.createElement("option",null,"nextOfKin.name"),i.a.createElement("option",null,"nextOfKin.relation"),i.a.createElement("option",null,"nextOfKin.contact.email"),i.a.createElement("option",null,"nextOfKin.contact.phone"),i.a.createElement("option",null,"nextOfKin.contact.phone2"),i.a.createElement("option",null,"allergies.type"),i.a.createElement("option",null,"allergies.title"),i.a.createElement("option",null,"allergies.description"),i.a.createElement("option",null,"allergies.attachments"),i.a.createElement("option",null,"medication.title"),i.a.createElement("option",null,"medication.type"),i.a.createElement("option",null,"medication.description"),i.a.createElement("option",null,"medication.attachments"),i.a.createElement("option",null,"images.name"),i.a.createElement("option",null,"images.type"),i.a.createElement("option",null,"images.path"),i.a.createElement("option",null,"files.name"),i.a.createElement("option",null,"files.type"),i.a.createElement("option",null,"files.path"),i.a.createElement("option",null,"notes"),i.a.createElement("option",null,"tags"),i.a.createElement("option",null,"loggedIn")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Query"),i.a.createElement(J.a.Control,{type:"text",placeholder:"YYYY-MM-DD"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Search"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))}),Q=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Field"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"registrationNumber"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"loggedIn"),i.a.createElement("option",null,"clientConnected"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"attendance.date"),i.a.createElement("option",null,"attendance.status"),i.a.createElement("option",null,"attendance.description"),i.a.createElement("option",null,"leave.type"),i.a.createElement("option",null,"leave.startDate"),i.a.createElement("option",null,"leave.endDate"),i.a.createElement("option",null,"leave.description"),i.a.createElement("option",null,"images.name"),i.a.createElement("option",null,"images.type"),i.a.createElement("option",null,"images.path"),i.a.createElement("option",null,"files.name"),i.a.createElement("option",null,"files.type"),i.a.createElement("option",null,"files.path"),i.a.createElement("option",null,"notes")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Query"),i.a.createElement(J.a.Control,{type:"text",placeholder:"YYYY-MM-DD"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Search"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},W=(a(104),void 0),X=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.count,className:"userItemLi"},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Username: ",i.a.createElement("span",{className:"bold"},e.user.username)),i.a.createElement(G.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.user.role)),i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!e.appointmentPage&&!e.visitPage&&e.showDetails&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Staff Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon",onClick:e.showDetails.bind(W,e.user)})),e.appointmentPage&&i.a.createElement(d.b,{to:{pathname:"/staff",state:{user:e.user._id}}},i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Staff Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),e.visitPage&&i.a.createElement(d.b,{to:{pathname:"/staff",state:{user:e.user._id}}},i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go To Staff Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),e.selectUser&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Select/Add User")))},i.a.createElement(h.a,{icon:y.l,className:"listIcon",onClick:e.selectUser.bind(W,e.user)})),e.canDelete&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.user._id))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"name: ",i.a.createElement("span",{className:"bold"},e.user.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"username: ",i.a.createElement("span",{className:"bold"},e.user.username))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"title: ",i.a.createElement("span",{className:"bold"},e.user.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"role: ",i.a.createElement("span",{className:"bold"},e.user.role))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"dob: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.user.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"age: ",i.a.createElement("span",{className:"bold"},e.user.age))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"gender: ",i.a.createElement("span",{className:"bold"},e.user.gender))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"loggedIn: ",i.a.createElement("span",{className:"bold"},!0===e.user.loggedIn&&i.a.createElement(h.a,{icon:y.c,className:"listIcon"})," ",!1===e.user.loggedIn&&i.a.createElement(h.a,{icon:y.b,className:"listIcon"})))))),!0===c&&i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(W,e.user)},"Delete")))))},$=(a(92),function(e){var t=Object.assign({},e.filter),a=e.users,n=[];"staff"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"staff"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"staff"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"staff"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"staff"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"staff"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"staff"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"staff"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"staff"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"staff"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"staff"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"staff"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(X,{count:s,user:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,appointmentPage:e.appointmentPage,homePage:e.homePage,visitPage:e.visitPage,selectUser:e.selectUser})}));return i.a.createElement("ul",{className:"userList"},l)}),Z=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={role:null,userAlert:"landing",overlay:!1,overlayStatus:"test",isGuest:!0,context:null,isLoading:!1,seshStore:null,filter:{field:null,key:null,value:null},todayAppointments:null,queue:null,weekImportantAppointments:null,recentPatients:null,queueToday:null,addingQueueSlot:!1,queueSlotAddStage:null,users:null,patients:null,selectedUser:null,selectedPatient:null,sublistPatientSearch:!1,sublistUserSearch:!1},e.loadHome=function(){var t={token:e.context.token,activityId:e.context.activityId};e.getAppointmentsToday(t),e.getAppointmentsImportantWeek(t),e.getRecentPatients(t),e.getQueueToday(t),e.getAllPatients(t),e.getAllUsers(t)},e.getAppointmentsToday=function(t){console.log("...retrieving todays appointments..."),e.context.setUserAlert("...retrieving todays appointments..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getAppointmentsToday(\n        activityId:"'.concat(n,'")\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...get todays appointments success!...");var a="...get todays appointments success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,todayAppointments:t.data.getAppointmentsToday})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.getAppointmentsImportantWeek=function(t){console.log("...retrieving important appointments for week..."),e.context.setUserAlert("...retrieving important appointments for week..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getAppointmentsImportantNextWeek(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...get week important appointments success!...");var a="...get week important appointments success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,weekImportantAppointments:t.data.getAppointmentsImportantNextWeek})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.getRecentPatients=function(t){console.log("...retrieving recent patients..."),e.context.setUserAlert("...retrieving recent patients..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getRecentPatients(\n        activityId:"'.concat(n,'",\n        amount:7\n      )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...retrieve recent patients success!...");var a="...retrieve recent patients success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,recentPatients:t.data.getRecentPatients})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.getQueueToday=function(t){console.log("...retrieving todays queue..."),e.context.setUserAlert("...retrieving todays queue..."),e.setState({isLoading:!0});var a=t.token,n=t.activityId,i={query:'\n      query {getQueueToday(\n        activityId:"'.concat(n,'"\n      )\n      {_id,date,currentSlot,slots{number,time,patient{_id,username,name},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...retrieve recent patients success!...");var a="...retrieve recent patients success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.getQueueToday})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleOverlay=function(){e.setState({overlay:!1})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.startAddQueueSlot=function(){e.setState({addingQueueSlot:!0,queueSlotAddStage:1})},e.cancelAddQueueSlot=function(){e.setState({addingQueueSlot:!1,queueSlotAddStage:null})},e.createQueue=function(){console.log("...creating new queue..."),e.context.setUserAlert("...creating new queue..."),e.setState({isLoading:!0});var t=e.context.token,a=e.context.activityId,n={query:'\n      mutation {createQueue(\n        activityId:"'.concat(a,'"\n      )\n        {_id,date,currentSlot,slots{number,time,patient{_id,username},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...create queue success!...");var a="...create queue success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.createQueue})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.submitQueueSlotAddPatient=function(t){var a=e.state.queueToday.slots.map((function(e){return e.patient._id})),n=a.includes(t._id);console.log("1:",t),console.log("2:",a),console.log("3:",n),!0===n?(console.log("...this patient is already in the queue!..."),e.context.setUserAlert("...this patient is already in the queue!...")):e.setState({selectPatient:t,queueSlotAddStage:2})},e.submitQueueSlotAddConsultant=function(t){console.log("...creating new queue..."),e.context.setUserAlert("...creating new queue..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.queueToday._id,s=e.state.selectPatient._id,l=t._id;if("Nurse"!==t.role&&"Doctor"!==t.role)return console.log("...please choose a nurse or doctor..."),e.context.setUserAlert("...please choose a nurse or doctor..."),void e.setState({isLoading:!1});var o={query:'\n      mutation {addQueueSlot(\n        activityId:"'.concat(n,'",\n        queueId:"').concat(i,'",\n        patientId:"').concat(s,'",\n        consultantId:"').concat(l,'"\n      )\n      {_id,date,slots{number,time,patient{_id,username,name,lastName},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...add queue slot success!...");var a="...add queue slot success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.addQueueSlot,addingQueueSlot:!1,queueSlotAddStage:null})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.queueSlotSeen=function(t){console.log("...updating queue slot..."),e.context.setUserAlert("...updating queue slot..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.queueToday._id,s=t.number,l={query:'\n      mutation {queueSlotSeen(\n        activityId:"'.concat(n,'",\n        queueId:"').concat(i,'",\n        queueInput:{\n          slotNumber:').concat(s,"\n        })\n        {_id,date,slots{number,time,patient{_id,username,name,lastName},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...update queue slot seen success!...");var a="...update queue slot seen success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.queueSlotSeen})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.queueSlotUnseen=function(t){console.log("...updating queue slot..."),e.context.setUserAlert("...updating queue slot..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.queueToday._id,s=t.number,l={query:'\n      mutation {queueSlotUnseen(\n        activityId:"'.concat(n,'",\n        queueId:"').concat(i,'",\n        queueInput:{\n          slotNumber:').concat(s,"\n        })\n        {_id,date,slots{number,time,patient{_id,username,name,lastName},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...update queue slot unseen success!...");var a="...update queue slot unseen success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.queueSlotUnseen})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.deleteQueSlot=function(t){console.log("...deleting queue slot..."),e.context.setUserAlert("...deleting queue slot..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.queueToday._id,s=t.number,l={query:'\n      mutation {deleteQueueSlot(\n        activityId:"'.concat(n,'",\n        queueId:"').concat(i,'",\n        queueInput:{\n          slotNumber:').concat(s,"\n        })\n        {_id,date,slots{number,time,patient{_id,username,name,lastName},consultant{_id,username,role},seen,seenTime},creator{_id,username,role}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...delete queue slot success!...");var a="...delete queue slot success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({isLoading:!1,queueToday:t.data.deleteQueueSlot})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.startPatientSearch=function(){e.setState({sublistPatientSearch:!0})},e.cancelSublistPatientSearch=function(){e.setState({sublistPatientSearch:!1}),e.getAllPatients({activityId:e.context.activityId,token:e.context.token})},e.submitSublistPatientSearchForm=function(t){t.preventDefault(),console.log("...searching patients..."),e.context.setUserAlert("...searching patients..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,l=t.target.field.value,o=t.target.query.value,r=!0;"active"!==l&&"age"!==l&&"dob"!==l&&"addresses.number"!==l&&"addresses.primary"!==l&&"loggedIn"!==l&&"clientConnected"!==l&&"verification.verified"!==l&&"registration.date"!==l&&"expiryDate"!==l&&"referral.date"!==l&&"insurance.expiryDate"!==l&&"insurance.expiryDate"!==l||(r=!1),!0===r&&(a={query:'\n        query {getPatientsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),!1===r&&(a={query:'\n        query {getPatientsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...patient search success!...";!0===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===r&&e.setState({isLoading:!1,patients:t.data.getPatientsByFieldRegex,activityA:"getPatientsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===r&&e.setState({isLoading:!1,patients:t.data.getPatientsByField,activityA:"getPatientsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.startUserSearch=function(){e.setState({sublistUserSearch:!0})},e.cancelSublistUserSearch=function(){e.setState({sublistUserSearch:!1}),e.getAllUsers({activityId:e.context.activityId,token:e.context.token})},e.submitSublistUserSearchForm=function(t){t.preventDefault(),console.log("...searching users..."),e.context.setUserAlert("...searching users..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,l=t.target.field.value,o=t.target.query.value,r=!0;"age"!==l&&"dob"!==l&&"employmentDate"!==l&&"addresses.number"!==l&&"addresses.primary"!==l&&"loggedIn"!==l&&"clientConnected"!==l&&"verification.verified"!==l&&"attendance.date"!==l&&"leave.startDate"!==l&&"leave.endDate"!==l||(r=!1),console.log("regex",r),!0===r&&(a={query:'\n        query {getUsersByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n      ')}),!1===r&&(a={query:'\n        query {getUsersByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...staff search success!...";!0===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===r&&(e.setState({isLoading:!1,users:t.data.getUsersByFieldRegex,activityA:"getUsersByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByFieldRegex),!1===r&&(e.setState({isLoading:!1,users:t.data.getUsersByField,activityA:"getUsersByField?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByField),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.selectPatient=function(t){console.log("...selecting..."),e.setState({selectedPatient:t})},e.selectUser=function(t){console.log("...selecting..."),e.setState({selectedUser:t})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...home component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getAppointmentsToday(e),this.getAppointmentsImportantWeek(e),this.getRecentPatients(e),this.getQueueToday(e),this.getAllPatients(e),this.getAllUsers(e)}}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var a="...all patients retrieval success!...";e.errors&&(a=e.errors[0].message),e.data.error&&(a=e.data.error),t.context.setUserAlert(a),t.setState({isLoading:!1,patients:e.data.getAllPatients})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...all users retrieval success!...");var a="...all users retrieval success!...";e.errors&&(a=e.errors[0].message),e.data.error&&(a=e.data.error),t.context.setUserAlert(a),t.setState({isLoading:!1,users:e.data.getAllUsers})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),i.a.createElement(C.a,{className:"landingPageContainer"},i.a.createElement(b.a,{className:"landingPageTopRow"},i.a.createElement(I.a,{variant:"secondary",size:"md",onClick:this.loadHome},"Refresh"),this.state.isLoading?i.a.createElement(T.a,{src:U,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,".")),i.a.createElement(b.a,{className:"landingPageRow"},i.a.createElement(N.a,{md:6,className:"landingPageCol"},i.a.createElement("h3",null,"Todays appts"),this.state.todayAppointments&&i.a.createElement(j,{filter:this.state.filter,appointments:this.state.todayAppointments,authId:this.context.activityId,homePage:!0})),i.a.createElement(N.a,{md:6,className:"landingPageCol"},i.a.createElement("h3",null,"Queue"),!this.state.queueToday&&i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{variant:"secondary",onClick:this.createQueue},"New")),this.state.queueToday&&i.a.createElement(i.a.Fragment,null,!0!==this.state.addingQueueSlot&&i.a.createElement(k.a,{key:"right",placement:"right",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("right")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Patient to Queue")))},i.a.createElement(h.a,{icon:y.l,className:"listIcon",onClick:this.startAddQueueSlot})),!0===this.state.addingQueueSlot&&i.a.createElement(I.a,{variant:"danger",onClick:this.cancelAddQueueSlot},"Cancel"),!0===this.state.addingQueueSlot&&1===this.state.queueSlotAddStage&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Adding Queue Slot: Patient"),i.a.createElement(I.a,{variant:"primary",onClick:this.startPatientSearch},"Search"),i.a.createElement(b.a,{className:"patientSubListRow"},!0===this.state.sublistPatientSearch&&i.a.createElement(H,{onCancel:this.cancelSublistPatientSearch,onConfirm:this.submitSublistPatientSearchForm})),i.a.createElement(b.a,{className:"patientSubListRow"},i.a.createElement(B,{filter:this.state.filter,patients:this.state.patients,authId:this.context.activityId,onSelect:this.submitQueueSlotAddPatient,appointmentPage:!0}))),!0===this.state.addingQueueSlot&&2===this.state.queueSlotAddStage&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Adding Queue Slot: Consultant"),i.a.createElement(I.a,{variant:"primary",onClick:this.startUserSearch},"Search"),i.a.createElement(b.a,{className:"patientSubListRow"},!0===this.state.sublistUserSearch&&i.a.createElement(Q,{onCancel:this.cancelSublistUserSearch,onConfirm:this.submitSublistUserSearchForm})),i.a.createElement(b.a,{className:"patientSubListRow"},i.a.createElement($,{filter:this.state.filter,users:this.state.users,authId:this.context.activityId,selectUser:this.submitQueueSlotAddConsultant,homePage:!0}))),i.a.createElement(K,{queue:this.state.queueToday,slotSeen:this.queueSlotSeen,slotUnseen:this.queueSlotUnseen,onDelete:this.deleteQueSlot})))),i.a.createElement(b.a,{className:"landingPageRow"},i.a.createElement(N.a,{md:5,className:"landingPageCol"},i.a.createElement("h3",null,"Week's important"),this.state.weekImportantAppointments&&i.a.createElement(j,{filter:this.state.filter,appointments:this.state.weekImportantAppointments,authId:this.context.activityId,homePage:!0})),i.a.createElement(N.a,{md:4,className:"landingPageCol"},i.a.createElement("h3",null,"Recent patients"),this.state.recentPatients&&i.a.createElement(B,{filter:this.state.filter,patients:this.state.recentPatients,authId:this.context.activityId,homePage:!0})),i.a.createElement(N.a,{md:3,className:"landingPageCol"},i.a.createElement("h3",null,"more stats")))))}}]),a}(n.Component);Z.contextType=f;var ee=Z,te=a(52),ae=a(31),ne=a(49),ie=a(50),se=a(51),le=a(126),oe=(a(155),a(32)),re=a.n(oe),ce=void 0,me=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Town: ",i.a.createElement("span",{className:"bold"},e.address.town)),i.a.createElement(G.a.Text,{className:"cardText"},"Country: ",i.a.createElement("span",{className:"bold"},e.address.country)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"No: ",i.a.createElement("span",{className:"bold"},e.address.number))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Street: ",i.a.createElement("span",{className:"bold"},e.address.street))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Town: ",i.a.createElement("span",{className:"bold"},e.address.town))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"City: ",i.a.createElement("span",{className:"bold"},e.address.city))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Parish: ",i.a.createElement("span",{className:"bold"},e.address.parish))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Country: ",i.a.createElement("span",{className:"bold"},e.address.country))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Primary: ",i.a.createElement("span",{className:"bold"}," ",!0===e.address.primary&&i.a.createElement(h.a,{icon:y.e,className:"listIcon"})," ",!1===e.address.primary&&i.a.createElement(h.a,{icon:y.a,className:"listIcon"})))),e.makePrimary&&i.a.createElement("li",null,i.a.createElement(I.a,{variant:"outline-primary",onClick:e.makePrimary.bind(ce,e.address)},"Set Primary")),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(ce,e.address)},"Delete"))))))))},de=function(e){var t=Object.assign({},e.filter),a=e.addresses,n=[];"address"===t.field&&"number"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.number>t.number?1:-1}))),"address"===t.field&&"number"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.number<t.number?1:-1}))),"address"===t.field&&"street"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.street>t.street?1:-1}))),"address"===t.field&&"street"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.street<t.street?1:-1}))),"address"===t.field&&"town"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.town>t.town?1:-1}))),"address"===t.field&&"town"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.town<t.town?1:-1}))),"address"===t.field&&"city"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.city>t.city?1:-1}))),"address"===t.field&&"city"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.city<t.city?1:-1}))),"address"===t.field&&"parish"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.parish>t.parish?1:-1}))),"address"===t.field&&"parish"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.parish<t.parish?1:-1}))),"address"===t.field&&"country"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.country>t.country?1:-1}))),"address"===t.field&&"country"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.country<t.country?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.postalCode>t.postalCode?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.postalCode<t.postalCode?1:-1}))),"address"===t.field&&"primary"===t.key&&(n=a.filter((function(e){return e.primary===t.value}))),"address"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(me,{key:s,address:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary})}));return i.a.createElement("ul",{className:"addressList"},l)},pe=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.attendance.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(G.a.Text,{className:"cardText"},"Status: ",i.a.createElement("span",{className:"bold"},e.attendance.status)),i.a.createElement(k.a,{key:"right",placement:"right",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("right")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.attendance.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Status: ",i.a.createElement("span",{className:"bold"},e.attendance.status))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.attendance.description))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"right",placement:"right",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("right")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.attendance)},"Delete"))))))))},ue=function(e){var t=Object.assign({},e.filter),a=e.attendance,n=[];"attendance"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.status>t.status?1:-1}))),"attendance"===t.field&&"status"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.status<t.status?1:-1}))),"attendance"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(pe,{key:s,attendance:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"attendanceList"},l)},ge=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Start: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.leave.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.leave.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Start: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.leave.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"End: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.leave.endDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.leave.description))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.leave)},"Delete"))))))))},he=function(e){var t=Object.assign({},e.filter),a=e.leave,n=[];"leave"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"leave"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"leave"===t.field&&"startDate"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.startDate>t.startDate?1:-1}))),"leave"===t.field&&"startDate"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.startDate<t.startDate?1:-1}))),"leave"===t.field&&"endDate"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.endDate>t.endDate?1:-1}))),"leave"===t.field&&"endDate"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.endDate<t.endDate?1:-1}))),"leave"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ge,{key:s,leave:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"leaveList"},l)},ye=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},i.a.createElement("a",{href:e.image.path,target:"_blank",rel:"noopener noreferrer"},e.image.name)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.image)},"Delete"))))))))},ve=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ye,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"imageList"},l)},fe=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},i.a.createElement("a",{href:e.file.path,target:"_blank",rel:"noopener noreferrer"},e.file.name)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.file.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.file.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.file.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.file)},"Delete"))))))))},Ee=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(fe,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"fileList"},l)},be=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.appointment.title)),i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.appointment.type)),i.a.createElement(G.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),i.a.createElement(d.b,{to:{pathname:"/appointments",state:{appointment:e.appointment._id}}},i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go to Appointment Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"id: ",i.a.createElement("span",{className:"bold"},e.appointment._id))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"time: ",i.a.createElement("span",{className:"bold"},e.appointment.time))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"checkinTime: ",i.a.createElement("span",{className:"bold"},e.appointment.checkinTime))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"seenTime: ",i.a.createElement("span",{className:"bold"},e.appointment.seenTime))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"location: ",i.a.createElement("span",{className:"bold"},e.appointment.location))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"description: ",i.a.createElement("span",{className:"bold"},e.appointment.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"inProgress: ",i.a.createElement("span",{className:"bold"},e.appointment.inProgress.toString()))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"attended: ",i.a.createElement("span",{className:"bold"},e.appointment.attended.toString()))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"important: ",i.a.createElement("span",{className:"bold"},e.appointment.important.toString()))))))))},Ne=function(e){var t=Object.assign({},e.filter),a=e.appointments,n=[];"appointment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"appointment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"appointment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"appointment"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"appointment"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"appointment"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.location>t.location?1:-1}))),"appointment"===t.field&&"location"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.location<t.location?1:-1}))),"appointment"===t.field&&"important"===t.key&&(n=a.filter((function(e){return e.important===t.value}))),"appointment"===t.field&&"inProgress"===t.key&&(n=a.filter((function(e){return e.inProgress===t.value}))),"appointment"===t.field&&"attended"===t.key&&(n=a.filter((function(e){return e.attended===t.value}))),"appointment"!==t.field&&(n=a);var s=0,l=n.map((function(e){return s=n.indexOf(e)+1,i.a.createElement(be,{key:s,appointment:e})}));return i.a.createElement("ul",{className:"appointmentList"},l)},Ce=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),!0===e.canDelete&&i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.note)},"Delete")))))},xe=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ce,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},l)},Ae=(a(46),function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"address"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"number"),i.a.createElement("option",null,"street"),i.a.createElement("option",null,"town"),i.a.createElement("option",null,"city"),i.a.createElement("option",null,"parish"),i.a.createElement("option",null,"country"),i.a.createElement("option",null,"postalCode"),i.a.createElement("option",null,"primary")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))}),Ie=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"attendance"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"status"),i.a.createElement("option",null,"date")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Te=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"leave"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"startDate"),i.a.createElement("option",null,"endDate")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Se=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"image"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"link")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},ke=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"file"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"link")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"dangers",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},we=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:!0,readOnly:!0,value:"appointment"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"location"),i.a.createElement("option",null,"important"),i.a.createElement("option",null,"inProgress"),i.a.createElement("option",null,"attended")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},De=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"note"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"note")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Fe=(a(45),function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Update Single Field"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field"),i.a.createElement(J.a.Control,{type:"text",value:e.field}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"New Data"),i.a.createElement(J.a.Control,{type:"text",placeholder:"(Date format = YYYY-MM-DD!!)"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn searchBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))}),Ue=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Address"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"number",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Number * "),i.a.createElement(J.a.Control,{type:"number",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"street",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Street * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"town",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Town"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"city",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address City * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"parish",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Parish"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"none"),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"St. Thomas"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"))),i.a.createElement(J.a.Group,{as:N.a,controlId:"country",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Country * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"postalCode",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address PostalCode"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Le=function(e){var t=Object(n.useState)(new Date),a=Object(u.a)(t,2),s=(a[0],a[1],Object(n.useState)(new Date)),l=Object(u.a)(s,2);l[0],l[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Attendance"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"date",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Date * "),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"status",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Status * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"present/absent"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},_e=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Leave"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"startDate",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Start Date * "),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"endDate",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"End Date * "),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Pe=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Notes"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"notes",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Notes * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"...note,note,note..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ge=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Image"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Image"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Ve=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add File"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},qe=(a(428),void 0),Be=function(e){return i.a.createElement("div",{className:"FloatMenuTop"},"menuProfile"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"all")},"All")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"basic")},"Basic")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"admin")},"Admin")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"address")},"Addresses")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"attendance")},"Attendance")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"leave")},"Leave")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"image")},"Images")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"file")},"Files")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"appointment")},"Appointments")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"note")},"Notes"))),"menuStaff"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"list")},"List")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"search")},"Search")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"detail")},"Detail"))),"menuPatient"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"list")},"List")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"search")},"Search")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"detail")},"Detail")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"new")},"New"))),"menuAppointment"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"list")},"List")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"search")},"Search")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"detail")},"Detail")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"new")},"New"))),"menuVisit"===e.state&&i.a.createElement("ul",{className:"FloatMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"list")},"List")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"search")},"Search")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"detail")},"Detail")),"Nurse"===e.role&&i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"new")},"New")),"Doctor"===e.role&&i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.menuSelect.bind(qe,"new")},"New"))),!0===e.subMenuState&&"patient"===e.page&&i.a.createElement("ul",{className:"FloatSubMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"all")},"All")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"basic")},"Basic")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"comorbidities")},"Comorbidities")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"admin")},"Admin")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"address")},"Address")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"nextOfKin")},"Next-of-Kin")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"allergy")},"Allergy")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"medication")},"Medication")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"image")},"Image")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"file")},"File")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"appointment")},"Appointment")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"visit")},"Visit")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"note")},"Note")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"tag")},"Tag")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"doc")},"Docs"))),!0===e.subMenuState&&"staff"===e.page&&i.a.createElement("ul",{className:"FloatSubMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"all")},"All")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"basic")},"Basic")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"admin")},"Admin")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"address")},"Address")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"attendance")},"Attendance")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"leave")},"Leave")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"image")},"Image")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"file")},"File")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"appointment")},"Appointment")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"note")},"Note"))),!0===e.subMenuState&&"appointment"===e.page&&i.a.createElement("ul",{className:"FloatSubMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"all")},"All")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"basic")},"Basic")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"admin")},"Admin")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"consultant")},"Consultants")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"note")},"Note")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"tag")},"Tag"))),!0===e.subMenuState&&"visit"===e.page&&i.a.createElement("ul",{className:"FloatSubMenuList"},i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"all")},"All")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"basic")},"Basic")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"comorbidities")},"Comorbidities")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"allergy")},"Allergy")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"medication")},"Medication")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"admin")},"Admin")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"consultant")},"Consultants")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"complaint")},"Complaints")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"survey")},"Surveys")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"systematicInquiry")},"Systematic Inquiry")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"vitals")},"Vitals")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"examination")},"Examination")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"investigation")},"Investigation")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"diagnosis")},"Diagnosis")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"treatment")},"Treatment")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"billing")},"Billing")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"vigilance")},"Vigilance")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"image")},"Images")),i.a.createElement("li",null,i.a.createElement(I.a,{variant:"light",onClick:e.subMenuSelect.bind(qe,"file")},"Files"))))},Re=(a(429),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menuProfile",startFilter:!1,selectFilter:null,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"all",adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},calendarAttendance:null,calendarLeave:null,calendarAppointments:null,pocketVars:null,s3State:{action:null,target:null,status:null}},n.submitAddAddressForm=function(e){e.preventDefault(),console.log("...adding address..."),n.context.setUserAlert("...adding address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.number.value,l=e.target.street.value,o=e.target.town.value,r=e.target.city.value,c=e.target.parish.value,m=e.target.country.value,d=e.target.postalCode.value;if(0===s.trim().length||0===l.trim().length||0===r.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var p={query:'\n      mutation {addUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(l,'",\n          addressTown:"').concat(o,'",\n          addressCity:"').concat(r,'",\n          addressParish:"').concat(c,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.addUserAddress,activityA:"addUserAddress?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.activityUser=e.data.addUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAddress=function(e){console.log("...deleting address..."),n.context.setUserAlert("...deleting address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n      mutation {deleteUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'",\n          addressPrimary: ').concat(e.primary,"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.deleteUserAddress,activityA:"deleteUserAddress?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=e.data.deleteUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.setAddressPrimary=function(e){console.log("...setting primary address..."),n.context.setUserAlert("...setting primary address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n      mutation {setUserAddressPrimary(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address set primary success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.setUserAddressPrimary,activityA:"setUserAddressPrimary?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=e.data.setUserAddressPrimary,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddAttendanceForm=function(e){e.preventDefault(),console.log("...adding attendance..."),n.context.setUserAlert("...attendance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.date.value,l=e.target.status.value,o=e.target.description.value;if(0===s.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var r={query:'\n      mutation {addUserAttendance(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          attendanceDate:"').concat(s,'",\n          attendanceStatus:"').concat(l,'",\n          attendanceDescription:"').concat(o,'"\n        })\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.addUserAttendance,activityA:"addUserAttendance?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:e.data.addUserAttendance.attendance,leave:e.data.addUserAttendance.leave,appointments:e.data.addUserAttendance.appointments}),n.context.activityUser=e.data.addUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAttendance=function(e){console.log("...deleting attendance..."),n.context.setUserAlert("...deleting attendance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n        mutation {deleteUserAttendance(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            attendanceDate:"').concat(e.date,'",\n            attendanceStatus:"').concat(e.status,'",\n            attendanceDescription:"').concat(e.description,'"\n          }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.deleteUserAttendance,activityA:"deleteUserAttendance?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:e.data.deleteUserAttendance.attendance,leave:e.data.deleteUserAttendance.leave,appointments:e.data.deleteUserAttendance.appointments}),n.context.activityUser=e.data.deleteUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddLeaveForm=function(e){e.preventDefault(),console.log("...adding leave..."),n.context.setUserAlert("...leave..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.startDate.value,l=e.target.endDate.value,o=e.target.type.value,r=e.target.description.value;if(0===s.trim().length||0===l.trim().length||0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var c={query:'\n      mutation {addUserLeave(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          leaveType:"').concat(o,'",\n          leaveStartDate:"').concat(s,'",\n          leaveEndDate:"').concat(l,'",\n          leaveDescription:"').concat(r,'"\n        }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.addUserLeave,activityA:"addUserLeave?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:e.data.addUserLeave.attendance,leave:e.data.addUserLeave.leave,appointments:e.data.addUserLeave.appointments}),n.context.activityUser=e.data.addUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteLeave=function(e){console.log("...deleting leave..."),n.context.setUserAlert("...deleting leave..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n        mutation {deleteUserLeave(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            leaveType:"').concat(e.type,'",\n            leaveStartDate:"').concat(e.startDate,'",\n            leaveEndDate:"').concat(e.endDate,'",\n            leaveDescription:"').concat(e.description,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.deleteUserLeave,activityA:"deleteUserLeave?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:e.data.addUserLeave.attendance,leave:e.data.addUserLeave.leave,appointments:e.data.addUseLeavce.appointments}),n.context.activityUser=e.data.deleteUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding image..."),n.context.setUserAlert("...image..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,l=n.state.activityUser._id,o=l;n.state.activityUser.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="staff/"+l+"/images";console.log("...file present...");var d=r.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d,t=c+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var g={query:'\n      mutation {addUserImage(\n        activityId:"'.concat(l,'",\n        userId:"').concat(o,'",\n        userInput:{\n          imageName:"').concat(t,'",\n          imageType:"').concat(a,'",\n          imagePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.setState({isLoading:!1,activityUser:e.data.addUserImage,activityA:"addUserImage?activityId:".concat(l,",userId:").concat(o),adding:{state:null,field:null}}),n.context.activityUser=e.data.addUserImage,n.logUserActivity({activityId:l,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteImage=function(e){console.log("...deleting image..."),n.context.setUserAlert("...deleting image..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=(n.state.activityUser.username,e.name,{query:'\n        mutation {deleteUserImage(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            imageName:"').concat(e.name,'",\n            imageType:"').concat(e.type,'",\n            imagePath:"').concat(e.path,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...image delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.setState({isLoading:!1,activityUser:s.data.deleteUserImage,activityA:"deleteUserImage?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=s.data.deleteUserImage,n.logUserActivity({activityId:a,token:t});var o="staff/"+a+"/images",r=e.name,c={bucketName:"mbjentemrstorage",dirName:o,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(r,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding file..."),n.context.setUserAlert("...file..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,l=n.state.activityUser._id,o=l;n.state.activityUser.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="staff/"+l+"/files";console.log("...file present...");var d=r.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d,t=c+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var g={query:'\n      mutation {addUserFile(\n        activityId:"'.concat(l,'",\n        userId:"').concat(o,'",\n        userInput:{\n          fileName:"').concat(t,'",\n          fileType:"').concat(a,'",\n          filePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.setState({isLoading:!1,activityUser:e.data.addUserFile,activityA:"addUserFile?activityId:".concat(l,",userId:").concat(o),adding:{state:null,field:null}}),n.context.activityUser=e.data.addUserFile,n.logUserActivity({activityId:l,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteFile=function(e){console.log("...deleting file..."),n.context.setUserAlert("...deleting file..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=(n.state.activityUser.username,e.name,{query:'\n        mutation {deleteUserFile(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            fileName:"').concat(e.name,'",\n            fileType:"').concat(e.type,'",\n            filePath:"').concat(e.path,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...file delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.setState({isLoading:!1,activityUser:s.data.deleteUserFile,activityA:"deleteUserFile?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=s.data.deleteUserFile,n.logUserActivity({activityId:a,token:t});var o="staff/"+a+"/files",r=e.name,c={bucketName:"mbjentemrstorage",dirName:o,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(r,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding note..."),n.context.setUserAlert("...note..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.notes.value;if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var l={query:'\n      mutation {addUserNotes(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          notes:"').concat(s,'"\n        }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.addUserNotes,activityA:"addUserNotes?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.activityUser=e.data.addUserNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNote=function(e){console.log("...deleting note..."),n.context.setUserAlert("...deleting note..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s={query:'\n        mutation {deleteUserNote(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            note: "').concat(e,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.deleteUserNote,activityA:"deleteUserNote?activityId:".concat(a,",userId:").concat(i)}),n.context.activityUser=e.data.deleteUserNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.state.activityUser._id,i=a,s=e.target.field.value,l=e.target.query.value;if(0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var o={query:'\n      mutation {updateUserSingleField(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(l,'"\n      )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.setState({isLoading:!1,activityUser:e.data.updateUserSingleField,activityA:"updateUserSingleField?activityId:".concat(a,",userId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.activityUser=e.data.updateUserSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.parseForCalendar=function(e){console.log("...parsing profile dates for calendar...");var t=e.attendance.map((function(e){return{title:e.status,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{date:e.date,status:e.status,description:e.description,field:"attendance"}}})),a=e.leave.map((function(e){return{title:e.type,date:F.a.unix(e.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),end:F.a.unix(e.endDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{date:e.date,type:e.type,startDate:e.startDate,endDate:e.endDate,description:e.description,field:"leave"}}}));n.setState({calendarAttendance:t,calendarLeave:a});var i=e.appointments.map((function(e){return{title:e.title,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,field:"appointments"}}}));n.setState({calendarAttendance:t,calendarLeave:a,calendarAppointments:i})},n.viewCalendarEvent=function(e){var t,a=e.event.extendedProps.props;"attendance"===a.field&&(t={date:a.date,status:a.status,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarAttendance",data:t}})),"leave"===a.field&&(t={type:a.type,startDate:a.startDate,endDate:a.endDate,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarLeave",data:t}})),"appointments"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,location:a.location,description:a.description,important:a.important},n.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:t,goLink:!0}}))},n.dateClick=function(e){console.log("dateClick",e)},n.toggleOverlay=function(){n.setState({overlay:!1})},n.socket=A()("http://localhost:9099"),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...MyProfile component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getThisUser(e),this.getPocketVars(e)}}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.context.setUserAlert(e.errors[0].message);else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"getThisUser",value:function(e){var t=this;console.log("...retrieving your profile info..."),this.context.setUserAlert("...retrieving your profile info..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getUserById(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'"\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(a){var s="...profile retrieval success!...";a.errors&&(s=a.errors[0].message),a.data.error&&(s=a.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,activityUser:a.data.getUserById,activityA:"getUserById?activityId:".concat(n,",userId:").concat(i)}),t.context.activityUser=a.data.getUserById,"Admin"===a.data.getUserById.role&&t.setState({canDelete:!0}),t.parseForCalendar({attendance:a.data.getUserById.attendance,leave:a.data.getUserById.leave,appointments:a.data.getUserById.appointments}),t.logUserActivity(e),t.props.sendSocketAdminMessage("".concat(n," just logged in..."))})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,l=F()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(l,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.addUserActivity.error&&t.context.setUserAlert(e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Be,{state:this.state.sideCol,menuSelect:this.menuSelect,role:this.context.role,page:"profile"}),!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(b.a,{className:""},i.a.createElement("h1",{className:""},"My Profile")),i.a.createElement(b.a,{className:""},this.state.isLoading?i.a.createElement(T.a,{src:U,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(b.a,{className:""},this.state.activityUser&&i.a.createElement(N.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(Fe,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"menuProfile"===this.state.sideCol&&i.a.createElement(N.a,null,"all"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol tabColDetail"},i.a.createElement(b.a,{className:"tabRowAll "},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.username),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.role)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.state.activityUser.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.gender),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone2),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit"))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.registrationNumber)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employment Date:"),this.state.activityUser.employmentDate&&i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.state.activityUser.employmentDate.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"employmentDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.code))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Ae,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(Ue,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(de,{filter:this.state.filter,addresses:this.state.activityUser.addresses,authId:this.state.activityUser._id,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Attendance:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(Le,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example",className:"subTabs"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"attendance"===this.state.selectFilter&&i.a.createElement(Ie,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"attendance")},"Filter")),i.a.createElement(ue,{filter:this.state.filter,attendance:this.state.activityUser.attendance,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteAttendance})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Leave:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(_e,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"leave")},"Filter")),!0===this.state.startFilter&&"leave"===this.state.selectFilter&&i.a.createElement(Te,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(he,{filter:this.state.filter,leave:this.state.activityUser.leave,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteLeave})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Se,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ge,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(ve,{filter:this.state.filter,images:this.state.activityUser.images,authId:this.state.activityUser._id,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(ke,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ve,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ee,{filter:this.state.filter,files:this.state.activityUser.files,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteFile}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("p",{className:""},"Appointments:")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(we,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Ne,{filter:this.state.filter,appointments:this.state.activityUser.appointments,authId:this.state.activityUser._id})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(De,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Pe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(xe,{filter:this.state.filter,notes:this.state.activityUser.notes,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteNote}))),i.a.createElement("li",{className:"summaryListItem"})))),"basic"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.username),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.role)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.state.activityUser.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.gender),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.contact.phone2),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")))),"admin"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.registrationNumber)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employment Date:"),this.state.activityUser.employmentDate&&i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.state.activityUser.employmentDate.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"employmentDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.state.activityUser.verification.code)))),"address"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Ae,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(Ue,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(de,{filter:this.state.filter,addresses:this.state.activityUser.addresses,authId:this.state.activityUser._id,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary})),"attendance"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Attendance:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(Le,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example",className:"subTabs"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"attendance")},"Filter")),!0===this.state.startFilter&&"attendance"===this.state.selectFilter&&i.a.createElement(Ie,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(ue,{filter:this.state.filter,attendance:this.state.activityUser.attendance,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteAttendance})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"leave"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Leave:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(_e,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"leave"===this.state.selectFilter&&i.a.createElement(Te,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"leave")},"Filter")),i.a.createElement(he,{filter:this.state.filter,leave:this.state.activityUser.leave,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteLeave})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"image"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Se,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ge,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(ve,{filter:this.state.filter,images:this.state.activityUser.images,authId:this.state.activityUser._id,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage})),"file"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(ke,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ve,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ee,{filter:this.state.filter,files:this.state.activityUser.files,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteFile})),"appointment"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("p",{className:""},"Appointments:")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(we,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Ne,{filter:this.state.filter,appointments:this.state.activityUser.appointments,authId:this.state.activityUser._id})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"note"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(De,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Pe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(xe,{filter:this.state.filter,notes:this.state.activityUser.notes,authId:this.state.activityUser._id,canDelete:this.state.canDelete,onDelete:this.deleteNote})))))))}}]),a}(n.Component));Re.contextType=f;var Oe=Re,je=(a(206),a(277),function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Login"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"username",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Username"),i.a.createElement(J.a.Control,{type:"username",placeholder:"username"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"password",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Password"),i.a.createElement(J.a.Control,{type:"password",placeholder:"Password"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"searchBtn loginFormBtn"},"Login"),i.a.createElement(I.a,{variant:"primary",className:"searchBtn ",onClick:e.onStartVerification},"Verify"),i.a.createElement(I.a,{variant:"secondary",className:"searchBtn loginFormBtn",onClick:e.onStartForgotPassword},"ForgotPassword"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn loginFormBtn"},i.a.createElement(d.c,{to:"/signup"},"Signup")))))}),Me=(a(278),function(e){return i.a.createElement("div",{className:"UpdateFormContainer"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Verify"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{className:"searchInput formGroup",controlId:"type"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"email")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"username",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Username"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"email",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Email"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"code",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Code"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},e.canCancel&&i.a.createElement(I.a,{variant:"danger",className:"formButton",onClick:e.onCancel},"Cancel"),e.canConfirm&&i.a.createElement(I.a,{variant:"primary",className:"formButton",type:"submit"},"Verify"))))}),ze=(a(430),a(431),function(e){return i.a.createElement("div",{className:"CreateFormContainer"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Forgot Password"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"username",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Username"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"email",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Email"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"danger",className:"formButton searchBtn",onClick:e.onCancel},"Cancel"),i.a.createElement(I.a,{variant:"primary",className:"formButton searchBtn",type:"submit"},"Request New Password"))))}),Ye=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={verifying:!1,role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",userSeshStore:!1,user:{},activityA:null,requestingPasswordReset:!1,showForm:"login"},e.submitLoginForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitLoginForm..."),console.log("...submitLoginForm...");var a=t.target.username.value,n=t.target.password.value;if(0!==a.trim().length&&0!==n.trim().length){var i={query:'\n          {login(username:"'.concat(a,'",password:"').concat(n,'")\n          {activityId,role,token,tokenExpiration,error}}')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...login success!...";console.log("...login success...");if(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),t.data.login.error&&(a=t.data.login.error),e.context.setUserAlert(a),""!==t.data.login.token){var n={token:t.data.login.token,activityId:t.data.login.activityId,role:t.data.login.role,tokenExpiration:t.data.login.tokenExpiration};e.context.setUserAlert(a),sessionStorage.setItem("logInfo",JSON.stringify(n)),console.log("...session storage set..."),e.setState({activityA:"login?".concat(n.activityId)}),e.logUserActivity(),e.context.login(t.data.login.token,t.data.login.activityId,t.data.login.role,t.data.login.tokenExpiration)}})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank required fields!!!...")},e.verifyUser=function(t){t.preventDefault(),console.log("...verify user...");var a=t.target.email.value,n=t.target.type.value,i=t.target.code.value,s=t.target.username.value,l={query:'\n        mutation {verifyUser(\n          userInput:{\n            username:"'.concat(s,'",\n            contactEmail:"').concat(a,'",\n            verificationType:"').concat(n,'",\n            verificationCode:"').concat(i,'"\n          }\n        )\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a;t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.context.setUserAlert("Verified...Please try loggin in again.."),e.setState({showForm:"login"})})).catch((function(t){e.context.setUserAlert(t)}))},e.toggleVerification=function(){"verify"===e.state.showForm?e.setState({showForm:"login"}):e.setState({showForm:"verify"})},e.toggleForgotPassword=function(){"forgotPassword"===e.state.showForm?e.setState({showForm:"login"}):e.setState({showForm:"forgotPassword"})},e.requestPasswordReset=function(t){t.preventDefault(),console.log("...requesting password reset..."),e.setState({isLoading:!0});var a=t.target.username.value,n=t.target.email.value,i={query:'\n         mutation {requestPasswordReset(\n           userInput:{\n             username:"'.concat(a,'",\n             contactEmail:"').concat(n,'"\n           })\n           {_id,username,contact{email}verification{verified,type,code}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.requestPasswordReset),t.errors?e.context.setUserAlert(t.errors[0].message):(e.context.setUserAlert("...password reset request sent..."),e.setState({isLoading:!1,requestingPasswordReset:!1}),e.toggleForgotPassword())})).catch((function(t){e.setState({userAlert:t})}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("...login component mounted...")}},{key:"logUserActivity",value:function(){var e=this;console.log("...logUserActivity...");var t=JSON.parse(sessionStorage.getItem("logInfo")),a=t.activityId,n=t.token,i=a,s=this.state.activityA,l=F()().format("YYYY-MM-DD"),o={query:'\n        mutation {addUserActivity(\n          activityId:"'.concat(a,'",userId:"').concat(i,'",\n          userInput:{\n            activityDate:"').concat(l,'",\n            activityRequest:"').concat(s,'"\n          })\n        {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n      ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){t.errors&&e.context.setUserAlert(t.errors[0].message),t.data.addUserActivity.error&&(e.context.setUserAlert(t.data.addUserActivity.error),console.log("...resDataError...",t.data.addUserActivity.error))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(C.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus}),"login"===this.state.showForm&&i.a.createElement(b.a,{className:"authPageContainerRow"},i.a.createElement(N.a,{className:"authPageContainerCol"},i.a.createElement(je,{onConfirm:this.submitLoginForm,onStartForgotPassword:this.toggleForgotPassword,onStartVerification:this.toggleVerification}))),"verify"===this.state.showForm&&i.a.createElement(b.a,{className:"authPageContainerRow"},i.a.createElement(N.a,{className:"authPageContainerCol"},i.a.createElement(Me,{canCancel:!0,canConfirm:!0,onCancel:this.toggleVerification,onConfirm:this.verifyUser}))),"forgotPassword"===this.state.showForm&&i.a.createElement(b.a,{className:"authPageContainerRow"},i.a.createElement(N.a,{className:"authPageContainerCol"},i.a.createElement(ze,{onCancel:this.toggleForgotPassword,onConfirm:this.requestPasswordReset}))))}}]),a}(n.Component);Ye.contextType=f;var Ke=Ye,Je=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Signup"),i.a.createElement("div",{className:"formDivider1"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"email"},i.a.createElement(J.a.Label,{className:"formLabel"},"Email Address"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"password"},i.a.createElement(J.a.Label,{className:"formLabel"},"Password"),i.a.createElement(J.a.Control,{type:"password",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"role"},i.a.createElement(J.a.Label,{className:"formLabel"},"Role"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Staff"),i.a.createElement("option",null,"Nurse"),i.a.createElement("option",null,"Doctor"))),i.a.createElement(J.a.Group,{as:N.a,controlId:"title"},i.a.createElement(J.a.Label,{className:"formLabel"},"Title"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Mr"),i.a.createElement("option",null,"Mrs"),i.a.createElement("option",null,"Ms"),i.a.createElement("option",null,"Dr")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"name"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"username"},i.a.createElement(J.a.Label,{className:"formLabel"},"Username"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"dob"},i.a.createElement(J.a.Label,{className:"formLabel"},"D.O.B"),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"gender"},i.a.createElement(J.a.Label,{className:"formLabel"},"Gender"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Female"),i.a.createElement("option",null,"Male"),i.a.createElement("option",null,"Prefer Not to Say")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"phone"},i.a.createElement(J.a.Label,{className:"formLabel"},"Phone"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"phone2"},i.a.createElement(J.a.Label,{className:"formLabel"},"Phone #2"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider3"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"addressNumber"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Number"),i.a.createElement(J.a.Control,{type:"number",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"addressStreet"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Street"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"addressTown"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Town"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"addressCity"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address City"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"addressParish"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Parish"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"none"),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"St. Thomas"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"))),i.a.createElement(J.a.Group,{as:N.a,controlId:"addressCountry"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Country"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"addressPostalCode"},i.a.createElement(J.a.Label,{className:"formLabel"},"Address Postalcode"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"loginFormBtn searchBtn"},"Signup"),i.a.createElement(I.a,{variant:"warning",className:"loginFormBtn searchBtn"},i.a.createElement(d.c,{to:"/login"},"Login")))))},He=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={verifying:!1,role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",userSeshStore:!1,user:{},activityA:null,requestingPasswordReset:!1,signupStatus:null,invited:!1},e.submitSignupForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitSignupForm..."),console.log("...submitSignupForm...");var a=t.target.email.value,n=t.target.password.value,i=t.target.role.value,s=t.target.name.value,l=t.target.title.value,o=t.target.username.value,r=t.target.dob.value,c=t.target.gender.value,m=t.target.phone.value,d=t.target.phone2.value,p=t.target.addressNumber.value,u=t.target.addressStreet.value,g=t.target.addressTown.value,h=t.target.addressCity.value,y=t.target.addressParish.value,v=t.target.addressCountry.value,f=t.target.addressPostalCode.value;if(0!==a.trim().length&&0!==n.trim().length&&0!==i.trim().length&&0!==s.trim().length&&0!==o.trim().length&&0!==r.trim().length&&0!==c.trim().length&&0!==m.trim().length&&0!==d.trim().length&&0!==p.trim().length&&0!==u.trim().length&&0!==g.trim().length&&0!==h.trim().length&&0!==y.trim().length&&0!==v.trim().length&&0!==f.trim().length){var E={query:'\n            mutation {createUser(\n              userInput:{\n                password:"'.concat(n,'",\n                title:"').concat(l,'",\n                name:"').concat(s,'",\n                role:"').concat(i,'",\n                username:"').concat(o,'",\n                dob:"').concat(r,'",\n                gender:"').concat(c,'",\n                contactPhone:"').concat(m,'",\n                contactPhone2:"').concat(d,'",\n                contactEmail:"').concat(a,'",\n                addressNumber:').concat(p,',\n                addressStreet:"').concat(u,'",\n                addressTown:"').concat(g,'",\n                addressCity:"').concat(h,'",\n                addressParish:"').concat(y,'",\n                addressCountry:"').concat(v,'",\n                addressPostalCode:"').concat(f,'"\n              }\n            )\n            {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(E),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...Signup success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),a="...verificationCode: "+t.data.createUser.verification.code,e.context.setUserAlert(a),e.setState({signupStatus:"success"})})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank required fields!!!...")},e.submitInviteForm=function(t){t.preventDefault(),console.log("...checking inviteCode..."),e.context.setUserAlert("...checking inviteCode...");var a=t.target.inviteCode.value,n={query:'\n            query {verifyInvitation(challenge:"'.concat(a,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...Signup success!...";t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),"matched"===t.data.verifyInvitation?(e.setState({invited:!0}),e.context.setUserAlert("...invite code accepted...")):e.context.setUserAlert("...invite code rejected. Check & try again...")})).catch((function(t){e.context.setUserAlert(t)}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("...signup component mounted...")}},{key:"render",value:function(){return i.a.createElement(C.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus}),i.a.createElement(b.a,{className:"authPageContainerRow"},i.a.createElement(N.a,{className:"authPageContainerCol"},!0!==this.state.invited&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{onSubmit:this.submitInviteForm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"inviteCode"},i.a.createElement(J.a.Label,null,"inviteCode"),i.a.createElement(J.a.Control,{type:"text",placeholder:"inviteCode"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Submit")))),"success"!==this.state.signupStatus&&!0===this.state.invited&&i.a.createElement(Je,{onConfirm:this.submitSignupForm}),"success"===this.state.signupStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"SignUp Success...Proceed to Login"),i.a.createElement(I.a,{variant:"warning",className:"loginFormBtn"},i.a.createElement(d.c,{to:"/login"},"Login"))))))}}]),a}(n.Component);He.contextType=f;var Qe=He,We=function(e){return i.a.createElement("div",{className:"UpdateFormContainer"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Reset Password"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"verificationCode",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"verification Code"),i.a.createElement(J.a.Control,{type:"text",value:e.verf}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"password",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Password"),i.a.createElement(J.a.Control,{type:"password",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"primary",className:"formButton",type:"submit"},"Reset"),i.a.createElement(I.a,{variant:"danger",className:"formButton",onClick:e.onCancel},i.a.createElement(d.c,{to:"/landing"},"Cancel")))))},Xe=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={role:null,userAlert:null,overlay:!1,overlayStatus:"test",activeTab:"choose",passwordResetStatus:null,user:{},activityA:null,activityId:null,verfCode:null},e.submitResetPasswordForm=function(t){t.preventDefault(),e.context.setUserAlert("...submitSignupForm..."),console.log("...submitSignupForm...");var a=t.target.password.value,n=e.state.verfCode,s=e.state.activityId;if(0!==a.trim().length&&0!==n.trim().length){var l={query:'\n            mutation {resetUserPassword(\n              userId:"'.concat(s,'",\n              userInput:{\n                verificationCode:"').concat(n,'",\n                password:"').concat(a,'"\n              })\n            {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){console.log("...resData...",t.data.resetUserPassword);var a="...Password Reset Success!...";return t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error),e.context.setUserAlert(a),e.setState({passwordResetStatus:"success"}),i.a.createElement(p.a,{to:"/login"})})).catch((function(t){e.context.setUserAlert(t)}))}else e.context.setUserAlert("...blank required fields!!!...")},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("...password component mounted..."),console.log(),this.setState({activityId:this.props.location.pathname.split("@")[0].split("/")[2],verfCode:this.props.location.pathname.split("@")[1]})}},{key:"render",value:function(){return i.a.createElement(C.a,{className:"authPageContainer"},!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus}),i.a.createElement(b.a,{className:"authPageContainerRow"},i.a.createElement(N.a,{className:"authPageContainerCol"},"success"!==this.state.passwordResetStatus&&i.a.createElement(We,{onConfirm:this.submitResetPasswordForm,verf:this.state.verfCode}),"success"===this.state.passwordResetStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Reset Success...Proceed to Login")))))}}]),a}(n.Component);Xe.contextType=f;var $e=Xe,Ze=function(e){var t=Object.assign({},e.filter),a=e.users,n=[];"staff"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"staff"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"staff"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"staff"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"staff"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"staff"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"staff"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"staff"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"staff"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"staff"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"staff"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"staff"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"staff"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"staff"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(X,{key:s,user:t,canDelete:e.canDelete,showDetails:e.showDetails})}));return i.a.createElement("ul",{className:"userList"},l)},et=(a(157),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",startFilter:!1,selectFilter:null,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"basic",adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,calendarAttendance:null,calendarLeave:null,calendarAppointments:null,pocketVars:null,s3State:{action:null,target:null,status:null}},n.submitAddAddressForm=function(e){e.preventDefault(),console.log("...adding address..."),n.context.setUserAlert("...adding address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.number.value,l=e.target.street.value,o=e.target.town.value,r=e.target.city.value,c=e.target.parish.value,m=e.target.country.value,d=e.target.postalCode.value;if(0===s.trim().length||0===l.trim().length||0===r.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var p={query:'\n      mutation {addUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(l,'",\n          addressTown:"').concat(o,'",\n          addressCity:"').concat(r,'",\n          addressParish:"').concat(c,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserAddress),n.setState({isLoading:!1,selectedUser:e.data.addUserAddress,activityA:"addUserAddress?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAddress=function(e){console.log("...deleting address..."),n.context.setUserAlert("...deleting address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n      mutation {deleteUserAddress(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'",\n          addressPrimary: ').concat(e.primary,"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserAddress),n.setState({isLoading:!1,selectedUser:e.data.deleteUserAddress,activityA:"deleteUserAddress?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.deleteUserAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.setAddressPrimary=function(e){console.log("...setting primary address..."),n.context.setUserAlert("...setting primary address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n      mutation {setUserAddressPrimary(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address set primary success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.setUserAddressPrimary),n.setState({isLoading:!1,selectedUser:e.data.setUserAddressPrimary,activityA:"setUserAddressPrimary?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.setUserAddressPrimary,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddAttendanceForm=function(e){e.preventDefault(),console.log("...adding attendance..."),n.context.setUserAlert("...attendance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.date.value,l=e.target.status.value,o=e.target.description.value.replace(/\n/g," ");if(0===s.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var r={query:'\n      mutation {addUserAttendance(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          attendanceDate:"').concat(s,'",\n          attendanceStatus:"').concat(l,'",\n          attendanceDescription:"').concat(o,'"\n        })\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserAttendance),n.setState({isLoading:!1,selectedUser:e.data.addUserAttendance,activityA:"addUserAttendance?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.addUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAttendance=function(e){console.log("...deleting attendance..."),n.context.setUserAlert("...deleting attendance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserAttendance(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            attendanceDate:"').concat(e.date,'",\n            attendanceStatus:"').concat(e.status,'",\n            attendanceDescription:"').concat(e.description,'"\n          }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...attendance delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserAttendance),n.setState({isLoading:!1,selectedUser:e.data.deleteUserAttendance,activityA:"deleteUserAttendance?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.deleteUserAttendance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddLeaveForm=function(e){e.preventDefault(),console.log("...adding leave..."),n.context.setUserAlert("...leave..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.startDate.value,l=e.target.endDate.value,o=e.target.type.value,r=e.target.description.value.replace(/\n/g," ");if(0===s.trim().length||0===l.trim().length||0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var c={query:'\n      mutation {addUserLeave(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          leaveType:"').concat(o,'",\n          leaveStartDate:"').concat(s,'",\n          leaveEndDate:"').concat(l,'",\n          leaveDescription:"').concat(r,'"\n        }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserLeave),n.setState({isLoading:!1,selectedUser:e.data.addUserLeave,activityA:"addUserLeave?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.addUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteLeave=function(e){console.log("...deleting leave..."),n.context.setUserAlert("...deleting leave..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserLeave(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            leaveType:"').concat(e.type,'",\n            leaveStartDate:"').concat(e.startDate,'",\n            leaveEndDate:"').concat(e.endDate,'",\n            leaveDescription:"').concat(e.description,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...leave delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserLeave),n.setState({isLoading:!1,selectedUser:e.data.deleteUserLeave,activityA:"deleteUserLeave?activityId:".concat(a,",userId:").concat(i)}),n.parseForCalendar({attendance:n.props.user.attendance,leave:n.props.user.leave,appointments:n.props.user.appointments}),n.context.selectedUser=e.data.deleteUserLeave,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding image..."),n.context.setUserAlert("...image..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,l=n.context.activityId,o=n.props.user._id;n.props.user.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="staff/"+o+"/images",d=r.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d,t=c+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var g={query:'\n      mutation {addUserImage(\n        activityId:"'.concat(l,'",\n        userId:"').concat(o,'",\n        userInput:{\n          imageName:"').concat(t,'",\n          imageType:"').concat(a,'",\n          imagePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.addUserImage),n.setState({isLoading:!1,selectedUser:e.data.addUserImage,activityA:"addUserImage?activityId:".concat(l,",userId:").concat(o),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserImage,n.logUserActivity({activityId:l,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteImage=function(e){console.log("...deleting image..."),n.context.setUserAlert("...deleting image..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=(n.props.user.username,e.name,{query:'\n        mutation {deleteUserImage(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            imageName:"').concat(e.name,'",\n            imageType:"').concat(e.type,'",\n            imagePath:"').concat(e.path,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...image delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateUser(s.data.deleteUserImage),n.setState({isLoading:!1,selectedUser:s.data.deleteUserImage,activityA:"deleteUserImage?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=s.data.deleteUserImage,n.logUserActivity({activityId:a,token:t});var o="staff/"+i+"/images",r=e.name,c={bucketName:"mbjentemrstorage",dirName:o,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(r,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding file..."),n.context.setUserAlert("...file..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,l=n.context.activityId,o=n.props.user._id;n.props.user.username;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="staff/"+o+"/files";console.log("...file present...");var d=r.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d,t=c+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var g={query:'\n      mutation {addUserFile(\n        activityId:"'.concat(l,'",\n        userId:"').concat(o,'",\n        userInput:{\n          fileName:"').concat(t,'",\n          fileType:"').concat(a,'",\n          filePath:"').concat(i,'"\n        })\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateUser(e.data.addUserFile),n.setState({isLoading:!1,selectedUser:e.data.addUserFile,activityA:"addUserFile?activityId:".concat(l,",userId:").concat(o),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserFile,n.logUserActivity({activityId:l,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteFile=function(e){console.log("...deleting file..."),n.context.setUserAlert("...deleting file..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=(n.props.user.username,e.name,{query:'\n        mutation {deleteUserFile(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            fileName:"').concat(e.name,'",\n            fileType:"').concat(e.type,'",\n            filePath:"').concat(e.path,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...file delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateUser(s.data.deleteUserFile),n.setState({isLoading:!1,selectedUser:s.data.deleteUserFile,activityA:"deleteUserFile?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=s.data.deleteUserFile,n.logUserActivity({activityId:a,token:t});var o="staff/"+i+"/files",r=e.name,c={bucketName:"mbjentemrstorage",dirName:o,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(r,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding note..."),n.context.setUserAlert("...adding note..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.notes.value;if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});s=s.replace(/\n/g,"");var l={query:'\n      mutation {addUserNotes(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        userInput:{\n          notes:"').concat(s,'"\n        }){_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.addUserNotes),n.setState({isLoading:!1,selectedUser:e.data.addUserNotes,activityA:"addUserNotes?activityId:".concat(a,",userId:").concat(i),adding:{state:null,field:null}}),n.context.selectedUser=e.data.addUserNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNote=function(e){console.log("...deleting note..."),n.context.setUserAlert("...deleting note..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s={query:'\n        mutation {deleteUserNote(\n          activityId:"'.concat(a,'",\n          userId:"').concat(i,'",\n          userInput:{\n            note: "').concat(e,'"\n          })\n          {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.deleteUserNote),n.setState({isLoading:!1,selectedUser:e.data.deleteUserNote,activityA:"deleteUserNote?activityId:".concat(a,",userId:").concat(i)}),n.context.selectedUser=e.data.deleteUserNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.user._id,s=e.target.field.value,l=e.target.query.value;if(0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var o={query:'\n      mutation {updateUserSingleField(\n        activityId:"'.concat(a,'",\n        userId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(l,'"\n      )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateUser(e.data.updateUserSingleField),n.setState({isLoading:!1,selectedUser:e.data.updateUserSingleField,activityA:"updateUserSingleField?activityId:".concat(a,",userId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedUser=e.data.updateUserSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.parseForCalendar=function(e){console.log("...parsing staff dates for calendar...");var t=e.attendance.map((function(e){return{title:e.status,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{date:e.date,status:e.status,description:e.description,field:"attendance"}}})),a=e.leave.map((function(e){return{title:e.type,date:F.a.unix(e.startDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),end:F.a.unix(e.endDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{date:e.date,type:e.type,startDate:e.startDate,endDate:e.endDate,description:e.description,field:"leave"}}}));n.setState({calendarAttendance:t,calendarLeave:a});var i=e.appointments.map((function(e){return{title:e.title,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,field:"appointments",patient:e.patient}}}));n.setState({calendarAttendance:t,calendarLeave:a,calendarAppointments:i})},n.viewCalendarEvent=function(e){var t,a=e.event.extendedProps.props;"attendance"===a.field&&(t={date:a.date,status:a.status,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarAttendance",data:t}})),"leave"===a.field&&(t={type:a.type,startDate:a.startDate,endDate:a.endDate,description:a.description},n.setState({overlay:!0,overlayStatus:{type:"calendarLeave",data:t}})),"appointments"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,location:a.location,description:a.description,important:a.important,patient:a.patient},n.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:t,goLink:!0}}))},n.dateClick=function(e){console.log("dateClick",e)},n.toggleOverlay=function(){n.setState({overlay:!1})},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...staff details component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getPocketVars(e)}"Admin"===this.context.role&&this.setState({canDelete:!0}),this.setState({selectedUser:this.context.selectedUser,menuSelect:this.props.subMenu}),this.parseForCalendar({attendance:this.props.user.attendance,leave:this.props.user.leave,appointments:this.props.user.appointments})}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){t.setState({userAlert:e})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,l=F()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(l,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.addUserActivity.error&&t.context.setUserAlert(e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),i.a.createElement("div",{className:"detailContainer"},i.a.createElement(b.a,{className:""},!this.props.user&&i.a.createElement("h3",null,"...")),i.a.createElement(b.a,{className:""},this.props.user&&i.a.createElement(N.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(Fe,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"all"===this.props.subMenu&&i.a.createElement(b.a,{className:"tabRowAll"},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.title),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.name),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.username),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.role),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.user.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.gender),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.email),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone2),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit"))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.registrationNumber)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employment Date:"),this.props.user.employmentDate&&i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.user.employmentDate.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"employmentDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.code))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Ae,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(Ue,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(de,{filter:this.state.filter,addresses:this.props.user.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Attendance:")),i.a.createElement(N.a,{className:"subTabCol"},!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(Le,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"attendance"===this.state.selectFilter&&i.a.createElement(Ie,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"attendance")},"Filter")),i.a.createElement(ue,{filter:this.state.filter,attendance:this.props.user.attendance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAttendance})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Leave:")),i.a.createElement(N.a,{className:"subTabCol"},!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(_e,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"leave"===this.state.selectFilter&&i.a.createElement(Te,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"leave")},"Filter")),i.a.createElement(he,{filter:this.state.filter,leave:this.props.user.leave,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteLeave})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Images:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Se,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ge,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(ve,{filter:this.state.filter,images:this.props.user.images,authId:this.context.activityId,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Files:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(ke,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ve,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ee,{filter:this.state.filter,files:this.props.user.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Appointments:")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(we,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Ne,{filter:this.state.filter,appointments:this.props.user.appointments,authId:this.context.activityId})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Notes:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(De,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Pe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(xe,{filter:this.state.filter,notes:this.props.user.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))))),"basic"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.title),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.name),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.username),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.role),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.user.dob.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.gender),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.email),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.contact.phone2),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")))),"admin"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reg No:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.registrationNumber)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employment Date:"),this.props.user.employmentDate&&i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.user.employmentDate.substr(0,9)).add(1,"days").format("YYYY-MM-DD")),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"employmentDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.user.verification.code)))),"address"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),!0===this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Ae,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(Ue,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(de,{filter:this.state.filter,addresses:this.props.user.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary})),"attendance"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Attendance:")),i.a.createElement(N.a,{className:"subTabCol"},!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",onClick:this.startAdd.bind(this,"attendance")},"Add")),!0===this.state.adding.state&&"attendance"===this.state.adding.field&&i.a.createElement(Le,{onConfirm:this.submitAddAttendanceForm,onCancel:this.cancelAdd}),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"attendance"===this.state.selectFilter&&i.a.createElement(Ie,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"attendance")},"Filter")),i.a.createElement(ue,{filter:this.state.filter,attendance:this.props.user.attendance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAttendance})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAttendance,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"leave"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Leave:")),i.a.createElement(N.a,{className:"subTabCol"},!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",onClick:this.startAdd.bind(this,"leave")},"Add")),!0===this.state.adding.state&&"leave"===this.state.adding.field&&i.a.createElement(_e,{onConfirm:this.submitAddLeaveForm,onCancel:this.cancelAdd}),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"leave"===this.state.selectFilter&&i.a.createElement(Te,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"leave")},"Filter")),i.a.createElement(he,{filter:this.state.filter,leave:this.props.user.leave,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteLeave})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarLeave,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"image"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Images:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Se,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ge,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(ve,{filter:this.state.filter,images:this.props.user.images,authId:this.context.activityId,showListDetails:this.showListDetails,canDelete:this.state.canDelete,onDelete:this.deleteImage})),"file"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Files:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(ke,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ve,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ee,{filter:this.state.filter,files:this.props.user.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile})),"appointment"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Appointments:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter},"Filter")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},!0===this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(we,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Ne,{filter:this.state.filter,appointments:this.props.user.appointments,authId:this.context.activityId})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"note"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Notes:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),!0===this.state.canDelete&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(De,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Pe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(xe,{filter:this.state.filter,notes:this.props.user.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))))))}}]),a}(n.Component));et.contextType=f;var tt=et,at=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"staff"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"loggedIn")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},nt=(a(432),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,searchUsers:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menuStaff",startFilter:!1,selectFilter:null,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"list",subMenuState:!1,subMenu:"all",adding:{state:null,field:null},showDetails:!1,selectedUser:null,canDelete:!1,fromGoLink:null,goLinkId:null,tabKey:"list"},e.searchUsers=function(t){t.preventDefault(),console.log("...searching users..."),e.context.setUserAlert("...searching users..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,l=t.target.field.value,o=t.target.query.value,r=!0;"age"!==l&&"dob"!==l&&"employmentDate"!==l&&"addresses.number"!==l&&"addresses.primary"!==l&&"loggedIn"!==l&&"clientConnected"!==l&&"verification.verified"!==l&&"attendance.date"!==l&&"leave.startDate"!==l&&"leave.endDate"!==l||(r=!1),console.log("regex",r),!0===r&&(a={query:'\n        query {getUsersByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n      ')}),!1===r&&(a={query:'\n        query {getUsersByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...staff search success!...";!0===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===r&&(e.setState({isLoading:!1,searchUsers:t.data.getUsersByFieldRegex,activityA:"getUsersByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByFieldRegex),!1===r&&(e.setState({isLoading:!1,searchUsers:t.data.getUsersByField,activityA:"getUsersByField?activityId:".concat(i,",userId:").concat(s)}),e.context.activityUser=t.data.getUsersByField),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.toggleFilter=function(){e.setState({startFilter:!e.state.startFilter})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t}),"detail"===t&&e.state.selectedUser?e.setState({subMenuState:!0}):e.setState({subMenuState:!1})},e.subMenuSelect=function(t){e.setState({subMenu:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedUser:t,tabKey:"detail",menuSelect:"detail",subMenuState:!0}),e.props.selectUser(t),e.props.sendSocketNotification({userId:t._id,data:"".concat(e.context.activityId," is watching you...")})},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updateUser=function(t){console.log("...updating user..."),e.setState({selectedUser:t}),e.props.selectUser(t)},e.deleteUser=function(t){console.log("...deleteing user...",t),e.context.setUserAlert("...deleteing user..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteUserById(\n        activityId:"'.concat(n,'",\n        userId:"').concat(i,'"\n      )\n      {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete user success!...";t.errors&&(s=t.errors[0].message),t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteUserById?activityId:".concat(n,",userId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllUsers({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e.clearSearch=function(){e.setState({searchUsers:null})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all users component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.props.location.state&&this.props.location.state.user&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.user}),this.getAllUsers(e),this.props.selectedUser&&(console.log("...found existing user selection... loading..."),this.setState({showDetails:!0,selectedUser:this.props.selectedUser}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...all users retrieval success!...");var s="...all users retrieval success!...";if(e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),!0===t.state.fromGoLink){var l=e.data.getAllUsers.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,selectedUser:l,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,l=F()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(l,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.error&&t.context.setUserAlert(e.data.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Be,{state:this.state.sideCol,menuSelect:this.menuSelect,subMenuState:this.state.subMenuState,subMenu:this.state.subMenu,subMenuSelect:this.subMenuSelect,page:"staff",role:this.context.role}),!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(b.a,{className:""},i.a.createElement("h1",null,"Staff:",!0===this.state.showDetails&&this.state.selectedUser&&"detail"===this.state.tabKey&&this.state.selectedUser.name)),i.a.createElement(b.a,{className:""},this.state.isLoading?i.a.createElement(T.a,{src:U,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(b.a,{className:""},this.state.users&&i.a.createElement(N.a,{md:12,className:""},!0===this.state.startFilter&&i.a.createElement(N.a,null,i.a.createElement(at,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),"list"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter},"Filter"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn",onClick:this.resetFilter},"Reset Filter")),i.a.createElement($,{filter:this.state.filter,users:this.state.users,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteUser})),"search"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Search"),i.a.createElement(b.a,{className:""},i.a.createElement(Q,{onConfirm:this.searchUsers,onCancel:this.clearSearch})),i.a.createElement(b.a,null,this.state.searchUsers&&i.a.createElement(I.a,{variant:"primary",className:"centered_btn",onClick:this.toggleFilter},"Filter")),i.a.createElement(b.a,{className:""},this.state.searchUsers&&i.a.createElement(Ze,{filter:this.state.filter,users:this.state.searchUsers,authId:this.context.activityId,showDetails:this.showDetails})))),"detail"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol tabColDetail"},!1===this.state.showDetails&&!this.state.selectedUser&&i.a.createElement("h3",null,"Select a Staff Member to see details"),!0===this.state.showDetails&&this.state.selectedUser&&i.a.createElement(tt,{user:this.state.selectedUser,updateUser:this.updateUser,subMenu:this.state.subMenu}))))))}}]),a}(n.Component));nt.contextType=f;var it=nt,st=(a(207),function(e){var t=F()().format("YYYY-MM-DD");return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create Patient Form"),i.a.createElement("p",null,' " * " indicates required fields...'),i.a.createElement("div",{className:"formDivider1"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Title *"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Mr"),i.a.createElement("option",null,"Mrs"),i.a.createElement("option",null,"Ms"),i.a.createElement("option",null,"Dr"))),i.a.createElement(J.a.Group,{as:N.a,controlId:"name",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"First Name *"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"lastName",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Last Name *"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"username",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"username *"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"role",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"role "),i.a.createElement(J.a.Control,{type:"text",value:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"contactEmail",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"email *"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"dob",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"dob *"),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"gender",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"gender *"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Female"),i.a.createElement("option",null,"Male"),i.a.createElement("option",null,"Prefer Not to Say")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"contactPhone",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"phone *"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"contactPhone2",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"phone2"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"addressNumber",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressNumber"),i.a.createElement(J.a.Control,{type:"number",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"addressStreet",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressStreet"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"addressTown",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressTown"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"addressCity",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressCity"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"addressParish",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressParish"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"none"),i.a.createElement("option",null,"Clarendon"),i.a.createElement("option",null,"Hanover"),i.a.createElement("option",null,"Kingston"),i.a.createElement("option",null,"Manchester"),i.a.createElement("option",null,"Portland"),i.a.createElement("option",null,"St. Andrew"),i.a.createElement("option",null,"St. Ann"),i.a.createElement("option",null,"St. Catherine"),i.a.createElement("option",null,"St. Elizabeth"),i.a.createElement("option",null,"St. James"),i.a.createElement("option",null,"St. Mary"),i.a.createElement("option",null,"St. Thomas"),i.a.createElement("option",null,"Trelawny"),i.a.createElement("option",null,"Westmoreland"))),i.a.createElement(J.a.Group,{as:N.a,controlId:"addressCountry",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressCountry"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"addressPostalCode",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"addressPostalCode"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider3"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"referralDate",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralDate: YYYY-MM-DD"),i.a.createElement(J.a.Control,{type:"date",placeholder:t})),i.a.createElement(J.a.Group,{as:N.a,controlId:"referralReason",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralReason"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"referralPhysicianName",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralPhysicianName"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"referralPhysicianPhone",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralPhysicianPhone"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"referralPhysicianEmail",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralPhysicianEmail"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"referralPhysicianAddress",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"referralPhysicianAddress"),i.a.createElement(J.a.Control,{as:"textarea",rows:"5",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"attendingPhysician",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"attendingPhysician"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider1"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"occupationRole",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationRole"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"occupationEmployerName",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationEmployerName"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"occupationEmployerEmail",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationEmployerEmail"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"occupationEmployerPhone",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationEmployerPhone"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"occupationEmployerAddress",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"occupationEmployerAddress"),i.a.createElement(J.a.Control,{as:"textarea",rows:"5",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"insuranceCompany",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceCompany"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Guardian"),i.a.createElement("option",null,"Sagicor"),i.a.createElement("option",null,"Canopy"),i.a.createElement("option",null,"Other"))),i.a.createElement(J.a.Group,{as:N.a,controlId:"insurancePolicyNumber",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insurancePolicyNumber"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"insuranceExpiryDate",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceExpiryDate"),i.a.createElement(J.a.Control,{type:"date",placeholder:t})),i.a.createElement(J.a.Group,{as:N.a,controlId:"insuranceDescription",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceDescription"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"insuranceSubscriberCompany",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceSubscriberCompany"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"insuranceSubscriberDescription",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"insuranceSubscriberDescription"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."})))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"loginFormBtn searchBtn"},"Create"),i.a.createElement(I.a,{variant:"danger",className:"loginFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))}),lt=function(e){var t=Object.assign({},e.filter),a=e.patients,n=[];"patient"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"patient"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"patient"===t.field&&"username"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.username>t.username?1:-1}))),"patient"===t.field&&"username"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.username<t.username?1:-1}))),"patient"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"patient"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"patient"===t.field&&"role"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.role>t.role?1:-1}))),"patient"===t.field&&"role"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.role<t.role?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dob>t.dob?1:-1}))),"patient"===t.field&&"dob"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dob<t.dob?1:-1}))),"patient"===t.field&&"age"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.age>t.age?1:-1}))),"patient"===t.field&&"age"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.age<t.age?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.gender>t.gender?1:-1}))),"patient"===t.field&&"gender"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.gender<t.gender?1:-1}))),"patient"===t.field&&"loggedIn"===t.key&&(n=a.filter((function(e){return e.loggedIn===t.value}))),"patient"===t.field&&"active"===t.key&&(n=a.filter((function(e){return e.active===t.value}))),"patient"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(q,{key:s,patient:t,canDelete:e.canDelete,showDetails:e.showDetails})}));return i.a.createElement("ul",{className:"userList"},l)},ot=a(23),rt=a.p+"static/media/letterhead.5b835992.jpg",ct=(a(606),ot.e.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:24,textAlign:"center",fontFamily:"Times-Roman"},author:{fontSize:12,textAlign:"center",marginBottom:40},subtitle:{fontSize:18,margin:12,fontFamily:"Times-Roman"},text:{margin:12,fontSize:14,textAlign:"justify",fontFamily:"Times-Roman"},image:{},header:{fontSize:12,marginBottom:20,textAlign:"center",color:"grey"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},page:{flexDirection:"row",backgroundColor:"#E4E4E4"},section:{margin:10,padding:10,flexGrow:1}})),mt=function(e){return i.a.createElement("div",{className:"pdfViewBg"},i.a.createElement("div",{className:"pdfView"},i.a.createElement(N.a,{className:"pdfViewClose"},i.a.createElement(I.a,{variant:"outline-danger",size:"sm",class:"centered_btn",onClick:e.close},"X")),i.a.createElement(N.a,{className:"pdfViewCol"},i.a.createElement("h3",null,"Document Generator")),i.a.createElement(ot.c,{className:"viewer"},"test"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{style:ct.body},i.a.createElement(ot.b,{style:ct.image,src:rt}),i.a.createElement(ot.f,{style:ct.title},e.pdfViewData.type),i.a.createElement(ot.f,{style:ct.author},"Miguel de Cervantes"),i.a.createElement(ot.f,{style:ct.subtitle},"Patient name: ",e.patient.name),i.a.createElement(ot.f,{style:ct.text},"En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha mucho tiempo que viv\xeda un hidalgo de los de lanza en astillero, adarga antigua, roc\xedn flaco y galgo corredor. Una olla de algo m\xe1s vaca que carnero, salpic\xf3n las m\xe1s noches, duelos y quebrantos los s\xe1bados, lentejas los viernes, alg\xfan palomino de a\xf1adidura los domingos, consum\xedan las tres partes de su hacienda. El resto della conclu\xedan sayo de velarte, calzas de velludo para las fiestas con sus pantuflos de lo mismo, los d\xedas de entre semana se honraba con su vellori de lo m\xe1s fino. Ten\xeda en su casa una ama que pasaba de los cuarenta, y una sobrina que no llegaba a los veinte, y un mozo de campo y plaza, que as\xed ensillaba el roc\xedn como tomaba la podadera. Frisaba la edad de nuestro hidalgo con los cincuenta a\xf1os, era de complexi\xf3n recia, seco de carnes, enjuto de rostro; gran madrugador y amigo de la caza. Quieren decir que ten\xeda el sobrenombre de Quijada o Quesada (que en esto hay alguna diferencia en los autores que deste caso escriben), aunque por conjeturas veros\xedmiles se deja entender que se llama Quijana; pero esto importa poco a nuestro cuento; basta que en la narraci\xf3n d\xe9l no se salga un punto de la verdad"),i.a.createElement(ot.f,{style:ct.text},"_________________________________________________________"),i.a.createElement(ot.f,{style:ct.text},"Con estas y semejantes razones perd\xeda el pobre caballero el juicio, y desvel\xe1base por entenderlas, y desentra\xf1arles el sentido, que no se lo sacara, ni las entendiera el mismo Arist\xf3teles, si resucitara para s\xf3lo ello. No estaba muy bien con las heridas que don Belianis daba y recib\xeda, porque se imaginaba que por grandes maestros que le hubiesen curado, no dejar\xeda de tener el rostro y todo el cuerpo lleno de cicatrices y se\xf1ales; pero con todo alababa en su autor aquel acabar su libro con la promesa de aquella inacabable aventura, y muchas veces le vino deseo de tomar la pluma, y darle fin al pie de la letra como all\xed se promete; y sin duda alguna lo hiciera, y aun saliera con ello, si otros mayores y continuos pensamientos no se lo estorbaran. Tuvo muchas veces competencia con el cura de su lugar (que era hombre docto graduado en Sig\xfcenza), sobre cu\xe1l hab\xeda sido mejor caballero, Palmer\xedn de Inglaterra o Amad\xeds de Gaula; mas maese Nicol\xe1s, barbero del mismo pueblo, dec\xeda que ninguno llegaba al caballero del Febo, y que si alguno se le pod\xeda comparar, era don Galaor, hermano de Amad\xeds de Gaula, porque ten\xeda muy acomodada condici\xf3n para todo; que no era caballero melindroso, ni tan llor\xf3n como su hermano, y que en lo de la valent\xeda no le iba en zaga."),i.a.createElement(ot.f,{style:ct.text},"En resoluci\xf3n, \xe9l se enfrasc\xf3 tanto en su lectura, que se le pasaban las noches leyendo de claro en claro, y los d\xedas de turbio en turbio, y as\xed, del poco dormir y del mucho leer, se le sec\xf3 el cerebro, de manera que vino a perder el juicio. Llen\xf3sele la fantas\xeda de todo aquello que le\xeda en los libros, as\xed de encantamientos, como de pendencias, batallas, desaf\xedos, heridas, requiebros, amores, tormentas y disparates imposibles, y asent\xf3sele de tal modo en la imaginaci\xf3n que era verdad toda aquella m\xe1quina de aquellas so\xf1adas invenciones que le\xeda, que para \xe9l no hab\xeda otra historia m\xe1s cierta en el mundo."),i.a.createElement(ot.f,{style:ct.subtitle,break:!0},"Cap\xedtulo II: Que trata de la primera salida que de su tierra hizo el ingenioso Don Quijote"),i.a.createElement(ot.f,{style:ct.text},"Hechas, pues, estas prevenciones, no quiso aguardar m\xe1s tiempo a poner en efeto su pensamiento, apret\xe1ndole a ello la falta que \xe9l pensaba que hac\xeda en el mundo su tardanza, seg\xfan eran los agravios que pensaba deshacer, tuertos que enderezar, sinrazones que emendar y abusos que mejorar y deudas que satisfacer. Y as\xed, sin dar parte a persona alguna de su intenci\xf3n y sin que nadie le viese, una ma\xf1ana, antes del d\xeda, que era uno de los calurosos del mes de Julio, se arm\xf3 de todas sus armas, subi\xf3 sobre Rocinante, puesta su mal compuesta celada, embraz\xf3 su adarga, tom\xf3 su lanza y por la puerta falsa de un corral sali\xf3 al campo con grand\xedsimo contento y alborozo de ver con cu\xe1nta facilidad hab\xeda dado principio a su buen deseo. Mas apenas se vio en el campo cuando le asalt\xf3 un pensamiento terrible, y tal, que por poco le hiciera dejar la comenzada empresa; y fue que le vino a la memoria que no era armado caballero, y que, conforme a ley de caballer\xeda, ni pod\xeda ni deb\xeda tomar armas con ning\xfan caballero; y puesto que lo fuera, hab\xeda de llevar armas blancas, como novel caballero, sin empresa en el escudo, hasta que por su esfuerzo la ganase. Estos pensamientos le hicieron titubear en su prop\xf3sito; mas pudiendo m\xe1s su locura que otra raz\xf3n alguna, propuso de hacerse armar caballero del primero que topase, a imitaci\xf3n de otros muchos que as\xed lo hicieron, seg\xfan \xe9l hab\xeda le\xeddo en los libros que tal le ten\xedan. En lo de las armas blancas, pensaba limpiarlas de manera, en teniendo lugar, que lo fuesen m\xe1s que un arminio; y con esto se quiet\xf318 y prosigui\xf3 su camino, sin llevar otro que aquel que su caballo quer\xeda, creyendo que en aquello consist\xeda la fuerza de las aventuras"),i.a.createElement(ot.f,{style:ct.text},"Yendo, pues, caminando nuestro flamante aventurero, iba hablando consigo mesmo, y diciendo: \u2014\xbfQui\xe9n duda, sino que en los venideros tiempos, cuando salga a luz la verdadera historia de mis famosos hechos, que el sabio que los escribiere no ponga, cuando llegue a contar esta mi primera salida tan de ma\xf1ana, desta manera?: Apenas hab\xeda el rubicundo Apolo tendido por la faz de la ancha y espaciosa tierra las doradas hebras de sus hermosos cabellos, y apenas los peque\xf1os y pintados pajarillos con sus arpadas lenguas hab\xedan saludado con dulce y meliflua armon\xeda la venida de la rosada Aurora, que, dejando la blanda cama del celoso marido, por las puertas y balcones del manchego horizonte a los mortales se mostraba, cuando el famoso caballero don Quijote de la Mancha, dejando las ociosas plumas, subi\xf3 sobre su famoso caballo Rocinante y comenz\xf3 a caminar por el antiguo y conocido Campo de Montiel."),i.a.createElement(ot.f,{style:ct.text},"Y era la verdad que por \xe9l caminaba; y a\xf1adi\xf3 diciendo: \u2014Dichosa edad y siglo dichoso aquel adonde saldr\xe1n a luz las famosas haza\xf1as m\xedas, dignas de entallarse en bronces, esculpirse en m\xe1rmoles y pintarse en tablas, para memoria en lo futuro. \xa1Oh t\xfa, sabio encantador, quienquiera que seas, a quien ha de tocar el ser coronista desta peregrina historia! Ru\xe9gote que no te olvides de mi buen Rocinante, compa\xf1ero eterno m\xedo en todos mis caminos y carreras."),i.a.createElement(ot.f,{style:ct.text},"Luego volv\xeda diciendo, como si verdaderamente fuera enamorado: \u2014\xa1Oh princesa Dulcinea, se\xf1ora deste cautivo coraz\xf3n! Mucho agravio me habedes fecho en despedirme y reprocharme con el riguroso afincamiento de mandarme no parecer ante la vuestra fermosura. Pl\xe9gaos, se\xf1ora, de membraros deste vuestro sujeto coraz\xf3n, que tantas cuitas por vuestro amor padece. Con estos iba ensartando otros disparates, todos al modo de los que sus libros le hab\xedan ense\xf1ado, imitando en cuanto pod\xeda su lenguaje. Con esto caminaba tan despacio, y el sol entraba tan apriesa y con tanto ardor, que fuera bastante a derretirle los sesos, si algunos tuviera"),i.a.createElement(ot.f,{style:ct.text},"Casi todo aquel d\xeda camin\xf3 sin acontecerle cosa que de contar fuese, de lo cual se desesperaba, porque quisiera topar luego luego con quien hacer experiencia del valor de su fuerte brazo. Autores hay que dicen que la primera aventura que le avino fue la del Puerto L\xe1pice, otros dicen que la de los molinos de viento; pero lo que yo he podido averiguar en este caso, y lo que he hallado escrito en los anales de la Mancha, es que \xe9l anduvo todo aquel d\xeda, y, al anochecer, su roc\xedn y \xe9l se hallaron cansados y muertos de hambre, y que, mirando a todas partes por ver si descubrir\xeda alg\xfan castillo o alguna majada de pastores donde recogerse y adonde pudiese remediar su mucha hambre y necesidad, vio, no lejos del camino por donde iba, una venta,que fue como si viera una estrella que, no a los portales, sino a los alc\xe1zares de su redenci\xf3n le encaminaba. Diose priesa a caminar, y lleg\xf3 a ella a tiempo que anochec\xeda."))),"referral"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{style:ct.body},i.a.createElement(ot.b,{style:ct.image,src:rt}),i.a.createElement(ot.f,{style:ct.title},e.pdfViewData.type),i.a.createElement(ot.f,{style:ct.author},"Miguel de Cervantes"),i.a.createElement(ot.f,{style:ct.subtitle},"Cap\xedtulo I: Que trata de la condici\xf3n y ejercicio del famoso hidalgo D. Quijote de la Mancha"),i.a.createElement(ot.f,{style:ct.text},"En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha mucho tiempo que viv\xeda un hidalgo de los de lanza en astillero, adarga antigua, roc\xedn flaco y galgo corredor."),i.a.createElement(ot.f,{style:ct.text},"_________________________________________________________"),i.a.createElement(ot.f,{style:ct.text},"Con estas y semejantes razones perd\xeda el pobre caballero el juicio, y desvel\xe1base por entenderlas, y desentra\xf1arles el sentido, que no se lo sacara, ni las entendiera el mismo"),i.a.createElement(ot.f,{style:ct.text},"En resoluci\xf3n, \xe9l se enfrasc\xf3 tanto en su lectura, que se le pasaban las noches leyendo de claro en claro, y los d\xedas de turbio en turbio, y as\xed, del poco dormir y del mucho leer, se"))),"admissionReminder"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{style:ct.body},i.a.createElement(ot.b,{style:ct.image,src:rt}),i.a.createElement(ot.f,{style:ct.title},e.pdfViewData.type),i.a.createElement(ot.f,{style:ct.author},"Miguel de Cervantes"),i.a.createElement(ot.f,{style:ct.subtitle},"Cap\xedtulo I: Que trata de la condici\xf3n y ejercicio del famoso hidalgo D. Quijote de la Mancha"),i.a.createElement(ot.f,{style:ct.text},"En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha mucho tiempo que viv\xeda un hidalgo de los de lanza en astillero, adarga antigua, roc\xedn flaco y galgo corredor."),i.a.createElement(ot.f,{style:ct.text},"_________________________________________________________"),i.a.createElement(ot.f,{style:ct.text},"Es, pues, de saber, que este sobredicho hidalgo, los ratos que estaba ocioso (que eran los m\xe1s del a\xf1o) se daba a leer libros de caballer\xedas con tanta afici\xf3n y gusto, que olvid\xf3"))),"sickNote"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{size:"A4",style:ct.page},i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,e.pdfViewData.type)),i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,"Section #2")))),"insurance"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{size:"A4",style:ct.page},i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,e.pdfViewData.type)),i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,"Section #2")))),"diagnosisTesting"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{size:"A4",style:ct.page},i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,e.pdfViewData.type)),i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,"Section #2")))),"prescription"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{size:"A4",style:ct.page},i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,e.pdfViewData.type)),i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,"Section #2")))),"treatmentConsent"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{size:"A4",style:ct.page},i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,e.pdfViewData.type)),i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,"Section #2")))),"treatmentInstructions"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{size:"A4",style:ct.page},i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,e.pdfViewData.type)),i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,"Section #2")))),"unfitToFly"===e.pdfViewData.type&&i.a.createElement(ot.a,null,i.a.createElement(ot.d,{size:"A4",style:ct.page},i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,e.pdfViewData.type)),i.a.createElement(ot.g,{style:ct.section},i.a.createElement(ot.f,null,"Section #2")))))))},dt=function(e){var t=Object.assign({},e.filter),a=e.addresses,n=[];"address"===t.field&&"number"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.number>t.number?1:-1}))),"address"===t.field&&"number"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.number<t.number?1:-1}))),"address"===t.field&&"street"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.street>t.street?1:-1}))),"address"===t.field&&"street"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.street<t.street?1:-1}))),"address"===t.field&&"town"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.town>t.town?1:-1}))),"address"===t.field&&"town"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.town<t.town?1:-1}))),"address"===t.field&&"city"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.city>t.city?1:-1}))),"address"===t.field&&"city"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.city<t.city?1:-1}))),"address"===t.field&&"parish"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.parish>t.parish?1:-1}))),"address"===t.field&&"parish"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.parish<t.parish?1:-1}))),"address"===t.field&&"country"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.country>t.country?1:-1}))),"address"===t.field&&"country"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.country<t.country?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.postalCode>t.postalCode?1:-1}))),"address"===t.field&&"postalCode"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.postalCode<t.postalCode?1:-1}))),"address"===t.field&&"primary"===t.key&&(n=a.filter((function(e){return e.primary===t.value}))),"address"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(me,{key:s,address:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary})}));return i.a.createElement("ul",{className:"addressList"},l)},pt=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.name)),i.a.createElement(G.a.Text,{className:"cardText"},"Relation: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.relation)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Relation: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.relation))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Email: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.email))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Phone: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.phone))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Phone2: ",i.a.createElement("span",{className:"bold"},e.nextOfKin.contact.phone2))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.nextOfKin)},"Delete"))))))))},ut=function(e){var t=Object.assign({},e.filter),a=e.nextOfKin,n=[];"nextOfKin"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"nextOfKin"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"nextOfKin"===t.field&&"relation"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.relation>t.relation?1:-1}))),"nextOfKin"===t.field&&"relation"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.relation<t.relation?1:-1}))),"nextOfKin"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(pt,{key:s,nextOfKin:t,onDelete:e.onDelete,canDelete:e.canDelete,makePrimary:e.makePrimary})}));return i.a.createElement("ul",{className:"addressList"},l)},gt=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(b.a,null,i.a.createElement("a",{href:e.attachment,target:"_blank",rel:"noopener noreferrer"},e.attachment),!0===e.canDelete&&i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.f,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===e.canDelete&&!0===s&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,{type:e.type,attachment:e.attachment,item:e.item})},"Delete")))},ht=function(e){var t=0,a=e.attachments.map((function(a){return t=e.attachments.indexOf(a)+1,i.a.createElement(gt,{key:t,item:e.item,attachment:a,onDelete:e.onDelete,canDelete:e.canDelete,type:e.type})}));return i.a.createElement("ul",{className:"addressList"},a)},yt=void 0,vt=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.allergy.title)),i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.allergy.type)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.allergy.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.allergy.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.allergy.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(yt,{field:"allergy",data:e.allergy})}))),i.a.createElement(ht,{item:e.allergy,attachments:e.allergy.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"allergy"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(yt,e.allergy)},"Delete"))))))))},ft=function(e){var t=Object.assign({},e.filter),a=e.allergies,n=[];"allergy"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"allergy"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"allergy"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"allergy"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"allergy"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(vt,{key:s,allergy:t,onDelete:e.onDelete,canDelete:e.canDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"addressList"},l)},Et=void 0,bt=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.medication.title)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.medication.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.medication.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.medication.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(Et,{field:"medication",data:e.medication})}))),i.a.createElement(ht,{item:e.medication,attachments:e.medication.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"medication"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Et,e.medication)},"Delete"))))))))},Nt=function(e){var t=Object.assign({},e.filter),a=e.medication,n=[];"medication"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"medication"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"medication"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"medication"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"medication"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(bt,{key:s,medication:t,onDelete:e.onDelete,canDelete:e.canDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"addressList"},l)},Ct=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.comorbidity.title)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Title,{as:"h3"},"Popover ".concat("top")),i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.comorbidity.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.comorbidity.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.comorbidity.description))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Title,{as:"h3"},"Popover ".concat("top")),i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.comorbidity)},"Delete"))))))))},xt=function(e){var t=Object.assign({},e.filter),a=e.comorbidities,n=[];"comorbidity"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"comorbidity"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"comorbidity"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"comorbidity"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"comorbidity"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ct,{key:s,comorbidity:t,onDelete:e.onDelete,canDelete:e.canDelete})}));return i.a.createElement("ul",{className:"addressList"},l)},At=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},i.a.createElement("a",{href:e.image.path,target:"_blank",rel:"noopener noreferrer"},e.image.name)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.image)},"Delete"))))))))},It=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(At,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"imageList"},l)},Tt=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(fe,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"fileList"},l)},St=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),!0===e.canDelete&&i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.note)},"Delete")))))},kt=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(St,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},l)},wt=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Tag: ",i.a.createElement("span",{className:"bold"},e.tag)),!0===e.canDelete&&i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.tag)},"Delete")))))},Dt=function(e){var t=Object.assign({},e.filter),a=e.tags,n=[];"tag"===t.field&&"tag"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"tag"===t.field&&"tag"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"tag"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(wt,{key:s,tag:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},l)},Ft=(a(72),void 0),Ut=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Date: ",i.a.createElement("span",{className:"bold"},F.a.unix(e.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(G.a.Text,{className:"cardText"},"Time: ",i.a.createElement("span",{className:"bold"},e.visit.time)),i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.visit.title)),i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!e.patientPage&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go to Visit Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon",onClick:e.showDetails.bind(Ft,e.visit)})),e.patientPage&&i.a.createElement(d.b,{to:{pathname:"/visits",state:{visit:e.visit._id}}},i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Go to Visit Details")))},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),e.canDelete&&i.a.createElement(k.a,{placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Id: ",i.a.createElement("span",{className:"bold"},e.visit._id))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"type: ",i.a.createElement("span",{className:"bold"},e.visit.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"subType: ",i.a.createElement("span",{className:"bold"},e.visit.subType))),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Patient:")),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Id: ",i.a.createElement("span",{className:"bold"},e.visit.patient._id))),!e.patientPage&&i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.visit.patient.name))))),!0===c&&i.a.createElement(b.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Ft,e.visit)},"Delete")))))},Lt=(a(73),function(e){var t=Object.assign({},e.filter),a=e.visits,n=[];"visit"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"visit"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"visit"===t.field&&"date"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.date>t.date?1:-1}))),"visit"===t.field&&"date"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.date<t.date?1:-1}))),"visit"===t.field&&"time"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.time>t.time?1:-1}))),"visit"===t.field&&"time"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.time<t.time?1:-1}))),"visit"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"visit"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"visit"===t.field&&"subType"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.subType>t.subType?1:-1}))),"visit"===t.field&&"subType"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.subType<t.subType?1:-1}))),"visit"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ut,{key:s,visit:t,canDelete:e.canDelete,onDelete:e.onDelete,showDetails:e.showDetails,patientPage:e.patientPage})}));return i.a.createElement("ul",{className:"visitList"},l)}),_t=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"allergy"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Pt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"medication"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Gt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"comorbidity"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Vt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"nextOfKin"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"name"),i.a.createElement("option",null,"relation")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},qt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"visit"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Bt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"tag"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"tag")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Rt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Update Single Field"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field"),i.a.createElement(J.a.Control,{type:"text",value:e.field}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"New Data"),i.a.createElement(J.a.Control,{type:"text",placeholder:"(Date format = YYYY-MM-DD!!)"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn searchBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Ot=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Tags"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"tags",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Tags"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"...tag,tag,tag..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},jt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Next of Kin"),i.a.createElement("p",null,"Required fields are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"name",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"relation",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Relation (select) * "),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Mother"),i.a.createElement("option",null,"Father"),i.a.createElement("option",null,"Brother"),i.a.createElement("option",null,"Sister"),i.a.createElement("option",null,"Grandfather"),i.a.createElement("option",null,"Grandmother"),i.a.createElement("option",null,"Uncle"),i.a.createElement("option",null,"Aunt"),i.a.createElement("option",null,"Niece"),i.a.createElement("option",null,"Uncle"),i.a.createElement("option",null,"Cousin")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"email",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Email"),i.a.createElement(J.a.Control,{type:"email",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"phone",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Phone * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"phone2",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Phone #2"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Mt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Allergy"),i.a.createElement("p",null,"Required fields are denoted by a ' * '"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type (select) * "),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Food"),i.a.createElement("option",null,"Drug")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},zt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Medication"),i.a.createElement("p",null,"Required fields are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Yt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Comorbidity"),i.a.createElement("p",null,"Required fields are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Kt=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Attachment"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"attachment",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"textarea",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"File",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},Jt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",startFilter:!1,selectFilter:null,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"basic",adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:n.props.patient,addAttachmentForm:!1,addAttachmentArgs:null,calendarAppointments:null,calendarVisits:null,pocketVars:null,s3State:{action:null,target:null,status:null},showPdfView:!1,showPdfData:{type:null,data:null}},n.submitAddAddressForm=function(e){e.preventDefault(),console.log("...adding address..."),n.context.setUserAlert("...adding address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.number.value,l=e.target.street.value,o=e.target.town.value,r=e.target.city.value,c=e.target.parish.value,m=e.target.country.value,d=e.target.postalCode.value;if(0===s.trim().length||0===l.trim().length||0===r.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var p={query:'\n      mutation {addPatientAddress(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(s,',\n          addressStreet:"').concat(l,'",\n          addressTown:"').concat(o,'",\n          addressCity:"').concat(r,'",\n          addressParish:"').concat(c,'",\n          addressCountry:"').concat(m,'",\n          addressPostalCode:"').concat(d,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientAddress),n.setState({isLoading:!1,selectedPatient:e.data.addPatientAddress,activityA:"addPatientAddress?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAddress=function(e){console.log("...deleting address..."),n.context.setUserAlert("...deleting address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientAddress(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'",\n          addressPrimary:').concat(e.primary,"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientAddress),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientAddress,activityA:"deletePatientAddress?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientAddress,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.setAddressPrimary=function(e){console.log("...setting primary address..."),n.context.setUserAlert("...setting primary address..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {setPatientAddressPrimary(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          addressNumber:').concat(e.number,',\n          addressStreet:"').concat(e.street,'",\n          addressTown:"').concat(e.town,'",\n          addressCity:"').concat(e.city,'",\n          addressParish:"').concat(e.parish,'",\n          addressCountry:"').concat(e.country,'",\n          addressPostalCode:"').concat(e.postalCode,'"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...address set primary success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.setPatientAddressPrimary),n.setState({isLoading:!1,selectedPatient:e.data.setPatientAddressPrimary,activityA:"setPatientAddressPrimary?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.setPatientAddressPrimary,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddNextOfKinForm=function(e){e.preventDefault(),console.log("...add next of kin..."),n.context.setUserAlert("...adding next of kin..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.name.value,l=e.target.relation.value,o=e.target.email.value,r=e.target.phone.value,c=e.target.phone2.value;if(0===s.trim().length||0===l.trim().length||0===r.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var m={query:'\n      mutation {addPatientNextOfKin(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          nextOfKinName:"').concat(s,'",\n          nextOfKinRelation:"').concat(l,'",\n          nextOfKinContactEmail:"').concat(o,'",\n          nextOfKinContactPhone1:"').concat(r,'",\n          nextOfKinContactPhone2:"').concat(c,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...next of kin add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientNextOfKin),n.setState({isLoading:!1,selectedPatient:e.data.addPatientNextOfKin,activityA:"addPatientNextOfKin?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientNextOfKin,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNextOfKin=function(e){console.log("...deleting next of kin..."),n.context.setUserAlert("...deleting next of kin...."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientNextOfKin(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          nextOfKinName:"').concat(e.name,'",\n          nextOfKinRelation:"').concat(e.relation,'",\n          nextOfKinContactEmail:"').concat(e.contact.email,'",\n          nextOfKinContactPhone1:"').concat(e.contact.phone1,'",\n          nextOfKinContactPhone2:"').concat(e.contact.phone2,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("...resData...",e.data.deletePatientNextOfKin);var s="...next of kin delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientNextOfKin),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientNextOfKin,activityA:"deletePatientNextOfKin?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.deletePatientNextOfKin,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddAllergyForm=function(e){e.preventDefault(),console.log("...add allergy..."),n.context.setUserAlert("...adding allergy..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,l=n.props.patient.name+"_allergy_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.type.value,r=e.target.description.value.replace(/\n/g," ");if(0===r.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=f._currentValue.file,m=c.name,d="patient/"+s+"/allergy/attachments";console.log("...file present...");var p=c.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new re.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"allergy attachment"}},overlay:!0,s3State:{action:"upload",target:"allergy attachment",status:"inProgress"}}),g.uploadFile(c,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"failed"}})}))}var h={query:'\n      mutation {addPatientAllergy(\n        activityId:"'.concat(i,'",\n        patientId:"').concat(s,'",\n        patientInput:{\n          allergyType:"').concat(o,'",\n          allergyTitle:"').concat(l,'",\n          allergyDescription:"').concat(r,'",\n          allergyAttachment:"').concat(t,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...allergy add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientAllergy),n.setState({isLoading:!1,selectedPatient:e.data.addPatientAllergy,activityA:"addPatientAllergy?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientAllergy,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAllergy=function(e){console.log("...deleting allergy..."),n.context.setUserAlert("...deleting allergy..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientAllergy(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          allergyType:"').concat(e.type,'",\n          allergyTitle:"').concat(e.title,'",\n          allergyDescription:"').concat(e.description,'",\n          allergyAttachments:"').concat(e.attachments,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...allergy delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updatePatient(s.data.deletePatientAllergy),n.setState({isLoading:!1,selectedPatient:s.data.deletePatientAllergy,activityA:"deletePatientAllergy?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=s.data.deletePatientAllergy,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/patient/"+i+"/allergy/attachments/",c={bucketName:"mbjentemrstorage",dirName:"patient/"+i+"/allergy/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"allergy attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddMedicationForm=function(e){e.preventDefault(),console.log("...add medication..."),n.context.setUserAlert("...adding medication..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,l=n.props.patient.name+"_medication_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.type.value,r=e.target.description.value.replace(/\n/g," ");if(0===l.trim().length||0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=f._currentValue.file,m=c.name,d="patient/"+s+"/medication/attachments";console.log("...file present...");var p=c.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new re.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"medication attachment"}},overlay:!0,s3State:{action:"upload",target:"medication attachment",status:"inProgress"}}),g.uploadFile(c,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"medication attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"medication attachment",status:"failed"}})}))}var h={query:'\n      mutation {addPatientMedication(\n        activityId:"'.concat(i,'",\n        patientId:"').concat(s,'",\n        patientInput:{\n          medicationType:"').concat(o,'",\n          medicationTitle:"').concat(l,'",\n          medicationDescription:"').concat(r,'",\n          medicationAttachment:"').concat(t,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...medication add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientMedication),n.setState({isLoading:!1,selectedPatient:e.data.addPatientMedication,activityA:"addPatientMedication?activityId:".concat(i,",patientId:").concat(s),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientMedication,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteMedication=function(e){console.log("...deleting medication..."),n.context.setUserAlert("...deleting medication..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientMedication(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          medicationType:"').concat(e.type,'",\n          medicationTitle:"').concat(e.title,'",\n          medicationDescription:"').concat(e.description,'",\n          medicationAttachments:"').concat(e.attachments,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...medication delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updatePatient(s.data.deletePatientMedication),n.setState({isLoading:!1,selectedPatient:s.data.deletePatientMedication,activityA:"deletePatientMedication?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=s.data.deletePatientMedication,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/patient/"+i+"/medication/attachments/",c={bucketName:"mbjentemrstorage",dirName:"patient/"+i+"/medication/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"medication attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddComorbidityForm=function(e){e.preventDefault(),console.log("...add comorbidities..."),n.context.setUserAlert("...adding comorbidities..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=n.props.patient.name+"_comorbidity_"+F()().format("YYYY-MM-DD, h:mm:ss a"),l=e.target.type.value,o=e.target.description.value.replace(/\n/g," ");if(0===s.trim().length||0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var r={query:'\n      mutation {addPatientComorbidity(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          comorbidityType:"').concat(l,'",\n          comorbidityTitle:"').concat(s,'",\n          comorbidityDescription:"').concat(o,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},comorbidities{type,title,description},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Comorbidity add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientComorbidity),n.setState({isLoading:!1,selectedPatient:e.data.addPatientComorbidity,activityA:"addPatientComorbidity?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientComorbidity,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteComorbidity=function(e){console.log("...deleting medication...",e),n.context.setUserAlert("...deleting medication..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientComorbidity(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          comorbidityType:"').concat(e.type,'",\n          comorbidityTitle:"').concat(e.title,'",\n          comorbidityDescription:"').concat(e.description,'"\n        })\n      {_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2}},allergies{type,title,description,attachments},medication{type,title,description,attachments},comorbidities{type,title,description},images{name,type,path},files{name,type,path},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Comorbidity delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientComorbidity),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientComorbidity,activityA:"deletePatientComorbidity?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.deletePatientComorbidity,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startAddAttachment=function(e){console.log("...start add attachment..."),n.setState({addAttachmentForm:!0,addAttachmentArgs:e})},n.cancelAddAttachment=function(){n.setState({addAttachmentForm:!1})},n.addAttachment=function(e){e.preventDefault(),console.log("...adding attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0,addAttachmentForm:!1});var t,a,i,s,l,o,r,c,m=n.context.token,d=n.context.activityId,p=n.props.patient._id,u=(n.props.patient.name,n.state.addAttachmentArgs),g=u.field;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var h=f._currentValue.file,y=h.name,v="patient/"+p+"/"+g+"/attachments";console.log("...file present...");var E=h.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+v+"/"+y+"."+E;var b={bucketName:"mbjentemrstorage",dirName:v,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},N=new re.a(b);n.context.setUserAlert("...s3 uploading allergy attachment ..."),console.log("...s3 uploading allergy attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"".concat(g," attachment")}},overlay:!0,s3State:{action:"upload",target:"".concat(g," attachment"),status:"inProgress"}}),N.uploadFile(h,y).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"".concat(g," attachment"),status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"".concat(g," attachment"),status:"failed"}})}))}"allergy"===g&&(a=u.data.title,i=u.data.type,s=u.data.description),"medication"===g&&(l=u.data.title,o=u.data.type,r=u.data.description),"allergy"===g&&(c={query:'\n        mutation {addPatientAllergyAttachment(\n          activityId:"'.concat(d,'",\n          patientId:"').concat(p,'",\n          patientInput:{\n            allergyType:"').concat(i,'",\n            allergyTitle:"').concat(a,'",\n            allergyDescription:"').concat(s,'",\n            allergyAttachment:"').concat(t,'"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),"medication"===g&&(c={query:'\n        mutation {addPatientMedicationAttachment(\n          activityId:"'.concat(d,'",\n          patientId:"').concat(p,'",\n          patientInput:{\n            medicationType:"').concat(o,'",\n            medicationTitle:"').concat(l,'",\n            medicationDescription:"').concat(r,'",\n            medicationAttachment:"').concat(t,'"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+m}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...add attachment success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"allergy"===g&&(n.props.updatePatient(e.data.addPatientAllergyAttachment),n.setState({isLoading:!1,selectedPatient:e.data.addPatientAllergyAttachment,activityA:"addPatientAllergyAttachmentRegex?activityId:".concat(d,",patientId:").concat(p)})),"medication"===g&&(n.props.updatePatient(e.data.addPatientMedicationAttachment),n.setState({isLoading:!1,selectedPatient:e.data.addPatientMedicationAttachment,activityA:"addPatientMedicationAttachment?activityId:".concat(d,",patientId:").concat(p)})),n.logUserActivity({activityId:d,token:m})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAttachment=function(e){console.log("...deleting attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.patient._id,l=(n.props.patient.name,e.type),o=e.attachment,r=e.item;if("allergy"===l){var c=r.type,m=r.title,d=r.description,p=o;t={query:'\n        mutation {deletePatientAllergyAttachment(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            allergyType:"').concat(c,'",\n            allergyTitle:"').concat(m,'",\n            allergyDescription:"').concat(d,'",\n            allergyAttachment:"').concat(p,'"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}}if("medication"===l){var u=r.type,g=r.title,h=r.description,y=o;t={query:'\n        mutation {deletePatientMedicationAttachment(\n          activityId:"'.concat(i,'",\n          patientId:"').concat(s,'",\n          patientInput:{\n            medicationType:"').concat(u,'",\n            medicationTitle:"').concat(g,'",\n            medicationDescription:"').concat(h,'",\n            medicationAttachment:"').concat(y,'"\n          })\n          {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...delete attachment success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"allergy"===l&&(n.props.updatePatient(e.data.deletePatientAllergyAttachment),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientAllergyAttachment,activityA:"deletePatientAllergyAttachment?activityId:".concat(i,",patientId:").concat(s)})),"medication"===l&&(n.props.updatePatient(e.data.deletePatientMedicationAttachment),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientMedicationAttachment,activityA:"deletePatientMedicationAttachment?activityId:".concat(i,",patientId:").concat(s)})),n.logUserActivity({activityId:i,token:a});var r="patient/"+s+"/"+l+"/attachments",c="https://mbjentemrstorage.s3.amazonaws.com/patient/"+s+"/"+l+"/attachments/",m=o,d=m.replace(c,"");console.log("1:",r),console.log("2:",m),console.log("3:",d);var p={bucketName:"mbjentemrstorage",dirName:r,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 deleting attachment.."),console.log("...s3 deleting attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"".concat(l," attachment")}},overlay:!0,s3State:{action:"delete",target:"".concat(l," attachment"),status:"inProgress"}}),u.deleteFile(d,p).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding image..."),n.context.setUserAlert("...adding image..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,l=n.context.activityId,o=n.props.patient._id;n.props.patient.name;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="patient/"+o+"/images";console.log("...file present...");var d=r.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d,t=c+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var g={query:'\n      mutation {addPatientImage(\n        activityId:"'.concat(l,'",\n        patientId:"').concat(o,'",\n        patientInput:{\n          imageName:"').concat(t,'",\n          imageType:"').concat(a,'",\n          imagePath:"').concat(i,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...image add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientImage),n.setState({isLoading:!1,selectedPatient:e.data.addPatientImage,activityA:"addPatientImage?activityId:".concat(l,",patientId:").concat(o),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientImage,n.logUserActivity({activityId:l,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteImage=function(e){console.log("...deleting image..."),n.context.setUserAlert("...deleting image..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=(n.props.patient.name,"patient/"+i+"/images"),l=e.name,o={query:'\n    mutation {deletePatientImage(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      patientInput:{\n        imageName:"').concat(e.name,'",\n        imageType:"').concat(e.type,'",\n        imagePath:"').concat(e.path,'"\n      })\n    {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var o="...image delete success!...";e.errors&&(o=e.errors[0].message),e.data.error&&(o=e.data.error),n.context.setUserAlert(o),n.props.updatePatient(e.data.deletePatientImage),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientImage,activityA:"deletePatientImage?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientImage,n.logUserActivity({activityId:a,token:t});var r={bucketName:"mbjentemrstorage",dirName:s,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},c=new re.a(r);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),c.deleteFile(l,r).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding file..."),n.context.setUserAlert("...adding file..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,l=n.context.activityId,o=n.props.patient._id;n.props.patient.name;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="patient/"+o+"/files";console.log("...file present...");var d=r.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d,t=c+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var g={query:'\n      mutation {addPatientFile(\n        activityId:"'.concat(l,'",\n        patientId:"').concat(o,'",\n        patientInput:{\n          fileName:"').concat(t,'",\n          fileType:"').concat(a,'",\n          filePath:"').concat(i,'"\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...file add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updatePatient(e.data.addPatientFile),n.setState({isLoading:!1,selectedPatient:e.data.addPatientFile,activityA:"addPatientFile?activityId:".concat(l,",patientId:").concat(o),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientFile,n.logUserActivity({activityId:l,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteFile=function(e){console.log("...deleting file..."),n.context.setUserAlert("...deleting file..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=(n.props.patient.name,{query:'\n    mutation {deletePatientFile(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      patientInput:{\n        fileName:"').concat(e.name,'",\n        fileType:"').concat(e.type,'",\n        filePath:"').concat(e.path,'"\n      })\n    {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')});fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...file delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updatePatient(s.data.deletePatientFile),n.setState({isLoading:!1,selectedPatient:s.data.deletePatientFile,activityA:"deletePatientFile?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=s.data.deletePatientFile,n.logUserActivity({activityId:a,token:t});var o="patient/"+i+"/files",r=e.name,c={bucketName:"mbjentemrstorage",dirName:o,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(r,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding notes..."),n.context.setUserAlert("...adding notes..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.notes.value.replace(/\n/g,"");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var l={query:'\n      mutation {addPatientNotes(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          notes:"').concat(s,'",\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientNotes),n.setState({isLoading:!1,selectedPatient:e.data.addPatientNotes,activityA:"addPatientNotes?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNote=function(e){console.log("...deleting note..."),n.context.setUserAlert("...deleting note..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientNote(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          note:"').concat(e,'"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientNote),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientNote,activityA:"deletePatientNote?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddTagForm=function(e){e.preventDefault(),console.log("...adding tags..."),n.context.setUserAlert("...adding tags..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.tags.value.replace(/\n/g,"");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var l={query:'\n      mutation {addPatientTags(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          tags:"').concat(s,'",\n        })\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tags add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.addPatientTags),n.setState({isLoading:!1,selectedPatient:e.data.addPatientTags,activityA:"addPatientTags?activityId:".concat(a,",patientId:").concat(i),adding:{state:null,field:null}}),n.context.selectedPatient=e.data.addPatientTags,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteTag=function(e){console.log("...deleting tag..."),n.context.setUserAlert("...deleting tag..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s={query:'\n      mutation {deletePatientTag(\n        activityId:"'.concat(a,'",\n        patientId:"').concat(i,'",\n        patientInput:{\n          tag:"').concat(e,'"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tag delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.deletePatientTag),n.setState({isLoading:!1,selectedPatient:e.data.deletePatientTag,activityA:"deletePatienTag?activityId:".concat(a,",patientId:").concat(i)}),n.context.selectedPatient=e.data.deletePatientTag,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.patient._id,s=e.target.field.value,l=e.target.query.value;if(0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var o={query:'\n    mutation {updatePatientSingleField(\n      activityId:"'.concat(a,'",\n      patientId:"').concat(i,'",\n      field:"').concat(s,'",\n      query:"').concat(l,'"\n    )\n    {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updatePatient(e.data.updatePatientSingleField),n.setState({isLoading:!1,selectedPatient:e.data.updatePatientSingleField,activityA:"updatePatientSingleField?activityId:".concat(a,",patientId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedPatient=e.data.updatePatientSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.parseForCalendar=function(e){console.log("...parsing patient dates for calendar...");var t=e.appointments.map((function(e){return{title:e.title,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important,field:"appointments"}}})),a=e.visits.map((function(e){return{title:e.title,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,field:"visits"}}}));n.setState({calendarAppointments:t,calendarVisits:a})},n.viewCalendarEvent=function(e){var t,a=e.event.extendedProps.props;"appointments"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,location:a.location,description:a.description,important:a.important,patient:n.props.patient},n.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:t,goLink:!0}})),"visits"===a.field&&(t={_id:a._id,date:a.date,title:a.title,type:a.type,subType:a.subType,time:a.time,patient:n.props.patient},n.setState({overlay:!0,overlayStatus:{type:"calendarVisit",data:t,goLink:!0}}))},n.dateClick=function(e){console.log("dateClick",e),"appointment"===n.props.subMenu&&n.setState({overlay:!0,overlayStatus:{type:"dateClickAppointmentPatient",data:{date:e.dateStr,patient:n.props.patient}}})},n.toggleOverlay=function(){n.setState({overlay:!1})},n.showPdfView=function(e){n.setState({showPdfView:!0,showPdfData:{type:e.type,data:e.data}})},n.closePdfView=function(){n.setState({showPdfView:!1,showPdfData:{type:null,data:null}})},n.new=function(e){console.log("new: ",e)},n.propsPatient=n.props.patient,n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...patient details component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));this.getPocketVars(e)}this.setState({selectedPatient:this.context.selectedPatient,menuSelect:this.props.subMenu}),"Admin"===this.context.role&&this.setState({canDelete:!0}),this.parseForCalendar({appointments:this.props.patient.appointments,visits:this.props.patient.visits})}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n            query {getPocketVars(\n              activityId:"'.concat(n,'")}\n          ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=F()().format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus,toggleOverlay:this.toggleOverlay}),i.a.createElement("div",{className:"detailContainer"},i.a.createElement(b.a,{className:""},!this.props.patient&&i.a.createElement("h3",null,"...")),i.a.createElement(b.a,{className:""},this.props.patient&&i.a.createElement(N.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(Rt,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"all"===this.props.subMenu&&i.a.createElement(b.a,{className:"tabRowAll"},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(d.b,{to:{pathname:"/appointments",state:{newAppointment:this.props.patient}}},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.new.bind(this,"appointment")},"New Appointment")),i.a.createElement(d.b,{to:{pathname:"/visits",state:{newVisit:this.props.patient}}},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.new.bind(this,"visit")},"New Visit")))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Fisrt Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Last Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.lastName),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"lastName")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.username),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.dob.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.gender),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone2),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.role),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Registration:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.registration.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Number:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.registration.number)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Referral:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),this.props.patient.referral.date&&i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.referral.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.date")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reason:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.reason),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.reason")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral Physician Contact:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.attendingPhysician),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attendingPhysician")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Occupation:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.role),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employer:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Contact:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Address:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.address),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.address")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Insurance:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Company:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.company),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.company")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Number:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.policyNumber),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.policyNumber")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.description")},"Edit")),this.props.patient.insurance.expiryDate&&i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Expiry:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.insurance.expiryDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.expiryDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Subscriber:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Company:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.company),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.company")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.description")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date of Death:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.expiryDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"expiryDate")},"Edit"))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Comorbidities:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"comorbidities")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"comorbidity")},"Add")),this.state.startFilter&&"comorbidities"===this.state.selectFilter&&i.a.createElement(Gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"comorbidity"===this.state.adding.field&&i.a.createElement(Yt,{onConfirm:this.submitAddComorbidityForm,onCancel:this.cancelAdd}),i.a.createElement(xt,{filter:this.state.filter,comorbidities:this.props.patient.comorbidities,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComorbidity}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.code))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Ae,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(Ue,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(dt,{filter:this.state.filter,addresses:this.props.patient.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Next of Kin:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"nextOfKin")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"nextOfKin")},"Add")),this.state.startFilter&&"nextOfKin"===this.state.selectFilter&&i.a.createElement(Vt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"nextOfKin"===this.state.adding.field&&i.a.createElement(jt,{onConfirm:this.submitAddNextOfKinForm,onCancel:this.cancelAdd}),i.a.createElement(ut,{filter:this.state.filter,nextOfKin:this.props.patient.nextOfKin,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNextOfKin}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Allergies:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"allergy")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"allergy")},"Add")),this.state.startFilter&&"allergy"===this.state.selectFilter&&i.a.createElement(_t,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"allergy"===this.state.adding.field&&i.a.createElement(Mt,{onConfirm:this.submitAddAllergyForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ft,{filter:this.state.filter,allergies:this.props.patient.allergies,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAllergy,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Medication:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"medication")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"medication")},"Add")),this.state.startFilter&&"medication"===this.state.selectFilter&&i.a.createElement(Pt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"medication"===this.state.adding.field&&i.a.createElement(zt,{onConfirm:this.submitAddMedicationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Nt,{filter:this.state.filter,medication:this.props.patient.medication,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteMedication,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Se,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ge,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(It,{filter:this.state.filter,images:this.props.patient.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(ke,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ve,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Tt,{filter:this.state.filter,files:this.props.patient.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile}))),i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Appointments:")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(we,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Ne,{filter:this.state.filter,appointments:this.props.patient.appointments,authId:this.context.activityId})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Visits:")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},this.state.startFilter&&"visit"===this.state.selectFilter&&i.a.createElement(qt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"visit")},"Filter")),i.a.createElement(Lt,{filter:this.state.filter,visits:this.props.patient.visits,authId:this.context.activityId,patientPage:!0})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(De,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Pe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(kt,{filter:this.state.filter,notes:this.props.patient.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Tags:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"tag")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"tag")},"Add")),this.state.startFilter&&"tag"===this.state.selectFilter&&i.a.createElement(Bt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(Ot,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(Dt,{filter:this.state.filter,tags:this.props.patient.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag}))))),"basic"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Fisrt Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Last Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.lastName),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"lastName")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Username:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.username),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"username")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"DOB:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.dob.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"dob")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Age:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.age)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Gender:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.gender),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"gender")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone 2:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.contact.phone2),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"contact.phone2")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Role:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.role),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Registration:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.registration.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Number:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.registration.number)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Referral:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),this.props.patient.referral.date&&i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.referral.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.date")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Reason:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.reason),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.reason")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral Physician Contact:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.referral.physician.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"referral.physician.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.attendingPhysician),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attendingPhysician")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Occupation:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.role),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.role")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Employer:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.name),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.name")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Contact:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Phone:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.phone),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.phone")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Email:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.email),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.email")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Address:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.occupation.employer.address),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"occupation.employer.address")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Insurance:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Company:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.company),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.company")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"Number:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.policyNumber),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.policyNumber")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.description")},"Edit")),this.props.patient.insurance.expiryDate&&i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Expiry:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.insurance.expiryDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.expiryDate")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Subscriber:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Company:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.company),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.company")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.insurance.subscriber.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"insurance.subscriber.description")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date of Death:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.patient.expiryDate.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"expiryDate")},"Edit")))),"admin"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"LoggedIn:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.loggedIn.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"ClientConnected:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.clientConnected.toString())),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Verified:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.verified.toString()),i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.type),i.a.createElement("p",{className:"listGroupText"},"Code:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.patient.verification.code)))),"address"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Addresses:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"address")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"address")},"Add")),this.state.startFilter&&"address"===this.state.selectFilter&&i.a.createElement(Ae,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"address"===this.state.adding.field&&i.a.createElement(Ue,{onConfirm:this.submitAddAddressForm,onCancel:this.cancelAdd}),i.a.createElement(dt,{filter:this.state.filter,addresses:this.props.patient.addresses,authId:this.context.activityId,onDelete:this.deleteAddress,canDelete:this.state.canDelete,makePrimary:this.setAddressPrimary})),"nextOfKin"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Next of Kin:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"nextOfKin")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"nextOfKin")},"Add")),this.state.startFilter&&"nextOfKin"===this.state.selectFilter&&i.a.createElement(Vt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"nextOfKin"===this.state.adding.field&&i.a.createElement(jt,{onConfirm:this.submitAddNextOfKinForm,onCancel:this.cancelAdd}),i.a.createElement(ut,{filter:this.state.filter,nextOfKin:this.props.patient.nextOfKin,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNextOfKin})),"allergy"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Allergies:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"allergy")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"allergy")},"Add")),this.state.startFilter&&"allergy"===this.state.selectFilter&&i.a.createElement(_t,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"allergy"===this.state.adding.field&&i.a.createElement(Mt,{onConfirm:this.submitAddAllergyForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ft,{filter:this.state.filter,allergies:this.props.patient.allergies,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteAllergy,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"medication"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Medication:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"medication")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"medication")},"Add")),this.state.startFilter&&"medication"===this.state.selectFilter&&i.a.createElement(Pt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"medication"===this.state.adding.field&&i.a.createElement(zt,{onConfirm:this.submitAddMedicationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Nt,{filter:this.state.filter,medication:this.props.patient.medication,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteMedication,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"comorbidities"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Comorbidities:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"comorbidities")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"comorbidity")},"Add")),this.state.startFilter&&"comorbidities"===this.state.selectFilter&&i.a.createElement(Gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"comorbidity"===this.state.adding.field&&i.a.createElement(Yt,{onConfirm:this.submitAddComorbidityForm,onCancel:this.cancelAdd}),i.a.createElement(xt,{filter:this.state.filter,comorbidities:this.props.patient.comorbidities,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComorbidity})),"image"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Se,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ge,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(It,{filter:this.state.filter,images:this.props.patient.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage})),"file"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(ke,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ve,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Tt,{filter:this.state.filter,files:this.props.patient.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile})),"appointment"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Appointments:")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},this.state.startFilter&&"appointment"===this.state.selectFilter&&i.a.createElement(we,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"appointment")},"Filter")),i.a.createElement(Ne,{filter:this.state.filter,appointments:this.props.patient.appointments,authId:this.context.activityId})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAppointments,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"visit"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Visits:")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},this.state.startFilter&&"visit"===this.state.selectFilter&&i.a.createElement(qt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter.bind(this,"visit")},"Filter")),i.a.createElement(Lt,{filter:this.state.filter,visits:this.props.patient.visits,authId:this.context.activityId,patientPage:!0})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"note"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),"Admin"===this.context.role&&i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(De,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Pe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(kt,{filter:this.state.filter,notes:this.props.patient.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote})),"tag"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Tags:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"tag")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"tag")},"Add")),this.state.startFilter&&"tag"===this.state.selectFilter&&i.a.createElement(Bt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(Ot,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(Dt,{filter:this.state.filter,tags:this.props.patient.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag})),"doc"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Document Generator:")),i.a.createElement(b.a,{className:"displayPaneHeadRow"},i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Test"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"test",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Referral"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"referral",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"admissionReminder"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"admissionReminder",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"sickNote"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"sickNote",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"insurance"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"insurance",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"diagnosisTesting"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"diagnosisTesting",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"prescription"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"prescription",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"treatmentConsent"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"treatmentConsent",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"treatmentInstructions"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"treatmentInstructions",data:"abc_xyz"})},"Create")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"unfitToFly"),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.showPdfView.bind(this,{type:"unfitToFly",data:"abc_xyz"})},"Create")))),!0===this.state.showPdfView&&i.a.createElement(mt,{pdfViewData:this.state.showPdfData,close:this.closePdfView,patient:this.props.patient}))))))}}]),a}(n.Component);Jt.contextType=f;var Ht=Jt,Qt=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"patient"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"active"),i.a.createElement("option",null,"name"),i.a.createElement("option",null,"username"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"role"),i.a.createElement("option",null,"dob"),i.a.createElement("option",null,"age"),i.a.createElement("option",null,"gender"),i.a.createElement("option",null,"registration.date"),i.a.createElement("option",null,"registration.number"),i.a.createElement("option",null,"contact.email"),i.a.createElement("option",null,"contact.phone"),i.a.createElement("option",null,"contact.phone2"),i.a.createElement("option",null,"addresses.number"),i.a.createElement("option",null,"addresses.street"),i.a.createElement("option",null,"addresses.town"),i.a.createElement("option",null,"addresses.city"),i.a.createElement("option",null,"addresses.parish"),i.a.createElement("option",null,"addresses.country"),i.a.createElement("option",null,"addresses.postalCode"),i.a.createElement("option",null,"addresses.primary"),i.a.createElement("option",null,"verification.verified"),i.a.createElement("option",null,"expiryDate"),i.a.createElement("option",null,"loggedIn")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Wt=(a(607),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,searchPatients:null,isLoading:!1,seshStore:null,profileLoaded:!1,canDelete:!1,sideCol:"menuPatient",startFilter:!1,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"list",subMenuState:!1,subMenu:"all",adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,creatingPatient:!1,newPatient:null,fromGoLink:null,goLinkId:null,tabKey:"list",dateClickPatientSelect:!1},e.searchPatients=function(t){t.preventDefault(),console.log("...searching patients..."),e.context.setUserAlert("...searching patients..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=e.context.activityId,l=t.target.field.value,o=t.target.query.value,r=!0;"active"!==l&&"age"!==l&&"dob"!==l&&"addresses.number"!==l&&"addresses.primary"!==l&&"loggedIn"!==l&&"clientConnected"!==l&&"verification.verified"!==l&&"registration.date"!==l&&"expiryDate"!==l&&"referral.date"!==l&&"insurance.expiryDate"!==l&&"insurance.expiryDate"!==l||(r=!1),!0===r&&(a={query:'\n        query {getPatientsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),!1===r&&(a={query:'\n        query {getPatientsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...patient search success!...";!0===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===r&&e.setState({isLoading:!1,searchPatients:t.data.getPatientsByFieldRegex,activityA:"getPatientsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===r&&e.setState({isLoading:!1,searchPatients:t.data.getPatientsByField,activityA:"getPatientsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewPatient=function(){e.setState({creatingPatient:!0})},e.cancelCreateNewPatient=function(){e.setState({creatingPatient:!1})},e.submitCreateNewPatientForm=function(t){t.preventDefault(),console.log("...creating new patient..."),e.context.setUserAlert("...creating new patient..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t.target.title.value,s=t.target.name.value,l=t.target.lastName.value,o=t.target.username.value,r=t.target.dob.value,c=t.target.role.value,m=t.target.gender.value,d=t.target.contactEmail.value,p=t.target.contactPhone.value,u=t.target.contactPhone2.value,g=t.target.addressNumber.value;""===g&&(g=0);var h=t.target.addressStreet.value,y=t.target.addressTown.value,v=t.target.addressCity.value,f=t.target.addressParish.value,E=t.target.addressCountry.value,b=t.target.addressPostalCode.value,N=t.target.referralDate.value,C=t.target.referralReason.value.replace(/\n/g," "),x=t.target.referralPhysicianName.value,A=t.target.referralPhysicianPhone.value,I=t.target.referralPhysicianEmail.value,T=(t.target.referralPhysicianAddress.value.replace(/\n/g," "),t.target.attendingPhysician.value),S=t.target.occupationRole.value,k=t.target.occupationEmployerName.value,w=t.target.occupationEmployerEmail.value,D=t.target.occupationEmployerPhone.value,F=t.target.occupationEmployerAddress.value.replace(/\n/g," "),U=t.target.insuranceCompany.value,L=t.target.insurancePolicyNumber.value,_=t.target.insuranceDescription.value.replace(/\n/g," "),P=t.target.insuranceExpiryDate.value,G=t.target.insuranceSubscriberCompany.value,V=t.target.insuranceSubscriberDescription.value.replace(/\n/g," ");if(0===i.trim().length||0===s.trim().length||0===o.trim().length||0===r.trim().length||0===c.trim().length||0===m.trim().length||0===d.trim().length||0===p.trim().length)return e.context.setUserAlert("...blank required fields!!!..."),void e.setState({isLoading:!1});var q={query:'\n      mutation {createPatient(\n        activityId:"'.concat(n,'",\n        patientInput:{\n          active:').concat(!1,',\n          username:"').concat(o,'",\n          dob:"').concat(r,'",\n          title:"').concat(i,'",\n          name:"').concat(s,'",\n          lastName:"').concat(l,'",\n          role:"').concat(c,'",\n          gender:"').concat(m,'",\n          contactEmail:"').concat(d,'",\n          contactPhone:"').concat(p,'",\n          contactPhone2:"').concat(u,'",\n          addressNumber:').concat(g,',\n          addressStreet:"').concat(h,'",\n          addressTown:"').concat(y,'",\n          addressCity:"').concat(v,'",\n          addressParish:"').concat(f,'",\n          addressCountry:"').concat(E,'",\n          addressPostalCode:"').concat(b,'",\n          referralDate:"').concat(N,'",\n          referralReason:"').concat(C,'",\n          referralPhysicianName:"').concat(x,'",\n          referralPhysicianEmail:"').concat(I,'",\n          referralPhysicianPhone:"').concat(A,'",\n          attendingPhysician:"').concat(T,'",\n          occupationRole:"').concat(S,'",\n          occupationEmployerName:"').concat(k,'",\n          occupationEmployerPhone:"').concat(D,'",\n          occupationEmployerEmail:"').concat(w,'",\n          occupationEmployerAddress:"').concat(F,'",\n          insuranceCompany:"').concat(U,'",\n          insurancePolicyNumber:"').concat(L,'",\n          insuranceDescription:"').concat(_,'",\n          insuranceExpiryDate:"').concat(P,'",\n          insuranceSubscriberCompany:"').concat(G,'",\n          insuranceSubscriberDescription:"').concat(V,'"\n        })\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(q),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create patient success!...";t.errors&&(i=t.errors[0].message),t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,showDetails:!0,creatingPatient:!1,tabKey:"detail",selectedPatient:t.data.createPatient,newPatient:t.data.createPatient,activityA:"createPatient?activityId:".concat(n,",patientId:").concat(t.data.createPatient._id)}),e.logUserActivity({activityId:n,token:a});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllPatients(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.toggleFilter=function(){e.setState({startFilter:!e.state.startFilter})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t}),"detail"===t&&e.state.selectedPatient?e.setState({subMenuState:!0}):e.setState({subMenuState:!1})},e.subMenuSelect=function(t){e.setState({subMenu:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedPatient:t,tabKey:"detail",menuSelect:"detail",subMenuState:!0}),e.props.selectPatient(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updatePatient=function(t){console.log("...updating selected patient..."),e.setState({selectedPatient:t}),e.props.selectPatient(t)},e.deletePatient=function(t){console.log("...deleteing patient...",t),e.context.setUserAlert("...deleteing patient..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deletePatientById(\n        activityId:"'.concat(n,'",\n        patientId:"').concat(i,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete patient success!...";t.errors&&(s=t.errors[0].message),t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deletePatientById?activityId:".concat(n,",patientId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllPatients({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e.clearSearch=function(){e.setState({searchPatients:null})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all patients component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.props.location.state&&this.props.location.state.patient&&(this.setState({fromGoLink:!0,goLinkId:this.props.location.state.patient}),this.props.location.state&&this.props.location.state.selectPatient&&this.setState({dateClickPatientSelect:!0})),this.getAllPatients(e),this.props.selectedPatient&&(console.log("...found existing Patient selection... loading..."),this.setState({showDetails:!0,selectedPatient:this.props.selectedPatient}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all patients retrieval success!...";if(e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a}),!0===t.state.fromGoLink){var l=e.data.getAllPatients.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,selectedPatient:l,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.state.dateClickPatientSelect.true&&t.setState({menuSelect:"list",dateClickPatientSelect:!1})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,l=F()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(l,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.error&&t.context.setUserAlert(e.data.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Be,{state:this.state.sideCol,menuSelect:this.menuSelect,subMenuState:this.state.subMenuState,subMenu:this.state.subMenu,subMenuSelect:this.subMenuSelect,page:"patient",role:this.context.role}),!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(b.a,{className:""},i.a.createElement("h1",null,"Patients:",!0===this.state.showDetails&&this.state.selectedPatient&&"detail"===this.state.tabKey&&this.state.selectedPatient.name)),i.a.createElement(b.a,{className:""},this.state.isLoading?i.a.createElement(T.a,{src:U,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(b.a,{className:""},this.state.patients&&i.a.createElement(N.a,{lg:12,className:""},!0===this.state.startFilter&&i.a.createElement(N.a,null,i.a.createElement(Qt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),"list"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter},"Filter"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn",onClick:this.resetFilter},"Reset")),i.a.createElement(B,{filter:this.state.filter,patients:this.state.patients,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deletePatient})),"search"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Search Patient"),i.a.createElement(b.a,{className:""},i.a.createElement(H,{onConfirm:this.searchPatients,onCancel:this.clearSearch})),i.a.createElement(b.a,null,this.state.searchPatients&&i.a.createElement(I.a,{variant:"primary",className:"centered_btn",onClick:this.toggleFilter},"Filter")),i.a.createElement(b.a,{className:""},this.state.searchPatients&&i.a.createElement(lt,{filter:this.state.filter,patients:this.state.searchPatients,authId:this.context.activityId,showDetails:this.showDetails})))),"detail"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol tabColDetail"},!1===this.state.showDetails&&!this.state.selectedPatient&&i.a.createElement("h3",null,"Select a Patient to see details"),!0===this.state.showDetails&&this.state.selectedPatient&&i.a.createElement(Ht,{patient:this.state.selectedPatient,updatePatient:this.updatePatient,subMenu:this.state.subMenu})),"new"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},!1===this.state.creatingPatient&&i.a.createElement(I.a,{variant:"secondary",className:"filterFormBtn",onClick:this.onStartCreateNewPatient},"Create New"),!0===this.state.creatingPatient&&i.a.createElement(st,{onConfirm:this.submitCreateNewPatientForm,onCancel:this.cancelCreateNewPatient}),this.state.newPatient&&i.a.createElement(b.a,null,i.a.createElement("h3",null,"Review New Patient"),this.state.newPatient.username))))))}}]),a}(n.Component));Wt.contextType=f;var Xt=Wt,$t=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create New"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"patientId",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Patient: ",e.patient.username),i.a.createElement(J.a.Control,{type:"text",value:e.patient._id}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"new_unreferred"),i.a.createElement("option",null,"referral"),i.a.createElement("option",null,"follow_up")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"important",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Important ?"),i.a.createElement(J.a.Control,{type:"checkbox"}))),i.a.createElement(J.a.Row,{className:"formRow"},!e.preFillDate&&i.a.createElement(J.a.Group,{as:N.a,controlId:"date",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Date"),i.a.createElement(J.a.Control,{type:"date",placeholder:"..."})),e.preFillDate&&i.a.createElement(J.a.Group,{as:N.a,controlId:"date",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Date"),i.a.createElement(J.a.Control,{type:"date",placeholder:"...",value:e.preFillDate}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"time",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Time"),i.a.createElement(J.a.Control,{type:"time",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"location",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Location"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"loginFormBtn searchBtn"},"Create"),i.a.createElement(I.a,{variant:"danger",className:"loginFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Zt=a(192),ea=a.n(Zt),ta=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Note: ",i.a.createElement("span",{className:"bold"},e.note)),!0===e.canDelete&&i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.note)},"Delete")))))},aa=function(e){var t=Object.assign({},e.filter),a=e.notes,n=[];"note"===t.field&&"note"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"note"===t.field&&"note"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"note"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ta,{key:s,note:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},l)},na=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Tag: ",i.a.createElement("span",{className:"bold"},e.tag)),!0===e.canDelete&&i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},!0===e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.tag)},"Delete")))))},ia=function(e){var t=Object.assign({},e.filter),a=e.tags,n=[];"tag"===t.field&&"tag"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e>t?1:-1}))),"tag"===t.field&&"tag"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e<t?1:-1}))),"tag"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(na,{key:s,tag:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"noteList"},l)},sa=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Staff"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement($,{users:e.users,selectUser:function(e){l(e)},filter:e.filter})),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"user",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"User"),i.a.createElement(J.a.Control,{type:"text",value:s._id}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},la=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},startFilter:!1,selectFilter:null,menuSelected:null,menuSelect:"basic",adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:null,selectedAppointment:n.props.appointment,addAttachmentForm:!1,addAttachmentArgs:null,showAddConsultantForm:!1,users:null,calEvent:{title:n.props.appointment.title,description:n.props.appointment.description,location:n.props.appointment.location,startTime:F.a.unix(n.props.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")+"T"+n.props.appointment.time+":00-05:00",endTime:F.a.unix(n.props.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")+"T"+n.props.appointment.time+":00-05:00"}},n.submitAddNoteForm=function(e){e.preventDefault(),console.log("...adding notes..."),n.context.setUserAlert("...adding notes..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.notes.value.replace(/\n/g,"");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var l={query:'\n      mutation {addAppointmentNotes(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          notes:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...notes add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.addAppointmentNotes),n.setState({isLoading:!1,selectedAppointment:e.data.addAppointmentNotes,activityA:"addAppointmentNotes?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.addAppointmentNotes,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteNote=function(e){console.log("...deleting notes..."),n.context.setUserAlert("...deleting notes..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e,l={query:'\n      mutation {deleteAppointmentNote(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          note:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...note delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.deleteAppointmentNote),n.setState({isLoading:!1,selectedAppointment:e.data.deleteAppointmentNote,activityA:"deleteAppointmentNote?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.deleteAppointmentNote,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddTagForm=function(e){e.preventDefault(),console.log("...adding tags..."),n.context.setUserAlert("...adding tags..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.tags.value.replace(/\n/g,"");if(0===s.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var l={query:'\n      mutation {addAppointmentTags(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          tags:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tags add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.addAppointmentTags),n.setState({isLoading:!1,selectedAppointment:e.data.addAppointmentTags,activityA:"addAppointmentTags?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.addAppointmentTags,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteTag=function(e){console.log("...deleting tags..."),n.context.setUserAlert("...deleting tags..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e,l={query:'\n      mutation {deleteAppointmentTag(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        appointmentInput:{\n          tag:"').concat(s,'"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...tag delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.deleteAppointmentTag),n.setState({isLoading:!1,selectedAppointment:e.data.deleteAppointmentTag,activityA:"deleteAppointmentTag?activityId:".concat(a,",appointmentId:").concat(i),adding:{state:null,field:null}}),n.context.selectedAppointment=e.data.deleteAppointmentTag,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddUserForm=function(e){e.preventDefault(),console.log("...adding consultant..."),n.context.setUserAlert("...adding consultant..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=e.target.user.value,s=n.props.appointment._id;if(0===i.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var l=n.state.users.filter((function(e){return e._id===i}))[0].role;if("Doctor"!==l&&"Nurse"!==l)return console.log("...please choose a Doctor or Nurse to add please..."),void n.context.setUserAlert("...please choose a Doctor or Nurse to add please...");var o={query:'\n      mutation {addAppointmentConsultant(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var l="...add consultant success!...";e.errors&&(l=e.errors[0].message),e.data.error&&(l=e.data.error),n.context.setUserAlert(l),n.props.updateAppointment(e.data.addAppointmentConsultant),n.setState({isLoading:!1,activityA:"addAppointmentConsultant?activityId:".concat(a,",appointmentId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteConsultant=function(e){console.log("...deleting consultant..."),n.context.setUserAlert("...deleting consultant..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=e._id,s=n.props.appointment._id,l={query:'\n      mutation {deleteAppointmentConsultant(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var l="...delete consultant success!...";e.errors&&(l=e.errors[0].message),e.data.error&&(l=e.data.error),n.context.setUserAlert(l),n.props.updateAppointment(e.data.deleteAppointmentConsultant),n.setState({isLoading:!1,activityA:"deleteAppointmentConsultant?activityId:".concat(a,",appointmentId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdatePatient=function(){console.log("show update patient select list")},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.appointment._id,s=e.target.field.value,l=e.target.query.value;if(0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var o={query:'\n      mutation {updateAppointmentSingleField(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(l,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateAppointment(e.data.updateAppointmentSingleField),n.setState({isLoading:!1,selectedPatient:e.data.updateAppointmentSingleField,activityA:"updateAppointmentSingleField?activityId:".concat(a,",appointmentId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedPatient=e.data.updateAppointmentSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.propsPatient=n.props.appointment,n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e;console.log("...appointment details component mounted..."),sessionStorage.getItem("logInfo")&&(e=JSON.parse(sessionStorage.getItem("logInfo"))),this.setState({selectedPatient:this.context.selectedPatient}),"Admin"===this.context.role&&this.setState({canDelete:!0}),this.getAllUsers(e)}},{key:"componentWillUnmount",value:function(){}},{key:"logUserActivity",value:function(e){console.log("...logUserActivity...");var t=e.activityId,a=e.token,n=t,i=this.state.activityA,s=F()().format("YYYY-MM-DD"),l={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(t,'",userId:"').concat(n,'",\n        userInput:{\n          activityDate:"').concat(s,'",\n          activityRequest:"').concat(i,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.data.addUserActivity.error&&console.log("...resDataError...",e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all users retrieval success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus}),i.a.createElement("div",{className:"topContainer"},i.a.createElement(b.a,{className:""},!this.props.appointment&&i.a.createElement("h3",null,"...")),i.a.createElement(b.a,{className:""},this.props.appointment&&i.a.createElement(N.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(Rt,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"all"===this.props.subMenu&&i.a.createElement(b.a,{className:"tabRowAll"},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.type),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.subType),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.time),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Location:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.location),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"location")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"description")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Important:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.important.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"important")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"In Progress:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.inProgress.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"inProgress")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attended:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.attended.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attended")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Patient:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.name),i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:this.props.appointment.patient._id}}},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient._id)),this.props.appointment.visit&&i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Visit:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.visit._id)),i.a.createElement(S.a.Item,null,i.a.createElement(ea.a,{event:this.state.calEvent}))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Creator:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.creator._id))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Consultants:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"consultant")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.startFilter&&"consultant"===this.state.selectFilter&&i.a.createElement(at,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(sa,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement($,{filter:this.state.filter,authId:this.context.activityId,users:this.props.appointment.consultants,appointmentPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(De,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Pe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(aa,{filter:this.state.filter,notes:this.props.appointment.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Tags:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"tag")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"tag")},"Add")),!0===this.state.startFilter&&"tag"===this.state.selectFilter&&i.a.createElement(Bt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(Ot,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(ia,{filter:this.state.filter,tags:this.props.appointment.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag}))))),"basic"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.title),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.type),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.subType),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.time),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Location:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.location),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"location")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Description:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.description),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"description")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Important:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.important.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"important")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"In Progress:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.inProgress.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"inProgress")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attended:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.attended.toString()),i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"attended")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Patient:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient.name),i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:this.props.appointment.patient._id}}},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.patient._id)),this.props.appointment.visit&&i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Visit:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.visit._id)),i.a.createElement(S.a.Item,null,i.a.createElement(ea.a,{event:this.state.calEvent})))),"admin"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment._id)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Creator:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.appointment.creator._id)))),"consultant"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Consultants:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"consultant")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.startFilter&&"consultant"===this.state.selectFilter&&i.a.createElement(at,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(sa,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement($,{filter:this.state.filter,authId:this.context.activityId,users:this.props.appointment.consultants,appointmentPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant})),"note"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Notes:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"note")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"note")},"Add")),!0===this.state.startFilter&&"note"===this.state.selectFilter&&i.a.createElement(De,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"note"===this.state.adding.field&&i.a.createElement(Pe,{onConfirm:this.submitAddNoteForm,onCancel:this.cancelAdd}),i.a.createElement(aa,{filter:this.state.filter,notes:this.props.appointment.notes,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteNote})),"tag"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Tags:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"tag")},"Filter"),i.a.createElement(I.a,{variant:"success",className:"searchBtn",onClick:this.startAdd.bind(this,"tag")},"Add")),!0===this.state.startFilter&&"tag"===this.state.selectFilter&&i.a.createElement(Bt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"tag"===this.state.adding.field&&i.a.createElement(Ot,{onConfirm:this.submitAddTagForm,onCancel:this.cancelAdd}),i.a.createElement(ia,{filter:this.state.filter,tags:this.props.appointment.tags,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTag}))))))}}]),a}(n.Component);la.contextType=f;var oa=la,ra=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Field"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType"),i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"checkinTime"),i.a.createElement("option",null,"seenTime"),i.a.createElement("option",null,"location"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"inProgress"),i.a.createElement("option",null,"attended"),i.a.createElement("option",null,"important"),i.a.createElement("option",null,"notes"),i.a.createElement("option",null,"tags")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Query"),i.a.createElement(J.a.Control,{type:"text",className:"fontAwesome",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Search"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},ca=(a(608),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,canDelete:!1,appointments:null,searchAppointments:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menuAppointment",startFilter:!1,filter:{calendar:!1,field:null,key:null,value:null},menuSelected:null,menuSelect:"list",subMenuState:!1,subMenu:"all",adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,selectedAppointment:null,creatingAppointment:!1,newAppointment:null,calendarAppointments:null,fromGoLink:null,goLinkId:null,sublistSearch:!1,tabKey:"list",preFillDate:null},e.searchAppointments=function(t){t.preventDefault(),console.log("...searching appointments..."),e.context.setUserAlert("...searching appointments..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,l=t.target.field.value,o=t.target.query.value,r=!0;"date"!==l&&"inProgress"!==l&&"attended"!==l&&"important"!==l&&"important"!==l||(r=!1),!0===r&&(a={query:'\n        query {getAppointmentsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),!1===r&&(a={query:'\n      query {getAppointmentsByField(\n        activityId:"'.concat(i,'",\n        field:"').concat(l,'",\n        query:"').concat(o,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...appointment search success!...";!0===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===r&&e.setState({isLoading:!1,searchAppointments:t.data.getAppointmentsByFieldRegex,activityA:"getAppointmentsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===r&&e.setState({isLoading:!1,searchAppointments:t.data.getAppointmentsByField,activityA:"getAppointmentsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewAppointment=function(){e.setState({creatingAppointment:!0})},e.cancelCreateNewAppointment=function(){e.setState({creatingAppointment:!1,selectedPatient:null})},e.submitCreateNewAppointmentForm=function(t){t.preventDefault(),console.log("...creating new appointment..."),e.context.setUserAlert("...creating new appointment..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.selectedPatient._id,s=e.state.selectedPatient.name+"_appointment_"+t.target.date.value,l=t.target.type.value,o=t.target.date.value,r=t.target.time.value,c=t.target.location.value,m=t.target.description.value.replace(/\n/g," "),d=t.target.important.checked;if(0!==s.trim().length&&0!==o.trim().length&&0!==r.trim().length&&0!==c.trim().length){if(console.log("foo",o),o<F()().format("YYYY-MM-DD"))return console.log("...ummm no! Please pick a date today or in the future..."),e.context.setUserAlert("...ummm no! Please pick a date today or in the future..."),void e.setState({isLoading:!1});var p={query:'\n      mutation {createAppointment(\n        activityId:"'.concat(n,'",\n        patientId:"').concat(i,'",\n        appointmentInput:{\n          title:"').concat(s,'",\n          type:"').concat(l,'",\n          subType:"').concat("",'",\n          date:"').concat(o,'",\n          time:"').concat(r,'",\n          location:"').concat(c,'",\n          description:"').concat(m,'",\n          important:').concat(d,"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create appointment success!...";t.errors&&(i=t.errors[0].message),t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,showDetails:!0,creatingAppointment:!1,selectedAppointment:t.data.createAppointment,newAppointment:t.data.createAppointment,tabKey:"detail",activityA:"createAppointment?activityId:".concat(n,",appointmentId:").concat(t.data.createAppointment._id)}),e.logUserActivity({activityId:n,token:a});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllAppointments(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))}else e.context.setUserAlert("...blank required fields!!!...")},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.toggleFilter=function(t){"calendar"===t&&e.setState({filter:{calendar:!e.state.calendar,field:e.state.field,key:e.state.key,value:e.state.value}}),e.setState({startFilter:!e.state.startFilter})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t}),"detail"===t&&e.state.selectedAppointment?e.setState({subMenuState:!0}):e.setState({subMenuState:!1})},e.subMenuSelect=function(t){e.setState({subMenu:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{calendar:e.state.filter.calendar,field:a,key:n,value:i}})},e.showDetails=function(t){e.setState({showDetails:!0,selectedAppointment:t,overlay:!1,tabKey:"detail",menuSelect:"detail",subMenuState:!0}),e.props.selectAppointment(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.selectPatient=function(t){e.setState({selectedPatient:t})},e.updateAppointment=function(t){console.log("...updating selected appointment..."),e.setState({selectedAppointment:t}),e.props.selectAppointment(t)},e.deleteAppointment=function(t){console.log("...deleteing appointment...",t),e.context.setUserAlert("...deleteing appointment..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteAppointmentById(\n        activityId:"'.concat(n,'",\n        appointmentId:"').concat(i,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete appointment success!...";t.errors&&(s=t.errors[0].message),t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteAppointmentById?activityId:".concat(n,",appointmentId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllAppointments({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.parseForCalendar=function(t){console.log("...parsing appointments for calendar...");var a=t.map((function(e){return{title:e.title,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important}}}));e.setState({calendarAppointments:a})},e.viewCalendarEvent=function(t){console.log("...viewing calendar appointment...");var a=e.state.appointments.filter((function(e){return e._id===t.event.extendedProps.props._id}))[0];e.setState({overlay:!0,overlayStatus:{type:"calendarAppointment",data:a}})},e.dateClick=function(t){console.log("dateClick"),e.setState({overlay:!0,overlayStatus:{type:"dateClickAppointment",data:t.dateStr}})},e.startCreateDateClickAppt=function(){e.setState({overlay:!1,menuSelect:"new",creatingAppointment:!0,preFillDate:e.state.overlayStatus.data})},e.toggleOverlay=function(){e.setState({overlay:!1})},e.startSublistSearch=function(){e.setState({sublistSearch:!0})},e.cancelSublistSearch=function(){e.setState({sublistSearch:!1}),e.getAllPatients({activityId:e.context.activityId,token:e.context.token})},e.submitSublistSearchForm=function(t){t.preventDefault(),console.log("...searching patient sublist..."),e.context.setUserAlert("...searching patient sublist..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,l=t.target.field.value,o=t.target.query.value,r=!0;"active"!==l&&"age"!==l&&"dob"!==l&&"addresses.number"!==l&&"addresses.primary"!==l&&"loggedIn"!==l&&"clientConnected"!==l&&"verification.verified"!==l&&"registration.date"!==l&&"expiryDate"!==l&&"referral.date"!==l&&"insurance.expiryDate"!==l&&"insurance.expiryDate"!==l||(r=!1),!0===r&&(a={query:'\n        query {getPatientsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),!1===r&&(a={query:'\n        query {getPatientsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...patient search success!...";!0===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===r&&e.setState({isLoading:!1,patients:t.data.getPatientsByFieldRegex,activityA:"getPatientsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),!1===r&&e.setState({isLoading:!1,patients:t.data.getPatientsByField,activityA:"getPatientsByField?activityId:".concat(i,",userId:").concat(s)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null,calendar:!1}})},e.clearSearch=function(){e.setState({searchAppointments:null})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all appointments component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.getAllPatients(e),this.props.location.state&&this.props.location.state.appointment&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.appointment}),this.getAllAppointments(e),this.props.selectedAppointment&&(console.log("...found existing Appointment selection... loading..."),this.setState({showDetails:!0,selectedAppointment:this.props.selectedAppointment})),this.props.location.state&&this.props.location.state.newAppointment&&(console.log("...creating a new appt from patient detail..."),this.setState({creatingAppointment:!0,selectedPatient:this.props.location.state.newAppointment,menuSelect:"new"})),this.props.location.state&&this.props.location.state.newAppointmentDate&&(console.log("...creating a new appt from patient date click..."),this.setState({creatingAppointment:!0,selectedPatient:this.props.location.state.newAppointmentDate.patient,preFillDate:this.props.location.state.newAppointmentDate.date,menuSelect:"new"}))}}},{key:"componentWillUnmount",value:function(){}},{key:"getAllAppointments",value:function(e){var t=this;console.log("...retrieving all appointments..."),this.context.setUserAlert("...retrieving all appointments..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllAppointments(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all appointments retrieval success!...";if(e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),!0===t.state.fromGoLink){var s=e.data.getAllAppointments.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,selectedAppointment:s,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(i),t.setState({isLoading:!1,appointments:e.data.getAllAppointments,activityA:"getAllAppointments?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a}),t.parseForCalendar(e.data.getAllAppointments)})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...all patients retrieval success!...";e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,l=F()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(l,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.addUserActivity.error&&t.context.setUserAlert(e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Be,{state:this.state.sideCol,menuSelect:this.menuSelect,subMenuState:this.state.subMenuState,subMenu:this.state.subMenu,subMenuSelect:this.subMenuSelect,page:"appointment",role:this.context.role}),!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus,selectCalendarDetails:this.showDetails,toggleOverlay:this.toggleOverlay,startCreateDateClickAppt:this.startCreateDateClickAppt}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(b.a,{className:""},i.a.createElement("h1",null,"Appointments:",!0===this.state.showDetails&&this.state.selectedAppointment&&"detail"===this.state.tabKey&&this.state.selectedAppointment.title)),i.a.createElement(b.a,{className:""},this.state.isLoading?i.a.createElement(T.a,{src:U,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(b.a,{className:""},this.state.appointments&&i.a.createElement(N.a,{md:12,className:""},!0===this.state.startFilter&&i.a.createElement(N.a,null,i.a.createElement(we,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),"list"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol tabRowAppt"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter},"Filter"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn",onClick:this.resetFilter},"Reset")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},i.a.createElement(j,{filter:this.state.filter,appointments:this.state.appointments,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteAppointment})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAppointments,dateClick:this.dateClick,eventClick:this.viewCalendarEvent})))),"search"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Search:"),i.a.createElement(b.a,{className:""},i.a.createElement(ra,{onConfirm:this.searchAppointments,onCancel:this.clearSearch})),i.a.createElement(b.a,null,this.state.searchAppointments&&i.a.createElement(I.a,{variant:"primary",className:"centered_btn",onClick:this.toggleFilter},"Filter")),i.a.createElement(b.a,{className:""},this.state.searchAppointments&&i.a.createElement(j,{filter:this.state.filter,appointments:this.state.searchAppointments,authId:this.context.activityId,showDetails:this.showDetails})))),"detail"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol tabColDetail"},!1===this.state.showDetails&&!this.state.selectedAppointment&&i.a.createElement("h3",null,"Select a Appointment to see details"),!0===this.state.showDetails&&this.state.selectedAppointment&&i.a.createElement(oa,{appointment:this.state.selectedAppointment,updateAppointment:this.updateAppointment,subMenu:this.state.subMenu})),"new"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},!1===this.state.creatingAppointment&&i.a.createElement(I.a,{variant:"secondary",className:"filterFormBtn",onClick:this.onStartCreateNewAppointment},"Create New"),!0===this.state.creatingAppointment&&this.state.patients&&!this.state.selectedPatient&&i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Select a Patient"),i.a.createElement(b.a,{className:""},i.a.createElement(I.a,{variant:"success",className:"patientSublistSearchBtn",onClick:this.startSublistSearch},"Search")),i.a.createElement(b.a,{className:""},!0===this.state.sublistSearch&&i.a.createElement(H,{onCancel:this.cancelSublistSearch,onConfirm:this.submitSublistSearchForm})),i.a.createElement(b.a,{className:""},i.a.createElement(B,{filter:this.state.filter,patients:this.state.patients,authId:this.context.activityId,onSelect:this.selectPatient,appointmentPage:!0}))),!0===this.state.creatingAppointment&&this.state.selectedPatient&&i.a.createElement(b.a,null,i.a.createElement($t,{onConfirm:this.submitCreateNewAppointmentForm,onCancel:this.cancelCreateNewAppointment,patient:this.state.selectedPatient,preFillDate:this.state.preFillDate})),this.state.newAppointment&&i.a.createElement(b.a,null,i.a.createElement("h3",null,"Review New Appointment ",this.state.newAppointment._id)))))))}}]),a}(n.Component));ca.contextType=f;var ma=ca,da=function(e){return i.a.createElement("div",{className:"loginFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h1",null,"Create Visit Form"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"appointmentId",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Appointment: ",e.appointment.title),i.a.createElement(J.a.Control,{type:"text",value:e.appointment._id}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"loginFormBtn"},"Create"),i.a.createElement(I.a,{variant:"danger",className:"loginFormBtn",onClick:e.onCancel},"Cancel"))))},pa=void 0,ua=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.complaint.title)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.complaint.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.complaint.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Anamnesis: ",i.a.createElement("span",{className:"bold"},e.complaint.anamnesis))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(pa,{field:"complaint",data:e.complaint})}))),i.a.createElement(ht,{item:e.complaint,attachments:e.complaint.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"complaint"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(pa,e.complaint)},"Delete"))))))))},ga=function(e){var t=Object.assign({},e.filter),a=e.complaints,n=[];"complaint"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"complaint"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"complaint"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"complaint"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"complaint"===t.field&&"anamnesis"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.anamnesis>t.anamnesis?1:-1}))),"complaint"===t.field&&"anamnesis"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.anamnesis<t.anamnesis?1:-1}))),"complaint"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ua,{key:s,complaint:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},l)},ha=void 0,ya=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.survey.title)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.survey.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.survey.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(ha,{field:"survey",data:e.survey})}))),i.a.createElement(ht,{item:e.survey,attachments:e.survey.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"survey"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(ha,e.survey)},"Delete"))))))))},va=function(e){var t=Object.assign({},e.filter),a=e.surveys,n=[];"survey"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"survey"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"survey"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"survey"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"survey"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ya,{key:s,survey:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},l)},fa=void 0,Ea=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.title)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.systematicInquiry.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(fa,{field:"systematicInquiry",data:e.systematicInquiry})}))),i.a.createElement(ht,{item:e.systematicInquiry,attachments:e.systematicInquiry.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"systematicInquiry"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(fa,e.systematicInquiry)},"Delete"))))))))},ba=function(e){var t=Object.assign({},e.filter),a=e.systematicInquiry,n=[];"systematicInquiry"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"systematicInquiry"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"systematicInquiry"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"systematicInquiry"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"systematicInquiry"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ea,{key:s,systematicInquiry:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},l)},Na=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Pulse Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.pr)),i.a.createElement(G.a.Text,{className:"cardText"},"Respiratory Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.rr)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Pulse Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.pr))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Respiratory Rate: ",i.a.createElement("span",{className:"bold"},e.vitals.rr))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Temperature: ",i.a.createElement("span",{className:"bold"},e.vitals.temp))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"SP02: ",i.a.createElement("span",{className:"bold"},e.vitals.sp02))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Height : ",i.a.createElement("span",{className:"bold"},e.vitals.heightValue),"  ",i.a.createElement("span",{className:"bold"},e.vitals.heightUnit))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Weight : ",i.a.createElement("span",{className:"bold"},e.vitals.weightValue),"  ",i.a.createElement("span",{className:"bold"},e.vitals.weightUnit))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"BMI : ",i.a.createElement("span",{className:"bold"},e.vitals.bmi))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Urine"),i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.vitals.urine.type)," Value: ",i.a.createElement("span",{className:"bold"},e.vitals.urine.value))),i.a.createElement("li",null,!0===e.canDelete&&i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.vitals)},"Delete")))))))},Ca=function(e){var t=Object.assign({},e.filter),a=e.vitals,n=[];"vitals"===t.field&&"pr"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.pr>t.pr?1:-1}))),"vitals"===t.field&&"pr"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.pr<t.pr?1:-1}))),"vitals"===t.field&&"bp1"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bp1>t.bp1?1:-1}))),"vitals"===t.field&&"bp1"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bp1<t.bp1?1:-1}))),"vitals"===t.field&&"bp2"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bp2>t.bp2?1:-1}))),"vitals"===t.field&&"bp2"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bp2<t.bp2?1:-1}))),"vitals"===t.field&&"rr"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.rr>t.rr?1:-1}))),"vitals"===t.field&&"rr"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.rr<t.rr?1:-1}))),"vitals"===t.field&&"temp"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.temp>t.temp?1:-1}))),"vitals"===t.field&&"temp"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.temp<t.temp?1:-1}))),"vitals"===t.field&&"sp02"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.sp02>t.sp02?1:-1}))),"vitals"===t.field&&"sp02"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.sp02<t.sp02?1:-1}))),"vitals"===t.field&&"heightValue"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.heightValue>t.heightValue?1:-1}))),"vitals"===t.field&&"heightValue"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.heightValue<t.heightValue?1:-1}))),"vitals"===t.field&&"weightValue"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.weightValue>t.weightValue?1:-1}))),"vitals"===t.field&&"weightValue"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.weightValue<t.weightValue?1:-1}))),"vitals"===t.field&&"bmi"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.bmi>t.bmi?1:-1}))),"vitals"===t.field&&"bmi"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.bmi<t.bmi?1:-1}))),"vitals"===t.field&&"urine.type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.urine.type>t.urine.type?1:-1}))),"vitals"===t.field&&"urine.type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.urine.type<t.urine.type?1:-1}))),"vitals"===t.field&&"urine.value"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.urine.value>t.urine.value?1:-1}))),"vitals"===t.field&&"urine.value"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.urine.value<t.urine.value?1:-1}))),"vitals"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Na,{key:s,vitals:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment})}));return i.a.createElement("ul",{className:"visitList"},l)},xa=void 0,Aa=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"General: ",i.a.createElement("span",{className:"bold"},e.examination.general)),i.a.createElement(G.a.Text,{className:"cardText"},"Area: ",i.a.createElement("span",{className:"bold"},e.examination.area)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"General: ",i.a.createElement("span",{className:"bold"},e.examination.general))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Area: ",i.a.createElement("span",{className:"bold"},e.examination.area))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"type: ",i.a.createElement("span",{className:"bold"},e.examination.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"measure: ",i.a.createElement("span",{className:"bold"},e.examination.measure))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"value: ",i.a.createElement("span",{className:"bold"},e.examination.value))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"description: ",i.a.createElement("span",{className:"bold"},e.examination.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"followUp: ",i.a.createElement("span",{className:"bold"},!0===e.examination.followUp?i.a.createElement(h.a,{icon:y.e,className:"listIcon"}):i.a.createElement(h.a,{icon:y.a,className:"listIcon"})))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(xa,{field:"examination",data:e.examination})}))),i.a.createElement(ht,{item:e.examination,attachments:e.examination.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"examination"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(xa,e.examination)},"Delete"))))))))},Ia=function(e){var t=Object.assign({},e.filter),a=e.examination,n=[];"examination"===t.field&&"general"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.general>t.general?1:-1}))),"examination"===t.field&&"general"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.general<t.general?1:-1}))),"examination"===t.field&&"area"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.area>t.area?1:-1}))),"examination"===t.field&&"area"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.area<t.area?1:-1}))),"examination"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"examination"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"examination"===t.field&&"measure"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.measure>t.measure?1:-1}))),"examination"===t.field&&"measure"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.measure<t.measure?1:-1}))),"examination"===t.field&&"value"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.value>t.value?1:-1}))),"examination"===t.field&&"value"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.value<t.value?1:-1}))),"examination"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"examination"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"examination"===t.field&&"followUp"===t.key&&(n=a.filter((function(e){return e.followUp===t.value}))),"examination"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Aa,{key:s,examination:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},l)},Ta=void 0,Sa=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.investigation.title)),i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.investigation.type)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.investigation.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.investigation.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.investigation.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(Ta,{field:"investigation",data:e.investigation})}))),i.a.createElement(ht,{item:e.investigation,attachments:e.investigation.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"investigation"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Ta,e.investigation)},"Delete"))))))))},ka=function(e){var t=Object.assign({},e.filter),a=e.investigation,n=[];"investigation"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"investigation"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"investigation"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"investigation"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"investigation"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Sa,{key:s,investigation:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},l)},wa=void 0,Da=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.diagnosis.title)),i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.diagnosis.type)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.diagnosis.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.diagnosis.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.diagnosis.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(wa,{field:"diagnosis",data:e.diagnosis})}))),i.a.createElement(ht,{item:e.diagnosis,attachments:e.diagnosis.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"diagnosis"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(wa,e.diagnosis)},"Delete"))))))))},Fa=function(e){var t=Object.assign({},e.filter),a=e.diagnosis,n=[];"diagnosis"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"diagnosis"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"diagnosis"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"diagnosis"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"diagnosis"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"diagnosis"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"diagnosis"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Da,{key:s,diagnosis:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},l)},Ua=void 0,La=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.treatment.title)),i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.treatment.type)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.treatment.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.treatment.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.treatment.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Dose: ",i.a.createElement("span",{className:"bold"},e.treatment.dose))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Frequency: ",i.a.createElement("span",{className:"bold"},e.treatment.frequency))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(Ua,{field:"treatment",data:e.treatment})}))),i.a.createElement(ht,{item:e.treatment,attachments:e.treatment.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"treatment"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Ua,e.treatment)},"Delete"))))))))},_a=function(e){var t=Object.assign({},e.filter),a=e.treatment,n=[];"treatment"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"treatment"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"treatment"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"treatment"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"treatment"===t.field&&"dose"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.dose>t.dose?1:-1}))),"treatment"===t.field&&"dose"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.dose<t.dose?1:-1}))),"treatment"===t.field&&"frequency"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.frequency>t.frequency?1:-1}))),"treatment"===t.field&&"frequency"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.frequency<t.frequency?1:-1}))),"treatment"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"treatment"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"treatment"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(La,{key:s,treatment:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment})}));return i.a.createElement("ul",{className:"visitList"},l)},Pa=void 0,Ga=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.billing.title)),i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.billing.type)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Title: ",i.a.createElement("span",{className:"bold"},e.billing.title))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.billing.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Description: ",i.a.createElement("span",{className:"bold"},e.billing.description))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Notes: ",i.a.createElement("span",{className:"bold"},e.billing.notes))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Amount: ",i.a.createElement("span",{className:"bold"},e.billing.amount))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Paid: ",i.a.createElement("span",{className:"bold"},!0===e.billing.paid?i.a.createElement(h.a,{icon:y.e,className:"listIcon"}):i.a.createElement(h.a,{icon:y.a,className:"listIcon"})),!1===e.billing.paid&&i.a.createElement("span",{onClick:e.updateBillingPaid.bind(Pa,e.billing)},"Update?"))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Attachments:",i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Add Attachment")))},i.a.createElement(h.a,{icon:y.j,className:"listIcon",onClick:e.onAddAttachment.bind(Pa,{field:"billing",data:e.billing})}))),i.a.createElement(ht,{item:e.billing,attachments:e.billing.attachments,canDelete:e.canDelete,onDelete:e.deleteAttachment,type:"billing"})),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(Pa,e.billing)},"Delete"))))))))},Va=function(e){var t=Object.assign({},e.filter),a=e.billing,n=[];"billing"===t.field&&"title"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.title>t.title?1:-1}))),"billing"===t.field&&"title"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.title<t.title?1:-1}))),"billing"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"billing"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"billing"===t.field&&"amount"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.amount>t.amount?1:-1}))),"billing"===t.field&&"amount"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.amount<t.amount?1:-1}))),"billing"===t.field&&"description"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.description>t.description?1:-1}))),"billing"===t.field&&"description"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.description<t.description?1:-1}))),"billing"===t.field&&"notes"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.notes>t.notes?1:-1}))),"billing"===t.field&&"notes"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.notes<t.notes?1:-1}))),"billing"===t.field&&"paid"===t.key&&(n=a.filter((function(e){return e.paid===t.value}))),"billing"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ga,{key:s,billing:t,canDelete:e.canDelete,onDelete:e.onDelete,onAddAttachment:e.onAddAttachment,deleteAttachment:e.deleteAttachment,updateBillingPaid:e.updateBillingPaid})}));return i.a.createElement("ul",{className:"visitList"},l)},qa=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},"number: ",i.a.createElement("span",{className:"bold"},e.key)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("h5",null,"chronicIllness:")),i.a.createElement("li",null,i.a.createElement("p",null,"Diabetes")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.diabetes.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"High BloodPressure")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.hbp.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Dyslipidemia")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.dyslipidemia.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Cad")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.chronicIllness.cad.comment))),i.a.createElement("li",null,i.a.createElement("h5",null,"Lifestyle")),i.a.createElement("li",null,i.a.createElement("p",null,"Weight")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.weight.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Diet")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.diet.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Smoking")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.smoking.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"SubstanceAbuse")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.substanceAbuse.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Exercise")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.exercise.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Allergies")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.allergies.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Asthma")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.lifestyle.asthma.comment))),i.a.createElement("li",null,i.a.createElement("h5",null,"Screening :")),i.a.createElement("li",null,i.a.createElement("p",null,"Breast")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.breast.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Prostate")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.prostate.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Cervix")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.cervix.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Colon")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.colon.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Dental")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.screening.dental.comment))),i.a.createElement("li",null,i.a.createElement("h5",null,"Vaccines :")),i.a.createElement("li",null,i.a.createElement("p",null,"Influenza")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.influenza.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Varicella")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.varicella.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"HPV")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.hpv.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"MMR")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.mmr.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Tetanus")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.tetanus.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Pneumovax")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.pneumovax.comment))),i.a.createElement("li",null,i.a.createElement("p",null,"Other")),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Other: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.name)),i.a.createElement(G.a.Text,{className:"cardText"},"Medication: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.medication.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Testing: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.testing.toString())),i.a.createElement(G.a.Text,{className:"cardText"},"Comment: ",i.a.createElement("span",{className:"bold"},e.vigilance.vaccines.other.comment))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.vigilance)},"Delete")))))))},Ba=function(e){var t=Object.assign({},e.filter),a=e.vigilance,n=[];"vigilance"===t.field&&"chronicIllness.diabetes.medication"===t.key&&(n=a.filter((function(e){return e.chronicIllness.diabetes.medication===t.value}))),"vigilance"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(qa,{key:s,vigilance:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"fileList"},l)},Ra=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},i.a.createElement("a",{href:e.image.path,target:"_blank",rel:"noopener noreferrer"},e.image.name)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.image.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.image.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.image.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.image)},"Delete"))))))))},Oa=function(e){var t=Object.assign({},e.filter),a=e.images,n=[];"image"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"image"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"image"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"image"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"image"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"image"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"image"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(Ra,{key:s,image:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"imageList"},l)},ja=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],m=r[1];return i.a.createElement("li",{key:e.key,className:""},i.a.createElement(G.a,null,i.a.createElement(G.a.Body,{className:"cardBody"},i.a.createElement(G.a.Text,{className:"cardText"},i.a.createElement("a",{href:e.file.path,target:"_blank",rel:"noopener noreferrer"},e.file.name)),i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"More Info")))},i.a.createElement(h.a,{icon:y.h,className:"listIcon",onClick:function(){!0===s&&l(!1),!1===s&&l(!0)}})),!0===s&&i.a.createElement(b.a,{className:"listItemHiddenRow"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Name: ",i.a.createElement("span",{className:"bold"},e.file.name))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Type: ",i.a.createElement("span",{className:"bold"},e.file.type))),i.a.createElement("li",null,i.a.createElement(G.a.Text,{className:"cardText"},"Link: ",i.a.createElement("span",{className:"bold"},e.file.path))),!0===e.canDelete&&i.a.createElement("li",null,i.a.createElement(k.a,{key:"top",placement:"top",overlay:i.a.createElement(w.a,{id:"popover-positioned-".concat("top")},i.a.createElement(w.a.Content,null,i.a.createElement("strong",null,"Delete!?")))},i.a.createElement(h.a,{icon:y.k,className:"listIcon",onClick:function(){!0===c&&m(!1),!1===c&&m(!0)}}))),!0===c&&i.a.createElement("li",null,i.a.createElement(b.a,{className:"listItemHiddenRow"},e.canDelete&&i.a.createElement(I.a,{variant:"outline-danger",onClick:e.onDelete.bind(undefined,e.file)},"Delete"))))))))},Ma=function(e){var t=Object.assign({},e.filter),a=e.files,n=[];"file"===t.field&&"name"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.name>t.name?1:-1}))),"file"===t.field&&"name"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.name<t.name?1:-1}))),"file"===t.field&&"type"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.type>t.type?1:-1}))),"file"===t.field&&"type"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.type<t.type?1:-1}))),"file"===t.field&&"link"===t.key&&"Ascending"===t.value&&(n=a.sort((function(e,t){return e.path>t.path?1:-1}))),"file"===t.field&&"link"===t.key&&"Descending"===t.value&&(n=a.sort((function(e,t){return e.path<t.path?1:-1}))),"file"!==t.field&&(n=a);var s=0,l=n.map((function(t){return s=n.indexOf(t)+1,i.a.createElement(ja,{key:s,file:t,canDelete:e.canDelete,onDelete:e.onDelete})}));return i.a.createElement("ul",{className:"fileList"},l)},za=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"complaint"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"anamnesis")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Ya=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"survey"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Ka=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"systematicInquiry"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Ja=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"diagnosis"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Ha=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"vitals"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"pr"),i.a.createElement("option",null,"bp1"),i.a.createElement("option",null,"bp2"),i.a.createElement("option",null,"rr"),i.a.createElement("option",null,"temp"),i.a.createElement("option",null,"sp02"),i.a.createElement("option",null,"heightUnit"),i.a.createElement("option",null,"heightValue"),i.a.createElement("option",null,"weightUnit"),i.a.createElement("option",null,"weightValue"),i.a.createElement("option",null,"bmi"),i.a.createElement("option",null,"urine.type"),i.a.createElement("option",null,"urine.value")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Qa=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"examination"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"general"),i.a.createElement("option",null,"area"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"measure"),i.a.createElement("option",null,"value"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"followUp")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Wa=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"investigation"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Xa=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"treatment"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"dose"),i.a.createElement("option",null,"frequency")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},$a=function(e){return i.a.createElement("div",{className:"filterFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"field"},i.a.createElement(J.a.Control,{type:"text",hidden:"true",value:"billing"}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"key",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Field to Filter"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"type"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"description"),i.a.createElement("option",null,"amount"),i.a.createElement("option",null,"paid"),i.a.createElement("option",null,"notes")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Filter Type"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"Ascending"),i.a.createElement("option",null,"Descending"),i.a.createElement("option",null,"true"),i.a.createElement("option",null,"false")))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Filter"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},Za=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Complaint"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"anamnesis",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Anamnesis * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},en=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Survey"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},tn=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add SystematicInquiry"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},an=function(e){var t=Object(n.useState)("Lbs"),a=Object(u.a)(t,2),s=a[0],l=a[1];return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Vitals"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement("div",{className:"formDivider1"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"pr",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Pulse Rate * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"rr",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Respiratory Rate * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"bp1",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Blood Pressure (top) * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"bp2",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Blood Pressure (bottom) * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"temp",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Temperature * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"sp02",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"SP-02 * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"heightUnit",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Height: Unit * "),i.a.createElement(J.a.Control,{as:"select",onChange:function(e){return"M"===(t=e.target.value)&&l("Kg"),void("In"===t&&l("Lbs"));var t}},i.a.createElement("option",null,"In"),i.a.createElement("option",null,"M"))),i.a.createElement(J.a.Group,{as:N.a,controlId:"heightValue",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Height: Value * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"weightUnit",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Weight: Unit * "),i.a.createElement(J.a.Control,{type:"text",value:s})),i.a.createElement(J.a.Group,{as:N.a,controlId:"weightValue",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Weight: Value * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"urineType",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Urine: Type"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"urineValue",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Urine: Value"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},nn=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Examination"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"general",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"General * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"area",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Area * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"measure",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Measure * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"value",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Value * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"followUp",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"FollowUp ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},sn=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Investigation"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},ln=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Diagnosis"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Title * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},on=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Treatment"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"title",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Title * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"dose",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Dose * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"frequency",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Frequency * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Attachment"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},rn=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h4",null,"Add Billing"),i.a.createElement("p",null,"required feilds are denoted by a ' * '"),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"type",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Type * "),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"description",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Description * "),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"amount",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Amount * "),i.a.createElement(J.a.Control,{type:"number",step:"0.001",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"paid",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Paid ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"notes",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Notes"),i.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"..."}))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"File"),i.a.createElement(J.a.Control,{type:"file",id:"fileInput",placeholder:"...",onChange:function(e){f._currentValue.file=e.target.files[0]}}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"outline-success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"outline-danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},cn=function(e){return i.a.createElement("div",{className:"addFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement("h3",null,"Add Vigilance"),i.a.createElement("div",{className:"formDivider1"},i.a.createElement("h4",null,"Chronic Illness:"),i.a.createElement("p",{className:"underlined"},"Diabetes"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessDiabetesMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessDiabetesTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessDiabetesComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"HBP"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessHbpMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessHbpTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessHbpComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Dyslipidemia"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessDyslipidemiaMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessDyslipidemiaTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessDyslipidemiaComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Cad"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessCadMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessCadTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceChronicIllnessCadComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider2"},i.a.createElement("h4",null,"Lifestyle:"),i.a.createElement("p",{className:"underlined"},"Weight"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleWeightMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleWeightTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleWeightComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Diet"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleDietMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleDietTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleDietComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Smoking"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleSmokingMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleSmokingTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleSmokingComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"SubstanceAbuse"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleSubstanceAbuseMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleSubstanceAbuseTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleSubstanceAbuseComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Exercise"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleExerciseMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleExerciseTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleExerciseComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Allergies"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleAllergiesMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleAllergiesTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleAllergiesComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Asthma"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleAsthmaMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleAsthmaTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceLifestyleAsthmaComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider3"},i.a.createElement("h4",null,"Screening:"),i.a.createElement("p",{className:"underlined"},"Breast"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningBreastMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningBreastTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningBreastComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Prostate"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningProstateMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningProstateTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningProstateComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Cervix"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningCervixMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningCervixTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningCervixComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Colon"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningColonMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningColonTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningColonComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Dental"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningDentalMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningDentalTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceScreeningDentalComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement("div",{className:"formDivider1"},i.a.createElement("h4",null,"Vaccines"),i.a.createElement("p",{className:"underlined"},"Influenza"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesInfluenzaMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesInfluenzaTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesInfluenzaComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Varicella"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesVaricellaMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesVaricellaTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesVaricellaComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Hpv"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesHpvMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesHpvTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesHpvComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Mmr"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesMmrMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesMmrTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesMmrComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Tetanus"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesTetanusMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesTetanusTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesTetanusComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Pneumovax"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesPneumovaxMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesPneumovaxTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesPneumovaxComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."}))),i.a.createElement("p",{className:"underlined"},"Other"),i.a.createElement(J.a.Row,null,i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesOtherName"},i.a.createElement(J.a.Label,{className:"formLabel"},"Name"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesOtherMedication"},i.a.createElement(J.a.Label,{className:"formLabel"},"Medication ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesOtherTesting"},i.a.createElement(J.a.Label,{className:"formLabel"},"Testing ?"),i.a.createElement(J.a.Control,{type:"checkbox",onChange:function(e){console.log(e.target.checked)}})),i.a.createElement(J.a.Group,{as:N.a,controlId:"vigilanceVaccinesOtherComment"},i.a.createElement(J.a.Label,{className:"formLabel"},"Comment"),i.a.createElement(J.a.Control,{type:"text",placeholder:"..."})))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"addFormBtn"},"Add"),i.a.createElement(I.a,{variant:"danger",className:"addFormBtn",onClick:e.onCancel},"Cancel"))))},mn=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menu",filter:{field:null,key:null,value:null},startFilter:!1,selectFilter:null,menuSelected:null,menuSelect:"basic",adding:{state:null,field:null},canDelete:!1,updateSingleField:{state:null,field:null},selectedUser:null,selectedPatient:null,selectedVisit:null,selectedAppointment:null,addAttachmentForm:!1,addAttachmentArgs:null,showAddConsultantForm:!1,users:null,calEvent:{title:n.props.visit.title,description:n.props.visit.appointment.description,location:n.props.visit.appointment.location,startTime:F.a.unix(n.props.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")+"T"+n.props.visit.time+":00-05:00",endTime:F.a.unix(n.props.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")+"T"+n.props.visit.time+":00-05:00"},pocketVars:null,s3State:{action:null,target:null,status:null}},n.submitAddComplaintForm=function(e){e.preventDefault(),console.log("...adding complaint..."),n.context.setUserAlert("...adding complaint..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=n.props.visit.patient.name+"_complaint_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.description.value.replace(/\n/g," "),r=e.target.anamnesis.value.replace(/\n/g," ");if(0===l.trim().length||0===o.trim().length||0===r.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=f._currentValue.file,m=c.name,d="visit/"+s+"/complaint/attachments";console.log("...file present...");var p=c.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new re.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"complaint attachment"}},overlay:!0,s3State:{action:"upload",target:"complaint attachment",status:"inProgress"}}),g.uploadFile(c,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"complaint attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"complaint attachment",status:"failed"}})}))}var h={query:'\n      mutation {addVisitComplaint(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            complaintTitle:"').concat(l,'",\n            complaintDescription:"').concat(o,'",\n            complaintAnamnesis:"').concat(r,'",\n            complaintAttachment:"').concat(t,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...complaint add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitComplaint),n.setState({isLoading:!1,selectedVisit:e.data.addVisitComplaint,activityA:"addVisitComplaint?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitComplaint,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteComplaint=function(e){console.log("...deleting complaint..."),n.context.setUserAlert("...deleting complaint..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,l=e.description,o=e.anamnesis,r=e.attachments,c={query:'\n      mutation {deleteVisitComplaint(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            complaintTitle:"').concat(s,'",\n            complaintDescription:"').concat(l,'",\n            complaintAnamnesis:"').concat(o,'",\n            complaintAttachments:"').concat(r,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...complaint delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitComplaint),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitComplaint,activityA:"deleteVisitComplaint?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitComplaint,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/complaint/attachments/",c={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/complaint/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"complaint attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddSurveyForm=function(e){e.preventDefault(),console.log("...adding survey..."),n.context.setUserAlert("...adding survey..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=n.props.visit.patient.name+"_survey_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.description.value.replace(/\n/g," ");if(0===l.trim().length||0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="visit/"+s+"/survey/attachments";console.log("...file present...");var d=r.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"survey attachment"}},overlay:!0,s3State:{action:"upload",target:"survey attachment",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"survey attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"survey attachment",status:"failed"}})}))}var g={query:'\n      mutation {addVisitSurvey(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          surveyTitle:"').concat(l,'",\n          surveyDescription:"').concat(o,'",\n          surveyAttachment:"').concat(t,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...survey add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitSurvey),n.setState({isLoading:!1,selectedVisit:e.data.addVisitSurvey,activityA:"addVisitSurvey?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitSurvey,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteSurvey=function(e){console.log("...deleting survey..."),n.context.setUserAlert("...deleting survey..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,l=e.description,o=e.attachments,r={query:'\n      mutation {deleteVisitSurvey(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          surveyTitle:"').concat(s,'",\n          surveyDescription:"').concat(l,'",\n          surveyAttachments:"').concat(o,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...survey delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitSurvey),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitSurvey,activityA:"deleteVisitSurvey?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitSurvey,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/survey/attachments/",c={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/survey/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"survey attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddSystematicInquiryForm=function(e){e.preventDefault(),console.log("...adding systematicInquiry..."),n.context.setUserAlert("...adding systematicInquiry..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=n.props.visit.patient.name+"_systematicInquiry_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.description.value.replace(/\n/g," ");if(0===l.trim().length||0===o.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="visit/"+s+"/systematicInquiry/attachments";console.log("...file present...");var d=r.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"systematicInquiry attachment"}},overlay:!0,s3State:{action:"upload",target:"systematicInquiry attachment",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"systematicInquiry attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"systematicInquiry attachment",status:"failed"}})}))}var g={query:'\n      mutation {addVisitSysInquiry(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          systematicInquiryTitle:"').concat(l,'",\n          systematicInquiryDescription:"').concat(o,'",\n          systematicInquiryAttachment:"').concat(t,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...systematicInquiry add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitSysInquiry),n.setState({isLoading:!1,selectedVisit:e.data.addVisitSysInquiry,activityA:"addVisitSysInquiry?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitSysInquiry,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteSystematicInquiry=function(e){console.log("...deleting systematicInquiry..."),n.context.setUserAlert("...deleting systematicInquiry..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,l=e.description,o=e.attachments,r={query:'\n      mutation {deleteVisitSysInquiry(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          systematicInquiryTitle:"').concat(s,'",\n          systematicInquiryDescription:"').concat(l,'",\n          systematicInquiryAttachments:"').concat(o,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...sys inquiry delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitSysInquiry),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitSysInquiry,activityA:"deleteVisitSysInquiry?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitSysInquiry,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/systematicInquiry/attachments/",c={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/systematicInquiry/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"systematicInquiry attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddVitalsForm=function(e){e.preventDefault(),console.log("...adding Vitals..."),n.context.setUserAlert("...adding Vitals..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.target.pr.value,l=e.target.bp1.value,o=e.target.bp2.value,r=e.target.rr.value,c=e.target.temp.value,m=e.target.sp02.value,d=e.target.heightUnit.value,p=e.target.heightValue.value,u=e.target.weightUnit.value,g=e.target.weightValue.value,h=0,y=e.target.urineType.value,v=e.target.urineValue.value;if("M"===d&&(h=g/Math.pow(p,2)),"In"===d&&(h=g/Math.pow(p,2)*703),h=h.toFixed(2),console.log("bmi",h),0===s.trim().length||0===l.trim().length||0===o.trim().length||0===r.trim().length||0===c.trim().length||0===m.trim().length||0===d.trim().length||0===p.trim().length||0===u.trim().length||0===g.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var f={query:'\n      mutation {addVisitVitals(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          vitalsPr:').concat(s,",\n          vitalsBp1:").concat(l,",\n          vitalsBp2:").concat(o,",\n          vitalsRr:").concat(r,",\n          vitalsTemp:").concat(c,",\n          vitalsPs02:").concat(m,',\n          vitalsHeightUnit:"').concat(d,'",\n          vitalsHeightValue:').concat(p,',\n          vitalsWeightUnit:"').concat(u,'",\n          vitalsWeightValue:').concat(g,",\n          vitalsBmi:").concat(h,',\n          vitalsUrineType:"').concat(y,'",\n          vitalsUrineValue:"').concat(v,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vitals add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.addVisitVitals),n.setState({isLoading:!1,selectedVisit:e.data.addVisitVitals,activityA:"addVisitVitals?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitVitals,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteVitals=function(e){console.log("...deleting Vitals..."),n.context.setUserAlert("...deleting Vitals..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.pr,l=e.bp1,o=e.bp2,r=e.rr,c=e.temp,m=e.sp02,d=e.heightUnit,p=e.heightValue,u=e.weightUnit,g=e.weightValue,h=e.bmi,y=e.urine.type,v=e.urine.value,f={query:'\n    mutation {deleteVisitVitals(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        vitalsPr:').concat(s,",\n        vitalsBp1:").concat(l,",\n        vitalsBp2:").concat(o,",\n        vitalsRr:").concat(r,",\n        vitalsTemp:").concat(c,",\n        vitalsPs02:").concat(m,',\n        vitalsHeightUnit:"').concat(d,'",\n        vitalsHeightValue:').concat(p,',\n        vitalsWeightUnit:"').concat(u,'",\n        vitalsWeightValue:').concat(g,",\n        vitalsBmi:").concat(h,',\n        vitalsUrineType:"').concat(y,'",\n        vitalsUrineValue:"').concat(v,'"\n      })\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...vitals delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.deleteVisitVitals),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitVitals,activityA:"deleteVisitVitals?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.deleteVisitVitals,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddExaminationForm=function(e){e.preventDefault(),console.log("...adding Examination..."),n.context.setUserAlert("...adding Examination..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=e.target.general.value,o=e.target.area.value,r=e.target.type.value,c=e.target.measure.value,m=e.target.value.value,d=e.target.description.value.replace(/\n/g," "),p=e.target.followUp.checked;if(0===l.trim().length||0===o.trim().length||0===r.trim().length||0===c.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var u=f._currentValue.file,g=u.name,h="visit/"+s+"/examination/attachments";console.log("...file present...");var y=u.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+h+"/"+g+"."+y;var v={bucketName:"mbjentemrstorage",dirName:h,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},E=new re.a(v);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"examination attachment"}},overlay:!0,s3State:{action:"upload",target:"examination attachment",status:"inProgress"}}),E.uploadFile(u,g).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"examination attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"examination attachment",status:"failed"}})}))}var b={query:'\n      mutation {addVisitExamination(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          examinationGeneral:"').concat(l,'",\n          examinationArea:"').concat(o,'",\n          examinationType:"').concat(r,'",\n          examinationMeasure:"').concat(c,'",\n          examinationValue:"').concat(m,'",\n          examinationDescription:"').concat(d,'",\n          examinationFollowUp:').concat(p,',\n          examinationAttachment:"').concat(t,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Examination add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitExamination),n.setState({isLoading:!1,selectedVisit:e.data.addVisitExamination,activityA:"addVisitExamination?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitExamination,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteExamination=function(e){console.log("...deleting Examination..."),n.context.setUserAlert("...deleting Examination..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.general,l=e.area,o=e.type,r=e.measure,c=e.value,m=e.description,d=e.followUp,p=e.attachments,u={query:'\n      mutation {deleteVisitExamination(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          examinationGeneral:"').concat(s,'",\n          examinationArea:"').concat(l,'",\n          examinationType:"').concat(o,'",\n          examinationMeasure:"').concat(r,'",\n          examinationValue:"').concat(c,'",\n          examinationDescription:"').concat(m,'",\n          examinationFollowUp:').concat(d,',\n          examinationAttachments:"').concat(p,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...Examination delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitExamination),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitExamination,activityA:"deleteVisitExamination?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitExamination,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/examination/attachments/",c={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/examination/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"examination attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddInvestigationForm=function(e){e.preventDefault(),console.log("...adding Investigation..."),n.context.setUserAlert("...adding Investigation..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=n.props.visit.patient.name+"_investigation_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.type.value,r=e.target.description.value.replace(/\n/g," ");if(0===o.trim().length||0===r.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=f._currentValue.file,m=c.name,d="visit/"+s+"/investigation/attachments";console.log("...file present...");var p=c.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new re.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"investigation attachment"}},overlay:!0,s3State:{action:"upload",target:"investigation attachment",status:"inProgress"}}),g.uploadFile(c,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"investigation attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"investigation attachment",status:"failed"}})}))}var h={query:'\n      mutation {addVisitInvestigation(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          investigationTitle:"').concat(l,'",\n          investigationType:"').concat(o,'",\n          investigationDescription:"').concat(r,'",\n          investigationAttachment:"').concat(t,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Investigation add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitInvestigation),n.setState({isLoading:!1,selectedVisit:e.data.addVisitInvestigation,activityA:"addVisitInvestigation?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitInvestigation,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteInvestigation=function(e){console.log("...deleting Investigation..."),n.context.setUserAlert("...deleting Investigation..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,l=e.type,o=e.description,r=e.attachments,c={query:'\n      mutation {deleteVisitInvestigation(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          investigationTitle:"').concat(s,'",\n          investigationType:"').concat(l,'",\n          investigationDescription:"').concat(o,'",\n          investigationAttachments:"').concat(r,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...Investigation delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitInvestigation),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitInvestigation,activityA:"deleteVisitInvestigation?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitInvestigation,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/investigation/attachments/",c={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/investigation/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"investigation attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddDiagnosisForm=function(e){e.preventDefault(),console.log("...adding Diagnosis..."),n.context.setUserAlert("...adding Diagnosis..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=n.props.visit.patient.name+"_diagnosis_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.type.value,r=e.target.description.value.replace(/\n/g," ");if(0===l.trim().length||0===r.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var c=f._currentValue.file,m=c.name,d="visit/"+s+"/diagnosis/attachments";console.log("...file present...");var p=c.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new re.a(u);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"diagnosis attachment"}},overlay:!0,s3State:{action:"upload",target:"diagnosis attachment",status:"inProgress"}}),g.uploadFile(c,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"diagnosis attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"diagnosis attachment",status:"failed"}})}))}var h={query:'\n      mutation {addVisitDiagnosis(\n        activityId:"'.concat(i,'",\n        visitId:"').concat(s,'",\n        visitInput:{\n          diagnosisTitle:"').concat(l,'",\n          diagnosisType:"').concat(o,'",\n          diagnosisDescription:"').concat(r,'",\n          diagnosisAttachment:"').concat(t,'"\n        })\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Diagnosis add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitDiagnosis),n.setState({isLoading:!1,selectedVisit:e.data.addVisitDiagnosis,activityA:"addVisitDiagnosis?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitDiagnosis,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteDiagnosis=function(e){console.log("...deleting Diagnosis..."),n.context.setUserAlert("...deleting Diagnosis..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,l=e.type,o=e.description,r=e.attachments,c={query:'\n      mutation {deleteVisitDiagnosis(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        visitInput:{\n          diagnosisTitle:"').concat(s,'",\n          diagnosisType:"').concat(l,'",\n          diagnosisDescription:"').concat(o,'",\n          diagnosisAttachments:"').concat(r,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...Diagnosis delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitDiagnosis),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitDiagnosis,activityA:"deleteVisitDiagnosis?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitDiagnosis,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/diagnosis/attachments/",c={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/diagnosis/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"diagnosis attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddTreatmentForm=function(e){e.preventDefault(),console.log("...adding Treatment..."),n.context.setUserAlert("...adding Treatment..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=n.props.visit.patient.name+"_treatment_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.type.value,r=e.target.description.value.replace(/\n/g," "),c=e.target.dose.value,m=e.target.frequency.value;if(0===l.trim().length||0===o.trim().length||0===r.trim().length||0===c.trim().length||0===m.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var d=f._currentValue.file,p=d.name,u="visit/"+s+"/treatment/attachments";console.log("...file present...");var g=d.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+u+"/"+p+"."+g;var h={bucketName:"mbjentemrstorage",dirName:u,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},y=new re.a(h);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"treatment attachment"}},overlay:!0,s3State:{action:"upload",target:"treatment attachment",status:"inProgress"}}),y.uploadFile(d,p).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"treatment attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"treatment attachment",status:"failed"}})}))}var v={query:'\n        mutation {addVisitTreatment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            treatmentType:"').concat(o,'",\n            treatmentTitle:"').concat(l,'",\n            treatmentDescription:"').concat(r,'",\n            treatmentDose:"').concat(c,'",\n            treatmentFrequency:"').concat(m,'",\n            treatmentAttachment:"').concat(t,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(v),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Treatment add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitTreatment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitTreatment,activityA:"addVisitTreatment?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitTreatment,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteTreatment=function(e){console.log("...deleting Treatment..."),n.context.setUserAlert("...deleting Treatment..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,l=e.type,o=e.description,r=e.dose,c=e.frequency,m=e.attachments,d={query:'\n        mutation {deleteVisitTreatment(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            treatmentType:"').concat(l,'",\n            treatmentTitle:"').concat(s,'",\n            treatmentDescription:"').concat(o,'",\n            treatmentDose:"').concat(r,'",\n            treatmentFrequency:"').concat(c,'",\n            treatmentAttachments:"').concat(m,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...Treatment delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitTreatment),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitTreatment,activityA:"deleteVisitTreatment?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitTreatment,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/treatment/attachments/",c={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/treatment/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"treatment attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddBillingForm=function(e){e.preventDefault(),console.log("...adding Billing...",e.target.amount.value.trim().length),n.context.setUserAlert("...adding Billing..."),n.setState({isLoading:!0});var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=n.props.visit.patient.name+"_billing_"+F()().format("YYYY-MM-DD, h:mm:ss a"),o=e.target.type.value,r=e.target.description.value.replace(/\n/g," "),c=e.target.amount.value,m=e.target.paid.checked,d=e.target.notes.value.replace(/\n/g," ");if(0===l.trim().length||0===r.trim().length||parseFloat(c)<=0)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});if(""===e.target.fileInput.value&&(t=""),""!==e.target.fileInput.value){var p=f._currentValue.file,u=p.name,g="visit/"+s+"/billing/attachments";console.log("...file present...");var h=p.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+g+"/"+u+"."+h;var y={bucketName:"mbjentemrstorage",dirName:g,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},v=new re.a(y);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"billing attachment"}},overlay:!0,s3State:{action:"upload",target:"billing attachment",status:"inProgress"}}),v.uploadFile(p,u).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"billing attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"billing attachment",status:"failed"}})}))}var E={query:'\n        mutation {addVisitBilling(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            billingTitle:"').concat(l,'",\n            billingType:"').concat(o,'",\n            billingDescription:"').concat(r,'",\n            billingAmount:').concat(c,",\n            billingPaid:").concat(m,',\n            billingAttachment:"').concat(t,'",\n            billingNotes:"').concat(d,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(E),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Billing add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitBilling),n.setState({isLoading:!1,selectedVisit:e.data.addVisitBilling,activityA:"addVisitBilling?activityId:".concat(i,",visitId:").concat(s),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitBilling,n.logUserActivity({activityId:i,token:a})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.updateBillingPaid=function(e){console.log("...updating billing paid..."),n.context.setUserAlert("...updating billing paid..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={query:'\n    mutation {updateVisitBillingPaid(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        billingTitle:"').concat(e.title,'",\n        billingType:"').concat(e.type,'",\n        billingDescription:"').concat(e.description,'",\n        billingAmount:').concat(e.amount,",\n        billingPaid:").concat(e.paid,',\n        billingNotes:"').concat(e.notes,'"\n      })\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...billing update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitBillingPaid),n.setState({isLoading:!1,selectedVisit:e.data.updateVisitBillingPaid,activityA:"updateVisitBillingPaid?activityId:".concat(a,",visitId:").concat(i)}),n.context.selectedVisit=e.data.updateVisitBillingPaid,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteBilling=function(e){console.log("...deleting Billing...",e),n.context.setUserAlert("...deleting Billing..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.title,l=e.type,o=e.description,r=e.amount,c=e.paid,m=e.notes,d=e.attachments,p={query:'\n        mutation {deleteVisitBilling(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            billingTitle:"').concat(s,'",\n            billingType:"').concat(l,'",\n            billingDescription:"').concat(o,'",\n            billingAmount:').concat(r,",\n            billingPaid:").concat(c,',\n            billingAttachments:"').concat(d,'",\n            billingNotes:"').concat(m,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...Billing delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitBilling),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitBilling,activityA:"deleteVisitBilling?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitBilling,n.logUserActivity({activityId:a,token:t});var o=e.attachments,r="https://mbjentemrstorage.s3.amazonaws.com/visit/"+i+"/billing/attachments/",c={bucketName:"mbjentemrstorage",dirName:"visit/"+i+"/billing/attachments",region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting attachments.."),console.log("...s3 deleting attachments.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"billing attachments"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),console.log("start");for(var d=0;d<o.length;d++){var p=o[d];console.log("multifile deletion...",d);var u=p.replace(r,"");m.deleteFile(u,c).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))}console.log("end")})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddImageForm=function(e){e.preventDefault(),console.log("...adding Image..."),n.context.setUserAlert("...adding Image..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,l=n.context.activityId,o=n.props.visit._id;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="visit/"+o+"/images";console.log("...file present...");var d=r.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d,t=c+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading image ..."),console.log("...s3 uploading image.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"image"}},overlay:!0,s3State:{action:"upload",target:"image",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"image",status:"failed"}})}))}var g={query:'\n        mutation {addVisitImage(\n          activityId:"'.concat(l,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            imageName:"').concat(t,'",\n            imageType:"').concat(a,'",\n            imagePath:"').concat(i,'"\n          })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...Image add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitImage),n.setState({isLoading:!1,selectedVisit:e.data.addVisitImage,activityA:"addVisitImage?activityId:".concat(l,",visitId:").concat(o),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitImage,n.logUserActivity({activityId:l,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteImage=function(e){console.log("...deleting Image...",e),n.context.setUserAlert("...deleting Image..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.name,l=e.type,o=e.path,r={query:'\n    mutation {deleteVisitImage(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        imageName:"').concat(s,'",\n        imageType:"').concat(l,'",\n        imagePath:"').concat(o,'"\n      })\n    {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...Image delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitImage),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitImage,activityA:"deleteVisitImage?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitImage,n.logUserActivity({activityId:a,token:t});var o="visit/"+i+"/images",r=e.name,c={bucketName:"mbjentemrstorage",dirName:o,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting image.."),console.log("...s3 deleting image.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"image"}},overlay:!0,s3State:{action:"delete",target:"image",status:"inProgress"}}),m.deleteFile(r,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddFileForm=function(e){e.preventDefault(),console.log("...adding File..."),n.context.setUserAlert("...adding File..."),n.setState({isLoading:!0});var t,a,i,s=n.context.token,l=n.context.activityId,o=n.props.visit._id;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var r=f._currentValue.file,c=r.name,m="visit/"+o+"/files";console.log("...file present...");var d=r.type.split("/")[1];i="https://mbjentemrstorage.s3.amazonaws.com/"+m+"/"+c+"."+d,t=c+"."+d,a=d;var p={bucketName:"mbjentemrstorage",dirName:m,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 uploading file ..."),console.log("...s3 uploading file.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"file"}},overlay:!0,s3State:{action:"upload",target:"file",status:"inProgress"}}),u.uploadFile(r,c).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"file",status:"failed"}})}))}var g={query:'\n        mutation {addVisitFile(\n          activityId:"'.concat(l,'",\n          visitId:"').concat(o,'",\n          visitInput:{\n            fileName:"').concat(t,'",\n            fileType:"').concat(a,'",\n            filePath:"').concat(i,'"\n          })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...File add success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),n.props.updateVisit(e.data.addVisitFile),n.setState({isLoading:!1,selectedVisit:e.data.addVisitFile,activityA:"addVisitFile?activityId:".concat(l,",visitId:").concat(o),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitFile,n.logUserActivity({activityId:l,token:s})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteFile=function(e){console.log("...deleting File...",e),n.context.setUserAlert("...deleting File..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.name,l=e.type,o=e.path,r={query:'\n    mutation {deleteVisitFile(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        fileName:"').concat(s,'",\n        fileType:"').concat(l,'",\n        filePath:"').concat(o,'"\n      })\n    {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(s){var l="...File delete success!...";s.errors&&(l=s.errors[0].message),s.data.error&&(l=s.data.error),n.context.setUserAlert(l),n.props.updateVisit(s.data.deleteVisitFile),n.setState({isLoading:!1,selectedVisit:s.data.deleteVisitFile,activityA:"deleteVisitFile?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=s.data.deleteVisitFile,n.logUserActivity({activityId:a,token:t});var o="visit/"+i+"/files",r=e.name,c={bucketName:"mbjentemrstorage",dirName:o,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},m=new re.a(c);n.context.setUserAlert("...s3 deleting file.."),console.log("...s3 deleting file.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"file"}},overlay:!0,s3State:{action:"delete",target:"file",status:"inProgress"}}),m.deleteFile(r,c).then((function(e){console.log(e),n.context.setUserAlert(e.message),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddVigilanceForm=function(e){e.preventDefault(),console.log("...adding Vigilance..."),n.context.setUserAlert("...adding Vigilance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={query:'\n    mutation {addVisitVigilance(\n      activityId:"'.concat(a,'",\n      visitId:"').concat(i,'",\n      visitInput:{\n        vigilanceChronicIllnessDiabetesMedication:').concat(e.target.vigilanceChronicIllnessDiabetesMedication.checked,",\n        vigilanceChronicIllnessDiabetesTesting:").concat(e.target.vigilanceChronicIllnessDiabetesTesting.checked,',\n        vigilanceChronicIllnessDiabetesComment:"').concat(e.target.vigilanceChronicIllnessDiabetesComment.value,'",\n        vigilanceChronicIllnessHbpMedication:').concat(e.target.vigilanceChronicIllnessHbpMedication.checked,",\n        vigilanceChronicIllnessHbpTesting:").concat(e.target.vigilanceChronicIllnessHbpTesting.checked,',\n        vigilanceChronicIllnessHbpComment:"').concat(e.target.vigilanceChronicIllnessHbpComment.value,'",\n        vigilanceChronicIllnessDyslipidemiaMedication:').concat(e.target.vigilanceChronicIllnessDyslipidemiaMedication.checked,",\n        vigilanceChronicIllnessDyslipidemiaTesting:").concat(e.target.vigilanceChronicIllnessDyslipidemiaTesting.checked,',\n        vigilanceChronicIllnessDyslipidemiaComment:"').concat(e.target.vigilanceChronicIllnessDyslipidemiaComment.value,'",\n        vigilanceChronicIllnessCadMedication:').concat(e.target.vigilanceChronicIllnessCadMedication.checked,",\n        vigilanceChronicIllnessCadTesting:").concat(e.target.vigilanceChronicIllnessCadTesting.checked,',\n        vigilanceChronicIllnessCadComment:"').concat(e.target.vigilanceChronicIllnessCadComment.value,'",\n        vigilanceLifestyleWeightMedication:').concat(e.target.vigilanceLifestyleWeightMedication.checked,",\n        vigilanceLifestyleWeightTesting:").concat(e.target.vigilanceLifestyleWeightTesting.checked,',\n        vigilanceLifestyleWeightComment:"').concat(e.target.vigilanceLifestyleWeightComment.value,'",\n        vigilanceLifestyleDietMedication:').concat(e.target.vigilanceLifestyleDietMedication.checked,",\n        vigilanceLifestyleDietTesting:").concat(e.target.vigilanceLifestyleDietTesting.checked,',\n        vigilanceLifestyleDietComment:"').concat(e.target.vigilanceLifestyleDietComment.value,'",\n        vigilanceLifestyleSmokingMedication:').concat(e.target.vigilanceLifestyleSmokingMedication.checked,",\n        vigilanceLifestyleSmokingTesting:").concat(e.target.vigilanceLifestyleSmokingTesting.checked,',\n        vigilanceLifestyleSmokingComment:"').concat(e.target.vigilanceLifestyleSmokingComment.value,'",\n        vigilanceLifestyleSubstanceAbuseMedication:').concat(e.target.vigilanceLifestyleSubstanceAbuseMedication.checked,",\n        vigilanceLifestyleSubstanceAbuseTesting:").concat(e.target.vigilanceLifestyleSubstanceAbuseTesting.checked,',\n        vigilanceLifestyleSubstanceAbuseComment:"').concat(e.target.vigilanceLifestyleSubstanceAbuseComment.value,'",\n        vigilanceLifestyleExerciseMedication:').concat(e.target.vigilanceLifestyleExerciseMedication.checked,",\n        vigilanceLifestyleExerciseTesting:").concat(e.target.vigilanceLifestyleExerciseTesting.checked,',\n        vigilanceLifestyleExerciseComment:"').concat(e.target.vigilanceLifestyleExerciseComment.value,'",\n        vigilanceLifestyleAllergiesMedication:').concat(e.target.vigilanceLifestyleAllergiesMedication.checked,",\n        vigilanceLifestyleAllergiesTesting:").concat(e.target.vigilanceLifestyleAllergiesTesting.checked,',\n        vigilanceLifestyleAllergiesComment:"').concat(e.target.vigilanceLifestyleAllergiesComment.value,'",\n        vigilanceLifestyleAsthmaMedication:').concat(e.target.vigilanceLifestyleAsthmaMedication.checked,",\n        vigilanceLifestyleAsthmaTesting:").concat(e.target.vigilanceLifestyleAsthmaTesting.checked,',\n        vigilanceLifestyleAsthmaComment:"').concat(e.target.vigilanceLifestyleAsthmaComment.value,'",\n        vigilanceScreeningBreastMedication:').concat(e.target.vigilanceScreeningBreastMedication.checked,",\n        vigilanceScreeningBreastTesting:").concat(e.target.vigilanceScreeningBreastTesting.checked,',\n        vigilanceScreeningBreastComment:"').concat(e.target.vigilanceScreeningBreastComment.value,'",\n        vigilanceScreeningProstateMedication:').concat(e.target.vigilanceScreeningProstateMedication.checked,",\n        vigilanceScreeningProstateTesting:").concat(e.target.vigilanceScreeningProstateTesting.checked,',\n        vigilanceScreeningProstateComment:"').concat(e.target.vigilanceScreeningProstateComment.value,'",\n        vigilanceScreeningCervixMedication:').concat(e.target.vigilanceScreeningCervixMedication.checked,",\n        vigilanceScreeningCervixTesting:").concat(e.target.vigilanceScreeningCervixTesting.checked,',\n        vigilanceScreeningCervixComment:"').concat(e.target.vigilanceScreeningCervixComment.value,'",\n        vigilanceScreeningColonMedication:').concat(e.target.vigilanceScreeningColonMedication.checked,",\n        vigilanceScreeningColonTesting:").concat(e.target.vigilanceScreeningColonTesting.checked,',\n        vigilanceScreeningColonComment:"').concat(e.target.vigilanceScreeningColonComment.value,'",\n        vigilanceScreeningDentalMedication:').concat(e.target.vigilanceScreeningDentalMedication.checked,",\n        vigilanceScreeningDentalTesting:").concat(e.target.vigilanceScreeningDentalTesting.checked,',\n        vigilanceScreeningDentalComment:"').concat(e.target.vigilanceScreeningDentalComment.value,'",\n        vigilanceVaccinesInfluenzaMedication:').concat(e.target.vigilanceVaccinesInfluenzaMedication.checked,",\n        vigilanceVaccinesInfluenzaTesting:").concat(e.target.vigilanceVaccinesInfluenzaTesting.checked,',\n        vigilanceVaccinesInfluenzaComment:"').concat(e.target.vigilanceVaccinesInfluenzaComment.value,'",\n        vigilanceVaccinesVaricellaMedication:').concat(e.target.vigilanceVaccinesVaricellaMedication.checked,",\n        vigilanceVaccinesVaricellaTesting:").concat(e.target.vigilanceVaccinesVaricellaTesting.checked,',\n        vigilanceVaccinesVaricellaComment:"').concat(e.target.vigilanceVaccinesVaricellaComment.value,'",\n        vigilanceVaccinesHpvMedication:').concat(e.target.vigilanceVaccinesHpvMedication.checked,",\n        vigilanceVaccinesHpvTesting:").concat(e.target.vigilanceVaccinesHpvTesting.checked,',\n        vigilanceVaccinesHpvComment:"').concat(e.target.vigilanceVaccinesHpvComment.value,'",\n        vigilanceVaccinesMmrMedication:').concat(e.target.vigilanceVaccinesMmrMedication.checked,",\n        vigilanceVaccinesMmrTesting:").concat(e.target.vigilanceVaccinesMmrTesting.checked,',\n        vigilanceVaccinesMmrComment:"').concat(e.target.vigilanceVaccinesMmrComment.value,'",\n        vigilanceVaccinesTetanusMedication:').concat(e.target.vigilanceVaccinesTetanusMedication.checked,",\n        vigilanceVaccinesTetanusTesting:").concat(e.target.vigilanceVaccinesTetanusTesting.checked,',\n        vigilanceVaccinesTetanusComment:"').concat(e.target.vigilanceVaccinesTetanusComment.value,'",\n        vigilanceVaccinesPneumovaxMedication:').concat(e.target.vigilanceVaccinesPneumovaxMedication.checked,",\n        vigilanceVaccinesPneumovaxTesting:").concat(e.target.vigilanceVaccinesPneumovaxTesting.checked,',\n        vigilanceVaccinesPneumovaxComment:"').concat(e.target.vigilanceVaccinesPneumovaxComment.value,'",\n        vigilanceVaccinesOtherName:"').concat(e.target.vigilanceVaccinesOtherName.value,'",\n        vigilanceVaccinesOtherMedication:').concat(e.target.vigilanceVaccinesOtherMedication.checked,",\n        vigilanceVaccinesOtherTesting:").concat(e.target.vigilanceVaccinesOtherTesting.checked,',\n        vigilanceVaccinesOtherComment:"').concat(e.target.vigilanceVaccinesOtherComment.value,'"\n      })\n    {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vigilance add success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.addVisitVigilance),n.setState({isLoading:!1,selectedVisit:e.data.addVisitVigilance,activityA:"addVisitVigilance?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.addVisitVigilance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteVigilance=function(e){console.log("...deleting Vigilance..."),n.context.setUserAlert("...deleting Vigilance..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s={query:'\n        mutation {deleteVisitVigilance(\n          activityId:"'.concat(a,'",\n          visitId:"').concat(i,'",\n          visitInput:{\n            vigilanceChronicIllnessDiabetesMedication:').concat(e.chronicIllness.diabetes.medication,",\n            vigilanceChronicIllnessDiabetesTesting:").concat(e.chronicIllness.diabetes.testing,',\n            vigilanceChronicIllnessDiabetesComment:"').concat(e.chronicIllness.diabetes.comment,'",\n            vigilanceChronicIllnessHbpMedication:').concat(e.chronicIllness.hbp.medication,",\n            vigilanceChronicIllnessHbpTesting:").concat(e.chronicIllness.hbp.testing,',\n            vigilanceChronicIllnessHbpComment:"').concat(e.chronicIllness.hbp.comment,'",\n            vigilanceChronicIllnessDyslipidemiaMedication:').concat(e.chronicIllness.dyslipidemia.medication,",\n            vigilanceChronicIllnessDyslipidemiaTesting:").concat(e.chronicIllness.dyslipidemia.testing,',\n            vigilanceChronicIllnessDyslipidemiaComment:"').concat(e.chronicIllness.dyslipidemia.comment,'",\n            vigilanceChronicIllnessCadMedication:').concat(e.chronicIllness.cad.medication,",\n            vigilanceChronicIllnessCadTesting:").concat(e.chronicIllness.cad.testing,',\n            vigilanceChronicIllnessCadComment:"').concat(e.chronicIllness.cad.comment,'",\n            vigilanceLifestyleWeightMedication:').concat(e.lifestyle.weight.medication,",\n            vigilanceLifestyleWeightTesting:").concat(e.lifestyle.weight.testing,',\n            vigilanceLifestyleWeightComment:"').concat(e.lifestyle.weight.comment,'",\n            vigilanceLifestyleDietMedication:').concat(e.lifestyle.diet.medication,",\n            vigilanceLifestyleDietTesting:").concat(e.lifestyle.diet.testing,',\n            vigilanceLifestyleDietComment:"').concat(e.lifestyle.diet.comment,'",\n            vigilanceLifestyleSmokingMedication:').concat(e.lifestyle.smoking.medication,",\n            vigilanceLifestyleSmokingTesting:").concat(e.lifestyle.smoking.testing,',\n            vigilanceLifestyleSmokingComment:"').concat(e.lifestyle.smoking.comment,'",\n            vigilanceLifestyleSubstanceAbuseMedication:').concat(e.lifestyle.substanceAbuse.medication,",\n            vigilanceLifestyleSubstanceAbuseTesting:").concat(e.lifestyle.substanceAbuse.testing,',\n            vigilanceLifestyleSubstanceAbuseComment:"').concat(e.lifestyle.substanceAbuse.comment,'",\n            vigilanceLifestyleExerciseMedication:').concat(e.lifestyle.exercise.medication,",\n            vigilanceLifestyleExerciseTesting:").concat(e.lifestyle.exercise.testing,',\n            vigilanceLifestyleExerciseComment:"').concat(e.lifestyle.exercise.comment,'",\n            vigilanceLifestyleAllergiesMedication:').concat(e.lifestyle.allergies.medication,",\n            vigilanceLifestyleAllergiesTesting:").concat(e.lifestyle.allergies.testing,',\n            vigilanceLifestyleAllergiesComment:"').concat(e.lifestyle.allergies.comment,'",\n            vigilanceLifestyleAsthmaMedication:').concat(e.lifestyle.asthma.medication,",\n            vigilanceLifestyleAsthmaTesting:").concat(e.lifestyle.asthma.testing,',\n            vigilanceLifestyleAsthmaComment:"').concat(e.lifestyle.asthma.comment,'",\n            vigilanceScreeningBreastMedication:').concat(e.screening.breast.medication,",\n            vigilanceScreeningBreastTesting:").concat(e.screening.breast.testing,',\n            vigilanceScreeningBreastComment:"').concat(e.screening.breast.comment,'",\n            vigilanceScreeningProstateMedication:').concat(e.screening.prostate.medication,",\n            vigilanceScreeningProstateTesting:").concat(e.screening.prostate.testing,',\n            vigilanceScreeningProstateComment:"').concat(e.screening.prostate.comment,'",\n            vigilanceScreeningCervixMedication:').concat(e.screening.cervix.medication,",\n            vigilanceScreeningCervixTesting:").concat(e.screening.cervix.testing,',\n            vigilanceScreeningCervixComment:"').concat(e.screening.cervix.comment,'",\n            vigilanceScreeningColonMedication:').concat(e.screening.colon.medication,",\n            vigilanceScreeningColonTesting:").concat(e.screening.colon.testing,',\n            vigilanceScreeningColonComment:"').concat(e.screening.colon.comment,'",\n            vigilanceScreeningDentalMedication:').concat(e.screening.dental.medication,",\n            vigilanceScreeningDentalTesting:").concat(e.screening.dental.testing,',\n            vigilanceScreeningDentalComment:"').concat(e.screening.dental.comment,'",\n            vigilanceVaccinesInfluenzaMedication:').concat(e.vaccines.influenza.medication,",\n            vigilanceVaccinesInfluenzaTesting:").concat(e.vaccines.influenza.testing,',\n            vigilanceVaccinesInfluenzaComment:"').concat(e.vaccines.influenza.comment,'",\n            vigilanceVaccinesVaricellaMedication:').concat(e.vaccines.varicella.medication,",\n            vigilanceVaccinesVaricellaTesting:").concat(e.vaccines.varicella.testing,',\n            vigilanceVaccinesVaricellaComment:"').concat(e.vaccines.varicella.comment,'",\n            vigilanceVaccinesHpvMedication:').concat(e.vaccines.hpv.medication,",\n            vigilanceVaccinesHpvTesting:").concat(e.vaccines.hpv.testing,',\n            vigilanceVaccinesHpvComment:"').concat(e.vaccines.hpv.comment,'",\n            vigilanceVaccinesMmrMedication:').concat(e.vaccines.mmr.medication,",\n            vigilanceVaccinesMmrTesting:").concat(e.vaccines.mmr.testing,',\n            vigilanceVaccinesMmrComment:"').concat(e.vaccines.mmr.comment,'",\n            vigilanceVaccinesTetanusMedication:').concat(e.vaccines.tetanus.medication,",\n            vigilanceVaccinesTetanusTesting:").concat(e.vaccines.tetanus.testing,',\n            vigilanceVaccinesTetanusComment:"').concat(e.vaccines.tetanus.comment,'",\n            vigilanceVaccinesPneumovaxMedication:').concat(e.vaccines.pneumovax.medication,",\n            vigilanceVaccinesPneumovaxTesting:").concat(e.vaccines.pneumovax.testing,',\n            vigilanceVaccinesPneumovaxComment:"').concat(e.vaccines.pneumovax.comment,'",\n            vigilanceVaccinesOtherName:"').concat(e.vaccines.other.name,'",\n            vigilanceVaccinesOtherMedication:').concat(e.vaccines.other.medication,",\n            vigilanceVaccinesOtherTesting:").concat(e.vaccines.other.testing,',\n            vigilanceVaccinesOtherComment:"').concat(e.vaccines.other.comment,'"\n          })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...Vigilance delete success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.deleteVisitVigilance),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitVigilance,activityA:"deleteVisitFile?activityId:".concat(a,",visitId:").concat(i),adding:{state:null,field:null}}),n.context.selectedVisit=e.data.deleteVisitVigilance,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitAddUserForm=function(e){e.preventDefault(),console.log("...adding consultant..."),n.context.setUserAlert("...adding consultant..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=e.target.user.value,s=n.props.visit._id;if(0===i.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var l=n.state.users.filter((function(e){return e._id===i}))[0].role;if("Doctor"!==l&&"Nurse"!==l)return console.log("...please choose a Doctor or Nurse to add please..."),void n.context.setUserAlert("...please choose a Doctor or Nurse to add please...");var o={query:'\n      mutation {addVisitConsultant(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var l="...add consultant success!...";e.errors&&(l=e.errors[0].message),e.data.error&&(l=e.data.error),n.context.setUserAlert(l),n.props.updateVisit(e.data.addVisitConsultant),n.setState({isLoading:!1,activityA:"addVisitConsultant?activityId:".concat(a,",visitId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteConsultant=function(e){console.log("...deleting consultant..."),n.context.setUserAlert("...deleting consultant..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=e._id,s=n.props.visit._id,l={query:'\n      mutation {deleteVisitConsultant(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(s,'",\n        consultantId:"').concat(i,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var l="...delete consultant success!...";e.errors&&(l=e.errors[0].message),e.data.error&&(l=e.data.error),n.context.setUserAlert(l),n.props.updateVisit(e.data.deleteVisitConsultant),n.setState({isLoading:!1,activityA:"deleteVisitConsultant?activityId:".concat(a,",visitId:").concat(s,",consultantId:").concat(i)}),n.logUserActivity({activityId:a,token:t}),n.cancelAdd()})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startAddAttachment=function(e){console.log("...start add attachment..."),n.setState({addAttachmentForm:!0,addAttachmentArgs:e})},n.cancelAddAttachment=function(){n.setState({addAttachmentForm:!1})},n.addAttachment=function(e){e.preventDefault(),console.log("...adding attachment..."),n.context.setUserAlert("...adding attachment..."),n.setState({isLoading:!0,addAttachmentForm:!1});var t,a,i=n.context.token,s=n.context.activityId,l=n.props.visit._id,o=n.state.addAttachmentArgs,r=o.field;if(""===e.target.fileInput.value)return n.context.setUserAlert("...no file!? Please add a file..."),void n.setState({isLoading:!1});if(""!==e.target.fileInput.value){var c=f._currentValue.file,m=c.name,d="visit/"+l+"/"+r+"/attachments";console.log("...file present...");var p=c.type.split("/")[1];t="https://mbjentemrstorage.s3.amazonaws.com/"+d+"/"+m+"."+p;var u={bucketName:"mbjentemrstorage",dirName:d,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},g=new re.a(u);n.context.setUserAlert("...s3 uploading allergy attachment ..."),console.log("...s3 uploading allergy attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"upload",target:"".concat(r," attachment")}},overlay:!0,s3State:{action:"upload",target:"".concat(r," attachment"),status:"inProgress"}}),g.uploadFile(c,m).then((function(e){console.log("attachment upload success!",e),n.context.setUserAlert("...upload success!"),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"complete"}})})).catch((function(e){console.error("upload error:",e),n.context.setUserAlert("...upload error:  "+e.statusText),n.setState({overlayStatus:null,overlay:!1,s3State:{action:"upload",target:"allergy attachment",status:"failed"}})}))}if("complaint"===r){var h=o.data.title,y=o.data.description,v=o.data.anamnesis,E=t;a={query:'\n        mutation {addVisitComplaintAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            complaintTitle:"').concat(h,'",\n            complaintDescription:"').concat(y,'",\n            complaintAnamnesis:"').concat(v,'",\n            complaintAttachment:"').concat(E,'"\n          })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("survey"===r){var b=o.data.title,N=o.data.description,C=t;a={query:'\n        mutation {addVisitSurveyAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            surveyTitle:"').concat(b,'",\n            surveyDescription:"').concat(N,'",\n            surveyAttachment:"').concat(C,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("systematicInquiry"===r){var x=o.data.title,A=o.data.description,I=t;a={query:'\n        mutation {addVisitSysInquiryAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            systematicInquiryTitle:"').concat(x,'",\n            systematicInquiryDescription:"').concat(A,'",\n            systematicInquiryAttachment:"').concat(I,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("examination"===r){var T=o.data.general,S=o.data.area,k=o.data.type,w=o.data.measure,D=o.data.value,F=o.data.description,U=o.data.followUp,L=t;a={query:'\n        mutation {addVisitExaminationAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            examinationGeneral:"').concat(T,'",\n            examinationArea:"').concat(S,'",\n            examinationType:"').concat(k,'",\n            examinationMeasure:"').concat(w,'",\n            examinationValue:"').concat(D,'",\n            examinationDescription:"').concat(F,'",\n            examinationFollowUp:').concat(U,',\n            examinationAttachment:"').concat(L,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("investigation"===r){var _=o.data.title,P=o.data.type,G=o.data.description,V=t;a={query:'\n        mutation {addVisitInvestigationAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            investigationTitle:"').concat(_,'",\n            investigationType:"').concat(P,'",\n            investigationDescription:"').concat(G,'",\n            investigationAttachment:"').concat(V,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("diagnosis"===r){var q=o.data.title,B=o.data.type,R=o.data.description,O=t;a={query:'\n        mutation {addVisitDiagnosisAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            diagnosisTitle:"').concat(q,'",\n            diagnosisType:"').concat(B,'",\n            diagnosisDescription:"').concat(R,'",\n            diagnosisAttachment:"').concat(O,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("treatment"===r){var j=o.data.type,M=o.data.title,z=o.data.description,Y=o.data.dose,K=o.data.frequency,J=t;a={query:'\n        mutation {addVisitTreatmentAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            treatmentType:"').concat(j,'",\n            treatmentTitle:"').concat(M,'",\n            treatmentDescription:"').concat(z,'",\n            treatmentDose:"').concat(Y,'",\n            treatmentFrequency:"').concat(K,'",\n            treatmentAttachment:"').concat(J,'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("billing"===r){var H=o.data.amount,Q=o.data.paid,W=o.data.title,X=o.data.type,$=o.data.description,Z=o.data.notes,ee=t;a={query:'\n        mutation {addVisitBillingAttachment(\n          activityId:"'.concat(s,'",\n          visitId:"').concat(l,'",\n          visitInput:{\n            billingTitle:"').concat(W,'",\n            billingType:"').concat(X,'",\n            billingDescription:"').concat($,'",\n            billingAmount:').concat(H,",\n            billingPaid:").concat(Q,',\n            billingAttachment:"').concat(ee,'",\n            billingNotes:"').concat(Z,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...add attachment success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"complaint"===r&&(n.props.updateVisit(e.data.addVisitComplaintAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitComplaintAttachment,activityA:"addVisitComplaintAttachment?activityId:".concat(s,",visitId:").concat(l)})),"survey"===r&&(n.props.updateVisit(e.data.addVisitSurveyAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitSurveyAttachment,activityA:"addVisitSurveyAttachment?activityId:".concat(s,",visitId:").concat(l)})),"systematicInquiry"===r&&(n.props.updateVisit(e.data.addVisitSysInquiryAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitSysInquiryAttachment,activityA:"addVisitSysInquiryAttachment?activityId:".concat(s,",visitId:").concat(l)})),"examination"===r&&(n.props.updateVisit(e.data.addVisitExaminationAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitExaminationAttachment,activityA:"addVisitExaminationAttachment?activityId:".concat(s,",visitId:").concat(l)})),"investigation"===r&&(n.props.updateVisit(e.data.addVisitInvestigationAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitInvestigationAttachment,activityA:"addVisitInvestigationAttachment?activityId:".concat(s,",visitId:").concat(l)})),"diagnosis"===r&&(n.props.updateVisit(e.data.addVisitDiagnosisAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitDiagnosisAttachment,activityA:"addVisitDiagnosisAttachment?activityId:".concat(s,",visitId:").concat(l)})),"treatment"===r&&(n.props.updateVisit(e.data.addVisitTreatmentAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitTreatmentAttachment,activityA:"addVisitTreatmentAttachment?activityId:".concat(s,",visitId:").concat(l)})),"billing"===r&&(n.props.updateVisit(e.data.addVisitBillingAttachment),n.setState({isLoading:!1,selectedVisit:e.data.addVisitBillingAttachment,activityA:"addVisitBillingAttachment?activityId:".concat(s,",visitId:").concat(l)})),n.logUserActivity({activityId:s,token:i})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.deleteAttachment=function(e){console.log("...deleting attachment...",e.type),n.context.setUserAlert("...adding attachment...");var t,a=n.context.token,i=n.context.activityId,s=n.props.visit._id,l=e.type,o=e.attachment,r=e.item;if("complaint"===l){var c=r.title,m=r.description,d=r.anamnesis,p=o;t={query:'\n        mutation {deleteVisitComplaintAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            complaintTitle:"').concat(c,'",\n            complaintDescription:"').concat(m,'",\n            complaintAnamnesis:"').concat(d,'",\n            complaintAttachment:"').concat(p,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("survey"===l){var u=r.title,g=r.description,h=o;t={query:'\n        mutation {deleteVisitSurveyAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            surveyTitle:"').concat(u,'",\n            surveyDescription:"').concat(g,'",\n            surveyAttachment:"').concat(h,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("systematicInquiry"===l){var y=r.title,v=r.description,f=o;t={query:'\n        mutation {deleteVisitSysInquiryAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            systematicInquiryTitle:"').concat(y,'",\n            systematicInquiryDescription:"').concat(v,'",\n            systematicInquiryAttachment:"').concat(f,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("examination"===l){var E=r.general,b=r.area,N=r.type,C=r.measure,x=r.value,A=r.description,I=r.followUp,T=o;t={query:'\n        mutation {deleteVisitExaminationAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            examinationGeneral:"').concat(E,'",\n            examinationArea:"').concat(b,'",\n            examinationType:"').concat(N,'",\n            examinationMeasure:"').concat(C,'",\n            examinationValue:"').concat(x,'",\n            examinationDescription:"').concat(A,'",\n            examinationFollowUp:').concat(I,',\n            examinationAttachment:"').concat(T,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("investigation"===l){var S=r.title,k=r.type,w=r.description,D=o;t={query:'\n        mutation {deleteVisitInvestigationAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            investigationTitle:"').concat(S,'",\n            investigationType:"').concat(k,'",\n            investigationDescription:"').concat(w,'",\n            investigationAttachment:"').concat(D,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("diagnosis"===l){var F=r.title,U=r.type,L=r.description,_=o;t={query:'\n        mutation {deleteVisitDiagnosisAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            diagnosisTitle:"').concat(F,'",\n            diagnosisType:"').concat(U,'",\n            diagnosisDescription:"').concat(L,'",\n            diagnosisAttachment:"').concat(_,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("treatment"===l){var P=r.type,G=r.title,V=r.description,q=r.dose,B=r.frequency,R=o;t={query:'\n        mutation {deleteVisitTreatmentAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            treatmentType:"').concat(P,'",\n            treatmentTitle:"').concat(G,'",\n            treatmentDescription:"').concat(V,'",\n            treatmentDose:"').concat(q,'",\n            treatmentFrequency:"').concat(B,'",\n            treatmentAttachment:"').concat(R,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}if("billing"===l){var O=r.title,j=r.type,M=r.description,z=r.amount,Y=r.paid,K=o,J=r.notes;t={query:'\n        mutation {deleteVisitBillingAttachment(\n          activityId:"'.concat(i,'",\n          visitId:"').concat(s,'",\n          visitInput:{\n            billingTitle:"').concat(O,'",\n            billingType:"').concat(j,'",\n            billingDescription:"').concat(M,'",\n            billingAmount:').concat(z,",\n            billingPaid:").concat(Y,',\n            billingAttachment:"').concat(K,'",\n            billingNotes:"').concat(J,'"\n          })\n          {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}}fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var t="...delete attachment success!...";e.errors&&(t=e.errors[0].message),e.data.error&&(t=e.data.error),n.context.setUserAlert(t),"complaint"===l&&(n.props.updateVisit(e.data.deleteVisitComplaintAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitComplaintAttachment,activityA:"deleteVisitComplaintAttachment?activityId:".concat(i,",visitId:").concat(s)})),"survey"===l&&(n.props.updateVisit(e.data.deleteVisitSurveyAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitSurveyAttachment,activityA:"deleteVisitSurveyAttachment?activityId:".concat(i,",visitId:").concat(s)})),"systematicInquiry"===l&&(n.props.updateVisit(e.data.deleteVisitSysInquiryAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitSysInquiryAttachment,activityA:"deleteVisitSysInquiryAttachment?activityId:".concat(i,",visitId:").concat(s)})),"examination"===l&&(n.props.updateVisit(e.data.deleteVisitExaminationAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitExaminationAttachment,activityA:"deleteVisitExaminationAttachment?activityId:".concat(i,",visitId:").concat(s)})),"investigation"===l&&(n.props.updateVisit(e.data.deleteVisitInvestigationAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitInvestigationAttachment,activityA:"deleteVisitInvestigationAttachment?activityId:".concat(i,",visitId:").concat(s)})),"diagnosis"===l&&(n.props.updateVisit(e.data.deleteVisitDiagnosisAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitDiagnosisAttachment,activityA:"deleteVisitDiagnosisAttachment?activityId:".concat(i,",visitId:").concat(s)})),"treatment"===l&&(n.props.updateVisit(e.data.deleteVisitTreatmentAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitTreatmentAttachment,activityA:"deleteVisitTreatmentAttachment?activityId:".concat(i,",visitId:").concat(s)})),"billing"===l&&(n.props.updateVisit(e.data.deleteVisitBillingAttachment),n.setState({isLoading:!1,selectedVisit:e.data.deleteVisitBillingAttachment,activityA:"deleteVisitBillingAttachment?activityId:".concat(i,",visitId:").concat(s)})),n.logUserActivity({activityId:i,token:a});var r="visit/"+s+"/"+l+"/attachments",c="https://mbjentemrstorage.s3.amazonaws.com/visit/"+s+"/"+l+"/attachments/",m=o,d=m.replace(c,"");console.log("1:",r),console.log("2:",m),console.log("3:",d);var p={bucketName:"mbjentemrstorage",dirName:r,region:"us-east-2",accessKeyId:n.state.pocketVars.s3.a,secretAccessKey:n.state.pocketVars.s3.b,s3Url:"https://mbjentemrstorage.s3.amazonaws.com"},u=new re.a(p);n.context.setUserAlert("...s3 deleting attachment.."),console.log("...s3 deleting attachment.."),n.setState({overlayStatus:{type:"s3",data:{action:"delete",target:"".concat(l," attachment")}},overlay:!0,s3State:{action:"delete",target:"".concat(l," attachment"),status:"inProgress"}}),u.deleteFile(d,p).then((function(e){console.log(e),n.context.setUserAlert(e),n.setState({overlayStatus:null,overlay:!1})})).catch((function(e){console.error(e),n.setState({overlayStatus:null,overlay:!1})}))})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.submitUpdateSingleFieldForm=function(e){e.preventDefault(),console.log("...updating single field..."),n.context.setUserAlert("...updating single field..."),n.setState({isLoading:!0});var t=n.context.token,a=n.context.activityId,i=n.props.visit._id,s=e.target.field.value,l=e.target.query.value;if(0===l.trim().length)return n.context.setUserAlert("...blank required fields!!!..."),void n.setState({isLoading:!1});var o={query:'\n      mutation {updateVisitSingleField(\n        activityId:"'.concat(a,'",\n        visitId:"').concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(l,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...field update success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),n.context.setUserAlert(s),n.props.updateVisit(e.data.updateVisitSingleField),n.setState({isLoading:!1,selectedVisit:e.data.updateVisitSingleField,activityA:"updateVisitSingleField?activityId:".concat(a,",visitId:").concat(i),updateSingleField:{state:null,field:null}}),n.context.selectedVisit=e.data.updateVisitSingleField,n.logUserActivity({activityId:a,token:t})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.startUpdateSingleField=function(e){n.setState({updateSingleField:{state:!0,field:e}})},n.cancelUpdateSingleField=function(){n.setState({updateSingleField:{state:null,field:null}})},n.toggleSideCol=function(){"menu"===n.state.sideCol?n.setState({sideCol:"filter"}):n.setState({sideCol:"menu"})},n.toggleFilter=function(e){n.setState({startFilter:!n.state.startFilter,selectFilter:e})},n.menuSelect=function(e){n.setState({menuSelect:e})},n.submitFilterForm=function(e){e.preventDefault();var t=e.target.field.value,a=e.target.key.value,i=e.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),n.setState({filter:{field:t,key:a,value:i}})},n.startAdd=function(e){n.setState({adding:{state:!0,field:e}})},n.cancelAdd=function(){n.setState({adding:{state:null,field:null}})},n.completeVisit=function(){console.log("...completing visit..."),n.context.setUserAlert("...completing visit..."),n.setState({isLoading:!0});var e=n.context.token,t=n.context.activityId,a=n.props.visit._id,i={query:'\n      mutation {completeVisitById(\n        activityId:"'.concat(t,'",\n        visitId:"').concat(a,'"\n      )\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(i){var s="...visit completed!...";i.errors&&(s=i.errors[0].message),i.data.error&&(s=i.data.error),n.context.setUserAlert(s),n.props.updateVisit(i.data.completeVisitById),n.setState({isLoading:!1,selectedVisit:i.data.completeVisitById,activityA:"completeVisitById?activityId:".concat(t,",visitId:").concat(a),updateSingleField:{state:null,field:null}}),n.context.selectedVisit=i.data.completeVisitById,n.logUserActivity({activityId:t,token:e})})).catch((function(e){console.log(e),n.context.setUserAlert(e),n.setState({isLoading:!1})}))},n.propsVisit=n.props.visit,n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e;console.log("...visit details component mounted...",this.props.visit.patient),sessionStorage.getItem("logInfo")&&(e=JSON.parse(sessionStorage.getItem("logInfo")),this.getPocketVars(e)),"Admin"!==this.context.role&&"Doctor"!==this.context.role&&"Nurse"!==this.context.role||this.setState({canDelete:!0}),this.getAllUsers(e)}},{key:"componentWillUnmount",value:function(){}},{key:"getPocketVars",value:function(e){var t=this;console.log("...retriving pocketVars.."),this.context.setUserAlert("...retriving pocketVars..");var a=e.token,n=e.activityId,i={query:'\n          query {getPocketVars(\n            activityId:"'.concat(n,'")}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){if(e.errors)t.setState({userAlert:e.errors[0].message});else{var a=JSON.parse(e.data.getPocketVars);console.log("...retriving pocketVars success..."),t.context.setUserAlert("...retriving pocketVars success..."),t.setState({pocketVars:a})}})).catch((function(e){console.log(e),t.context.setUserAlert(e)}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,l=F()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(l,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.addUserActivity.error&&t.context.setUserAlert(e.data.addUserActivity.error)})).catch((function(e){console.log(e)}))}},{key:"getAllUsers",value:function(e){var t=this;console.log("...retrieving all users..."),this.context.setUserAlert("...retrieving all users..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i=n,s={query:'\n      query {getAllUsers(\n        activityId:"'.concat(n,'" )\n        {_id,title,name,role,username,registrationNumber,employmentDate,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description,highlighted},leave{type,startDate,endDate,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id},inProgress,attended,important,notes,tags,creator{_id}},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var s="...all users retrieval success!...";e.errors&&(s=e.errors[0].message),e.data.error&&(s=e.data.error),t.context.setUserAlert(s),t.setState({isLoading:!1,users:e.data.getAllUsers,activityA:"getAllUsers?activityId:".concat(n,",userId:").concat(i)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus}),i.a.createElement("div",{className:"topContainer"},i.a.createElement(b.a,{className:""},!this.props.visit&&i.a.createElement("h3",null,"...")),i.a.createElement(b.a,{className:""},this.props.visit&&i.a.createElement(N.a,{md:12,className:""},!0===this.state.updateSingleField.state&&i.a.createElement(Rt,{field:this.state.updateSingleField.field,onConfirm:this.submitUpdateSingleFieldForm,onCancel:this.cancelUpdateSingleField}),"all"===this.props.subMenu&&i.a.createElement(b.a,{className:"tabRowAll"},i.a.createElement("ul",{className:"summaryList"},i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.title),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.type),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.subType),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.time),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Patient:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.name),i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:this.props.visit.patient._id}}},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.attendingPhysician)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText underlined"},"Appointment:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.appointment.title),i.a.createElement(d.b,{to:{pathname:"/appointments",state:{appointment:this.props.visit.appointment._id}}},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.visit.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Comorbidities:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"comorbidities")},"Filter")),this.state.startFilter&&"comorbidities"===this.state.selectFilter&&i.a.createElement(Gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(xt,{filter:this.state.filter,comorbidities:this.props.visit.patient.comorbidities,authId:this.context.activityId}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Allergies:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"allergy")},"Filter")),this.state.startFilter&&"allergy"===this.state.selectFilter&&i.a.createElement(_t,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(ft,{filter:this.state.filter,allergies:this.props.visit.patient.allergies,authId:this.context.activityId}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Medication:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"medication")},"Filter")),this.state.startFilter&&"medication"===this.state.selectFilter&&i.a.createElement(Pt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(Nt,{filter:this.state.filter,medication:this.props.visit.patient.medication,authId:this.context.activityId}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit._id))))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Consultants:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"consultant")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.startFilter&&"consultant"===this.state.selectFilter&&i.a.createElement(at,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(sa,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement($,{filter:this.state.filter,authId:this.context.activityId,users:this.props.visit.consultants,visitPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Complaints:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"complaint")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"complaint")},"Add")),!0===this.state.startFilter&&"complaint"===this.state.selectFilter&&i.a.createElement(za,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"complaint"===this.state.adding.field&&i.a.createElement(Za,{onConfirm:this.submitAddComplaintForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ga,{filter:this.state.filter,complaints:this.props.visit.complaints,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComplaint,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Surveys:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"survey")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"survey")},"Add")),!0===this.state.startFilter&&"survey"===this.state.selectFilter&&i.a.createElement(Ya,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"survey"===this.state.adding.field&&i.a.createElement(en,{onConfirm:this.submitAddSurveyForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(va,{filter:this.state.filter,surveys:this.props.visit.surveys,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSurvey,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Systematic Inquiries:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"systematicInquiry")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"systematicInquiry")},"Add")),!0===this.state.startFilter&&"systematicInquiry"===this.state.selectFilter&&i.a.createElement(Ka,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"systematicInquiry"===this.state.adding.field&&i.a.createElement(tn,{onConfirm:this.submitAddSystematicInquiryForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ba,{filter:this.state.filter,systematicInquiry:this.props.visit.systematicInquiry,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSystematicInquiry,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Vitals:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"vitals")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"vitals")},"Add")),!0===this.state.startFilter&&"vitals"===this.state.selectFilter&&i.a.createElement(Ha,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"vitals"===this.state.adding.field&&i.a.createElement(an,{onConfirm:this.submitAddVitalsForm,onCancel:this.cancelAdd}),i.a.createElement(Ca,{filter:this.state.filter,vitals:this.props.visit.vitals,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVitals}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Examinations:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"examination")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"examination")},"Add")),!0===this.state.startFilter&&"examination"===this.state.selectFilter&&i.a.createElement(Qa,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"examination"===this.state.adding.field&&i.a.createElement(nn,{onConfirm:this.submitAddExaminationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ia,{filter:this.state.filter,examination:this.props.visit.examination,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteExamination,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Investigations:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"investigation")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"investigation")},"Add")),!0===this.state.startFilter&&"investigation"===this.state.selectFilter&&i.a.createElement(Wa,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"investigation"===this.state.adding.field&&i.a.createElement(sn,{onConfirm:this.submitAddInvestigationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ka,{filter:this.state.filter,investigation:this.props.visit.investigation,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteInvestigation,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Diagnoses:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"diagnosis")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"diagnosis")},"Add")),!0===this.state.startFilter&&"diagnosis"===this.state.selectFilter&&i.a.createElement(Ja,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"diagnosis"===this.state.adding.field&&i.a.createElement(ln,{onConfirm:this.submitAddDiagnosisForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Fa,{filter:this.state.filter,diagnosis:this.props.visit.diagnosis,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteDiagnosis,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Treatments:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"treatment")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"treatment")},"Add")),!0===this.state.startFilter&&"treatment"===this.state.selectFilter&&i.a.createElement(Xa,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"treatment"===this.state.adding.field&&i.a.createElement(on,{onConfirm:this.submitAddTreatmentForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(_a,{filter:this.state.filter,treatment:this.props.visit.treatment,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTreatment,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Billing:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{className:"searchBtn",variant:"outline-primary",onClick:this.toggleFilter.bind(this,"billing")},"Filter"),i.a.createElement(I.a,{className:"searchBtn",variant:"outline-success",onClick:this.startAdd.bind(this,"billing")},"Add"),i.a.createElement(I.a,{className:"searchBtn",variant:"outline-primary",size:"sm",onClick:this.completeVisit},"Complete Visit")),!0===this.state.startFilter&&"billing"===this.state.selectFilter&&i.a.createElement($a,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"billing"===this.state.adding.field&&i.a.createElement(rn,{onConfirm:this.submitAddBillingForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Va,{filter:this.state.filter,billing:this.props.visit.billing,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteBilling,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,updateBillingPaid:this.updateBillingPaid}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Vigilance:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"vigilance")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"vigilance")},"Add")),!0===this.state.startFilter&&"vigilance"===this.state.selectFilter&&i.a.createElement("h3",null,"Filter vigilance form"),!0===this.state.adding.state&&"vigilance"===this.state.adding.field&&i.a.createElement(cn,{onConfirm:this.submitAddVigilanceForm,onCancel:this.cancelAdd}),i.a.createElement(Ba,{filter:this.state.filter,vigilance:this.props.visit.vigilance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVigilance}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Se,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ge,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Oa,{filter:this.state.filter,images:this.props.visit.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage}))),i.a.createElement("li",{className:"summaryListItem"},i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(ke,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ve,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ma,{filter:this.state.filter,files:this.props.visit.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile}))))),"basic"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Basic Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.title),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"title")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Type:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.type),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"type")},"Edit"),i.a.createElement("p",{className:"listGroupText"},"subType:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.subType),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"subType")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.visit.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement("p",{className:"listGroupText"},"Time:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.time),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-primary",size:"sm",onClick:this.startUpdateSingleField.bind(this,"time")},"Edit")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Patient:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Name:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.title),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.name),i.a.createElement(d.b,{to:{pathname:"/patients",state:{patient:this.props.visit.patient._id}}},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Attending Physician:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.patient.attendingPhysician)),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Appointment:")),i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Title:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit.appointment.title),i.a.createElement("p",{className:"listGroupText"},"Date:"),i.a.createElement("p",{className:"listGroupText bold"},F.a.unix(this.props.visit.appointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD")),i.a.createElement(d.b,{to:{pathname:"/appointments",state:{appointment:this.props.visit.appointment._id}}},i.a.createElement(h.a,{icon:y.g,className:"listIcon"}))))),"allergy"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Allergies:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"allergy")},"Filter")),this.state.startFilter&&"allergy"===this.state.selectFilter&&i.a.createElement(_t,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(ft,{filter:this.state.filter,allergies:this.props.visit.patient.allergies,authId:this.context.activityId})),"medication"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Medication:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"medication")},"Filter")),this.state.startFilter&&"medication"===this.state.selectFilter&&i.a.createElement(Pt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(Nt,{filter:this.state.filter,medication:this.props.visit.patient.medication,authId:this.context.activityId})),"comorbidities"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Comorbidities:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"comorbidities")},"Filter")),this.state.startFilter&&"comorbidities"===this.state.selectFilter&&i.a.createElement(Gt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),i.a.createElement(xt,{filter:this.state.filter,comorbidities:this.props.visit.patient.comorbidities,authId:this.context.activityId})),"admin"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Admin Info:")),i.a.createElement(S.a,{className:"profileBasicListGroup"},i.a.createElement(S.a.Item,null,i.a.createElement("p",{className:"listGroupText"},"Id:"),i.a.createElement("p",{className:"listGroupText bold"},this.props.visit._id)))),"consultant"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Consultants:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"consultant")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"consultant")},"Add")),!0===this.state.startFilter&&"consultant"===this.state.selectFilter&&i.a.createElement(at,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"consultant"===this.state.adding.field&&this.state.users&&i.a.createElement(sa,{onConfirm:this.submitAddUserForm,onCancel:this.cancelAdd,filter:this.state.filter,users:this.state.users}),i.a.createElement($,{filter:this.state.filter,authId:this.context.activityId,users:this.props.visit.consultants,visitPage:!0,canDelete:this.state.canDelete,onDelete:this.deleteConsultant})),"complaint"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Complaints:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"complaint")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"complaint")},"Add")),!0===this.state.startFilter&&"complaint"===this.state.selectFilter&&i.a.createElement(za,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"complaint"===this.state.adding.field&&i.a.createElement(Za,{onConfirm:this.submitAddComplaintForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ga,{filter:this.state.filter,complaints:this.props.visit.complaints,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteComplaint,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"survey"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Surveys:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"survey")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"survey")},"Add")),!0===this.state.startFilter&&"survey"===this.state.selectFilter&&i.a.createElement(Ya,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"survey"===this.state.adding.field&&i.a.createElement(en,{onConfirm:this.submitAddSurveyForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(va,{filter:this.state.filter,surveys:this.props.visit.surveys,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSurvey,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"systematicInquiry"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Systematic Inquiries:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"systematicInquiry")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"systematicInquiry")},"Add")),!0===this.state.startFilter&&"systematicInquiry"===this.state.selectFilter&&i.a.createElement(Ka,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"systematicInquiry"===this.state.adding.field&&i.a.createElement(tn,{onConfirm:this.submitAddSystematicInquiryForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ba,{filter:this.state.filter,systematicInquiry:this.props.visit.systematicInquiry,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteSystematicInquiry,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"vitals"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Vitals:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"vitals")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"vitals")},"Add")),!0===this.state.startFilter&&"vitals"===this.state.selectFilter&&i.a.createElement(Ha,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"vitals"===this.state.adding.field&&i.a.createElement(an,{onConfirm:this.submitAddVitalsForm,onCancel:this.cancelAdd}),i.a.createElement(Ca,{filter:this.state.filter,vitals:this.props.visit.vitals,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVitals})),"examination"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Examinations:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"examination")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"examination")},"Add")),!0===this.state.startFilter&&"examination"===this.state.selectFilter&&i.a.createElement(Qa,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"examination"===this.state.adding.field&&i.a.createElement(nn,{onConfirm:this.submitAddExaminationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Ia,{filter:this.state.filter,examination:this.props.visit.examination,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteExamination,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"investigation"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Investigations:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"investigation")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"investigation")},"Add")),!0===this.state.startFilter&&"investigation"===this.state.selectFilter&&i.a.createElement(Wa,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"investigation"===this.state.adding.field&&i.a.createElement(sn,{onConfirm:this.submitAddInvestigationForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(ka,{filter:this.state.filter,investigation:this.props.visit.investigation,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteInvestigation,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"diagnosis"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Diagnoses:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"diagnosis")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"diagnosis")},"Add")),!0===this.state.startFilter&&"diagnosis"===this.state.selectFilter&&i.a.createElement(Ja,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"diagnosis"===this.state.adding.field&&i.a.createElement(ln,{onConfirm:this.submitAddDiagnosisForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Fa,{filter:this.state.filter,diagnosis:this.props.visit.diagnosis,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteDiagnosis,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"treatment"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Treatments:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"treatment")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"treatment")},"Add")),!0===this.state.startFilter&&"treatment"===this.state.selectFilter&&i.a.createElement(Xa,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"treatment"===this.state.adding.field&&i.a.createElement(on,{onConfirm:this.submitAddTreatmentForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(_a,{filter:this.state.filter,treatment:this.props.visit.treatment,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteTreatment,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment})),"billing"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Billing:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{className:"searchBtn",variant:"outline-primary",onClick:this.toggleFilter.bind(this,"billing")},"Filter"),i.a.createElement(I.a,{className:"searchBtn",variant:"outline-success",onClick:this.startAdd.bind(this,"billing")},"Add"),i.a.createElement(I.a,{className:"searchBtn",variant:"outline-primary",size:"sm",onClick:this.completeVisit},"Complete Visit")),!0===this.state.startFilter&&"billing"===this.state.selectFilter&&i.a.createElement($a,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"billing"===this.state.adding.field&&i.a.createElement(rn,{onConfirm:this.submitAddBillingForm,onCancel:this.cancelAdd}),!0===this.state.addAttachmentForm&&i.a.createElement(Kt,{onCancel:this.cancelAddAttachment,onConfirm:this.addAttachment}),i.a.createElement(Va,{filter:this.state.filter,billing:this.props.visit.billing,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteBilling,onAddAttachment:this.startAddAttachment,deleteAttachment:this.deleteAttachment,updateBillingPaid:this.updateBillingPaid})),"vigilance"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Vigilance:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"vigilance")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"vigilance")},"Add")),!0===this.state.startFilter&&"vigilance"===this.state.selectFilter&&i.a.createElement("h3",null,"Filter vigilance form"),!0===this.state.adding.state&&"vigilance"===this.state.adding.field&&i.a.createElement(cn,{onConfirm:this.submitAddVigilanceForm,onCancel:this.cancelAdd}),i.a.createElement(Ba,{filter:this.state.filter,vigilance:this.props.visit.vigilance,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteVigilance})),"image"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Images:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"image")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"image")},"Add")),!0===this.state.startFilter&&"image"===this.state.selectFilter&&i.a.createElement(Se,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"image"===this.state.adding.field&&i.a.createElement(Ge,{onConfirm:this.submitAddImageForm,onCancel:this.cancelAdd}),i.a.createElement(Oa,{filter:this.state.filter,images:this.props.visit.images,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteImage})),"file"===this.props.subMenu&&i.a.createElement(N.a,{className:"tabCol2"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",{className:""},"Files:")),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"outline-primary",className:"searchBtn",onClick:this.toggleFilter.bind(this,"file")},"Filter"),"Staff"!==this.context.role&&i.a.createElement(I.a,{variant:"outline-success",className:"searchBtn",onClick:this.startAdd.bind(this,"file")},"Add")),!0===this.state.startFilter&&"file"===this.state.selectFilter&&i.a.createElement(ke,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm}),!0===this.state.adding.state&&"file"===this.state.adding.field&&i.a.createElement(Ve,{onConfirm:this.submitAddFileForm,onCancel:this.cancelAdd}),i.a.createElement(Ma,{filter:this.state.filter,files:this.props.visit.files,authId:this.context.activityId,canDelete:this.state.canDelete,onDelete:this.deleteFile}))))))}}]),a}(n.Component);mn.contextType=f;var dn=mn,pn=function(e){return i.a.createElement("div",{className:"searchFormTopDiv"},i.a.createElement(J.a,{onSubmit:e.onConfirm},i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"field",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Field"),i.a.createElement(J.a.Control,{as:"select"},i.a.createElement("option",null,"date"),i.a.createElement("option",null,"time"),i.a.createElement("option",null,"title"),i.a.createElement("option",null,"type"),i.a.createElement("option",null,"subType")))),i.a.createElement(J.a.Row,{className:"formRow"},i.a.createElement(J.a.Group,{as:N.a,controlId:"query",className:"formGroup"},i.a.createElement(J.a.Label,{className:"formLabel"},"Search Query"),i.a.createElement(J.a.Control,{type:"text",placeholder:"YYYY-MM-DD"}))),i.a.createElement(J.a.Row,{className:"formBtnRow"},i.a.createElement(I.a,{variant:"success",type:"submit",className:"filterFormBtn searchBtn"},"Search"),i.a.createElement(I.a,{variant:"danger",className:"filterFormBtn searchBtn",onClick:e.onCancel},"Cancel"))))},un=(a(274),a(609),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activityA:null,role:null,overlay:!1,overlayStatus:"test",isGuest:!0,context:null,activityUser:null,users:null,patients:null,appointments:null,canDelete:!1,visits:null,searchVisits:null,isLoading:!1,seshStore:null,profileLoaded:!1,sideCol:"menuVisit",startFilter:!1,filter:{field:null,key:null,value:null},menuSelected:null,menuSelect:"list",subMenuState:!1,subMenu:"all",adding:{state:null,field:null},showDetails:!1,selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,creatingVisit:!1,newVisit:null,calendarVisits:null,calendarAppointments:null,fromGoLink:null,goLinkId:null,sublistSearch:!1,tabKey:"list",newVisitPatient:!1,otfAppt:!1},e.searchVisits=function(t){t.preventDefault(),console.log("...searching visits..."),e.context.setUserAlert("...searching visits..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=t.target.field.value,l=t.target.query.value,o=!0;"date"===s&&(o=!1),!0===o&&(a={query:'\n      query {getVisitsByFieldRegex(\n        activityId:"'.concat(i,'",\n        field:"').concat(s,'",\n        query:"').concat(l,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}),!1===o&&(a={query:'\n        query {getVisitsByField(\n          activityId:"'.concat(i,'",\n          field:"').concat(s,'",\n          query:"').concat(l,'"\n        )\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...visit search success!...";!0===o&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===o&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===o&&e.setState({isLoading:!1,searchVisits:t.data.getVisitsByFieldRegex,activityA:"getVisitsByFieldRegex?activityId:".concat(i)}),!1===o&&e.setState({isLoading:!1,searchVisits:t.data.getVisitsByField,activityA:"getVisitsByField?activityId:".concat(i)}),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.newVisitPatient=function(t){console.log("...new Visit from patient details..."),e.context.setUserAlert("...creating new appointment..."),e.setState({isLoading:!0,otfAppt:!0});var a=e.context.token,n=e.context.activityId,i=e.props.location.state.newVisit,s=F()().format("YYYY-MM-DD,h:mm a"),l=i.name+"appt"+s,o=s.split(",")[0],r=s.split(",")[1],c={query:'\n      mutation {createAppointment(\n        activityId:"'.concat(n,'",\n        patientId:"').concat(i._id,'",\n        appointmentInput:{\n          title:"').concat(l,'",\n          type:"').concat("new_unreferred",'",\n          subType:"').concat("",'",\n          date:"').concat(o,'",\n          time:"').concat(r,'",\n          location:"').concat("",'",\n          description:"').concat("appointment on-the-fly",'",\n          important:').concat(!1,"\n        })\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id,name},consultants{_id,name},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n    ")};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create appointment success!...";t.errors&&(i=t.errors[0].message),t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,activityA:"createAppointment?activityId:".concat(n,",appointmentId:").concat(t.data.createAppointment._id),creatingVisit:!0,selectedAppointment:t.data.createAppointment,menuSelect:"new"}),e.logUserActivity({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.onStartCreateNewVisit=function(){e.setState({creatingVisit:!0})},e.cancelCreateNewVisit=function(){e.setState({creatingVisit:!1,selectedAppointment:null}),!0===e.state.otfAppt&&(console.log("...cleaning up on the fly appointment..."),e.deleteOtfAppointment())},e.submitCreateNewVisitForm=function(t){t.preventDefault(),console.log("...creating new visit...",e.state.selectedAppointment.patient),e.context.setUserAlert("...creating new visit..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=e.state.selectedAppointment._id,s=e.state.selectedAppointment.patient.name+"visit"+e.state.selectedAppointment.date,l=t.target.type.value;if(0!==l.trim().length){var o=F()().format("YYYY-MM-DD")<F.a.unix(e.state.selectedAppointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),r=F()().format("YYYY-MM-DD")>F.a.unix(e.state.selectedAppointment.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD");if(!0===o)return console.log("...appointment for this visit is in the future...please wait or create a new appointment..."),e.context.setUserAlert("...appointment for this visit is in the future...please wait or create a new appointment..."),void e.setState({isLoading:!1});if(!0===r)return console.log("...appointment for this visit has already gone... please create a new appointment..."),e.context.setUserAlert("...appointment for this visit has already gone... please create a new appointment..."),void e.setState({isLoading:!1});var c={query:'\n      mutation {createVisit(\n        activityId:"'.concat(n,'",\n        appointmentId:"').concat(i,'",\n        visitInput:{\n          title:"').concat(s,'",\n          type:"').concat(l,'",\n          subType:"').concat("",'"\n        })\n        {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var i="...create visit success!...";t.errors&&(i=t.errors[0].message),t.data.error&&(i=t.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,showDetails:!0,creatingVisit:!1,selectedVisit:t.data.createVisit,newVisit:t.data.createVisit,otfAppt:!1,menuSelect:"detail",activityA:"createVisit?activityId:".concat(n,",visitId:").concat(t.data.createVisit._id)}),e.logUserActivity({activityId:n,token:a});var s=JSON.parse(sessionStorage.getItem("logInfo"));e.getAllVisits(s)})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))}else e.context.setUserAlert("...blank required fields!!!...")},e.deleteOtfAppointment=function(){console.log("...deleting otf appointment..."),e.context.setUserAlert("...deleting otf appointment..."),e.setState({isLoading:!0});var t=e.context.token,a=e.context.activityId,n=e.state.selectedAppointment._id,i={query:'\n      mutation {deleteAppointmentById(\n        activityId:"'.concat(a,'",\n        appointmentId:"').concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(n){var i="...delete appointment success!...";n.errors&&(i=n.errors[0].message),n.data.error&&(i=n.data.error),e.context.setUserAlert(i),e.setState({isLoading:!1,activityA:"deleteAppointment?activityId:".concat(a,",visitId:").concat(n.data.deleteAppointmentById._id)}),e.logUserActivity({activityId:a,token:t})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.toggleSideCol=function(){"menu"===e.state.sideCol?e.setState({sideCol:"filter"}):e.setState({sideCol:"menu"})},e.toggleFilter=function(){e.setState({startFilter:!e.state.startFilter})},e.menuSelect=function(t){e.setState({menuSelect:t,tabKey:t}),"detail"===t&&e.state.selectedVisit?e.setState({subMenuState:!0}):e.setState({subMenuState:!1})},e.subMenuSelect=function(t){e.setState({subMenu:t})},e.submitFilterForm=function(t){t.preventDefault();var a=t.target.field.value,n=t.target.key.value,i=t.target.value.value;"true"===i&&(i=!0),"false"===i&&(i=!1),e.setState({filter:{field:a,key:n,value:i}})},e.selectAppointment=function(t){e.setState({selectedAppointment:t})},e.selectCalendarAppointment=function(t){e.setState({selectedAppointment:t.event.extendedProps.props})},e.showDetails=function(t){e.setState({showDetails:!0,selectedVisit:t,overlay:!1,tabKey:"detail",menuSelect:"detail",subMenuState:!0}),e.props.selectVisit(t)},e.startAdd=function(t){e.setState({adding:{state:!0,field:t}})},e.cancelAdd=function(){e.setState({adding:{state:null,field:null}})},e.updateVisit=function(t){console.log("...updating selected visit..."),e.setState({selectedVisit:t}),e.props.selectVisit(t)},e.deleteVisit=function(t){console.log("...deleteing visit..."),e.context.setUserAlert("...deleteing visit..."),e.setState({isLoading:!0});var a=e.context.token,n=e.context.activityId,i=t._id,s={query:'\n      mutation {deleteVisitById(\n        activityId:"'.concat(n,'",\n        visitId:"').concat(i,'"\n      )\n      {_id,date,time,title,type,subType,patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments,highlighted},surveys{title,description,attachments,highlighted},systematicInquiry{title,description,attachments,highlighted},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value},highlighted},examination{general,area,type,measure,value,description,followUp,attachments,highlighted},investigation{type,title,description,attachments,highlighted},diagnosis{type,title,description,attachments,highlighted},treatment{type,title,description,dose,frequency,attachments,highlighted},billing{title,type,description,amount,paid,attachments,notes,highlighted},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}},highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var s="...delete visit success!...";t.errors&&(s=t.errors[0].message),t.data.error&&(s=t.data.error),e.context.setUserAlert(s),e.setState({isLoading:!1,activityA:"deleteVisitById?activityId:".concat(n,",visitId:").concat(i)}),e.logUserActivity({activityId:n,token:a}),e.getAllVisits({activityId:n,token:a})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.parseForCalendar=function(t){console.log("...parsing visits for calendar...");var a=t.map((function(e){return{title:e.title,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,title:e.title,type:e.type,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),time:e.time,subType:e.subType}}}));e.setState({calendarVisits:a})},e.parseForCalendarAppts=function(t){console.log("...parsing appointments for calendar...");var a=t.map((function(e){return{title:e.title,date:F.a.unix(e.date.substr(0,10)).add(1,"days").format("YYYY-MM-DD"),props:{_id:e._id,date:e.date,title:e.title,type:e.type,subType:e.subType,time:e.time,location:e.location,description:e.description,important:e.important}}}));e.setState({calendarAppointments:a})},e.viewCalendarEvent=function(t){console.log("...viewing calendar visit...");var a=e.state.visits.filter((function(e){return e._id===t.event.extendedProps.props._id}))[0];e.setState({overlay:!0,overlayStatus:{type:"calendarVisit",data:a}})},e.dateClick=function(e){console.log("dateClick",e)},e.toggleOverlay=function(){e.setState({overlay:!1})},e.startSublistSearch=function(){e.setState({sublistSearch:!0})},e.cancelSublistSearch=function(){e.setState({sublistSearch:!1}),e.getAllAppointments({activityId:e.context.activityId,token:e.context.token})},e.submitSublistSearchForm=function(t){t.preventDefault(),console.log("...searching appointments..."),e.context.setUserAlert("...searching appointments..."),e.setState({isLoading:!0});var a,n=e.context.token,i=e.context.activityId,s=i,l=t.target.field.value,o=t.target.query.value,r=!0;"date"!==l&&"inProgress"!==l&&"attended"!==l&&"important"!==l&&"important"!==l||(r=!1),!0===r&&(a={query:'\n        query {getAppointmentsByFieldRegex(\n          activityId:"'.concat(i,'",\n          field:"').concat(l,'",\n          query:"').concat(o,'"\n        )\n        {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),!1===r&&(a={query:'\n      query {getAppointmentsByField(\n        activityId:"'.concat(i,'",\n        field:"').concat(l,'",\n        query:"').concat(o,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id},patient{_id},consultants{_id},inProgress,attended,important,notes,tags,reminders{_id},creator{_id}}}\n      ')}),fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){var a="...appointment search success!...";!0===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),!1===r&&(t.errors&&(a=t.errors[0].message),t.data.error&&(a=t.data.error)),e.context.setUserAlert(a),!0===r&&(e.setState({isLoading:!1,appointments:t.data.getAppointmentsByFieldRegex,activityA:"getAppointmentsByFieldRegex?activityId:".concat(i,",userId:").concat(s)}),e.parseForCalendarAppts(t.data.getAppointmentsByFieldRegex)),!1===r&&(e.setState({isLoading:!1,appointments:t.data.getAppointmentsByField,activityA:"getAppointmentsByField?activityId:".concat(i,",userId:").concat(s)}),e.parseForCalendarAppts(t.data.getAppointmentsByField)),e.logUserActivity({activityId:i,token:n})})).catch((function(t){console.log(t),e.context.setUserAlert(t),e.setState({isLoading:!1})}))},e.resetFilter=function(){e.setState({filter:{field:null,key:null,value:null}})},e.clearSearch=function(){e.setState({searchVisits:null})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(console.log("...all visits component mounted..."),sessionStorage.getItem("logInfo")){var e=JSON.parse(sessionStorage.getItem("logInfo"));"Admin"===e.role&&this.setState({canDelete:!0}),this.props.location.state&&this.props.location.state.visit&&this.setState({fromGoLink:!0,goLinkId:this.props.location.state.visit}),this.getAllVisits(e),this.getAllAppointments(e),this.props.selectedVisit&&(console.log("...found existing visit selection... loading..."),this.setState({showDetails:!0,selectedVisit:this.props.selectedVisit}))}}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"getAllVisits",value:function(e){var t=this;console.log("...retrieving all visits..."),this.context.setUserAlert("...retrieving all visits..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllVisits(\n        activityId:"'.concat(n,'"\n      )\n      {_id,date,time,title,type,subType,\n        patient{_id,active,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},allergies{type,title,description,attachments},medication{type,title,description,attachments},comorbidities{type,title,description}},\n        consultants{_id,title,name,role,username,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary}},appointment{_id,title,type,subType,date,time,checkinTime,seenTime,location,description},complaints{title,description,anamnesis,attachments},surveys{title,description,attachments},systematicInquiry{title,description,attachments},vitals{pr,bp1,bp2,rr,temp,sp02,heightUnit,heightValue,weightUnit,weightValue,bmi,urine{type,value}},examination{general,area,type,measure,value,description,followUp,attachments},investigation{type,title,description,attachments},diagnosis{type,title,description,attachments},treatment{type,title,description,dose,frequency,attachments},billing{title,type,description,amount,paid,attachments,notes},vigilance{chronicIllness{diabetes{medication,testing,comment},hbp{medication,testing,comment},dyslipidemia{medication,testing,comment},cad{medication,testing,comment}},lifestyle{weight{medication,testing,comment},diet{medication,testing,comment},smoking{medication,testing,comment},substanceAbuse{medication,testing,comment},exercise{medication,testing,comment},allergies{medication,testing,comment},asthma{medication,testing,comment}},screening{breast{medication,testing,comment},prostate{medication,testing,comment},cervix{medication,testing,comment},colon{medication,testing,comment},dental{medication,testing,comment}},vaccines{influenza{medication,testing,comment},varicella{medication,testing,comment},hpv{medication,testing,comment},mmr{medication,testing,comment},tetanus{medication,testing,comment},pneumovax{medication,testing,comment},other{name,medication,testing,comment}}},images{name,type,path},files{name,type,path}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...visits loaded!...";if(e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),!0===t.state.fromGoLink){var s=e.data.getAllVisits.filter((function(e){return e._id===t.state.goLinkId}))[0];t.setState({showDetails:!0,selectedVisit:s,tabKey:"detail"}),t.context.setUserAlert("...Check the details tab...")}t.context.setUserAlert(i),t.setState({isLoading:!1,visits:e.data.getAllVisits,activityA:"getAllVisits?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a}),t.parseForCalendar(e.data.getAllVisits)})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllAppointments",value:function(e){var t=this;console.log("...retrieving all appointments..."),this.context.setUserAlert("...retrieving all appointments..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllAppointments(\n        activityId:"'.concat(n,'"\n      )\n      {_id,title,type,subType,date,time,checkinTime,seenTime,location,description,visit{_id,date,time,title,type,subType},patient{_id,active,title,name,role,username,registration{date,number},dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},consultants{_id,title,name,role,username,registrationNumber,dob,age,gender,loggedIn,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}},inProgress,attended,important,notes,tags,reminders{_id},creator{_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone,email},addresses{number,street,town,city,parish,country,postalCode,primary}}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...appointments loaded...";e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,appointments:e.data.getAllAppointments,activityA:"getAllAppointments?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a}),t.parseForCalendarAppts(e.data.getAllAppointments),t.props.location.state&&t.props.location.state.newVisit&&(console.log("foo"),t.newVisitPatient({dateClick:!1})),t.props.location.state&&t.props.location.state.newVisitDate&&(console.log("bar"),t.newVisitPatient({dateClick:!0}))})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"getAllPatients",value:function(e){var t=this;console.log("...retrieving all patients..."),this.context.setUserAlert("...retrieving all patients..."),this.setState({isLoading:!0});var a=e.token,n=e.activityId,i={query:'\n      query {getAllPatients(\n        activityId:"'.concat(n,'"\n      )\n      {_id,active,title,name,lastName,role,username,registration{date,number},dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},expiryDate,referral{date,reason,physician{name,email,phone}},attendingPhysician,occupation{role,employer{name,phone,email,address}},insurance{company,policyNumber,description,expiryDate,subscriber{company,description}},nextOfKin{name,relation,contact{email,phone1,phone2},highlighted},allergies{type,title,description,attachments,highlighted},medication{type,title,description,dosage,attachments,highlighted},comorbidities{type,title,description,highlighted},images{name,type,path,highlighted},files{name,type,path,highlighted},notes,tags,appointments{_id,title,type,subType,date,time,checkinTime,seenTime,location,description,inProgress,attended,important,notes,tags},visits{_id,date,time,title,type,subType},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){var i="...patients loaded...";e.errors&&(i=e.errors[0].message),e.data.error&&(i=e.data.error),t.context.setUserAlert(i),t.setState({isLoading:!1,patients:e.data.getAllPatients,activityA:"getAllPatients?activityId:".concat(n)}),t.logUserActivity({activityId:n,token:a})})).catch((function(e){console.log(e),t.context.setUserAlert(e),t.setState({isLoading:!1})}))}},{key:"logUserActivity",value:function(e){var t=this;console.log("...logUserActivity...");var a=e.activityId,n=e.token,i=a,s=this.state.activityA,l=F()().format("YYYY-MM-DD"),o={query:'\n      mutation {addUserActivity(\n        activityId:"'.concat(a,'",userId:"').concat(i,'",\n        userInput:{\n          activityDate:"').concat(l,'",\n          activityRequest:"').concat(s,'"\n        })\n      {_id,title,name,role,username,registrationNumber,dob,age,gender,contact{phone,phone2,email},addresses{number,street,town,city,parish,country,postalCode,primary},loggedIn,clientConnected,verification{verified,type,code},attendance{date,status,description},leave{type,startDate,endDate,description},images{name,type,path},files{name,type,path},notes,appointments{_id},reminders{_id},activity{date,request}}}\n    ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){e.errors&&t.context.setUserAlert(e.errors[0].message),e.data.error&&t.context.setUserAlert(e.data.error)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Be,{state:this.state.sideCol,menuSelect:this.menuSelect,subMenuState:this.state.subMenuState,subMenu:this.state.subMenu,subMenuSelect:this.subMenuSelect,page:"visit",role:this.context.role}),!0===this.state.overlay&&i.a.createElement(_,{status:this.state.overlayStatus,selectCalendarDetails:this.showDetails,toggleOverlay:this.toggleOverlay}),i.a.createElement("div",{className:"topContainer"},i.a.createElement("div",{className:"headTop"},i.a.createElement(b.a,{className:""},i.a.createElement("h1",null,"Visits:",!0===this.state.showDetails&&this.state.selectedVisit&&"detail"===this.state.tabKey&&this.state.selectedVisit.title)),i.a.createElement(b.a,{className:""},this.state.isLoading?i.a.createElement(T.a,{src:U,className:"loadingGif",fluid:!0}):i.a.createElement("p",null,"."))),i.a.createElement(b.a,{className:""},this.state.visits&&i.a.createElement(N.a,{md:12,className:""},!0===this.state.startFilter&&i.a.createElement(N.a,null,i.a.createElement(qt,{onCancel:this.toggleFilter,onConfirm:this.submitFilterForm})),"list"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol tabRowAppt"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(I.a,{variant:"primary",className:"searchBtn",onClick:this.toggleFilter},"Filter"),i.a.createElement(I.a,{variant:"warning",className:"searchBtn",onClick:this.resetFilter},"Reset")),i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},i.a.createElement(Lt,{filter:this.state.filter,visits:this.state.visits,authId:this.context.activityId,canDelete:this.state.canDelete,showDetails:this.showDetails,onDelete:this.deleteVisit})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a,le.a],events:this.state.calendarVisits,eventClick:this.viewCalendarEvent,dateClick:this.dateClick})))),"search"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Search"),i.a.createElement(b.a,{className:""},i.a.createElement(pn,{onConfirm:this.searchVisits,onCancel:this.clearSearch})),i.a.createElement(b.a,null,this.state.searchVisits&&i.a.createElement(I.a,{variant:"primary",onClick:this.toggleFilter,className:"centered_btn"},"Filter")),i.a.createElement(b.a,{className:""},this.state.searchVisits&&i.a.createElement(Lt,{filter:this.state.filter,visits:this.state.searchVisits,authId:this.context.activityId,showDetails:this.showDetails})))),"detail"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol tabColDetail"},!1===this.state.showDetails&&!this.state.selectedVisit&&i.a.createElement("h3",null,"Select a Visit to see details"),!0===this.state.showDetails&&this.state.selectedVisit&&i.a.createElement(dn,{visit:this.state.selectedVisit,updateVisit:this.updateVisit,subMenu:this.state.subMenu})),"new"===this.state.menuSelect&&i.a.createElement(N.a,{className:"tabCol"},!1===this.state.creatingVisit&&i.a.createElement(I.a,{variant:"secondary",className:"filterFormBtn",onClick:this.onStartCreateNewVisit},"Create New"),!0===this.state.creatingVisit&&this.state.appointments&&!this.state.selectedAppointment&&i.a.createElement(N.a,{className:""},i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement("h3",null,"Choose an Appointment"),i.a.createElement(I.a,{variant:"secondary",className:"patientSublistSearchBtn",onClick:this.startSublistSearch},"Search")),i.a.createElement(b.a,{className:""},!0===this.state.sublistSearch&&i.a.createElement(ra,{onCancel:this.cancelSublistSearch,onConfirm:this.submitSublistSearchForm})),i.a.createElement(N.a,{className:"subTabCol"},i.a.createElement(te.a,{defaultActiveKey:"2",id:"uncontrolled-tab-example"},i.a.createElement(ae.a,{eventKey:"1",title:"list"},i.a.createElement(j,{filter:this.state.filter,appointments:this.state.appointments,authId:this.context.activityId,onSelect:this.selectAppointment,visitPage:!0})),i.a.createElement(ae.a,{eventKey:"2",title:"calendar",className:"calendarTab"},i.a.createElement("h3",null,"Calendar"),i.a.createElement(ne.a,{initialView:"dayGridMonth",plugins:[se.a,ie.a],events:this.state.calendarAppointments,eventClick:this.selectCalendarAppointment,dateClick:this.dateClick}))))),!0===this.state.creatingVisit&&this.state.selectedAppointment&&i.a.createElement(b.a,null,i.a.createElement(da,{onConfirm:this.submitCreateNewVisitForm,onCancel:this.cancelCreateNewVisit,appointment:this.state.selectedAppointment})),this.state.newVisit&&i.a.createElement(b.a,null,i.a.createElement("h3",null,"Review New Visit ",this.state.newVisit._id)))))))}}]),a}(n.Component));un.contextType=f;var gn=un,hn=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={token:null,activityId:null,role:null,context:n.context,sessionStorageAuth:JSON.parse(sessionStorage.getItem("logInfo")),sessionCookiePresent:!1,passwordResetState:"incomplete",passwordResetMessage:"...",userAlert:null,selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null},n.login=function(e,t,a,i){console.log("...context login..."),n.setState({token:e,activityId:t,role:a,sessionStorageAuth:{token:e,activityId:t,role:a,tokenExpiration:i}}),n.sessionStorageAuth={token:e,activityId:t,role:a,tokenExpiration:i},n.context.token=e,n.context.activityId=t,n.context.role=a,n.userOnline()},n.logout=function(){n.logout2()},n.sendSocketAdminMessage=function(e){n.socket.emit("admin_msg",{msg:e})},n.sendSocketNotification=function(e){var t=e.userId;n.socket.emit("send_notification",{room:"msg_"+t,data:e.data})},n.userOnline=function(){console.log("...domesticating socket client..."),n.socket.emit("notification_subscribe",{user:n.context.activityId,room:"msg_"+n.context.activityId}),"Admin"===n.context.role&&n.socket.emit("admin_subscribe")},n.passwordReset=function(e){e.preventDefault(),console.log("...reset password submission...");var t=e.target.formGridParams.value.split("@"),a=t[1],i=t[0],s=e.target.formGridPassword.value,l={query:'\n          mutation {resetUserPassword(\n            userId:"'.concat(i,'",\n            verification:"').concat(a,'",\n            userInput:{\n              password:"').concat(s,'"\n            })\n            {_id,password,verification{verified}}}\n        ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){console.log("passwordReset",e),e.errors?n.setState({passwordResetState:"error",passwordResetMessage:e.errors[0].message+"..if not, try making a new reset request.."}):n.setState({passwordResetState:"complete"})})).catch((function(e){console.log(e),n.setState({passwordResetState:"error",passwordResetMessage:e})}))},n.cancelPasswordReset=function(){n.setState({passwordResetState:"cancelled"})},n.setUserAlert=function(e){"Unauthenticated!"===e&&(n.setState({userAlert:"...token expired! Logging you out..."}),n.logout2()),n.setState({userAlert:e})},n.selectUser=function(e){console.log("...updating top-level selected user..."),n.setState({selectedUser:e})},n.selectPatient=function(e){console.log("...updating top-level selected patient..."),n.setState({selectedPatient:e})},n.selectAppointment=function(e){console.log("...updating top-level selected appointment..."),n.setState({selectedAppointment:e})},n.selectVisit=function(e){console.log("...updating top-level selected visit..."),n.setState({selectedVisit:e})},n.sessionStorageAuth=JSON.parse(sessionStorage.getItem("logInfo")),n.socket=A()("http://localhost:9099"),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(console.log("1:",this.socket),console.log("...app component mounted..."),sessionStorage.getItem("logInfo")&&null===this.state.token){console.log("...sessionStorageFound...");var t=JSON.parse(sessionStorage.getItem("logInfo"));this.login(t.token,t.activityId,t.role,t.tokenExpiration)}this.sessionStorageAuth||console.log("...noSessionStorageFound..."),this.socket.emit("unauthorizedClientConnect"),console.log("socket listening...."),this.socket.on("admin_msg",(function(e){console.log("...receiving admin msg client...",e),n(e)})),this.socket.on("receive_notification",(function(e){console.log("...receiving notification client...",e),a(e)}));var a=function(t){e.setState({userAlert:t.msg})},n=function(t){e.setState({userAlert:t.msg.msg})}}},{key:"sendSocketMessage",value:function(e){var t=this,a=e;console.log("sending socket message  ","message",a,"this.socket",this.socket),this.setState({userAlert:"sending socket message  message"+a+"this.socket"+this.socket});var n=null;if(null===this.context.receiver||void 0===this.context.receiver)return console.log("select someone to msg 1st..."),void this.setState({userAlert:"select someone to msg 1st..."});n=this.context.receiver._id,this.socket.emit("send message",{room:"msg"+n,message:a}),this.socket.on("MESSAGE_SENT",(function(e){i(e)}));var i=function(e){t.setState({userAlert:e.msg})}}},{key:"componentWillUnmount",value:function(){console.log("...app component un-mounting...")}},{key:"logout2",value:function(){var e=this;console.log("...logging you out...");var t=this.context.token,a=this.context.activityId,n={query:'\n        query{logout(\n          activityId:"'.concat(a,'")\n        {_id,loggedIn}}\n      ')};fetch("http://ec2-3-129-19-78.us-east-2.compute.amazonaws.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(t){e.setState({token:null,activityId:null,role:null,sessionCookiePresent:null,sessionStorageAuth:null}),e.sessionStorageAuth=null,sessionStorage.clear(),e.context={token:null,activityId:null,activityA:null,activityUser:null,role:null,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,sender:null,receiver:null,userAlert:"...",file:null,fancyDate:null,login:e.login,logout:e.logout,setUserAlert:e.setUserAlert,userOnline:e.userOnline},e.setState({userAlert:"...logout success..."})})).catch((function(t){e.setState({userAlert:t})}))}},{key:"render",value:function(){var e=this;return i.a.createElement(d.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(f.Provider,{value:{token:this.state.token,activityId:this.state.activityId,activityA:null,activityUser:null,role:this.state.role,userId:null,user:{},users:[],selectedUser:null,selectedPatient:null,selectedAppointment:null,selectedVisit:null,sender:null,receiver:null,userAlert:"...",file:null,fancyDate:null,login:this.login,logout:this.logout,setUserAlert:this.setUserAlert,userOnline:this.userOnline}},i.a.createElement(E,{role:this.state.role}),i.a.createElement(v,{authId:this.context.activityId,alert:this.state.userAlert}),i.a.createElement("main",{className:"main-content"},i.a.createElement(p.d,null,this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"/login",to:"/home",exact:!0}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/home",render:function(e){return i.a.createElement(ee,Object.assign({},e,{title:"home"}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/profile",render:function(t){return i.a.createElement(Oe,Object.assign({},t,{title:"profile",sendSocketAdminMessage:e.sendSocketAdminMessage,sendSocketNotification:e.sendSocketNotification}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/staff",render:function(t){return i.a.createElement(it,Object.assign({},t,{title:"staff",selectedUser:e.state.selectedUser,selectUser:e.selectUser,sendSocketAdminMessage:e.sendSocketAdminMessage,sendSocketNotification:e.sendSocketNotification}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/patients",render:function(t){return i.a.createElement(Xt,Object.assign({},t,{title:"patients",selectedPatient:e.state.selectedPatient,selectPatient:e.selectPatient}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/appointments",render:function(t){return i.a.createElement(ma,Object.assign({},t,{title:"appointments",selectedAppointment:e.state.selectedAppointment,selectAppointment:e.selectAppointment}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/visits",render:function(t){return i.a.createElement(gn,Object.assign({},t,{title:"visits",selectedVisit:e.state.selectedVisit,selectVisit:e.selectVisit}))}}),this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"/",to:"/home",exact:!0}),this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"*",to:"/home",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/landing",render:function(e){return i.a.createElement(P,Object.assign({},e,{title:"landing"}))}}),!this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/login",render:function(e){return i.a.createElement(Ke,Object.assign({},e,{title:"login"}))}}),!this.state.sessionStorageAuth&&i.a.createElement(p.b,{path:"/signup",render:function(t){return i.a.createElement(Qe,Object.assign({},t,{title:"signup",setUserAlert:e.setUserAlert}))}}),i.a.createElement(p.b,{path:"/passwordReset/:params",render:function(t){return i.a.createElement($e,Object.assign({},t,{passwordReset:e.passwordReset,cancelPasswordReset:e.cancelPasswordReset,resetState:e.state.passwordResetState,message:e.state.passwordResetMessage}))}}),!this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"/home",to:"/landing",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"/",to:"/landing",exact:!0}),!this.state.sessionStorageAuth&&i.a.createElement(p.a,{from:"*",to:"/landing",exact:!0}))))))}}]),a}(n.Component);hn.contextType=f;var yn=hn;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(yn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},82:function(e,t,a){},92:function(e,t,a){}},[[610,1,2]]]);
//# sourceMappingURL=main.1d78bdaf.chunk.js.map